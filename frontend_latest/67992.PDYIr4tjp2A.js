/*! For license information please see 67992.PDYIr4tjp2A.js.LICENSE.txt */
export const id=67992;export const ids=[67992];export const modules={49724:(t,e,i)=>{var s=i(79192),a=i(29818),n=i(37136),o=i(18881);let r=class extends n.M{};r.styles=[o.R],r=(0,s.__decorate)([(0,a.EM)("mwc-formfield")],r)},63516:(t,e,i)=>{i.d(e,{s:()=>s});const s=t=>!(!t.detail.selected||"property"!==t.detail.source)&&(t.currentTarget.selected=!1,!0)},14511:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.d(e,{n:()=>g});var a=i(36312),n=(i(89655),i(24545),i(51855),i(82130),i(31743),i(22328),i(4959),i(62435),i(253),i(54846),i(16891),i(50289)),o=i(29818),r=i(94100),d=i(46999),h=i(33922),l=i(34897),c=i(57636),u=i(4826),_=(i(90701),i(56136)),y=t([c]);c=(y.then?(await y)():y)[0];const g={mean:"mean",min:"min",max:"max",sum:"sum",state:"sum",change:"sum"};(0,a.A)([(0,o.EM)("statistics-chart")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"statisticsData",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"metadata",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"names",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"unit",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"endTime",value:void 0},{kind:"field",decorators:[(0,o.MZ)({type:Array})],key:"statTypes",value:()=>["sum","min","mean","max"]},{kind:"field",decorators:[(0,o.MZ)()],key:"chartType",value:()=>"line"},{kind:"field",decorators:[(0,o.MZ)({type:Boolean})],key:"hideLegend",value:()=>!1},{kind:"field",decorators:[(0,o.MZ)({type:Boolean})],key:"logarithmicScale",value:()=>!1},{kind:"field",decorators:[(0,o.MZ)({type:Boolean})],key:"isLoadingData",value:()=>!1},{kind:"field",decorators:[(0,o.MZ)({type:Boolean})],key:"clickForMoreInfo",value:()=>!0},{kind:"field",decorators:[(0,o.MZ)()],key:"period",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_chartData",value:()=>({datasets:[]})},{kind:"field",decorators:[(0,o.wk)()],key:"_chartDatasetExtra",value:()=>[]},{kind:"field",decorators:[(0,o.wk)()],key:"_statisticIds",value:()=>[]},{kind:"field",decorators:[(0,o.wk)()],key:"_chartOptions",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_hiddenStats",value:()=>new Set},{kind:"field",decorators:[(0,o.P)("ha-chart-base")],key:"_chart",value:void 0},{kind:"field",key:"_computedStyle",value:void 0},{kind:"field",key:"resize",value(){return t=>{this._chart?.resize(t)}}},{kind:"method",key:"shouldUpdate",value:function(t){return t.size>1||!t.has("hass")}},{kind:"method",key:"willUpdate",value:function(t){t.has("legendMode")&&this._hiddenStats.clear(),(!this.hasUpdated||t.has("unit")||t.has("period")||t.has("chartType")||t.has("logarithmicScale")||t.has("hideLegend"))&&this._createOptions(),(t.has("statisticsData")||t.has("statTypes")||t.has("chartType")||t.has("hideLegend")||t.has("_hiddenStats"))&&this._generateData()}},{kind:"method",key:"firstUpdated",value:function(){this._computedStyle=getComputedStyle(this)}},{kind:"method",key:"render",value:function(){return(0,h.x)(this.hass,"history")?this.isLoadingData&&!this.statisticsData?n.qy`<div class="info"> ${this.hass.localize("ui.components.statistics_charts.loading_statistics")} </div>`:this.statisticsData&&Object.keys(this.statisticsData).length?n.qy` <ha-chart-base externalHidden .hass="${this.hass}" .data="${this._chartData}" .extraData="${this._chartDatasetExtra}" .options="${this._chartOptions}" .chartType="${this.chartType}" @dataset-hidden="${this._datasetHidden}" @dataset-unhidden="${this._datasetUnhidden}"></ha-chart-base> `:n.qy`<div class="info"> ${this.hass.localize("ui.components.statistics_charts.no_statistics_found")} </div>`:n.qy`<div class="info"> ${this.hass.localize("ui.components.history_charts.history_disabled")} </div>`}},{kind:"method",key:"_datasetHidden",value:function(t){t.stopPropagation(),this._hiddenStats.add(this._statisticIds[t.detail.index]),this.requestUpdate("_hiddenStats")}},{kind:"method",key:"_datasetUnhidden",value:function(t){t.stopPropagation(),this._hiddenStats.delete(this._statisticIds[t.detail.index]),this.requestUpdate("_hiddenStats")}},{kind:"method",key:"_createOptions",value:function(t){this._chartOptions={parsing:!1,animation:!1,interaction:{mode:"nearest",axis:"x"},scales:{x:{type:"time",adapters:{date:{locale:this.hass.locale,config:this.hass.config}},ticks:{source:"bar"===this.chartType?"data":void 0,maxRotation:0,sampleSize:5,autoSkipPadding:20,major:{enabled:!0},font:t=>t.tick&&t.tick.major?{weight:"bold"}:{}},time:{tooltipFormat:"datetime",unit:"bar"===this.chartType&&this.period&&["hour","day","week","month"].includes(this.period)?this.period:void 0}},y:{beginAtZero:"bar"===this.chartType,ticks:{maxTicksLimit:7},title:{display:t||this.unit,text:t||this.unit},type:this.logarithmicScale?"logarithmic":"linear"}},plugins:{tooltip:{callbacks:{label:t=>`${t.dataset.label}: ${(0,c.ZV)(t.parsed.y,this.hass.locale,(0,c.ZQ)(void 0,this.hass.entities[this._statisticIds[t.datasetIndex]]))} ${t.dataset.unit||""}`}},filler:{propagate:!0},legend:{display:!this.hideLegend,labels:{usePointStyle:!0}}},elements:{line:{tension:.4,cubicInterpolationMode:"monotone",borderWidth:1.5},bar:{borderWidth:1.5,borderRadius:4},point:{hitRadius:50}},locale:(0,c.Yf)(this.hass.locale),onClick:t=>{if(!this.clickForMoreInfo||(0,_.a)(t))return;const e=t.chart,i=e.getElementsAtEventForMode(t,"nearest",{intersect:!0},!0);if(i.length){const t=i[0],s=this._statisticIds[t.datasetIndex];(0,u.OQ)(s)||((0,l.r)(this,"hass-more-info",{entityId:s}),e.canvas.dispatchEvent(new Event("mouseout")))}}}}},{kind:"field",key:"_getStatisticsMetaData",value(){return(0,r.A)((async t=>{const e=await(0,u.Wr)(this.hass,t),i={};return e.forEach((t=>{i[t.statistic_id]=t})),i}))}},{kind:"method",key:"_generateData",value:async function(){if(!this.statisticsData)return;const t=this.metadata||await this._getStatisticsMetaData(Object.keys(this.statisticsData));let e=0;const i=Object.entries(this.statisticsData),s=[],a=[],n=[];let o,r;if(0===i.length)return;o=this.endTime||new Date(Math.max(...i.map((([t,e])=>new Date(e[e.length-1].start).getTime())))),o>new Date&&(o=new Date);const h=this.names||{};i.forEach((([i,o])=>{const l=t?.[i];let c=h[i];void 0===c&&(c=(0,u.$O)(this.hass,i,l)),this.unit||(void 0===r?r=(0,u.JE)(this.hass,i,l):null!==r&&r!==(0,u.JE)(this.hass,i,l)&&(r=null));let _,y=null;const g=[],v=[],m=(t,e,i)=>{i&&(t>e||(g.forEach(((e,s)=>{"line"===this.chartType&&_&&y&&_.getTime()!==t.getTime()&&(e.data.push({x:_.getTime(),y:y[s]}),e.data.push({x:_.getTime(),y:null})),e.data.push({x:t.getTime(),y:i[s]})})),y=i,_=e))},p=(0,d.fI)(e,this._computedStyle||getComputedStyle(this));e++;const f=[],k=this.statTypes.includes("mean")&&(0,u.iY)(o,"mean"),b=k||this.statTypes.includes("min")&&(0,u.iY)(o,"min")&&this.statTypes.includes("max")&&(0,u.iY)(o,"max"),w=b?[...this.statTypes].sort(((t,e)=>"min"===t||"max"===e?-1:"max"===t||"min"===e?1:0)):this.statTypes;let $=!1;w.forEach((t=>{if((0,u.iY)(o,t)){const e=b&&("min"===t||"max"===t);if(!this.hideLegend){const e=k?"mean"===t:!1===$;v.push({legend_label:c,show_legend:e}),$=$||e}f.push(t),g.push({label:c?`${c} (${this.hass.localize(`ui.components.statistics_charts.statistic_types.${t}`)})\n            `:this.hass.localize(`ui.components.statistics_charts.statistic_types.${t}`),fill:!!b&&("min"===t&&k?"+1":"max"===t&&"-1"),borderColor:e&&k?p+(this.hideLegend?"00":"7F"):p,backgroundColor:e?p+"3F":p+"7F",pointRadius:0,hidden:!this.hideLegend&&this._hiddenStats.has(i),data:[],unit:l?.unit_of_measurement,band:e}),n.push(i)}}));let x=null,C=null;o.forEach((t=>{const e=new Date(t.start);if(x===e)return;x=e;const i=[];f.forEach((e=>{let s;"sum"===e?null==C?(s=0,C=t.sum):s=(t.sum||0)-C:s=t[e],i.push(s??null)})),m(e,new Date(t.end),i)})),Array.prototype.push.apply(s,g),Array.prototype.push.apply(a,v)})),r&&this._createOptions(r),this._chartData={datasets:s},this._chartDatasetExtra=a,this._statisticIds=n}},{kind:"get",static:!0,key:"styles",value:function(){return n.AH`:host{display:block;min-height:60px}.info{text-align:center;line-height:60px;color:var(--secondary-text-color)}`}}]}}),n.WF);s()}catch(t){s(t)}}))},98041:(t,e,i)=>{i.d(e,{Al:()=>r,KY:()=>o,PN:()=>l,RM:()=>m,dG:()=>u,jm:()=>c,m7:()=>f,sR:()=>_,t1:()=>h,t2:()=>g,x:()=>p,yu:()=>y});var s=i(84280),a=i(18409),n=i(46092);const o=["bluetooth","dhcp","discovery","hardware","hassio","homekit","integration_discovery","mqtt","ssdp","unignore","usb","zeroconf"],r=["reauth"],d={"HA-Frontend-Base":`${location.protocol}//${location.host}`},h=(t,e,i)=>t.callApi("POST","config/config_entries/flow",{handler:e,show_advanced_options:Boolean(t.userData?.showAdvanced),entry_id:i},d),l=(t,e)=>t.callApi("GET",`config/config_entries/flow/${e}`,void 0,d),c=(t,e,i)=>t.callApi("POST",`config/config_entries/flow/${e}`,i,d),u=(t,e,i)=>t.callWS({type:"config_entries/ignore_flow",flow_id:e,title:i}),_=(t,e)=>t.callApi("DELETE",`config/config_entries/flow/${e}`),y=(t,e)=>t.callApi("GET","config/config_entries/flow_handlers"+(e?`?type=${e}`:"")),g=t=>t.sendMessagePromise({type:"config_entries/flow/progress"}),v=(t,e)=>t.subscribeEvents((0,a.s)((()=>g(t).then((t=>e.setState(t,!0)))),500,!0),"config_entry_discovered"),m=t=>(0,s.X)(t,"_configFlowProgress",g,v),p=(t,e)=>m(t.connection).subscribe(e),f=(t,e)=>e.context.title_placeholders&&0!==Object.keys(e.context.title_placeholders).length?t(`component.${e.handler}.config.flow_title`,e.context.title_placeholders)||("name"in e.context.title_placeholders?e.context.title_placeholders.name:(0,n.p$)(t,e.handler)):(0,n.p$)(t,e.handler)},42777:(t,e,i)=>{i.d(e,{Y:()=>s});const s=(t,e)=>t.callWS({type:"number/device_class_convertible_units",device_class:e})},92594:(t,e,i)=>{i.d(e,{C:()=>n});var s=i(34897);const a=()=>i.e(60425).then(i.bind(i,60425)),n=(t,e)=>{(0,s.r)(t,"show-child-view",{viewTag:"ha-more-info-view-voice-assistants",viewImport:a,viewTitle:e,viewParams:{}})}},83147:(t,e,i)=>{i.d(e,{CT:()=>h,M1:()=>y,aK:()=>d,gs:()=>c,oF:()=>u,pC:()=>r,sw:()=>v,t0:()=>g});var s=i(33922),a=i(213),n=i(31605),o=i(78573);const r=["camera","configurator"],d=["scene","automation"],h=["script"],l=["alarm_control_panel","cover","climate","fan","humidifier","input_boolean","light","lock","siren","script","switch","valve","water_heater"],c=["alarm_control_panel","automation","camera","climate","configurator","counter","cover","date","datetime","fan","group","humidifier","image","input_boolean","input_datetime","lawn_mower","light","lock","media_player","person","remote","script","scene","siren","sun","switch","time","timer","update","vacuum","valve","water_heater","weather"],u=["input_number","input_select","input_text","number","scene","select","text","update","event"],_=["camera","configurator"],y=(t,e)=>(0,s.x)(t,"history")&&!_.includes((0,a.m)(e)),g=(t,e)=>{if(!(0,s.x)(t,"logbook"))return!1;const i=t.states[e];if(!i||i.attributes.unit_of_measurement)return!1;const n=(0,a.m)(e);return!o.cj.includes(n)&&!_.includes(n)},v=t=>{const e=(0,a.m)(t.entity_id);if("group"===e){const e=(0,n.z)(t);return null!=e&&"group"!==e&&l.includes(e)}return l.includes(e)}},16351:(t,e,i)=>{i.a(t,(async(t,e)=>{try{var s=i(36312),a=i(50289),n=i(29818),o=i(30233),r=t([o]);o=(r.then?(await r)():r)[0];(0,s.A)([(0,n.EM)("more-info-default")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"stateObj",value:void 0},{kind:"method",key:"render",value:function(){return this.hass&&this.stateObj?a.qy`<ha-attributes .hass="${this.hass}" .stateObj="${this.stateObj}"></ha-attributes>`:a.s6}}]}}),a.WF);e()}catch(t){e(t)}}))},28581:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.r(e),i.d(e,{MoreInfoDialog:()=>S});var a=i(36312),n=i(68689),o=i(50289),r=i(29818),d=i(73965),h=i(85920),l=i(34897),c=i(79051),u=i(213),_=i(19244),y=i(63516),g=i(16312),v=(i(26790),i(29180),i(10900),i(4169),i(40462),i(13830),i(516),i(54108)),m=(i(48750),i(67240)),p=i(55321),f=i(64730),k=i(83147),b=i(16351),w=i(78071),$=i(84345),x=i(67984),C=i(67452),M=t([f,b,w,$,x,C]);[f,b,w,$,x,C]=M.then?(await M)():M;const I="M9 17H7V10H9V17M13 17H11V7H13V17M17 17H15V13H17V17M19 19H5V5H19V19.1M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3Z",E="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",A="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",D="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z",z="info";let S=(0,a.A)([(0,r.EM)("ha-more-info-dialog")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.MZ)({type:Boolean,reflect:!0})],key:"large",value:()=>!1},{kind:"field",decorators:[(0,r.wk)()],key:"_entityId",value:void 0},{kind:"field",decorators:[(0,r.wk)()],key:"_currView",value:()=>z},{kind:"field",decorators:[(0,r.wk)()],key:"_initialView",value:()=>z},{kind:"field",decorators:[(0,r.wk)()],key:"_childView",value:void 0},{kind:"field",decorators:[(0,r.wk)()],key:"_entry",value:void 0},{kind:"field",decorators:[(0,r.wk)()],key:"_infoEditMode",value:()=>!1},{kind:"field",decorators:[(0,r.P)("ha-more-info-info, ha-more-info-history-and-logbook")],key:"_history",value:void 0},{kind:"method",key:"showDialog",value:function(t){this._entityId=t.entityId,this._entityId?(this._currView=t.view||z,this._initialView=t.view||z,this._childView=void 0,this.large=!1,this._loadEntityRegistryEntry()):this.closeDialog()}},{kind:"method",key:"_loadEntityRegistryEntry",value:async function(){if(this._entityId)try{this._entry=await(0,v.v)(this.hass,this._entityId)}catch(t){this._entry=null}}},{kind:"method",key:"closeDialog",value:function(){this._entityId=void 0,this._entry=void 0,this._childView=void 0,this._infoEditMode=!1,this._initialView=z,(0,l.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"shouldShowEditIcon",value:function(t,e){return!1}},{kind:"method",key:"shouldShowHistory",value:function(t){return k.gs.includes(t)&&((0,k.M1)(this.hass,this._entityId)||(0,k.t0)(this.hass,this._entityId))}},{kind:"method",key:"_getDeviceId",value:function(){const t=this.hass.entities[this._entityId];return t?.device_id??null}},{kind:"method",key:"setView",value:function(t){history.replaceState({...history.state,dialogParams:{...history.state?.dialogParams,view:t}},""),this._currView=t}},{kind:"method",key:"_goBack",value:function(){this._childView?this._childView=void 0:this.setView(this._initialView)}},{kind:"method",key:"_resetInitialView",value:function(){this._initialView=z,this.setView(z)}},{kind:"method",key:"_goToHistory",value:function(){this.setView("history")}},{kind:"method",key:"_goToSettings",value:function(){this.setView("settings")}},{kind:"method",key:"_showChildView",value:function(t){const e=t.detail;e.viewImport&&e.viewImport(),this._childView=e}},{kind:"method",key:"_goToDevice",value:function(t){if(!(0,y.s)(t))return;const e=this._getDeviceId();e&&((0,g.o)(`/config/devices/device/${e}`),this.closeDialog())}},{kind:"method",key:"_goToEdit",value:function(t){if(!(0,y.s)(t))return;const e=this.hass.states[this._entityId],i=(0,u.m)(this._entityId);let s=e.entity_id;if((k.aK.includes(i)||"person"===i)&&(s=e.attributes.id),k.CT.includes(i)){if(!this._entry)return;s=this._entry.unique_id}(0,g.o)(`/config/${i}/edit/${s}`),this.closeDialog()}},{kind:"method",key:"_toggleInfoEditMode",value:function(t){(0,y.s)(t)&&(this._infoEditMode=!this._infoEditMode)}},{kind:"method",key:"_handleToggleInfoEditModeEvent",value:function(t){this._infoEditMode=t.detail}},{kind:"method",key:"_goToRelated",value:function(t){(0,y.s)(t)&&this.setView("related")}},{kind:"method",key:"render",value:function(){if(!this._entityId)return o.s6;const t=this._entityId,e=this.hass.states[t],i=(0,u.m)(t),s=e&&(0,_.u)(e)||t,a=(this.hass.user.is_admin,this._getDeviceId(),this._childView?.viewTitle??s),n=this._currView===z&&!this._childView,r=this._initialView!==z&&!this._childView,l=n||r;return o.qy` <ha-dialog open @closed="${this.closeDialog}" @opened="${this._handleOpened}" .heading="${a}" hideActions flexContent> <ha-dialog-header slot="heading"> ${l?o.qy` <ha-icon-button slot="navigationIcon" dialogAction="cancel" .label="${this.hass.localize("ui.dialogs.more_info_control.dismiss")}" .path="${E}"></ha-icon-button> `:o.qy` <ha-icon-button-prev slot="navigationIcon" @click="${this._goBack}" .label="${this.hass.localize("ui.dialogs.more_info_control.back_to_info")}"></ha-icon-button-prev> `} <span slot="title" .title="${a}" @click="${this._enlarge}"> ${a} </span> ${n?o.qy` ${this.shouldShowHistory(i)?o.qy` <ha-icon-button slot="actionItems" .label="${this.hass.localize("ui.dialogs.more_info_control.history")}" .path="${I}" @click="${this._goToHistory}"></ha-icon-button> `:o.s6} ${o.s6} `:r?o.qy` <ha-button-menu corner="BOTTOM_END" menuCorner="END" slot="actionItems" @closed="${c.d}" fixed> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.common.menu")}" .path="${A}"></ha-icon-button> <ha-list-item graphic="icon" @request-selected="${this._resetInitialView}"> ${this.hass.localize("ui.dialogs.more_info_control.info")} <ha-svg-icon slot="graphic" .path="${D}"></ha-svg-icon> </ha-list-item> </ha-button-menu> `:o.s6} </ha-dialog-header> <div class="content" tabindex="-1" dialogInitialFocus @show-child-view="${this._showChildView}" @entity-entry-updated="${this._entryUpdated}" @toggle-edit-mode="${this._handleToggleInfoEditModeEvent}"> ${(0,d.P)(this._childView?o.qy` <div class="child-view"> ${(0,h._)(this._childView.viewTag,{hass:this.hass,entry:this._entry,params:this._childView.viewParams})} </div> `:"info"===this._currView?o.qy` <ha-more-info-info dialogInitialFocus .hass="${this.hass}" .entityId="${this._entityId}" .entry="${this._entry}" .editMode="${this._infoEditMode}"></ha-more-info-info> `:"history"===this._currView?o.qy` <ha-more-info-history-and-logbook .hass="${this.hass}" .entityId="${this._entityId}"></ha-more-info-history-and-logbook> `:"settings"===this._currView?o.qy` <ha-more-info-settings .hass="${this.hass}" .entityId="${this._entityId}" .entry="${this._entry}"></ha-more-info-settings> `:"related"===this._currView?o.qy` <ha-related-items .hass="${this.hass}" .itemId="${t}" .itemType="${m.o.has(i)?i:"entity"}"></ha-related-items> `:o.s6)} </div> </ha-dialog> `}},{kind:"method",key:"firstUpdated",value:function(t){(0,n.A)(i,"firstUpdated",this,3)([t]),this.addEventListener("close-dialog",(()=>this.closeDialog()))}},{kind:"method",key:"updated",value:function(t){(0,n.A)(i,"updated",this,3)([t]),t.has("_currView")&&(this._childView=void 0,this._infoEditMode=!1)}},{kind:"method",key:"_entryUpdated",value:function(t){this._entry=t.detail}},{kind:"method",key:"_enlarge",value:function(){this.large=!this.large}},{kind:"method",key:"_handleOpened",value:function(){this._history?.resize({aspectRatio:2})}},{kind:"get",static:!0,key:"styles",value:function(){return[p.nA,o.AH`ha-dialog{--vertical-align-dialog:flex-start;--dialog-surface-margin-top:40px;--dialog-surface-position:static;--dialog-content-position:static;--dialog-content-padding:0;--chart-base-position:static}.content{display:flex;flex-direction:column;outline:0;flex:1}.child-view{display:flex;flex-direction:column;flex:1}ha-more-info-history-and-logbook{padding:8px 24px 24px 24px;display:block}@media all and (max-width:450px),all and (max-height:500px){ha-dialog{--dialog-surface-margin-top:0px}}@media all and (min-width:600px) and (min-height:501px){ha-dialog{--mdc-dialog-min-width:580px;--mdc-dialog-max-width:580px;--mdc-dialog-max-height:calc(100% - 72px)}.main-title{cursor:default}:host([large]) ha-dialog{--mdc-dialog-min-width:90vw;--mdc-dialog-max-width:90vw}}`]}}]}}),o.WF);s()}catch(t){s(t)}}))},78071:(t,e,i)=>{i.a(t,(async(t,e)=>{try{var s=i(36312),a=i(50289),n=i(29818),o=i(83147),r=i(8533),d=i(5314),h=t([r,d]);[r,d]=h.then?(await h)():h;(0,s.A)([(0,n.EM)("ha-more-info-history-and-logbook")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.MZ)()],key:"entityId",value:void 0},{kind:"field",decorators:[(0,n.P)("ha-more-info-history")],key:"_history",value:void 0},{kind:"method",key:"resize",value:function(t){this._history?.resize(t)}},{kind:"method",key:"render",value:function(){return a.qy` ${(0,o.M1)(this.hass,this.entityId)?a.qy` <ha-more-info-history .hass="${this.hass}" .entityId="${this.entityId}"></ha-more-info-history> `:""} ${(0,o.t0)(this.hass,this.entityId)?a.qy` <ha-more-info-logbook .hass="${this.hass}" .entityId="${this.entityId}"></ha-more-info-logbook> `:""} `}},{kind:"get",static:!0,key:"styles",value:function(){return a.AH`ha-more-info-history,ha-more-info-logbook{display:block}ha-more-info-history+ha-more-info-logbook{margin-top:16px}`}}]}}),a.WF);e()}catch(t){e(t)}}))},8533:(t,e,i)=>{i.a(t,(async(t,e)=>{try{var s=i(36312),a=i(68689),n=(i(253),i(54846),i(38159)),o=i(65513),r=i(50289),d=i(29818),h=i(33922),l=i(34897),c=i(213),u=i(56932),_=i(4159),y=i(14511),g=i(11630),v=i(4826),m=i(96778),p=t([_,y,g]);[_,y,g]=p.then?(await p)():p;const f=["state","min","mean","max"];(0,s.A)([(0,d.EM)("ha-more-info-history")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,d.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.MZ)()],key:"entityId",value:void 0},{kind:"field",decorators:[(0,d.wk)()],key:"_stateHistory",value:void 0},{kind:"field",decorators:[(0,d.wk)()],key:"_statistics",value:void 0},{kind:"field",key:"_showMoreHref",value:()=>""},{kind:"field",key:"_statNames",value:void 0},{kind:"field",key:"_interval",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"field",key:"_error",value:void 0},{kind:"field",key:"_metadata",value:void 0},{kind:"field",decorators:[(0,d.P)("statistics-chart, state-history-charts")],key:"_chart",value:void 0},{kind:"field",key:"resize",value(){return t=>{this._chart&&this._chart.resize(t)}}},{kind:"method",key:"render",value:function(){return this.entityId?r.qy`${(0,h.x)(this.hass,"history")?r.qy`<div class="header"> <div class="title"> ${this.hass.localize("ui.dialogs.more_info_control.history")} </div> ${r.s6} </div> ${this._error?r.qy`<div class="errors">${this._error}</div>`:this._statistics?r.qy`<statistics-chart .hass="${this.hass}" .isLoadingData="${!this._statistics}" .statisticsData="${this._statistics}" .metadata="${this._metadata}" .statTypes="${f}" .names="${this._statNames}" hideLegend .showNames="${!1}" .clickForMoreInfo="${!1}"></statistics-chart>`:r.qy`<state-history-charts up-to-now .hass="${this.hass}" .historyData="${this._stateHistory}" .isLoadingData="${!this._stateHistory}" .showNames="${!1}" .clickForMoreInfo="${!1}"></state-history-charts>`}`:""}`:r.s6}},{kind:"method",key:"willUpdate",value:function(t){if((0,a.A)(i,"willUpdate",this,3)([t]),t.has("entityId")){if(this._stateHistory=void 0,this._statistics=void 0,!this.entityId)return;const t={entity_id:this.entityId,start_date:(0,n.K)().toISOString(),back:"1"};this._showMoreHref=`/history?${(0,u.KH)(t)}`,this._getStateHistory()}}},{kind:"method",key:"connectedCallback",value:function(){(0,a.A)(i,"connectedCallback",this,3)([]),this.hasUpdated&&this.entityId&&this._getStateHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,a.A)(i,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{kind:"method",key:"_unsubscribeHistory",value:function(){clearInterval(this._interval),this._subscribed&&(this._subscribed.then((t=>t?.())),this._subscribed=void 0)}},{kind:"method",key:"_redrawGraph",value:function(){this._stateHistory&&(this._stateHistory={...this._stateHistory})}},{kind:"method",key:"_setRedrawTimer",value:function(){clearInterval(this._interval),this._interval=window.setInterval((()=>this._redrawGraph()),6e4)}},{kind:"method",key:"_getStatisticsMetaData",value:async function(t){const e=await(0,v.Wr)(this.hass,t),i={};return e.forEach((t=>{i[t.statistic_id]=t})),i}},{kind:"method",key:"_getStateHistory",value:async function(){if((0,h.x)(this.hass,"recorder")&&"sensor"===(0,c.m)(this.entityId)){const t=this.hass.states[this.entityId];if(t&&t.attributes.state_class){const t=this._getStatisticsMetaData([this.entityId]),e=(0,v.sz)(this.hass,(0,o.O)(new Date,24),void 0,[this.entityId],"5minute",void 0,f),[i,s]=await Promise.all([t,e]);if(i&&Object.keys(i).length)return this._metadata=i,this._statistics=s,void(this._statNames={[this.entityId]:""})}}if(!(0,h.x)(this.hass,"history"))return;this._subscribed&&this._unsubscribeHistory();const{numeric_device_classes:t}=await(0,m.KL)(this.hass);this._subscribed=(0,g.IQ)(this.hass,(e=>{this._subscribed&&(this._stateHistory=(0,g.Mm)(this.hass,e,[this.entityId],this.hass.localize,t))}),24,[this.entityId]).catch((t=>{this._subscribed=void 0,this._error=t})),this._setRedrawTimer()}},{kind:"method",key:"_close",value:function(){setTimeout((()=>(0,l.r)(this,"close-dialog")),500)}},{kind:"field",static:!0,key:"styles",value:()=>r.AH`.header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:8px}.header>a,a:visited{color:var(--primary-color)}.title{font-family:var(--paper-font-title_-_font-family);-webkit-font-smoothing:var(--paper-font-title_-_-webkit-font-smoothing);font-size:var(--paper-font-subhead_-_font-size);font-weight:var(--paper-font-title_-_font-weight);letter-spacing:var(--paper-font-title_-_letter-spacing);line-height:var(--paper-font-title_-_line-height)}`}]}}),r.WF);e()}catch(t){e(t)}}))},84345:(t,e,i)=>{i.a(t,(async(t,e)=>{try{var s=i(36312),a=i(50289),n=i(29818),o=i(213),r=i(83147),d=i(8533),h=i(5314),l=i(67452),c=t([d,h,l]);[d,h,l]=c.then?(await c)():c;(0,s.A)([(0,n.EM)("ha-more-info-info")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"entityId",value:void 0},{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"entry",value:void 0},{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"editMode",value:void 0},{kind:"field",decorators:[(0,n.P)("ha-more-info-history")],key:"_history",value:void 0},{kind:"method",key:"resize",value:function(t){this._history?.resize(t)}},{kind:"method",key:"render",value:function(){const t=this.entityId,e=this.hass.states[t],i=this.hass.entities[t],s=(0,o.m)(t),n=e&&(0,r.sw)(e);return a.qy` <div class="container" data-domain="${s}"> ${e?a.s6:a.qy`<ha-alert alert-type="warning"> ${this.entry?.disabled_by?this.hass.localize("ui.dialogs.entity_registry.editor.entity_disabled"):this.hass.localize("ui.dialogs.entity_registry.editor.unavailable")} </ha-alert>`} ${e?.attributes.restored&&i?a.qy`<ha-alert alert-type="warning"> ${this.hass.localize("ui.dialogs.more_info_control.restored.no_longer_provided",{integration:i.platform})} </ha-alert>`:a.s6} <div class="content"> ${r.pC.includes(s)||n?"":a.qy` <state-card-content inDialog .stateObj="${e}" .hass="${this.hass}"></state-card-content> `} ${r.gs.includes(s)||!(0,r.M1)(this.hass,t)?"":a.qy`<ha-more-info-history .hass="${this.hass}" .entityId="${this.entityId}"></ha-more-info-history>`} ${r.gs.includes(s)||!(0,r.t0)(this.hass,t)?"":a.qy`<ha-more-info-logbook .hass="${this.hass}" .entityId="${this.entityId}"></ha-more-info-logbook>`} <more-info-content ?full-height="${n}" .stateObj="${e}" .hass="${this.hass}" .entry="${this.entry}" .editMode="${this.editMode}"></more-info-content> </div> </div> `}},{kind:"get",static:!0,key:"styles",value:function(){return a.AH`:host{display:flex;flex-direction:column;flex:1}.container{display:flex;flex-direction:column;flex:1}.content{display:flex;flex-direction:column;flex:1;padding:24px;padding-bottom:max(env(safe-area-inset-bottom),24px)}[data-domain=camera] .content{padding:0;--video-max-height:calc(100vh - 65px - 72px)}more-info-content{position:relative;display:flex;flex-direction:column}more-info-content[full-height]{flex:1}ha-more-info-history,ha-more-info-logbook:not(:last-child),state-card-content{display:block;margin-bottom:16px}ha-alert{display:block}`}}]}}),a.WF);e()}catch(t){e(t)}}))},5314:(t,e,i)=>{i.a(t,(async(t,e)=>{try{var s=i(36312),a=i(68689),n=i(38159),o=i(50289),r=i(29818),d=i(94100),h=i(33922),l=i(34897),c=i(56932),u=i(88316),_=t([u]);u=(_.then?(await _)():_)[0];(0,s.A)([(0,r.EM)("ha-more-info-logbook")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.MZ)()],key:"entityId",value:void 0},{kind:"field",key:"_showMoreHref",value:()=>""},{kind:"field",key:"_time",value:()=>({recent:86400})},{kind:"field",key:"_entityIdAsList",value:()=>(0,d.A)((t=>[t]))},{kind:"method",key:"render",value:function(){if(!(0,h.x)(this.hass,"logbook")||!this.entityId)return o.s6;return this.hass.states[this.entityId]?o.qy` <div class="header"> <div class="title"> ${this.hass.localize("ui.dialogs.more_info_control.logbook")} </div> <a href="${this._showMoreHref}" @click="${this._close}">${this.hass.localize("ui.dialogs.more_info_control.show_more")}</a> </div> <ha-logbook .hass="${this.hass}" .time="${this._time}" .entityIds="${this._entityIdAsList(this.entityId)}" narrow no-icon no-name show-indicator relative-time></ha-logbook> `:o.s6}},{kind:"method",key:"willUpdate",value:function(t){if((0,a.A)(i,"willUpdate",this,3)([t]),t.has("entityId")&&this.entityId){const t={entity_id:this.entityId,start_date:(0,n.K)().toISOString(),back:"1"};this._showMoreHref=`/logbook?${(0,c.KH)(t)}`}}},{kind:"method",key:"_close",value:function(){setTimeout((()=>(0,l.r)(this,"close-dialog")),500)}},{kind:"get",static:!0,key:"styles",value:function(){return[o.AH`ha-logbook{--logbook-max-height:250px}@media all and (max-width:450px),all and (max-height:500px){ha-logbook{--logbook-max-height:unset}}.header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:8px}.header>a,a:visited{color:var(--primary-color)}.title{font-family:var(--paper-font-title_-_font-family);-webkit-font-smoothing:var(--paper-font-title_-_-webkit-font-smoothing);font-size:var(--paper-font-subhead_-_font-size);font-weight:var(--paper-font-title_-_font-weight);letter-spacing:var(--paper-font-title_-_letter-spacing);line-height:var(--paper-font-title_-_line-height)}`]}}]}}),o.WF);e()}catch(t){e(t)}}))},67984:(t,e,i)=>{i.a(t,(async(t,e)=>{try{var s=i(36312),a=i(50289),n=i(29818),o=i(85920),r=(i(13292),i(81957)),d=i(2853),h=i(84976),l=t([d]);d=(l.then?(await l)():l)[0];(0,s.A)([(0,n.EM)("ha-more-info-settings")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"entityId",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"entry",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_settingsElementTag",value:void 0},{kind:"method",key:"render",value:function(){return void 0===this.entry?a.s6:null===this.entry?a.qy` <div class="content"> <ha-alert alert-type="warning"> ${this.hass.localize("ui.dialogs.entity_registry.no_unique_id",{entity_id:this.entityId,faq_link:a.qy`<a href="${(0,h.o)(this.hass,"/faq/unique_id")}" target="_blank" rel="noreferrer">${this.hass.localize("ui.dialogs.entity_registry.faq")}</a>`})} </ha-alert> </div> `:this._settingsElementTag?a.qy` ${(0,o._)(this._settingsElementTag,{hass:this.hass,entry:this.entry,entityId:this.entityId})} `:a.s6}},{kind:"method",key:"willUpdate",value:function(t){t.has("entry")&&this._loadPlatformSettingTabs()}},{kind:"method",key:"_loadPlatformSettingTabs",value:async function(){if(!this.entry)return;if(!Object.keys(r.C).includes(this.entry.platform))return void(this._settingsElementTag="entity-registry-settings");const t=r.C[this.entry.platform];await i(19398)(`./${t}`),this._settingsElementTag=t}},{kind:"get",static:!0,key:"styles",value:function(){return[a.AH`.content{padding:8px 24px 24px 24px}`]}}]}}),a.WF);e()}catch(t){e(t)}}))},67452:(t,e,i)=>{i.a(t,(async(t,e)=>{try{var s=i(36312),a=i(50289),n=i(29818),o=i(5157),r=i(79266),d=i(85920),h=t([o]);o=(h.then?(await h)():h)[0];(0,s.A)([(0,n.EM)("more-info-content")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"stateObj",value:void 0},{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"entry",value:void 0},{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"editMode",value:void 0},{kind:"method",key:"render",value:function(){let t;if(!this.stateObj||!this.hass)return a.s6;if(this.stateObj.attributes&&"custom_ui_more_info"in this.stateObj.attributes)t=this.stateObj.attributes.custom_ui_more_info;else{const e=(0,r.bG)(this.stateObj);(0,o.importMoreInfoControl)(e),t="hidden"===e?void 0:`more-info-${e}`}return t?(0,d._)(t,{hass:this.hass,stateObj:this.stateObj,entry:this.entry,editMode:this.editMode}):a.s6}}]}}),a.WF);e()}catch(t){e(t)}}))},79266:(t,e,i)=>{i.d(e,{S5:()=>d,bG:()=>o,mE:()=>r});var s=i(65459),a=i(83147);const n={alarm_control_panel:()=>i.e(35196).then(i.bind(i,35196)),automation:()=>i.e(80427).then(i.bind(i,80427)),camera:()=>i.e(26399).then(i.bind(i,26399)),climate:()=>i.e(52333).then(i.bind(i,52333)),configurator:()=>i.e(72937).then(i.bind(i,72937)),counter:()=>i.e(98482).then(i.bind(i,98482)),cover:()=>i.e(85497).then(i.bind(i,85497)),date:()=>i.e(48360).then(i.bind(i,48360)),datetime:()=>i.e(64169).then(i.bind(i,64169)),fan:()=>i.e(3603).then(i.bind(i,3603)),group:()=>Promise.all([i.e(64730),i.e(22613)]).then(i.bind(i,22613)),humidifier:()=>i.e(47400).then(i.bind(i,47400)),image:()=>i.e(763).then(i.bind(i,763)),input_boolean:()=>i.e(47265).then(i.bind(i,47265)),input_datetime:()=>i.e(92304).then(i.bind(i,92304)),lawn_mower:()=>i.e(64495).then(i.bind(i,64495)),light:()=>i.e(39758).then(i.bind(i,39758)),lock:()=>i.e(17011).then(i.bind(i,17011)),media_player:()=>i.e(73288).then(i.bind(i,73288)),person:()=>Promise.all([i.e(82331),i.e(14329)]).then(i.bind(i,36710)),remote:()=>i.e(7826).then(i.bind(i,7826)),script:()=>i.e(35371).then(i.bind(i,35371)),siren:()=>i.e(89055).then(i.bind(i,89055)),sun:()=>i.e(55776).then(i.bind(i,55776)),switch:()=>i.e(17040).then(i.bind(i,17040)),time:()=>i.e(71869).then(i.bind(i,71869)),timer:()=>i.e(69875).then(i.bind(i,69875)),update:()=>i.e(82381).then(i.bind(i,82381)),vacuum:()=>i.e(94467).then(i.bind(i,94467)),valve:()=>i.e(76704).then(i.bind(i,76704)),water_heater:()=>i.e(48065).then(i.bind(i,48065)),weather:()=>Promise.all([i.e(13618),i.e(49170)]).then(i.bind(i,49170))},o=t=>{const e=(0,s.t)(t);return r(e)},r=t=>a.gs.includes(t)?t:a.oF.includes(t)?"hidden":"default",d=t=>{t in n&&n[t]()}},46598:(t,e,i)=>{i.d(e,{F:()=>a,_:()=>n});var s=i(34897);const a=()=>i.e(78690).then(i.bind(i,78690)),n=(t,e)=>{(0,s.r)(t,"show-dialog",{dialogTag:"dialog-device-registry-detail",dialogImport:a,dialogParams:e})}},81957:(t,e,i)=>{i.d(e,{C:()=>s});const s={input_number:"entity-settings-helper-tab",input_select:"entity-settings-helper-tab",input_text:"entity-settings-helper-tab",input_boolean:"entity-settings-helper-tab",input_datetime:"entity-settings-helper-tab",counter:"entity-settings-helper-tab",timer:"entity-settings-helper-tab",input_button:"entity-settings-helper-tab",schedule:"entity-settings-helper-tab"}},503:(t,e,i)=>{i.a(t,(async(t,e)=>{try{var s=i(36312),a=i(68689),n=(i(89655),i(253),i(94438),i(16891),i(72606),i(49724),i(50289)),o=i(29818),r=i(10296),d=i(94100),h=i(33922),l=i(34897),c=i(79051),u=i(213),_=i(59780),y=i(42496),g=i(57636),v=i(2682),m=i(32920),p=(i(13292),i(25756),i(33381),i(63606),i(85288),i(13830),i(51513),i(77312),i(24640),i(70857),i(60203),i(74994),i(90431),i(88800)),f=i(31265),k=i(98041),b=i(10725),w=i(54108),$=i(68236),x=i(46092),C=i(42777),M=i(70747),I=i(96778),E=i(73682),A=i(22619),D=i(6121),z=i(92594),S=i(51243),q=i(55321),T=i(18589),L=i(46598),Z=t([g]);g=(Z.then?(await Z)():Z)[0];const H="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",P={cover:[["awning","blind","curtain","damper","door","garage","gate","shade","shutter","window"]],binary_sensor:[["lock"],["window","door","garage_door","opening"],["battery","battery_charging"],["cold","gas","heat"],["running","motion","moving","occupancy","presence","vibration"],["power","plug","light"],["smoke","safety","sound","problem","tamper","carbon_monoxide","moisture"],["connectivity"],["update"]]},U=["cover","fan","light","lock","siren","valve"],B=["cover","lock","valve"],O=[0,1,2,3,4,5,6];(0,s.A)([(0,o.EM)("entity-registry-settings-editor")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.MZ)({type:Object})],key:"entry",value:void 0},{kind:"field",decorators:[(0,o.MZ)({type:Boolean})],key:"hideName",value:()=>!1},{kind:"field",decorators:[(0,o.MZ)({type:Boolean})],key:"hideIcon",value:()=>!1},{kind:"field",decorators:[(0,o.MZ)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"helperConfigEntry",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_name",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_icon",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_entityId",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_deviceClass",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_switchAsDomain",value:()=>"switch"},{kind:"field",decorators:[(0,o.wk)()],key:"_switchAsInvert",value:()=>!1},{kind:"field",decorators:[(0,o.wk)()],key:"_areaId",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_labels",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_disabledBy",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_hiddenBy",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_device",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_unit_of_measurement",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_precision",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_precipitation_unit",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_pressure_unit",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_temperature_unit",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_visibility_unit",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_wind_speed_unit",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_cameraPrefs",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_numberDeviceClassConvertibleUnits",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_sensorDeviceClassConvertibleUnits",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_sensorNumericalDeviceClasses",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_weatherConvertibleUnits",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_defaultCode",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_noDeviceArea",value:void 0},{kind:"field",key:"_origEntityId",value:void 0},{kind:"field",key:"_deviceClassOptions",value:void 0},{kind:"method",key:"willUpdate",value:function(t){if((0,a.A)(i,"willUpdate",this,3)([t]),!t.has("entry")||t.get("entry")?.id===this.entry.id)return;this._name=this.entry.name||"",this._icon=this.entry.icon||"",this._deviceClass=this.entry.device_class||this.entry.original_device_class,this._origEntityId=this.entry.entity_id,this._areaId=this.entry.area_id,this._labels=this.entry.labels,this._entityId=this.entry.entity_id,this._disabledBy=this.entry.disabled_by,this._hiddenBy=this.entry.hidden_by,this._device=this.entry.device_id?this.hass.devices[this.entry.device_id]:void 0,this._switchAsInvert=!0===this.entry.options?.switch_as_x?.invert;const e=(0,u.m)(this.entry.entity_id);if("camera"===e&&(0,h.x)(this.hass,"stream")){const t=this.hass.states[this.entry.entity_id];t&&(0,y.$)(t,p.JT)&&t.attributes.frontend_stream_type===p.Ub&&this._fetchCameraPrefs()}if("number"===e||"sensor"===e){const t=this.hass.states[this.entry.entity_id];this._unit_of_measurement=t?.attributes?.unit_of_measurement}if("sensor"===e&&(this._precision=this.entry.options?.sensor?.display_precision),"lock"===e&&(this._defaultCode=this.entry.options?.lock?.default_code),"alarm_control_panel"===e&&(this._defaultCode=this.entry.options?.alarm_control_panel?.default_code),"weather"===e){const t=this.hass.states[this.entry.entity_id];this._precipitation_unit=t?.attributes?.precipitation_unit,this._pressure_unit=t?.attributes?.pressure_unit,this._temperature_unit=t?.attributes?.temperature_unit,this._visibility_unit=t?.attributes?.visibility_unit,this._wind_speed_unit=t?.attributes?.wind_speed_unit}const s=P[e];if(s){this._deviceClassOptions=[[],[]];for(const t of s)t.includes(this.entry.original_device_class)?this._deviceClassOptions[0]=t:this._deviceClassOptions[1].push(...t)}}},{kind:"method",key:"precisionLabel",value:function(t,e){const i=Number(e),s=isNaN(i)?0:e;return(0,g.ZV)(s,this.hass.locale,{minimumFractionDigits:t,maximumFractionDigits:t})}},{kind:"method",key:"_isInvalidDefaultCode",value:function(t,e){return!(!t||!e)&&!RegExp(t).test(e)}},{kind:"method",key:"updated",value:async function(t){if(t.has("_deviceClass")){const t=(0,u.m)(this.entry.entity_id);if("number"===t&&this._deviceClass){const{units:t}=await(0,C.Y)(this.hass,this._deviceClass);this._numberDeviceClassConvertibleUnits=t}else this._numberDeviceClassConvertibleUnits=[];if("sensor"===t){const{numeric_device_classes:t}=await(0,I.KL)(this.hass);this._sensorNumericalDeviceClasses=t}else this._sensorNumericalDeviceClasses=[];if("sensor"===t&&this._deviceClass){const{units:t}=await(0,I.j4)(this.hass,this._deviceClass);this._sensorDeviceClassConvertibleUnits=t}else this._sensorDeviceClassConvertibleUnits=[]}if(t.has("_entityId")){if("weather"===(0,u.m)(this.entry.entity_id)){const{units:t}=await(0,E.VB)(this.hass);this._weatherConvertibleUnits=t}else this._weatherConvertibleUnits=void 0}t.has("helperConfigEntry")&&("switch_as_x"===this.helperConfigEntry?.domain?this._switchAsDomain=(0,u.m)(this.entry.entity_id):(this._switchAsDomain="switch",this._switchAsInvert=!1))}},{kind:"method",key:"render",value:function(){if(this.entry.entity_id!==this._origEntityId)return n.s6;const t=this.hass.states[this.entry.entity_id],e=(0,u.m)(this.entry.entity_id),i="lock"===e&&this._isInvalidDefaultCode(t?.attributes?.code_format,this._defaultCode),s=this.entry.options?.sensor?.suggested_display_precision??void 0;return n.qy` ${this.hideName?n.s6:n.qy`<ha-textfield .value="${this._name}" .label="${this.hass.localize("ui.dialogs.entity_registry.editor.name")}" .disabled="${this.disabled}" .placeholder="${this.entry.original_name}" @input="${this._nameChanged}"></ha-textfield>`} ${this.hideIcon?n.s6:n.qy` <ha-icon-picker .hass="${this.hass}" .value="${this._icon}" @value-changed="${this._iconChanged}" .label="${this.hass.localize("ui.dialogs.entity_registry.editor.icon")}" .placeholder="${this.entry.original_icon||t?.attributes.icon||t&&(0,r.T)((0,$.fq)(this.hass,t))||(0,r.T)((0,$.u7)(this.hass,this.entry))}" .disabled="${this.disabled}"> ${this._icon||t?.attributes.icon||!t?n.s6:n.qy` <ha-state-icon slot="fallback" .hass="${this.hass}" .stateObj="${t}"></ha-state-icon> `} </ha-icon-picker> `} ${"switch"===e?n.qy`<ha-select .label="${this.hass.localize("ui.dialogs.entity_registry.editor.device_class")}" naturalMenuWidth fixedMenuPosition @selected="${this._switchAsDomainChanged}" @closed="${c.d}"> <ha-list-item value="switch" .selected="${!this._deviceClass||"switch"===this._deviceClass}"> ${(0,x.p$)(this.hass.localize,"switch")} </ha-list-item> <ha-list-item value="outlet" .selected="${"outlet"===this._deviceClass}"> ${this.hass.localize("ui.dialogs.entity_registry.editor.device_classes.switch.outlet")} </ha-list-item> <li divider role="separator"></li> ${this._switchAsDomainsSorted(U,this.hass.localize).map((t=>n.qy` <ha-list-item .value="${t.domain}"> ${t.label} </ha-list-item> `))} </ha-select>`:"switch_as_x"===this.helperConfigEntry?.domain?n.qy`<ha-select .label="${this.hass.localize("ui.dialogs.entity_registry.editor.switch_as_x")}" .value="${this._switchAsDomain}" naturalMenuWidth fixedMenuPosition @selected="${this._switchAsDomainChanged}" @closed="${c.d}"> <ha-list-item value="switch"> ${(0,x.p$)(this.hass.localize,"switch")} </ha-list-item> <ha-list-item .value="${e}"> ${(0,x.p$)(this.hass.localize,e)} </ha-list-item> <li divider role="separator"></li> ${this._switchAsDomainsSorted(U,this.hass.localize).map((t=>e===t.domain?n.s6:n.qy` <ha-list-item .value="${t.domain}"> ${t.label} </ha-list-item> `))} </ha-select> ${B.includes(this._switchAsDomain)?n.qy` <ha-settings-row> <span slot="heading">${this.hass.localize("ui.dialogs.entity_registry.editor.invert.label")}</span> <span slot="description">${this.hass.localize(`ui.dialogs.entity_registry.editor.invert.descriptions.${this._switchAsDomain}`)}</span> <ha-switch .checked="${this.entry.options?.switch_as_x?.invert}" @change="${this._switchAsInvertChanged}"></ha-switch> </ha-settings-row> `:n.s6} `:n.s6} ${this._deviceClassOptions?n.qy` <ha-select .label="${this.hass.localize("ui.dialogs.entity_registry.editor.device_class")}" .value="${this._deviceClass}" naturalMenuWidth fixedMenuPosition clearable @selected="${this._deviceClassChanged}" @closed="${c.d}"> ${this._deviceClassesSorted(e,this._deviceClassOptions[0],this.hass.localize).map((t=>n.qy` <ha-list-item .value="${t.deviceClass}"> ${t.label} </ha-list-item> `))} ${this._deviceClassOptions[0].length&&this._deviceClassOptions[1].length?n.qy`<li divider role="separator"></li>`:""} ${this._deviceClassesSorted(e,this._deviceClassOptions[1],this.hass.localize).map((t=>n.qy` <ha-list-item .value="${t.deviceClass}"> ${t.label} </ha-list-item> `))} </ha-select> `:""} ${"number"===e&&this._deviceClass&&t?.attributes.unit_of_measurement&&this._numberDeviceClassConvertibleUnits?.includes(t?.attributes.unit_of_measurement)?n.qy` <ha-select .label="${this.hass.localize("ui.dialogs.entity_registry.editor.unit_of_measurement")}" .value="${t.attributes.unit_of_measurement}" naturalMenuWidth fixedMenuPosition @selected="${this._unitChanged}" @closed="${c.d}"> ${this._numberDeviceClassConvertibleUnits.map((t=>n.qy` <ha-list-item .value="${t}">${t}</ha-list-item> `))} </ha-select> `:""} ${"lock"===e?n.qy` <ha-textfield .validationMessage="${this.hass.localize("ui.dialogs.entity_registry.editor.default_code_error")}" .value="${null==this._defaultCode?"":this._defaultCode}" .label="${this.hass.localize("ui.dialogs.entity_registry.editor.default_code")}" type="password" .invalid="${i}" .disabled="${this.disabled}" @input="${this._defaultcodeChanged}"></ha-textfield> `:""} ${"alarm_control_panel"===e?n.qy` <ha-textfield .value="${null==this._defaultCode?"":this._defaultCode}" .label="${this.hass.localize("ui.dialogs.entity_registry.editor.default_code")}" type="password" .disabled="${this.disabled}" @input="${this._defaultcodeChanged}"></ha-textfield> `:""} ${"sensor"===e&&this._deviceClass&&t?.attributes.unit_of_measurement&&this._sensorDeviceClassConvertibleUnits?.includes(t?.attributes.unit_of_measurement)?n.qy` <ha-select .label="${this.hass.localize("ui.dialogs.entity_registry.editor.unit_of_measurement")}" .value="${t.attributes.unit_of_measurement}" naturalMenuWidth fixedMenuPosition @selected="${this._unitChanged}" @closed="${c.d}"> ${this._sensorDeviceClassConvertibleUnits.map((t=>n.qy` <ha-list-item .value="${t}">${t}</ha-list-item> `))} </ha-select> `:""} ${"sensor"===e&&(this._deviceClass&&this._sensorNumericalDeviceClasses?.includes(this._deviceClass)||t?.attributes.unit_of_measurement||t?.attributes.state_class)?n.qy` <ha-select .label="${this.hass.localize("ui.dialogs.entity_registry.editor.precision")}" .value="${null==this._precision?"default":this._precision.toString()}" naturalMenuWidth fixedMenuPosition @selected="${this._precisionChanged}" @closed="${c.d}"> <ha-list-item value="default">${this.hass.localize("ui.dialogs.entity_registry.editor.precision_default",{value:this.precisionLabel(s,t?.state)})}</ha-list-item> ${O.map((e=>n.qy` <ha-list-item .value="${e.toString()}"> ${this.precisionLabel(e,t?.state)} </ha-list-item> `))} </ha-select> `:""} ${"weather"===e?n.qy` <ha-select .label="${this.hass.localize("ui.dialogs.entity_registry.editor.precipitation_unit")}" .value="${this._precipitation_unit}" naturalMenuWidth fixedMenuPosition @selected="${this._precipitationUnitChanged}" @closed="${c.d}"> ${this._weatherConvertibleUnits?.precipitation_unit.map((t=>n.qy` <ha-list-item .value="${t}">${t}</ha-list-item> `))} </ha-select> <ha-select .label="${this.hass.localize("ui.dialogs.entity_registry.editor.pressure_unit")}" .value="${this._pressure_unit}" naturalMenuWidth fixedMenuPosition @selected="${this._pressureUnitChanged}" @closed="${c.d}"> ${this._weatherConvertibleUnits?.pressure_unit.map((t=>n.qy` <ha-list-item .value="${t}">${t}</ha-list-item> `))} </ha-select> <ha-select .label="${this.hass.localize("ui.dialogs.entity_registry.editor.temperature_unit")}" .value="${this._temperature_unit}" naturalMenuWidth fixedMenuPosition @selected="${this._temperatureUnitChanged}" @closed="${c.d}"> ${this._weatherConvertibleUnits?.temperature_unit.map((t=>n.qy` <ha-list-item .value="${t}">${t}</ha-list-item> `))} </ha-select> <ha-select .label="${this.hass.localize("ui.dialogs.entity_registry.editor.visibility_unit")}" .value="${this._visibility_unit}" naturalMenuWidth fixedMenuPosition @selected="${this._visibilityUnitChanged}" @closed="${c.d}"> ${this._weatherConvertibleUnits?.visibility_unit.map((t=>n.qy` <ha-list-item .value="${t}">${t}</ha-list-item> `))} </ha-select> <ha-select .label="${this.hass.localize("ui.dialogs.entity_registry.editor.wind_speed_unit")}" .value="${this._wind_speed_unit}" naturalMenuWidth fixedMenuPosition @selected="${this._windSpeedUnitChanged}" @closed="${c.d}"> ${this._weatherConvertibleUnits?.wind_speed_unit.map((t=>n.qy` <ha-list-item .value="${t}">${t}</ha-list-item> `))} </ha-select> `:""} <ha-textfield class="entityId" .value="${(0,_.Y)(this._entityId)}" .prefix="${e+"."}" .label="${this.hass.localize("ui.dialogs.entity_registry.editor.entity_id")}" .disabled="${this.disabled}" required @input="${this._entityIdChanged}" iconTrailing autocapitalize="none" autocomplete="off" autocorrect="off" input-spellcheck="false"> <ha-icon-button @click="${this._copyEntityId}" slot="trailingIcon" .path="${H}"></ha-icon-button> </ha-textfield> ${this.entry.device_id?"":n.qy`<ha-area-picker .hass="${this.hass}" .value="${this._areaId}" .disabled="${this.disabled}" @value-changed="${this._areaPicked}"></ha-area-picker>`} <ha-labels-picker .hass="${this.hass}" .value="${this._labels}" .disabled="${this.disabled}" @value-changed="${this._labelsChanged}"></ha-labels-picker> ${this._cameraPrefs?n.qy` <ha-settings-row> <span slot="heading">${this.hass.localize("ui.dialogs.entity_registry.editor.stream.preload_stream")}</span> <span slot="description">${this.hass.localize("ui.dialogs.entity_registry.editor.stream.preload_stream_description")}</span> <ha-switch .checked="${this._cameraPrefs.preload_stream}" .disabled="${this.disabled}" @change="${this._handleCameraPrefsChanged}"> </ha-switch> </ha-settings-row> <ha-settings-row> <span slot="heading">${this.hass.localize("ui.dialogs.entity_registry.editor.stream.stream_orientation")}</span> <span slot="description">${this.hass.localize("ui.dialogs.entity_registry.editor.stream.stream_orientation_description")}</span> <ha-select .label="${this.hass.localize("ui.dialogs.entity_registry.editor.stream.stream_orientation")}" naturalMenuWidth fixedMenuPosition .disabled="${this.disabled}" @selected="${this._handleCameraOrientationChanged}" @closed="${c.d}"> ${p.sd.map((t=>{const e="ui.dialogs.entity_registry.editor.stream.stream_orientation_"+t.toString();return n.qy` <ha-list-item value="${t}"> ${this.hass.localize(e)} </ha-list-item> `}))} </ha-select> </ha-settings-row> `:""} ${this.helperConfigEntry&&this.helperConfigEntry.supports_options&&"switch_as_x"!==this.helperConfigEntry.domain?n.qy` <ha-list-item class="menu-item" twoline hasMeta .disabled="${this.disabled}" @click="${this._showOptionsFlow}"> <span>${this.hass.localize("ui.dialogs.entity_registry.editor.configure_state",{integration:(0,x.p$)(this.hass.localize,this.helperConfigEntry.domain)})}</span> <span slot="secondary">${this.hass.localize("ui.dialogs.entity_registry.editor.configure_state_secondary",{integration:(0,x.p$)(this.hass.localize,this.helperConfigEntry.domain)})}</span> <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> `:""} <ha-list-item class="menu-item" twoline hasMeta .disabled="${this.disabled}" @click="${this._handleVoiceAssistantsClicked}"> <span>${this.hass.localize("ui.dialogs.entity_registry.editor.voice_assistants")}</span> <span slot="secondary"> ${this.entry.aliases.length?[...this.entry.aliases].sort(((t,e)=>(0,v.x)(t,e,this.hass.locale.language))).join(", "):this.hass.localize("ui.dialogs.entity_registry.editor.no_aliases")} </span> <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> ${this._disabledBy&&"user"!==this._disabledBy&&"integration"!==this._disabledBy?n.qy`<ha-alert alert-type="warning">${this.hass.localize("ui.dialogs.entity_registry.editor.enabled_cause",{cause:this.hass.localize(`config_entry.disabled_by.${this._disabledBy}`)})}</ha-alert>`:""} <ha-settings-row> <span slot="heading">${this.hass.localize("ui.dialogs.entity_registry.editor.enabled_label")}</span> <span slot="description">${this.hass.localize("ui.dialogs.entity_registry.editor.enabled_description")}</span> <ha-switch .checked="${!this._disabledBy}" .disabled="${this.disabled||this._device?.disabled_by||this._disabledBy&&"user"!==this._disabledBy&&"integration"!==this._disabledBy}" @change="${this._enabledChanged}"></ha-switch> </ha-settings-row> ${this._hiddenBy&&"user"!==this._hiddenBy?n.qy`<ha-alert alert-type="warning">${this.hass.localize("ui.dialogs.entity_registry.editor.hidden_cause",{cause:this.hass.localize(`config_entry.hidden_by.${this._hiddenBy}`)})}</ha-alert>`:""} <ha-settings-row> <span slot="heading">${this.hass.localize("ui.dialogs.entity_registry.editor.visible_label")}</span> <span slot="description">${this.hass.localize("ui.dialogs.entity_registry.editor.hidden_explanation")}</span> <ha-switch .checked="${!this._disabledBy&&!this._hiddenBy}" .disabled="${this.disabled||this._disabledBy}" @change="${this._hiddenChanged}"></ha-switch> </ha-settings-row> ${this.entry.device_id?n.qy`<ha-settings-row> <span slot="heading">${this.hass.localize("ui.dialogs.entity_registry.editor.use_device_area")} ${this.hass.devices[this.entry.device_id].area_id?`(${this.hass.areas[this.hass.devices[this.entry.device_id].area_id]?.name})`:""}</span> <span slot="description">${this.hass.localize("ui.dialogs.entity_registry.editor.change_device_settings",{link:n.qy`<button class="link" @click="${this._openDeviceSettings}"> ${this.hass.localize("ui.dialogs.entity_registry.editor.change_device_area_link")} </button>`})}</span> <ha-switch .checked="${!this._areaId||this._noDeviceArea}" .disabled="${this.disabled}" @change="${this._useDeviceAreaChanged}"> </ha-switch></ha-settings-row> ${this._areaId||this._noDeviceArea?n.qy`<ha-area-picker .hass="${this.hass}" .value="${this._areaId}" .placeholder="${this._device?.area_id}" .disabled="${this.disabled}" @value-changed="${this._areaPicked}"></ha-area-picker>`:""} `:""} `}},{kind:"method",key:"updateEntry",value:async function(){let t=!0,e=this;for(;"home-assistant"!==e?.localName;)e=e.getRootNode().host;const i={name:this._name.trim()||null,icon:this._icon.trim()||null,area_id:this._areaId||null,labels:this._labels||[],new_entity_id:this._entityId.trim()};this._deviceClass!==(this.entry.device_class||this.entry.original_device_class)&&(i.device_class=this._deviceClass);const s=this.hass.states[this.entry.entity_id],a=(0,u.m)(this.entry.entity_id);this.entry.disabled_by===this._disabledBy||null!==this._disabledBy&&"user"!==this._disabledBy||(i.disabled_by=this._disabledBy),this.entry.hidden_by===this._hiddenBy||null!==this._hiddenBy&&"user"!==this._hiddenBy||(i.hidden_by=this._hiddenBy),"number"!==a&&"sensor"!==a||s?.attributes?.unit_of_measurement===this._unit_of_measurement||(i.options_domain=a,i.options=this.entry.options?.[a]||{},i.options.unit_of_measurement=this._unit_of_measurement),"sensor"===a&&this.entry.options?.[a]?.display_precision!==this._precision&&(i.options_domain=a,i.options=i.options||this.entry.options?.[a]||{},i.options.display_precision=this._precision),"lock"===a&&this.entry.options?.[a]?.default_code!==this._defaultCode&&(i.options_domain=a,i.options=this.entry.options?.[a]||{},i.options.default_code=this._defaultCode),"alarm_control_panel"===a&&this.entry.options?.[a]?.default_code!==this._defaultCode&&(i.options_domain=a,i.options=this.entry.options?.[a]||{},i.options.default_code=this._defaultCode),"weather"!==a||s?.attributes?.precipitation_unit===this._precipitation_unit&&s?.attributes?.pressure_unit===this._pressure_unit&&s?.attributes?.temperature_unit===this._temperature_unit&&s?.attributes?.visbility_unit===this._visibility_unit&&s?.attributes?.wind_speed_unit===this._wind_speed_unit||(i.options_domain="weather",i.options={precipitation_unit:this._precipitation_unit,pressure_unit:this._pressure_unit,temperature_unit:this._temperature_unit,visibility_unit:this._visibility_unit,wind_speed_unit:this._wind_speed_unit});const n=await(0,w.G_)(this.hass,this.entry.entity_id,i);if(n.require_restart&&(0,D.showAlertDialog)(this,{text:this.hass.localize("ui.dialogs.entity_registry.editor.enabled_restart_confirm")}),n.reload_delay&&(0,D.showAlertDialog)(this,{text:this.hass.localize("ui.dialogs.entity_registry.editor.enabled_delay_confirm",{delay:n.reload_delay})}),"switch"===a&&"switch"!==this._switchAsDomain){if(await(0,D.showConfirmationDialog)(this,{text:this.hass.localize("ui.dialogs.entity_registry.editor.switch_as_x_confirm",{domain:(0,x.p$)(this.hass.localize,this._switchAsDomain).toLowerCase()})})){const i=await(0,k.t1)(this.hass,"switch_as_x"),s=await(0,k.jm)(this.hass,i.flow_id,{entity_id:this._entityId.trim(),invert:this._switchAsInvert,target_domain:this._switchAsDomain});if(s.result?.entry_id)try{const i=await this._waitForEntityRegistryUpdate(s.result.entry_id);(0,S.p)(e,{entityId:i.entity_id}),t=!1}catch(t){}}}else if("switch_as_x"===this.helperConfigEntry?.domain&&this._switchAsDomain!==a){if(await(0,D.showConfirmationDialog)(this,{text:"switch"===this._switchAsDomain?this.hass.localize("ui.dialogs.entity_registry.editor.switch_as_x_remove_confirm",{domain:(0,x.p$)(this.hass.localize,a).toLowerCase()}):this.hass.localize("ui.dialogs.entity_registry.editor.switch_as_x_change_confirm",{domain_1:(0,x.p$)(this.hass.localize,a).toLowerCase(),domain_2:(0,x.p$)(this.hass.localize,this._switchAsDomain).toLowerCase()})})){const i=this.entry.options?.switch_as_x?.entity_id;if(await(0,f.eM)(this.hass,this.helperConfigEntry.entry_id),i)if("switch"===this._switchAsDomain)(0,S.p)(e,{entityId:i}),t=!1;else{const s=await(0,k.t1)(this.hass,"switch_as_x"),a=await(0,k.jm)(this.hass,s.flow_id,{entity_id:i,invert:this._switchAsInvert,target_domain:this._switchAsDomain});if(a.result?.entry_id)try{const i=await this._waitForEntityRegistryUpdate(a.result.entry_id);(0,S.p)(e,{entityId:i.entity_id}),t=!1}catch(t){}}else;}}else if("switch_as_x"===this.helperConfigEntry?.domain&&this._switchAsDomain===a&&this._switchAsInvert!==this.entry.options?.switch_as_x?.invert){const t=this.entry.options?.switch_as_x?.entity_id;if(t){const t=await(0,M.HH)(this.hass,this.helperConfigEntry.entry_id);await(0,M.lu)(this.hass,t.flow_id,{invert:this._switchAsInvert})}else;}return{close:t,entry:n.entity_entry}}},{kind:"method",key:"_waitForEntityRegistryUpdate",value:async function(t){return new Promise(((e,i)=>{const s=setTimeout(i,5e3),a=(0,w.Bz)(this.hass.connection,(i=>{const n=i.find((e=>e.config_entry_id===t));n&&(clearTimeout(s),a(),e(n))}));this.hass.connection._entityRegistry?.refresh()}))}},{kind:"method",key:"_nameChanged",value:function(t){(0,l.r)(this,"change"),this._name=t.target.value}},{kind:"method",key:"_iconChanged",value:function(t){(0,l.r)(this,"change"),this._icon=t.detail.value}},{kind:"method",key:"_copyEntityId",value:async function(){await(0,m.l)(this._entityId),(0,T.P)(this,{message:this.hass.localize("ui.common.copied_clipboard")})}},{kind:"method",key:"_entityIdChanged",value:function(t){(0,l.r)(this,"change"),this._entityId=`${(0,u.m)(this._origEntityId)}.${t.target.value}`}},{kind:"method",key:"_deviceClassChanged",value:function(t){(0,l.r)(this,"change"),this._deviceClass=t.target.value}},{kind:"method",key:"_unitChanged",value:function(t){(0,l.r)(this,"change"),this._unit_of_measurement=t.target.value}},{kind:"method",key:"_defaultcodeChanged",value:function(t){(0,l.r)(this,"change"),this._defaultCode=""===t.target.value?null:t.target.value}},{kind:"method",key:"_precipitationUnitChanged",value:function(t){(0,l.r)(this,"change"),this._precipitation_unit=t.target.value}},{kind:"method",key:"_precisionChanged",value:function(t){(0,l.r)(this,"change"),this._precision="default"===t.target.value?null:Number(t.target.value)}},{kind:"method",key:"_pressureUnitChanged",value:function(t){(0,l.r)(this,"change"),this._pressure_unit=t.target.value}},{kind:"method",key:"_temperatureUnitChanged",value:function(t){(0,l.r)(this,"change"),this._temperature_unit=t.target.value}},{kind:"method",key:"_visibilityUnitChanged",value:function(t){(0,l.r)(this,"change"),this._visibility_unit=t.target.value}},{kind:"method",key:"_windSpeedUnitChanged",value:function(t){(0,l.r)(this,"change"),this._wind_speed_unit=t.target.value}},{kind:"method",key:"_switchAsDomainChanged",value:function(t){if(""===t.target.value)return;const e="outlet"===t.target.value?"switch":t.target.value;this._switchAsDomain=e,("switch"===(0,u.m)(this.entry.entity_id)&&"outlet"===t.target.value||"switch"===t.target.value)&&(this._deviceClass=t.target.value)}},{kind:"method",key:"_switchAsInvertChanged",value:function(t){this._switchAsInvert=t.target.checked}},{kind:"method",key:"_useDeviceAreaChanged",value:function(t){this._noDeviceArea=!t.target.checked,this._noDeviceArea||(this._areaId=void 0)}},{kind:"method",key:"_areaPicked",value:function(t){(0,l.r)(this,"change"),this._areaId=t.detail.value}},{kind:"method",key:"_labelsChanged",value:function(t){this._labels=t.detail.value}},{kind:"method",key:"_fetchCameraPrefs",value:async function(){this._cameraPrefs=await(0,p.y3)(this.hass,this.entry.entity_id)}},{kind:"method",key:"_handleCameraPrefsChanged",value:async function(t){const e=t.currentTarget;try{this._cameraPrefs=await(0,p.FX)(this.hass,this.entry.entity_id,{preload_stream:e.checked})}catch(t){(0,D.showAlertDialog)(this,{text:t.message}),e.checked=!e.checked}}},{kind:"method",key:"_handleCameraOrientationChanged",value:async function(t){try{this._cameraPrefs=await(0,p.FX)(this.hass,this.entry.entity_id,{orientation:t.currentTarget.value})}catch(t){(0,D.showAlertDialog)(this,{text:t.message})}}},{kind:"method",key:"_enabledChanged",value:function(t){t.target.checked?this._disabledBy=null:this._disabledBy="user"}},{kind:"method",key:"_hiddenChanged",value:function(t){t.target.checked?this._hiddenBy=null:this._hiddenBy="user"}},{kind:"method",key:"_openDeviceSettings",value:function(){(0,L._)(this,{device:this._device,updateEntry:async t=>{await(0,b.FB)(this.hass,this._device.id,t)}})}},{kind:"method",key:"_handleVoiceAssistantsClicked",value:function(){(0,z.C)(this,this.hass.localize("ui.dialogs.entity_registry.editor.voice_assistants"))}},{kind:"method",key:"_showOptionsFlow",value:async function(){(0,A.Q)(this,this.helperConfigEntry,{manifest:await(0,x.QC)(this.hass,this.helperConfigEntry.domain)})}},{kind:"field",key:"_switchAsDomainsSorted",value(){return(0,d.A)(((t,e)=>t.map((t=>({domain:t,label:(0,x.p$)(e,t)}))).sort(((t,e)=>(0,v.x)(t.label,e.label,this.hass.locale.language)))))}},{kind:"field",key:"_deviceClassesSorted",value(){return(0,d.A)(((t,e,i)=>e.map((e=>({deviceClass:e,label:i(`ui.dialogs.entity_registry.editor.device_classes.${t}.${e}`)}))).sort(((t,e)=>(0,v.x)(t.label,e.label,this.hass.locale.language)))))}},{kind:"get",static:!0,key:"styles",value:function(){return[q.RF,n.AH`:host{display:block}ha-textfield.entityId{--text-field-prefix-padding-right:0;--textfield-icon-trailing-padding:0}ha-textfield.entityId>ha-icon-button{position:relative;right:-8px;--mdc-icon-button-size:36px;--mdc-icon-size:20px;color:var(--secondary-text-color);inset-inline-start:initial;inset-inline-end:-8px;direction:var(--direction)}ha-switch{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial}ha-settings-row ha-switch{margin-right:0;margin-inline-end:0;margin-inline-start:initial}ha-area-picker,ha-icon-picker,ha-select,ha-textfield{display:block;margin:8px 0;width:100%}li[divider]{border-bottom-color:var(--divider-color)}ha-alert mwc-button{width:max-content}.menu-item{border-radius:4px;margin-top:3px;margin-bottom:3px;overflow:hidden;--mdc-list-side-padding:13px}`]}}]}}),n.WF);e()}catch(t){e(t)}}))},2853:(t,e,i)=>{i.a(t,(async(t,e)=>{try{var s=i(36312),a=i(68689),n=(i(72606),i(49724),i(67056),i(50289)),o=i(29818),r=i(34897),d=(i(13292),i(31265)),h=i(10725),l=i(54108),c=i(46092),u=i(6121),_=i(20712),y=i(55321),g=i(46598),v=i(503),m=t([v]);v=(m.then?(await m)():m)[0];const p=!1;(0,s.A)([(0,o.EM)("entity-registry-settings")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.MZ)({type:Object})],key:"entry",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_helperConfigEntry",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_submitting",value:void 0},{kind:"field",decorators:[(0,o.P)("entity-registry-settings-editor")],key:"_registryEditor",value:void 0},{kind:"method",key:"willUpdate",value:function(t){(0,a.A)(i,"willUpdate",this,3)([t]),t.has("entry")&&this._fetchHelperConfigEntry()}},{kind:"method",key:"_fetchHelperConfigEntry",value:async function(){if(this._helperConfigEntry=void 0,this.entry?.config_entry_id)try{const t=(await(0,d.Vx)(this.hass,this.entry.config_entry_id)).config_entry;"helper"===(await(0,c.QC)(this.hass,t.domain)).integration_type&&(this._helperConfigEntry=t)}catch(t){}}},{kind:"method",key:"render",value:function(){const t=this.hass.states[this.entry.entity_id],e=this.entry.device_id?this.hass.devices[this.entry.device_id]:void 0;return n.qy` ${t?"":n.qy` <ha-alert alert-type="warning"> ${e?.disabled_by?n.qy`${this.hass.localize("ui.dialogs.entity_registry.editor.device_disabled")}<mwc-button @click="${this._openDeviceSettings}" slot="action"> ${this.hass.localize("ui.dialogs.entity_registry.editor.open_device_settings")} </mwc-button>`:this.entry.disabled_by?n.qy`${this.hass.localize("ui.dialogs.entity_registry.editor.entity_disabled")}${["user","integration"].includes(this.entry.disabled_by)?n.qy`<mwc-button slot="action" @click="${this._enableEntry}"> ${this.hass.localize("ui.dialogs.entity_registry.editor.enable_entity")}</mwc-button>`:""}`:this.hass.localize("ui.dialogs.entity_registry.editor.unavailable")} </ha-alert> `} ${this._error?n.qy`<ha-alert alert-type="error">${this._error}</ha-alert>`:""} <div class="form container"> <entity-registry-settings-editor .hass="${this.hass}" .entry="${this.entry}" .helperConfigEntry="${this._helperConfigEntry}" .disabled="${this._submitting}" @change="${this._entityRegistryChanged}"></entity-registry-settings-editor> </div> <div class="buttons"> <mwc-button class="warning" @click="${this._confirmDeleteEntry}" .disabled="${this._submitting||!this._helperConfigEntry&&!t?.attributes.restored}"> ${this.hass.localize("ui.dialogs.entity_registry.editor.delete")} </mwc-button> <mwc-button @click="${this._updateEntry}" .disabled="${p||this._submitting}"> ${this.hass.localize("ui.dialogs.entity_registry.editor.update")} </mwc-button> </div> `}},{kind:"method",key:"_entityRegistryChanged",value:function(){this._error=void 0}},{kind:"method",key:"_openDeviceSettings",value:function(){const t=this.hass.devices[this.entry.device_id];(0,g._)(this,{device:t,updateEntry:async e=>{await(0,h.FB)(this.hass,t.id,e)}})}},{kind:"method",key:"_enableEntry",value:async function(){this._error=void 0,this._submitting=!0;try{const t=await(0,l.G_)(this.hass,this.entry.entity_id,{disabled_by:null});(0,r.r)(this,"entity-entry-updated",t.entity_entry),t.require_restart&&(0,u.showAlertDialog)(this,{text:this.hass.localize("ui.dialogs.entity_registry.editor.enabled_restart_confirm")}),t.reload_delay&&(0,u.showAlertDialog)(this,{text:this.hass.localize("ui.dialogs.entity_registry.editor.enabled_delay_confirm",{delay:t.reload_delay})})}catch(t){this._error=t.message}finally{this._submitting=!1}}},{kind:"method",key:"_updateEntry",value:async function(){this._submitting=!0;try{(await this._registryEditor.updateEntry()).close&&(0,r.r)(this,"close-dialog")}catch(t){this._error=t.message||"Unknown error"}finally{this._submitting=!1}}},{kind:"method",key:"_confirmDeleteEntry",value:async function(){if(await(0,u.showConfirmationDialog)(this,{text:this.hass.localize("ui.dialogs.entity_registry.editor.confirm_delete"),confirmText:this.hass.localize("ui.common.delete"),dismissText:this.hass.localize("ui.common.cancel"),destructive:!0})){this._submitting=!0;try{this._helperConfigEntry?await(0,d.eM)(this.hass,this._helperConfigEntry.entry_id):await(0,l.bg)(this.hass,this.entry.entity_id),(0,r.r)(this,"close-dialog")}finally{this._submitting=!1}}}},{kind:"get",static:!0,key:"styles",value:function(){return[y.RF,n.AH`:host{display:block}.container{padding:8px 24px 20px 24px}.buttons{box-sizing:border-box;display:flex;padding:8px 16px 8px 24px;justify-content:space-between;padding-bottom:max(env(safe-area-inset-bottom),8px);background-color:var(--mdc-theme-surface,#fff);border-top:1px solid var(--divider-color);position:sticky;bottom:0px}ha-alert mwc-button{width:max-content}`]}}]}}),(0,_.E)(n.WF));e()}catch(t){e(t)}}))},88316:(t,e,i)=>{i.a(t,(async(t,e)=>{try{var s=i(36312),a=i(68689),n=(i(89655),i(253),i(2075),i(54846),i(4525),i(50289)),o=i(29818),r=i(33922),d=i(65459),h=i(58034),l=(i(32885),i(78573)),c=i(38545),u=i(71443),_=i(61558),y=t([_]);_=(y.then?(await y)():y)[0];const g=(t,e)=>new Date(t.getTime()-1e3*e).getTime()/1e3,v=(t,e)=>(void 0!==t||void 0!==e)&&(!t||!e||t.length!==e.length||t.some((t=>!e.includes(t)))||e.some((e=>!t.includes(e))));(0,s.A)([(0,o.EM)("ha-logbook")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"time",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"entityIds",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"deviceIds",value:void 0},{kind:"field",decorators:[(0,o.MZ)({type:Boolean})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,o.MZ)({type:Boolean,reflect:!0})],key:"virtualize",value:()=>!1},{kind:"field",decorators:[(0,o.MZ)({type:Boolean,attribute:"no-icon"})],key:"noIcon",value:()=>!1},{kind:"field",decorators:[(0,o.MZ)({type:Boolean,attribute:"no-name"})],key:"noName",value:()=>!1},{kind:"field",decorators:[(0,o.MZ)({type:Boolean,attribute:"show-indicator"})],key:"showIndicator",value:()=>!1},{kind:"field",decorators:[(0,o.MZ)({type:Boolean,attribute:"relative-time"})],key:"relativeTime",value:()=>!1},{kind:"field",decorators:[(0,o.MZ)({type:Boolean})],key:"showMoreLink",value:()=>!0},{kind:"field",decorators:[(0,o.wk)()],key:"_logbookEntries",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_traceContexts",value:()=>({})},{kind:"field",decorators:[(0,o.wk)()],key:"_userIdToName",value:()=>({})},{kind:"field",decorators:[(0,o.wk)()],key:"_error",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"field",key:"_liveUpdatesEnabled",value:()=>!0},{kind:"field",key:"_pendingStreamMessages",value:()=>[]},{kind:"field",key:"_throttleGetLogbookEntries",value(){return(0,h.n)((()=>this._getLogBookData()),1e3)}},{kind:"method",key:"render",value:function(){return(0,r.x)(this.hass,"logbook")?this._error?n.qy`<div class="no-entries"> ${`${this.hass.localize("ui.components.logbook.retrieval_error")}: ${this._error}`} </div>`:void 0===this._logbookEntries?n.qy` <div class="progress-wrapper"> <ha-circular-progress indeterminate></ha-circular-progress> </div> `:0===this._logbookEntries.length?n.qy`<div class="no-entries"> ${this.hass.localize("ui.components.logbook.entries_not_found")} </div>`:n.qy` <ha-logbook-renderer .hass="${this.hass}" .narrow="${this.narrow}" .virtualize="${this.virtualize}" .noIcon="${this.noIcon}" .noName="${this.noName}" .showIndicator="${this.showIndicator}" .relativeTime="${this.relativeTime}" .entries="${this._logbookEntries}" .traceContexts="${this._traceContexts}" .userIdToName="${this._userIdToName}" @hass-logbook-live="${this._handleLogbookLive}"></ha-logbook-renderer> `:n.s6}},{kind:"method",key:"refresh",value:async function(t=!1){(t||!this._subscribed&&void 0!==this._logbookEntries)&&(this._throttleGetLogbookEntries.cancel(),this._updateTraceContexts.cancel(),this._updateUsers.cancel(),this._unsubscribeSetLoading(),t?this._getLogBookData():this._throttleGetLogbookEntries())}},{kind:"method",key:"shouldUpdate",value:function(t){if(1!==t.size||!t.has("hass"))return!0;const e=t.get("hass");return!e||e.localize!==this.hass.localize}},{kind:"method",key:"willUpdate",value:function(t){let e=t.has("time");for(const i of["entityIds","deviceIds"]){if(!t.has(i))continue;const s=t.get(i),a=this[i];if(v(s,a)){e=!0;break}}e&&this.refresh(!0)}},{kind:"method",key:"_handleLogbookLive",value:function(t){t.detail.enable&&!this._liveUpdatesEnabled&&(this._pendingStreamMessages.forEach((t=>this._processStreamMessage(t))),this._pendingStreamMessages=[]),this._liveUpdatesEnabled=t.detail.enable}},{kind:"get",key:"_filterAlwaysEmptyResults",value:function(){const t=this.entityIds,e=this.deviceIds;return Boolean(t||e)&&(!t||0===t.length)&&(!e||0===e.length)}},{kind:"method",key:"_unsubscribe",value:function(){this._subscribed&&(this._subscribed.then((t=>t?.())),this._subscribed=void 0)}},{kind:"method",key:"connectedCallback",value:function(){(0,a.A)(i,"connectedCallback",this,3)([]),this.hasUpdated&&this._subscribeLogbookPeriod(this._calculateLogbookPeriod())}},{kind:"method",key:"disconnectedCallback",value:function(){(0,a.A)(i,"disconnectedCallback",this,3)([]),this._unsubscribeSetLoading()}},{kind:"method",key:"_unsubscribeSetLoading",value:function(){this._unsubscribe(),this._logbookEntries=void 0,this._pendingStreamMessages=[]}},{kind:"method",key:"_unsubscribeNoResults",value:function(){this._unsubscribe(),this._logbookEntries=[],this._pendingStreamMessages=[]}},{kind:"method",key:"_calculateLogbookPeriod",value:function(){const t=new Date;if("range"in this.time)return{now:t,startTime:this.time.range[0],endTime:this.time.range[1],purgeBeforePythonTime:void 0};if("recent"in this.time){const e=g(t,this.time.recent);return{now:t,startTime:new Date(1e3*e),endTime:new Date(t.getTime()+31536e6),purgeBeforePythonTime:g(t,this.time.recent)}}throw new Error("Unexpected time specified")}},{kind:"method",key:"_subscribeLogbookPeriod",value:function(t){return this._subscribed||(this._subscribed=(0,l.gM)(this.hass,(t=>{this._subscribed&&this._processOrQueueStreamMessage(t)}),t.startTime.toISOString(),t.endTime.toISOString(),this.entityIds,this.deviceIds).catch((t=>{this._subscribed=void 0,this._error=t}))),!0}},{kind:"method",key:"_getLogBookData",value:async function(){if(this._error=void 0,this._filterAlwaysEmptyResults)return void this._unsubscribeNoResults();const t=this._calculateLogbookPeriod();t.startTime>t.now?this._unsubscribeNoResults():(this._updateUsers(),this.hass.user?.is_admin&&this._updateTraceContexts(),this._subscribeLogbookPeriod(t))}},{kind:"field",key:"_nonExpiredRecords",value(){return t=>this._logbookEntries?t?this._logbookEntries.filter((e=>e.when>t)):this._logbookEntries:[]}},{kind:"field",key:"_processOrQueueStreamMessage",value(){return t=>{this._liveUpdatesEnabled?this._processStreamMessage(t):this._pendingStreamMessages.push(t)}}},{kind:"field",key:"_processStreamMessage",value(){return t=>{const e="recent"in this.time?g(new Date,this.time.recent):void 0,i=[...t.events].reverse();if(!this._logbookEntries||!this._logbookEntries.length)return void(this._logbookEntries=i);if(!i.length)return;const s=this._nonExpiredRecords(e);s.length?i[i.length-1].when>s[0].when?this._logbookEntries=i.concat(s):s[s.length-1].when>i[0].when?this._logbookEntries=s.concat(i):this._logbookEntries=s.concat(i).sort(((t,e)=>e.when-t.when)):this._logbookEntries=i}}},{kind:"field",key:"_updateTraceContexts",value(){return(0,h.n)((async()=>{this._traceContexts=await(0,c.gq)(this.hass)}),6e4)}},{kind:"field",key:"_updateUsers",value(){return(0,h.n)((async()=>{const t={},e=this.hass.user?.is_admin&&(0,u.hU)(this.hass);for(const e of Object.values(this.hass.states))e.attributes.user_id&&"person"===(0,d.t)(e)&&(t[e.attributes.user_id]=e.attributes.friendly_name);if(e){const i=await e;for(const e of i)e.id in t||(t[e.id]=e.name)}this._userIdToName=t}),6e4)}},{kind:"get",static:!0,key:"styles",value:function(){return[n.AH`:host{display:block}:host([virtualize]){height:100%}.no-entries{text-align:center;padding:16px;color:var(--secondary-text-color)}.progress-wrapper{display:flex;justify-content:center;height:100%;align-items:center}`]}}]}}),n.WF);e()}catch(t){e(t)}}))},5157:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.r(e),i.d(e,{createBadgeElement:()=>r.YH,createCardElement:()=>d.te,createHeaderFooterElement:()=>h.x,createHuiElement:()=>l.d,createRowElement:()=>c.T,importMoreInfoControl:()=>o.S5,showAlertDialog:()=>n.showAlertDialog,showConfirmationDialog:()=>n.showConfirmationDialog,showEnterCodeDialog:()=>a.H,showPromptDialog:()=>n.showPromptDialog});var a=i(53473),n=i(6121),o=i(79266),r=i(34308),d=i(54075),h=i(32064),l=i(8325),c=i(31271),u=t([d,l,c]);[d,l,c]=u.then?(await u)():u,s()}catch(t){s(t)}}))},19398:(t,e,i)=>{var s={"./entity-settings-helper-tab":[27247,29842,99203,27247],"./entity-settings-helper-tab.ts":[27247,29842,99203,27247]};function a(t){if(!i.o(s,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=s[t],a=e[0];return Promise.all(e.slice(1).map(i.e)).then((()=>i(a)))}a.keys=()=>Object.keys(s),a.id=19398,t.exports=a},24892:(t,e,i)=>{i(253),i(54846);var s=i(79192),a=i(50289),n=i(29818);class o extends a.WF{constructor(){super(),this.min=0,this.max=100,this.step=1,this.startAngle=135,this.arcLength=270,this.handleSize=6,this.handleZoom=1.5,this.readonly=!1,this.disabled=!1,this.dragging=!1,this.rtl=!1,this.outside=!1,this._scale=1,this.dragEnd=this.dragEnd.bind(this),this.drag=this.drag.bind(this),this._keyStep=this._keyStep.bind(this)}connectedCallback(){super.connectedCallback(),document.addEventListener("mouseup",this.dragEnd),document.addEventListener("touchend",this.dragEnd,{passive:!1}),document.addEventListener("mousemove",this.drag),document.addEventListener("touchmove",this.drag,{passive:!1}),document.addEventListener("keydown",this._keyStep)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("mouseup",this.dragEnd),document.removeEventListener("touchend",this.dragEnd),document.removeEventListener("mousemove",this.drag),document.removeEventListener("touchmove",this.drag),document.removeEventListener("keydown",this._keyStep)}get _start(){return this.startAngle*Math.PI/180}get _len(){return Math.min(this.arcLength*Math.PI/180,2*Math.PI-.01)}get _end(){return this._start+this._len}get _showHandle(){return!this.readonly&&(null!=this.value||null!=this.high&&null!=this.low)}_angleInside(t){let e=(this.startAngle+this.arcLength/2-t+180+360)%360-180;return e<this.arcLength/2&&e>-this.arcLength/2}_angle2xy(t){return this.rtl?{x:-Math.cos(t),y:Math.sin(t)}:{x:Math.cos(t),y:Math.sin(t)}}_xy2angle(t,e){return this.rtl&&(t=-t),(Math.atan2(e,t)-this._start+8*Math.PI)%(2*Math.PI)}_value2angle(t){const e=((t=Math.min(this.max,Math.max(this.min,t)))-this.min)/(this.max-this.min);return this._start+e*this._len}_angle2value(t){return Math.round((t/this._len*(this.max-this.min)+this.min)/this.step)*this.step}get _boundaries(){const t=this._angle2xy(this._start),e=this._angle2xy(this._end);let i=1;this._angleInside(270)||(i=Math.max(-t.y,-e.y));let s=1;this._angleInside(90)||(s=Math.max(t.y,e.y));let a=1;this._angleInside(180)||(a=Math.max(-t.x,-e.x));let n=1;return this._angleInside(0)||(n=Math.max(t.x,e.x)),{up:i,down:s,left:a,right:n,height:i+s,width:a+n}}_mouse2value(t){const e=t.type.startsWith("touch")?t.touches[0].clientX:t.clientX,i=t.type.startsWith("touch")?t.touches[0].clientY:t.clientY,s=this.shadowRoot.querySelector("svg").getBoundingClientRect(),a=this._boundaries,n=e-(s.left+a.left*s.width/a.width),o=i-(s.top+a.up*s.height/a.height),r=this._xy2angle(n,o);return this._angle2value(r)}dragStart(t){if(!this._showHandle||this.disabled)return;let e,i=t.target;if(this._rotation&&"focus"!==this._rotation.type)return;if(i.classList.contains("shadowpath"))if("touchstart"===t.type&&(e=window.setTimeout((()=>{this._rotation&&(this._rotation.cooldown=void 0)}),200)),null==this.low)i=this.shadowRoot.querySelector("#value");else{const e=this._mouse2value(t);i=Math.abs(e-this.low)<Math.abs(e-this.high)?this.shadowRoot.querySelector("#low"):this.shadowRoot.querySelector("#high")}if(i.classList.contains("overflow")&&(i=i.nextElementSibling),!i.classList.contains("handle"))return;i.setAttribute("stroke-width",String(2*this.handleSize*this.handleZoom*this._scale));const s="high"===i.id?this.low:this.min,a="low"===i.id?this.high:this.max;this._rotation={handle:i,min:s,max:a,start:this[i.id],type:t.type,cooldown:e},this.dragging=!0}_cleanupRotation(){const t=this._rotation.handle;t.setAttribute("stroke-width",String(2*this.handleSize*this._scale)),this._rotation=void 0,this.dragging=!1,t.blur()}dragEnd(t){if(!this._showHandle||this.disabled)return;if(!this._rotation)return;const e=this._rotation.handle;this._cleanupRotation();let i=new CustomEvent("value-changed",{detail:{[e.id]:this[e.id]},bubbles:!0,composed:!0});this.dispatchEvent(i),this.low&&this.low>=.99*this.max?this._reverseOrder=!0:this._reverseOrder=!1}drag(t){if(!this._showHandle||this.disabled)return;if(!this._rotation)return;if(this._rotation.cooldown)return window.clearTimeout(this._rotation.cooldown),void this._cleanupRotation();if("focus"===this._rotation.type)return;t.preventDefault();const e=this._mouse2value(t);this._dragpos(e)}_dragpos(t){if(t<this._rotation.min||t>this._rotation.max)return;const e=this._rotation.handle;this[e.id]=t;let i=new CustomEvent("value-changing",{detail:{[e.id]:t},bubbles:!0,composed:!0});this.dispatchEvent(i)}_keyStep(t){if(!this._showHandle||this.disabled)return;if(!this._rotation)return;const e=this._rotation.handle;"ArrowLeft"!==t.key&&"ArrowDown"!==t.key||(t.preventDefault(),this.rtl?this._dragpos(this[e.id]+this.step):this._dragpos(this[e.id]-this.step)),"ArrowRight"!==t.key&&"ArrowUp"!==t.key||(t.preventDefault(),this.rtl?this._dragpos(this[e.id]-this.step):this._dragpos(this[e.id]+this.step)),"Home"===t.key&&(t.preventDefault(),this._dragpos(this.min)),"End"===t.key&&(t.preventDefault(),this._dragpos(this.max))}updated(t){if(this.shadowRoot.querySelector(".slider")){const t=window.getComputedStyle(this.shadowRoot.querySelector(".slider"));if(t&&t.strokeWidth){const e=parseFloat(t.strokeWidth);if(e>this.handleSize*this.handleZoom){const t=this._boundaries,i=`\n          ${e/2*Math.abs(t.up)}px\n          ${e/2*Math.abs(t.right)}px\n          ${e/2*Math.abs(t.down)}px\n          ${e/2*Math.abs(t.left)}px`;this.shadowRoot.querySelector("svg").style.margin=i}}}if(this.shadowRoot.querySelector("svg")&&void 0===this.shadowRoot.querySelector("svg").style.vectorEffect){t.has("_scale")&&1!=this._scale&&this.shadowRoot.querySelector("svg").querySelectorAll("path").forEach((t=>{if(t.getAttribute("stroke-width"))return;const e=parseFloat(getComputedStyle(t).getPropertyValue("stroke-width"));t.style.strokeWidth=e*this._scale+"px"}));const e=this.shadowRoot.querySelector("svg").getBoundingClientRect(),i=Math.max(e.width,e.height);this._scale=2/i}}_renderArc(t,e){const i=e-t,s=this._angle2xy(t),a=this._angle2xy(e+.001);return`\n      M ${s.x} ${s.y}\n      A 1 1,\n        0,\n        ${i>Math.PI?"1":"0"} ${this.rtl?"0":"1"},\n        ${a.x} ${a.y}\n    `}_renderHandle(t){const e=this._value2angle(this[t]),i=this._angle2xy(e),s={value:this.valueLabel,low:this.lowLabel,high:this.highLabel}[t]||"";return a.JW` <g class="${t} handle"> <path id="${t}" class="overflow" d="
          M ${i.x} ${i.y}
          L ${i.x+.001} ${i.y+.001}
          " vector-effect="non-scaling-stroke" stroke="rgba(0,0,0,0)" stroke-width="${4*this.handleSize*this._scale}"/> <path id="${t}" class="handle" d="
          M ${i.x} ${i.y}
          L ${i.x+.001} ${i.y+.001}
          " vector-effect="non-scaling-stroke" stroke-width="${2*this.handleSize*this._scale}" tabindex="0" @focus="${this.dragStart}" @blur="${this.dragEnd}" role="slider" aria-valuemin="${this.min}" aria-valuemax="${this.max}" aria-valuenow="${this[t]}" aria-disabled="${this.disabled}" aria-label="${s||""}"/> </g> `}render(){const t=this._boundaries;return a.qy` <svg @mousedown="${this.dragStart}" @touchstart="${this.dragStart}" xmln="http://www.w3.org/2000/svg" viewBox="${-t.left} ${-t.up} ${t.width} ${t.height}" style="margin:${this.handleSize*this.handleZoom}px" ?disabled="${this.disabled}" focusable="false"> <g class="slider"> <path class="path" d="${this._renderArc(this._start,this._end)}" vector-effect="non-scaling-stroke"/> <g class="bar"> ${null!=this.low&&null!=this.high&&this.outside?a.JW` <path class="bar low" vector-effect="non-scaling-stroke" d="${this._renderArc(this._value2angle(this.min),this._value2angle(this.low))}"/> <path class="bar high" vector-effect="non-scaling-stroke" d="${this._renderArc(this._value2angle(this.high),this._value2angle(this.max))}"/> `:a.JW` <path class="bar" vector-effect="non-scaling-stroke" d="${this._renderArc(this._value2angle(null!=this.low?this.low:this.min),this._value2angle(null!=this.high?this.high:this.value))}"/> `} </g> <path class="shadowpath" d="${this._renderArc(this._start,this._end)}" vector-effect="non-scaling-stroke" stroke="rgba(0,0,0,0)" stroke-width="${3*this.handleSize*this._scale}" stroke-linecap="butt"/> </g> <g class="handles"> ${this._showHandle?null!=this.low?this._reverseOrder?a.JW`${this._renderHandle("high")} ${this._renderHandle("low")}`:a.JW`${this._renderHandle("low")} ${this._renderHandle("high")}`:a.JW`${this._renderHandle("value")}`:""} </g> </svg> `}static get styles(){return a.AH`:host{display:inline-block;width:100%}svg{overflow:visible;display:block}path{transition:stroke 1s ease-out,stroke-width .2s ease-out}.slider{fill:none;stroke-width:var(--round-slider-path-width,3);stroke-linecap:var(--round-slider-linecap,round)}.path{stroke:var(--round-slider-path-color,lightgray)}g.bar{stroke:var(--round-slider-bar-color,deepskyblue)}.bar.low{stroke:var(--round-slider-low-bar-color)}.bar.high{stroke:var(--round-slider-high-bar-color)}svg[disabled] .bar{stroke:var(--round-slider-disabled-bar-color,darkgray)}g.handles{stroke:var(--round-slider-handle-color,var(--round-slider-bar-color,deepskyblue));stroke-linecap:round;cursor:var(--round-slider-handle-cursor,pointer)}g.low.handle{stroke:var(--round-slider-low-handle-color)}g.high.handle{stroke:var(--round-slider-high-handle-color)}svg[disabled] g.handles{stroke:var(--round-slider-disabled-bar-color,darkgray)}.handle:focus{outline:unset}`}}(0,s.__decorate)([(0,n.MZ)({type:Number})],o.prototype,"value",void 0),(0,s.__decorate)([(0,n.MZ)({type:Number})],o.prototype,"high",void 0),(0,s.__decorate)([(0,n.MZ)({type:Number})],o.prototype,"low",void 0),(0,s.__decorate)([(0,n.MZ)({type:Number})],o.prototype,"min",void 0),(0,s.__decorate)([(0,n.MZ)({type:Number})],o.prototype,"max",void 0),(0,s.__decorate)([(0,n.MZ)({type:Number})],o.prototype,"step",void 0),(0,s.__decorate)([(0,n.MZ)({type:Number})],o.prototype,"startAngle",void 0),(0,s.__decorate)([(0,n.MZ)({type:Number})],o.prototype,"arcLength",void 0),(0,s.__decorate)([(0,n.MZ)({type:Number})],o.prototype,"handleSize",void 0),(0,s.__decorate)([(0,n.MZ)({type:Number})],o.prototype,"handleZoom",void 0),(0,s.__decorate)([(0,n.MZ)({type:Boolean})],o.prototype,"readonly",void 0),(0,s.__decorate)([(0,n.MZ)({type:Boolean})],o.prototype,"disabled",void 0),(0,s.__decorate)([(0,n.MZ)({type:Boolean,reflect:!0})],o.prototype,"dragging",void 0),(0,s.__decorate)([(0,n.MZ)({type:Boolean})],o.prototype,"rtl",void 0),(0,s.__decorate)([(0,n.MZ)()],o.prototype,"valueLabel",void 0),(0,s.__decorate)([(0,n.MZ)()],o.prototype,"lowLabel",void 0),(0,s.__decorate)([(0,n.MZ)()],o.prototype,"highLabel",void 0),(0,s.__decorate)([(0,n.MZ)({type:Boolean})],o.prototype,"outside",void 0),(0,s.__decorate)([(0,n.wk)()],o.prototype,"_scale",void 0),customElements.define("round-slider",o)},38159:(t,e,i)=>{function s(){const t=new Date,e=t.getFullYear(),i=t.getMonth(),s=t.getDate(),a=new Date(0);return a.setFullYear(e,i,s-1),a.setHours(0,0,0,0),a}i.d(e,{K:()=>s})},65513:(t,e,i)=>{i.d(e,{O:()=>a});var s=i(83324);function a(t,e){return(0,s.L)(t,-e)}}};
//# sourceMappingURL=67992.PDYIr4tjp2A.js.map