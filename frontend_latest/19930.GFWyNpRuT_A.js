export const id=19930;export const ids=[19930,96394,921];export const modules={79682:(t,e,i)=>{i.d(e,{f:()=>n});i(253),i(4525);var a=i(21863),o=i(33922);const n=(t,e)=>(d(e)||s(t,e))&&!l(t,e)&&r(t,e),s=(t,e)=>!e.component||(0,a.e)(e.component).some((e=>(0,o.x)(t,e))),r=(t,e)=>!e.not_component||!(0,a.e)(e.not_component).some((e=>(0,o.x)(t,e))),d=t=>t.core,l=(t,e)=>(t=>t.advancedOnly)(e)&&!(t=>t.userData?.showAdvanced)(t)},37456:(t,e,i)=>{i.d(e,{a:()=>o});const a=(0,i(58034).n)((t=>{history.replaceState({scrollPosition:t},"")}),300),o=t=>e=>({kind:"method",placement:"prototype",key:e.key,descriptor:{set(t){a(t),this[`__${String(e.key)}`]=t},get(){return this[`__${String(e.key)}`]||history.state?.scrollPosition},enumerable:!0,configurable:!0},finisher(i){const a=i.prototype.connectedCallback;i.prototype.connectedCallback=function(){a.call(this);const i=this[e.key];i&&this.updateComplete.then((()=>{const e=this.renderRoot.querySelector(t);e&&setTimeout((()=>{e.scrollTop=i}),0)}))}}})},63516:(t,e,i)=>{i.d(e,{s:()=>a});const a=t=>!(!t.detail.selected||"property"!==t.detail.source)&&(t.currentTarget.selected=!1,!0)},88219:(t,e,i)=>{i.a(t,(async(t,e)=>{try{var a=i(36312),o=i(68689),n=(i(89655),i(253),i(54846),i(16891),i(50289)),s=i(29818),r=i(94100),d=i(34897),l=(i(31511),i(4712)),c=t([l]);l=(c.then?(await c)():c)[0];(0,a.A)([(0,s.EM)("ha-locations-editor")],(function(t,e){class a extends e{constructor(){super(),t(this),this._loadPromise=i.e(44066).then(i.t.bind(i,44066,23)).then((t=>i.e(3874).then(i.t.bind(i,3874,23)).then((()=>(this.Leaflet=t.default,this._updateMarkers(),this.updateComplete.then((()=>this.fitMap())))))))}}return{F:a,d:[{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"locations",value:void 0},{kind:"field",decorators:[(0,s.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"autoFit",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Number})],key:"zoom",value:()=>16},{kind:"field",decorators:[(0,s.MZ)({attribute:"theme-mode",type:String})],key:"themeMode",value:()=>"auto"},{kind:"field",decorators:[(0,s.wk)()],key:"_locationMarkers",value:void 0},{kind:"field",decorators:[(0,s.wk)()],key:"_circles",value:()=>({})},{kind:"field",decorators:[(0,s.P)("ha-map",!0)],key:"map",value:void 0},{kind:"field",key:"Leaflet",value:void 0},{kind:"field",key:"_loadPromise",value:void 0},{kind:"method",key:"fitMap",value:function(t){this.map.fitMap(t)}},{kind:"method",key:"fitBounds",value:function(t,e){this.map.fitBounds(t,e)}},{kind:"method",key:"fitMarker",value:async function(t,e){if(this.Leaflet||await this._loadPromise,!this.map.leafletMap||!this._locationMarkers)return;const i=this._locationMarkers[t];if(i)if("getBounds"in i)this.map.leafletMap.fitBounds(i.getBounds()),i.bringToFront();else{const a=this._circles[t];a?this.map.leafletMap.fitBounds(a.getBounds()):this.map.leafletMap.setView(i.getLatLng(),e?.zoom||this.zoom)}}},{kind:"method",key:"render",value:function(){return n.qy` <ha-map .hass="${this.hass}" .layers="${this._getLayers(this._circles,this._locationMarkers)}" .zoom="${this.zoom}" .autoFit="${this.autoFit}" .themeMode="${this.themeMode}"></ha-map> ${this.helper?n.qy`<ha-input-helper-text>${this.helper}</ha-input-helper-text>`:""} `}},{kind:"field",key:"_getLayers",value:()=>(0,r.A)(((t,e)=>{const i=[];return Array.prototype.push.apply(i,Object.values(t)),e&&Array.prototype.push.apply(i,Object.values(e)),i}))},{kind:"method",key:"willUpdate",value:function(t){(0,o.A)(a,"willUpdate",this,3)([t]),this.Leaflet&&t.has("locations")&&this._updateMarkers()}},{kind:"method",key:"updated",value:function(t){if(this.Leaflet&&t.has("locations")){const e=t.get("locations"),i=this.locations?.filter(((t,i)=>!e[i]||(t.latitude!==e[i].latitude||t.longitude!==e[i].longitude)&&this.map.leafletMap?.getBounds().contains({lat:e[i].latitude,lng:e[i].longitude})&&!this.map.leafletMap?.getBounds().contains({lat:t.latitude,lng:t.longitude})));1===i?.length&&this.map.leafletMap?.panTo({lat:i[0].latitude,lng:i[0].longitude})}}},{kind:"method",key:"_updateLocation",value:function(t){const e=t.target,i=e.getLatLng();let a=i.lng;Math.abs(a)>180&&(a=(a%360+540)%360-180);const o=[i.lat,a];(0,d.r)(this,"location-updated",{id:e.id,location:o},{bubbles:!1})}},{kind:"method",key:"_updateRadius",value:function(t){const e=t.target,i=this._locationMarkers[e.id];(0,d.r)(this,"radius-updated",{id:e.id,radius:i.getRadius()},{bubbles:!1})}},{kind:"method",key:"_markerClicked",value:function(t){const e=t.target;(0,d.r)(this,"marker-clicked",{id:e.id},{bubbles:!1})}},{kind:"method",key:"_updateMarkers",value:function(){if(!this.locations||!this.locations.length)return this._circles={},void(this._locationMarkers=void 0);const t={},e={},i=getComputedStyle(this).getPropertyValue("--accent-color");this.locations.forEach((a=>{let o;if(a.icon||a.iconPath){const t=document.createElement("div");let e;t.className="named-icon",void 0!==a.name&&(t.innerText=a.name),a.icon?(e=document.createElement("ha-icon"),e.setAttribute("icon",a.icon)):(e=document.createElement("ha-svg-icon"),e.setAttribute("path",a.iconPath)),t.prepend(e),o=this.Leaflet.divIcon({html:t.outerHTML,iconSize:[24,24],className:"light"})}if(a.radius){const n=this.Leaflet.circle([a.latitude,a.longitude],{color:a.radius_color||i,radius:a.radius});a.radius_editable||a.location_editable?(n.editing.enable(),n.addEventListener("add",(()=>{const t=n.editing._moveMarker,e=n.editing._resizeMarkers[0];o&&t.setIcon(o),e.id=t.id=a.id,t.addEventListener("dragend",(t=>this._updateLocation(t))).addEventListener("click",(t=>this._markerClicked(t))),a.radius_editable?e.addEventListener("dragend",(t=>this._updateRadius(t))):e.remove()})),t[a.id]=n):e[a.id]=n}if(!a.radius||!a.radius_editable&&!a.location_editable){const e={title:a.name,draggable:a.location_editable};o&&(e.icon=o);const i=this.Leaflet.marker([a.latitude,a.longitude],e).addEventListener("dragend",(t=>this._updateLocation(t))).addEventListener("click",(t=>this._markerClicked(t)));i.id=a.id,t[a.id]=i}})),this._circles=e,this._locationMarkers=t,(0,d.r)(this,"markers-updated")}},{kind:"get",static:!0,key:"styles",value:function(){return n.AH`ha-map{display:block;height:100%}`}}]}}),n.WF);e()}catch(t){e(t)}}))},78223:(t,e,i)=>{i.d(e,{Td:()=>a,iP:()=>o});const a=(t,e)=>t.callWS({type:"config/core/update",...e}),o=t=>t.callApi("POST","config/core/check_config")},2982:(t,e,i)=>{i.d(e,{G5:()=>s,Rz:()=>l,TW:()=>n,YC:()=>o,Yx:()=>r,kg:()=>c});var a=i(16312);const o=t=>t.callWS({type:"zone/list"}),n=(t,e)=>t.callWS({type:"zone/create",...e}),s=(t,e,i)=>t.callWS({type:"zone/update",zone_id:e,...i}),r=(t,e)=>t.callWS({type:"zone/delete",zone_id:e});let d;const l=t=>{d=t,(0,a.o)("/config/zone/new")},c=()=>{const t=d;return d=void 0,t}},96394:(t,e,i)=>{i.r(e);var a=i(36312),o=i(50289),n=i(29818),s=(i(32885),i(45346),i(11804),i(55321));(0,a.A)([(0,n.EM)("hass-loading-screen")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.MZ)({type:Boolean,attribute:"no-toolbar"})],key:"noToolbar",value:()=>!1},{kind:"field",decorators:[(0,n.MZ)({type:Boolean})],key:"rootnav",value:()=>!1},{kind:"field",decorators:[(0,n.MZ)({type:Boolean})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,n.MZ)()],key:"message",value:void 0},{kind:"method",key:"render",value:function(){return o.qy` ${this.noToolbar?"":o.qy`<div class="toolbar"> ${this.rootnav||history.state?.root?o.qy` <ha-menu-button .hass="${this.hass}" .narrow="${this.narrow}"></ha-menu-button> `:o.qy` <ha-icon-button-arrow-prev .hass="${this.hass}" @click="${this._handleBack}"></ha-icon-button-arrow-prev> `} </div>`} <div class="content"> <ha-circular-progress indeterminate></ha-circular-progress> ${this.message?o.qy`<div id="loading-text">${this.message}</div>`:o.s6} </div> `}},{kind:"method",key:"_handleBack",value:function(){history.back()}},{kind:"get",static:!0,key:"styles",value:function(){return[s.RF,o.AH`:host{display:block;height:100%;background-color:var(--primary-background-color)}.toolbar{display:flex;align-items:center;font-size:20px;height:var(--header-height);padding:8px 12px;pointer-events:none;background-color:var(--app-header-background-color);font-weight:400;color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box}@media (max-width:599px){.toolbar{padding:4px}}ha-icon-button-arrow-prev,ha-menu-button{pointer-events:auto}.content{height:calc(100% - var(--header-height));display:flex;flex-direction:column;align-items:center;justify-content:center}#loading-text{max-width:350px;margin-top:16px}`]}}]}}),o.WF)},921:(t,e,i)=>{var a=i(36312),o=i(68689),n=(i(253),i(2075),i(94438),i(16891),i(50289)),s=i(29818),r=i(85323),d=i(94100),l=i(37456),c=(i(45346),i(11804),i(88400),i(17081),i(55321)),h=i(79682);(0,a.A)([(0,s.EM)("hass-tabs-subpage")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"supervisor",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"localizeFunc",value:void 0},{kind:"field",decorators:[(0,s.MZ)({type:String,attribute:"back-path"})],key:"backPath",value:void 0},{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"backCallback",value:void 0},{kind:"field",decorators:[(0,s.MZ)({type:Boolean,attribute:"main-page"})],key:"mainPage",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"route",value:void 0},{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"tabs",value:void 0},{kind:"field",decorators:[(0,s.MZ)({type:Boolean,reflect:!0})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean,reflect:!0,attribute:"is-wide"})],key:"isWide",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"pane",value:()=>!1},{kind:"field",decorators:[(0,s.wk)()],key:"_activeTab",value:void 0},{kind:"field",decorators:[(0,l.a)(".content")],key:"_savedScrollPos",value:void 0},{kind:"field",key:"_getTabs",value(){return(0,d.A)(((t,e,i,a,o,s)=>{const r=t.filter((t=>(0,h.f)(this.hass,t)));if(r.length<2){if(1===r.length){const t=r[0];return[t.translationKey?s(t.translationKey):t.name]}return[""]}return r.map((t=>n.qy` <a href="${t.path}"> <ha-tab .hass="${this.hass}" .active="${t.path===e?.path}" .narrow="${this.narrow}" .name="${t.translationKey?s(t.translationKey):t.name}"> ${t.iconPath?n.qy`<ha-svg-icon slot="icon" .path="${t.iconPath}"></ha-svg-icon>`:""} </ha-tab> </a> `))}))}},{kind:"method",key:"willUpdate",value:function(t){t.has("route")&&(this._activeTab=this.tabs.find((t=>`${this.route.prefix}${this.route.path}`.includes(t.path)))),(0,o.A)(i,"willUpdate",this,3)([t])}},{kind:"method",key:"render",value:function(){const t=this._getTabs(this.tabs,this._activeTab,this.hass.config.components,this.hass.language,this.narrow,this.localizeFunc||this.hass.localize),e=t.length>1;return n.qy` <div class="toolbar"> <slot name="toolbar"> <div class="toolbar-content"> ${this.mainPage||!this.backPath&&history.state?.root?n.qy` <ha-menu-button .hassio="${this.supervisor}" .hass="${this.hass}" .narrow="${this.narrow}"></ha-menu-button> `:this.backPath?n.qy` <a href="${this.backPath}"> <ha-icon-button-arrow-prev .hass="${this.hass}"></ha-icon-button-arrow-prev> </a> `:n.qy` <ha-icon-button-arrow-prev .hass="${this.hass}" @click="${this._backTapped}"></ha-icon-button-arrow-prev> `} ${this.narrow||!e?n.qy`<div class="main-title"> <slot name="header">${e?"":t[0]}</slot> </div>`:""} ${e&&!this.narrow?n.qy`<div id="tabbar">${t}</div>`:""} <div id="toolbar-icon"> <slot name="toolbar-icon"></slot> </div> </div> </slot> ${e&&this.narrow?n.qy`<div id="tabbar" class="bottom-bar">${t}</div>`:""} </div> <div class="container"> ${this.pane?n.qy`<div class="pane"> <div class="shadow-container"></div> <div class="ha-scrollbar"> <slot name="pane"></slot> </div> </div>`:n.s6} <div class="content ha-scrollbar ${(0,r.H)({tabs:e})}" @scroll="${this._saveScrollPos}"> <slot></slot> </div> </div> <div id="fab" class="${(0,r.H)({tabs:e})}"> <slot name="fab"></slot> </div> `}},{kind:"method",decorators:[(0,s.Ls)({passive:!0})],key:"_saveScrollPos",value:function(t){this._savedScrollPos=t.target.scrollTop}},{kind:"method",key:"_backTapped",value:function(){this.backCallback?this.backCallback():history.back()}},{kind:"get",static:!0,key:"styles",value:function(){return[c.dp,n.AH`:host{display:block;height:100%;background-color:var(--primary-background-color)}:host([narrow]){width:100%;position:fixed}.container{display:flex;height:calc(100% - var(--header-height))}:host([narrow]) .container{height:100%}ha-menu-button{margin-right:24px;margin-inline-end:24px;margin-inline-start:initial}.toolbar{font-size:20px;height:var(--header-height);background-color:var(--sidebar-background-color);font-weight:400;border-bottom:1px solid var(--divider-color);box-sizing:border-box}.toolbar-content{padding:8px 12px;display:flex;align-items:center;height:100%;box-sizing:border-box}@media (max-width:599px){.toolbar-content{padding:4px}}.toolbar a{color:var(--sidebar-text-color);text-decoration:none}.bottom-bar a{width:25%}#tabbar{display:flex;font-size:14px;overflow:hidden}#tabbar>a{overflow:hidden;max-width:45%}#tabbar.bottom-bar{position:absolute;bottom:0;left:0;padding:0 16px;box-sizing:border-box;background-color:var(--sidebar-background-color);border-top:1px solid var(--divider-color);justify-content:space-around;z-index:2;font-size:12px;width:100%;padding-bottom:env(safe-area-inset-bottom)}#tabbar:not(.bottom-bar){flex:1;justify-content:center}:host(:not([narrow])) #toolbar-icon{min-width:40px}::slotted([slot=toolbar-icon]),ha-icon-button-arrow-prev,ha-menu-button{display:flex;flex-shrink:0;pointer-events:auto;color:var(--sidebar-icon-color)}.main-title{flex:1;max-height:var(--header-height);line-height:20px;color:var(--sidebar-text-color);margin:var(--main-title-margin,var(--margin-title))}.content{position:relative;width:calc(100% - env(safe-area-inset-left) - env(safe-area-inset-right));margin-left:env(safe-area-inset-left);margin-right:env(safe-area-inset-right);margin-inline-start:env(safe-area-inset-left);margin-inline-end:env(safe-area-inset-right);overflow:auto;-webkit-overflow-scrolling:touch}:host([narrow]) .content.tabs{height:calc(100% - 2 * var(--header-height));height:calc(100% - 2 * var(--header-height) - env(safe-area-inset-bottom))}#fab{position:fixed;right:calc(16px + env(safe-area-inset-right));inset-inline-end:calc(16px + env(safe-area-inset-right));inset-inline-start:initial;bottom:calc(16px + env(safe-area-inset-bottom));z-index:1;display:flex;flex-wrap:wrap;justify-content:flex-end;gap:8px}:host([narrow]) #fab.tabs{bottom:calc(84px + env(safe-area-inset-bottom))}#fab[is-wide]{bottom:24px;right:24px;inset-inline-end:24px;inset-inline-start:initial}.pane{border-right:1px solid var(--divider-color);border-inline-end:1px solid var(--divider-color);border-inline-start:initial;box-sizing:border-box;display:flex;flex:0 0 var(--sidepane-width,250px);width:var(--sidepane-width,250px);flex-direction:column;position:relative}.pane .ha-scrollbar{flex:1}`]}}]}}),n.WF)},71622:(t,e,i)=>{var a=i(36312),o=i(50289),n=i(29818),s=i(85323);(0,a.A)([(0,n.EM)("ha-config-section")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,n.MZ)({type:Boolean})],key:"isWide",value:()=>!1},{kind:"field",decorators:[(0,n.MZ)({type:Boolean})],key:"vertical",value:()=>!1},{kind:"field",decorators:[(0,n.MZ)({type:Boolean,attribute:"full-width"})],key:"fullWidth",value:()=>!1},{kind:"method",key:"render",value:function(){return o.qy` <div class="content ${(0,s.H)({narrow:!this.isWide,"full-width":this.fullWidth})}"> <div class="header"><slot name="header"></slot></div> <div class="together layout ${(0,s.H)({narrow:!this.isWide,vertical:this.vertical||!this.isWide,horizontal:!this.vertical&&this.isWide})}"> <div class="intro"><slot name="introduction"></slot></div> <div class="panel flex-auto"><slot></slot></div> </div> </div> `}},{kind:"get",static:!0,key:"styles",value:function(){return o.AH`:host{display:block}.content{padding:28px 20px 0;max-width:1040px;margin:0 auto}.layout{display:flex}.horizontal{flex-direction:row}.vertical{flex-direction:column}.flex-auto{flex:1 1 auto}.header{font-family:var(--paper-font-headline_-_font-family);-webkit-font-smoothing:var(--paper-font-headline_-_-webkit-font-smoothing);font-size:var(--paper-font-headline_-_font-size);font-weight:var(--paper-font-headline_-_font-weight);letter-spacing:var(--paper-font-headline_-_letter-spacing);line-height:var(--paper-font-headline_-_line-height);opacity:var(--dark-primary-opacity)}.together{margin-top:32px}.intro{font-family:var(--paper-font-subhead_-_font-family);-webkit-font-smoothing:var(--paper-font-subhead_-_-webkit-font-smoothing);font-weight:var(--paper-font-subhead_-_font-weight);line-height:var(--paper-font-subhead_-_line-height);width:100%;opacity:var(--dark-primary-opacity);font-size:14px;padding-bottom:20px}.horizontal .intro{max-width:400px;margin-right:40px;margin-inline-end:40px;margin-inline-start:initial}.panel{margin-top:-24px}.panel ::slotted(*){margin-top:24px;display:block}.narrow.content{max-width:640px}.narrow .together{margin-top:20px}.narrow .intro{padding-bottom:20px;margin-right:0;margin-inline-end:0;margin-inline-start:initial;max-width:500px}.full-width{padding:0}.full-width .layout{flex-direction:column}`}}]}}),o.WF)},19930:(t,e,i)=>{i.a(t,(async(t,a)=>{try{i.r(e),i.d(e,{HaConfigZone:()=>M});var o=i(36312),n=i(68689),s=(i(253),i(2075),i(94438),i(16891),i(74860),i(71011),i(71174),i(7986),i(63893),i(50289)),r=i(29818),d=i(94100),l=i(65459),c=i(63516),h=i(16312),u=i(2682),p=(i(13082),i(52427),i(4169),i(13830),i(88400),i(88219)),m=i(78223),v=i(54108),f=i(2982),y=i(6121),g=(i(96394),i(921),i(20712)),k=(i(71622),i(25473)),b=i(85462),_=i(8946),x=t([p]);p=(x.then?(await x)():x)[0];const w="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",$="M18.66,2C18.4,2 18.16,2.09 17.97,2.28L16.13,4.13L19.88,7.88L21.72,6.03C22.11,5.64 22.11,5 21.72,4.63L19.38,2.28C19.18,2.09 18.91,2 18.66,2M3.28,4L2,5.28L8.5,11.75L4,16.25V20H7.75L12.25,15.5L18.72,22L20,20.72L13.5,14.25L9.75,10.5L3.28,4M15.06,5.19L11.03,9.22L14.78,12.97L18.81,8.94L15.06,5.19Z",z="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z";let M=(0,o.A)([(0,r.EM)("ha-config-zone")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.MZ)({type:Boolean})],key:"isWide",value:()=>!1},{kind:"field",decorators:[(0,r.MZ)({type:Boolean})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"route",value:void 0},{kind:"field",decorators:[(0,r.wk)()],key:"_searchParms",value:()=>new URLSearchParams(window.location.search)},{kind:"field",decorators:[(0,r.wk)()],key:"_storageItems",value:void 0},{kind:"field",decorators:[(0,r.wk)()],key:"_stateItems",value:void 0},{kind:"field",decorators:[(0,r.wk)()],key:"_activeEntry",value:()=>""},{kind:"field",decorators:[(0,r.wk)()],key:"_canEditCore",value:()=>!1},{kind:"field",decorators:[(0,r.P)("ha-locations-editor")],key:"_map",value:void 0},{kind:"field",key:"_regEntities",value:()=>[]},{kind:"field",key:"_getZones",value(){return(0,d.A)(((t,e)=>{const i=getComputedStyle(this),a=i.getPropertyValue("--accent-color"),o=i.getPropertyValue("--secondary-text-color"),n=i.getPropertyValue("--primary-color"),s=e.map((t=>({id:t.entity_id,icon:t.attributes.icon,name:t.attributes.friendly_name||t.entity_id,latitude:t.attributes.latitude,longitude:t.attributes.longitude,radius:t.attributes.radius,radius_color:"zone.home"===t.entity_id?n:t.attributes.passive?o:a,location_editable:"zone.home"===t.entity_id&&this._canEditCore,radius_editable:"zone.home"===t.entity_id&&this._canEditCore})));return t.map((t=>({...t,radius_color:t.passive?o:a,location_editable:!0,radius_editable:!0}))).concat(s)}))}},{kind:"method",key:"hassSubscribe",value:function(){return[(0,v.Bz)(this.hass.connection,(t=>{this._regEntities=t.map((t=>t.entity_id)),this._filterStates()}))]}},{kind:"method",key:"render",value:function(){if(!this.hass||void 0===this._storageItems||void 0===this._stateItems)return s.qy`<hass-loading-screen></hass-loading-screen>`;const t=this.hass,e=0===this._storageItems.length&&0===this._stateItems.length?s.qy` <div class="empty"> ${t.localize("ui.panel.config.zone.no_zones_created_yet")} <br> <mwc-button @click="${this._createZone}"> ${t.localize("ui.panel.config.zone.create_zone")}</mwc-button> </div> `:s.qy` <mwc-list> ${this._storageItems.map((e=>s.qy` <ha-list-item .entry="${e}" .id="${this.narrow?e.id:""}" graphic="icon" .hasMeta="${!this.narrow}" @request-selected="${this._itemClicked}" .value="${e.id}" ?selected="${this._activeEntry===e.id}"> <ha-icon .icon="${e.icon}" slot="graphic"></ha-icon> ${e.name} ${this.narrow?"":s.qy` <div slot="meta"> <ha-icon-button .id="${e.id}" .entry="${e}" @click="${this._openEditEntry}" .path="${w}" .label="${t.localize("ui.panel.config.zone.edit_zone")}"></ha-icon-button> </div> `} </ha-list-item> `))} ${this._stateItems.map((e=>s.qy` <ha-list-item graphic="icon" .id="${this.narrow?e.entity_id:""}" .hasMeta="${!this.narrow||"zone.home"!==e.entity_id}" .value="${e.entity_id}" @request-selected="${this._stateItemClicked}" ?selected="${this._activeEntry===e.entity_id}" .noEdit="${"zone.home"!==e.entity_id||!this._canEditCore}"> <ha-icon .icon="${e.attributes.icon}" slot="graphic"> </ha-icon> ${e.attributes.friendly_name||e.entity_id} ${this.narrow&&"zone.home"===e.entity_id&&!this._canEditCore?s.s6:s.qy`<div slot="meta"> <ha-icon-button .id="${this.narrow?"":e.entity_id}" .entityId="${e.entity_id}" .noEdit="${"zone.home"!==e.entity_id||!this._canEditCore}" .path="${"zone.home"===e.entity_id&&this._canEditCore?w:$}" .label="${"zone.home"===e.entity_id?t.localize("ui.panel.config.zone.edit_home"):t.localize("ui.panel.config.zone.edit_zone")}" @click="${this._editHomeZone}"></ha-icon-button> ${"zone.home"!==e.entity_id?s.qy` <simple-tooltip animation-delay="0" position="left"> ${t.localize("ui.panel.config.zone.configured_in_yaml")} </simple-tooltip> `:""} </div>`} </ha-list-item> `))} </mwc-list> `;return s.qy` <hass-tabs-subpage .hass="${this.hass}" .narrow="${this.narrow}" .route="${this.route}" .backPath="${this._searchParms.has("historyBack")?void 0:"/config"}" .tabs="${k.configSections.areas}"> ${this.narrow?s.qy` <ha-config-section .isWide="${this.isWide}"> <span slot="introduction"> ${t.localize("ui.panel.config.zone.introduction")} </span> <ha-card outlined>${e}</ha-card> </ha-config-section> `:""} ${this.narrow?"":s.qy` <div class="flex"> <ha-locations-editor .hass="${this.hass}" .locations="${this._getZones(this._storageItems,this._stateItems)}" @location-updated="${this._locationUpdated}" @radius-updated="${this._radiusUpdated}" @marker-clicked="${this._markerClicked}"></ha-locations-editor> <div class="overflow">${e}</div> </div> `} <ha-fab slot="fab" .label="${t.localize("ui.panel.config.zone.add_zone")}" extended @click="${this._createZone}"> <ha-svg-icon slot="icon" .path="${z}"></ha-svg-icon> </ha-fab> </hass-tabs-subpage> `}},{kind:"method",key:"firstUpdated",value:function(t){(0,n.A)(i,"firstUpdated",this,3)([t]),this._canEditCore=Boolean(this.hass.user?.is_admin)&&["storage","default"].includes(this.hass.config.config_source),this._fetchData(),"/new"===this.route.path&&((0,h.o)("/config/zone",{replace:!0}),this._createZone())}},{kind:"method",key:"updated",value:function(){if(!this.route.path.startsWith("/edit/")||!this._stateItems||!this._storageItems)return;const t=this.route.path.slice(6);this._editZone(t),(0,h.o)("/config/zone",{replace:!0}),this.narrow||this._zoomZone(t)}},{kind:"method",key:"willUpdate",value:function(t){(0,n.A)(i,"updated",this,3)([t]);const e=t.get("hass");e&&this._stateItems&&this._getStates(e)}},{kind:"method",key:"_fetchData",value:async function(){this._storageItems=(await(0,f.YC)(this.hass)).sort(((t,e)=>(0,u.x)(t.name,e.name,this.hass.locale.language))),this._getStates()}},{kind:"method",key:"_getStates",value:function(t){let e=!1;const i=Object.values(this.hass.states).filter((i=>"zone"===(0,l.t)(i)&&(t?.states[i.entity_id]!==i&&(e=!0),!this._regEntities.includes(i.entity_id))));e&&(this._stateItems=i)}},{kind:"method",key:"_filterStates",value:function(){if(!this._stateItems)return;const t=this._stateItems.filter((t=>!this._regEntities.includes(t.entity_id)));t.length!==this._stateItems.length&&(this._stateItems=t)}},{kind:"method",key:"_locationUpdated",value:async function(t){if(this._activeEntry=t.detail.id,"zone.home"===t.detail.id&&this._canEditCore)return void await(0,m.Td)(this.hass,{latitude:t.detail.location[0],longitude:t.detail.location[1]});const e=this._storageItems.find((e=>e.id===t.detail.id));e&&this._updateEntry(e,{latitude:t.detail.location[0],longitude:t.detail.location[1]})}},{kind:"method",key:"_radiusUpdated",value:async function(t){if(this._activeEntry=t.detail.id,"zone.home"===t.detail.id&&this._canEditCore)return void await(0,m.Td)(this.hass,{radius:Math.round(t.detail.radius)});const e=this._storageItems.find((e=>e.id===t.detail.id));e&&this._updateEntry(e,{radius:t.detail.radius})}},{kind:"method",key:"_markerClicked",value:function(t){this._activeEntry=t.detail.id}},{kind:"method",key:"_createZone",value:function(){this._openDialog()}},{kind:"method",key:"_itemClicked",value:function(t){if(!(0,c.s)(t))return;if(this.narrow)return void this._openEditEntry(t);const e=t.currentTarget.value;this._zoomZone(e),this._activeEntry=e}},{kind:"method",key:"_stateItemClicked",value:function(t){if(!(0,c.s)(t))return;const e=t.currentTarget.value;this.narrow&&"zone.home"===e?this._editHomeZone(t):(this._zoomZone(e),this._activeEntry=e)}},{kind:"method",key:"_zoomZone",value:async function(t){this._map?.fitMarker(t)}},{kind:"method",key:"_editZone",value:async function(t){await this.updateComplete,this.shadowRoot?.querySelector(`[id="${t}"]`)?.click()}},{kind:"method",key:"_openEditEntry",value:function(t){const e=t.currentTarget.entry;this._openDialog(e),t.stopPropagation()}},{kind:"method",key:"_editHomeZone",value:async function(t){t.currentTarget.noEdit?(0,y.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.zone.can_not_edit"),text:this.hass.localize("ui.panel.config.zone.configured_in_yaml"),confirm:()=>{}}):(0,b.k)(this,{updateEntry:t=>this._updateHomeZoneEntry(t)})}},{kind:"method",key:"_createEntry",value:async function(t){const e=await(0,f.TW)(this.hass,t);this._storageItems=this._storageItems.concat(e).sort(((t,e)=>(0,u.x)(t.name,e.name,this.hass.locale.language))),this.narrow||(this._activeEntry=e.id,await this.updateComplete,await(this._map?.updateComplete),this._map?.fitMarker(e.id))}},{kind:"method",key:"_updateHomeZoneEntry",value:async function(t){await(0,m.Td)(this.hass,{latitude:t.latitude,longitude:t.longitude,radius:t.radius}),this._zoomZone("zone.home")}},{kind:"method",key:"_updateEntry",value:async function(t,e,i=!1){const a=await(0,f.G5)(this.hass,t.id,e);this._storageItems=this._storageItems.map((e=>e===t?a:e)),!this.narrow&&i&&(this._activeEntry=t.id,await this.updateComplete,await(this._map?.updateComplete),this._map?.fitMarker(t.id))}},{kind:"method",key:"_removeEntry",value:async function(t){if(!await(0,y.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.zone.confirm_delete"),dismissText:this.hass.localize("ui.common.cancel"),confirmText:this.hass.localize("ui.common.delete")}))return!1;try{return await(0,f.Yx)(this.hass,t.id),this._storageItems=this._storageItems.filter((e=>e!==t)),this.narrow||this._map?.fitMap(),!0}catch(t){return!1}}},{kind:"method",key:"_openDialog",value:async function(t){(0,_.b)(this,{entry:t,createEntry:t=>this._createEntry(t),updateEntry:t?e=>this._updateEntry(t,e,!0):void 0,removeEntry:t?()=>this._removeEntry(t):void 0})}},{kind:"get",static:!0,key:"styles",value:function(){return s.AH`hass-loading-screen{--app-header-background-color:var(--sidebar-background-color);--app-header-text-color:var(--sidebar-text-color)}ha-list-item{--mdc-list-item-meta-size:48px}a{color:var(--primary-color)}ha-card{margin:16px auto;overflow:hidden}ha-icon,ha-icon-button:not([disabled]){color:var(--secondary-text-color)}ha-icon-button{--mdc-theme-text-disabled-on-light:var(--disabled-text-color)}.empty{text-align:center;padding:8px}.flex{display:flex;height:100%}.overflow{height:100%;overflow:auto}ha-locations-editor{flex-grow:1;height:100%}.flex mwc-list{padding-bottom:64px}.flex .empty,.flex mwc-list{border-left:1px solid var(--divider-color);width:250px;min-height:100%;box-sizing:border-box}ha-card{margin-bottom:100px}`}}]}}),(0,g.E)(s.WF));a()}catch(t){a(t)}}))},85462:(t,e,i)=>{i.d(e,{k:()=>n});var a=i(34897);const o=()=>i.e(21290).then(i.bind(i,21290)),n=(t,e)=>{(0,a.r)(t,"show-dialog",{dialogTag:"dialog-home-zone-detail",dialogImport:o,dialogParams:e})}},8946:(t,e,i)=>{i.d(e,{b:()=>n});var a=i(34897);const o=()=>i.e(28933).then(i.bind(i,28933)),n=(t,e)=>{(0,a.r)(t,"show-dialog",{dialogTag:"dialog-zone-detail",dialogImport:o,dialogParams:e})}}};
//# sourceMappingURL=19930.GFWyNpRuT_A.js.map