export const id=45881;export const ids=[45881];export const modules={45881:(e,i,a)=>{a.r(i),a.d(i,{HaFileSelector:()=>r});var l=a(36312),t=a(68689),s=a(50289),o=a(29818),d=a(34897);var n=a(6121);a(58954);let r=(0,l.A)([(0,o.EM)("ha-selector-file")],(function(e,i){class a extends i{constructor(...i){super(...i),e(this)}}return{F:a,d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"selector",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,o.MZ)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,o.MZ)({type:Boolean})],key:"required",value:()=>!0},{kind:"field",decorators:[(0,o.wk)()],key:"_filename",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_busy",value:()=>!1},{kind:"method",key:"render",value:function(){return s.qy` <ha-file-upload .hass="${this.hass}" .accept="${this.selector.file?.accept}" .icon="${"M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z"}" .label="${this.label}" .required="${this.required}" .disabled="${this.disabled}" .supports="${this.helper}" .uploading="${this._busy}" .value="${this.value?this._filename?.name||this.hass.localize("ui.components.selectors.file.unknown_file"):void 0}" @file-picked="${this._uploadFile}" @change="${this._removeFile}"></ha-file-upload> `}},{kind:"method",key:"willUpdate",value:function(e){(0,t.A)(a,"willUpdate",this,3)([e]),e.has("value")&&this._filename&&this.value!==this._filename.fileId&&(this._filename=void 0)}},{kind:"method",key:"_uploadFile",value:async function(e){this._busy=!0;const i=e.detail.files[0];try{const e=await(async(e,i)=>{const a=new FormData;a.append("file",i);const l=await e.fetchWithAuth("/api/file_upload",{method:"POST",body:a});if(413===l.status)throw new Error(`Uploaded file is too large (${i.name})`);if(200!==l.status)throw new Error("Unknown error");return(await l.json()).file_id})(this.hass,i);this._filename={fileId:e,name:i.name},(0,d.r)(this,"value-changed",{value:e})}catch(e){(0,n.showAlertDialog)(this,{text:this.hass.localize("ui.components.selectors.file.upload_failed",{reason:e.message||e})})}finally{this._busy=!1}}},{kind:"field",key:"_removeFile",value(){return async()=>{this._busy=!0;try{await(async(e,i)=>e.callApi("DELETE","file_upload",{file_id:i}))(this.hass,this.value)}catch(e){}finally{this._busy=!1}this._filename=void 0,(0,d.r)(this,"value-changed",{value:""})}}}]}}),s.WF)}};
//# sourceMappingURL=45881.sc9v3tKBkJs.js.map