export const id=49721;export const ids=[49721];export const modules={96961:(e,i,t)=>{t.d(i,{JW:()=>v,OW:()=>m,PO:()=>c,VN:()=>n,XG:()=>r,eB:()=>g,gZ:()=>p,hM:()=>l,k2:()=>d,lU:()=>h,nc:()=>u,vX:()=>_,z1:()=>o});t(24545),t(51855),t(82130),t(31743),t(22328),t(4959),t(62435),t(253),t(2075),t(94438),t(16891);var a=t(16312),s=t(10725);let o=function(e){return e.THREAD="thread",e.WIFI="wifi",e.ETHERNET="ethernet",e.UNKNOWN="unknown",e}({});const d=e=>e.auth.external?.config.canCommissionMatter,n=e=>e.auth.external.fireMessage({type:"matter/commission"}),l=(e,i)=>{let t;const o=(0,s.Ag)(e.connection,(e=>{if(!t)return void(t=new Set(Object.values(e).filter((e=>e.identifiers.find((e=>"matter"===e[0])))).map((e=>e.id))));const s=Object.values(e).filter((e=>e.identifiers.find((e=>"matter"===e[0]))&&!t.has(e.id)));s.length&&(o(),t=void 0,i?.(),(0,a.o)(`/config/devices/device/${s[0].id}`))}));return()=>{o(),t=void 0}},c=(e,i)=>e.callWS({type:"matter/commission",code:i}),r=(e,i)=>e.callWS({type:"matter/commission_on_network",pin:i}),h=(e,i,t)=>e.callWS({type:"matter/set_wifi_credentials",network_name:i,password:t}),p=(e,i)=>e.callWS({type:"matter/set_thread",thread_operation_dataset:i}),g=(e,i)=>e.callWS({type:"matter/node_diagnostics",device_id:i}),m=(e,i)=>e.callWS({type:"matter/ping_node",device_id:i}),u=(e,i)=>e.callWS({type:"matter/open_commissioning_window",device_id:i}),_=(e,i,t)=>e.callWS({type:"matter/remove_matter_fabric",device_id:i,fabric_index:t}),v=(e,i)=>e.callWS({type:"matter/interview_node",device_id:i})},49721:(e,i,t)=>{var a=t(36312),s=t(50289),o=t(29818),d=t(85920),n=t(34897),l=(t(10900),t(4169),t(45346),t(96961)),c=t(55321);t(46163),t(71393),t(62807);const r=s.AH`.content{padding:16px var(--horizontal-padding,16px)}p{margin:0}p:not(:last-child){margin-bottom:8px}ol{padding-inline-start:20px;margin-block-start:0;margin-block-end:8px}li{margin-bottom:8px}.link{color:var(--primary-color);cursor:pointer;text-decoration:underline}ha-list-new{padding:0;--md-list-item-leading-space:var(--horizontal-padding, 16px);--md-list-item-trailing-space:var(--horizontal-padding, 16px);margin-bottom:16px}ha-textfield{width:100%}`;(0,a.A)([(0,o.EM)("matter-add-device-apple-home")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_code",value:()=>""},{kind:"method",key:"render",value:function(){return s.qy` <div class="content"> <ol> <li> ${this.hass.localize("ui.dialogs.matter-add-device.apple_home.step_1",{accessory_settings:s.qy`<b>${this.hass.localize("ui.dialogs.matter-add-device.apple_home.accessory_settings")}</b>`})} </li> <li> ${this.hass.localize("ui.dialogs.matter-add-device.apple_home.step_2",{turn_on_pairing_mode:s.qy`<b>${this.hass.localize("ui.dialogs.matter-add-device.apple_home.turn_on_pairing_mode")}</b>`})} </li> <li> ${this.hass.localize("ui.dialogs.matter-add-device.apple_home.step_3")} </li> </ol> <br> <p> ${this.hass.localize("ui.dialogs.matter-add-device.apple_home.code_instructions")} </p> <ha-textfield label="${this.hass.localize("ui.dialogs.matter-add-device.apple_home.setup_code")}" .value="${this._code}" @input="${this._onCodeChanged}"></ha-textfield> </div> `}},{kind:"method",key:"_onCodeChanged",value:function(e){const i=e.currentTarget.value;this._code=i,(0,n.r)(this,"pairing-code-changed",{code:i})}},{kind:"field",static:!0,key:"styles",value:()=>[r]}]}}),s.WF);(0,a.A)([(0,o.EM)("matter-add-device-existing")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"method",key:"render",value:function(){return s.qy` <div class="content"> <p> ${this.hass.localize("ui.dialogs.matter-add-device.existing.question")} </p> </div> <ha-list-new> <ha-list-item-new interactive type="button" .step="${"google_home"}" @click="${this._onItemClick}" @keydown="${this._onItemClick}"> <img src="/static/images/logo_google_home.png" alt="" class="logo" slot="start"> <span slot="headline"> ${this.hass.localize("ui.dialogs.matter-add-device.existing.answer_google_home")} </span> <ha-icon-next slot="end"></ha-icon-next> </ha-list-item-new> <ha-list-item-new interactive type="button" .step="${"apple_home"}" @click="${this._onItemClick}" @keydown="${this._onItemClick}"> <img src="/static/images/logo_apple_home.png" alt="" class="logo" slot="start"> <span slot="headline"> ${this.hass.localize("ui.dialogs.matter-add-device.existing.answer_apple_home")} </span> <ha-icon-next slot="end"></ha-icon-next> </ha-list-item-new> <ha-list-item-new interactive type="button" .step="${"generic"}" @click="${this._onItemClick}" @keydown="${this._onItemClick}"> <div class="logo" slot="start"> <ha-svg-icon path="${"M12,3L2,12H5V20H19V12H22L12,3M12,8.5C14.34,8.5 16.46,9.43 18,10.94L16.8,12.12C15.58,10.91 13.88,10.17 12,10.17C10.12,10.17 8.42,10.91 7.2,12.12L6,10.94C7.54,9.43 9.66,8.5 12,8.5M12,11.83C13.4,11.83 14.67,12.39 15.6,13.3L14.4,14.47C13.79,13.87 12.94,13.5 12,13.5C11.06,13.5 10.21,13.87 9.6,14.47L8.4,13.3C9.33,12.39 10.6,11.83 12,11.83M12,15.17C12.94,15.17 13.7,15.91 13.7,16.83C13.7,17.75 12.94,18.5 12,18.5C11.06,18.5 10.3,17.75 10.3,16.83C10.3,15.91 11.06,15.17 12,15.17Z"}"></ha-svg-icon> </div> <span slot="headline"> ${this.hass.localize("ui.dialogs.matter-add-device.existing.answer_generic")} </span> <ha-icon-next slot="end"></ha-icon-next> </ha-list-item-new> </ha-list-new> `}},{kind:"method",key:"_onItemClick",value:function(e){if("keydown"===e.type&&"Enter"!==e.key&&" "!==e.key)return;const i=e.currentTarget.step;(0,n.r)(this,"step-selected",{step:i})}},{kind:"field",static:!0,key:"styles",value:()=>[r,s.AH`.logo{width:48px;height:48px;border-radius:12px;border:1px solid var(--divider-color);padding:10px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;object-fit:contain}.logo ha-svg-icon{--mdc-icon-size:36px}`]}]}}),s.WF),(0,a.A)([(0,o.EM)("matter-add-device-generic")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_code",value:()=>""},{kind:"method",key:"render",value:function(){return s.qy` <div class="content"> <p> ${this.hass.localize("ui.dialogs.matter-add-device.generic.code_instructions")} </p> <ha-textfield label="${this.hass.localize("ui.dialogs.matter-add-device.generic.setup_code")}" .value="${this._code}" @input="${this._onCodeChanged}"></ha-textfield> </div> `}},{kind:"method",key:"_onCodeChanged",value:function(e){const i=e.currentTarget.value;this._code=i,(0,n.r)(this,"pairing-code-changed",{code:i})}},{kind:"field",static:!0,key:"styles",value:()=>[r]}]}}),s.WF),(0,a.A)([(0,o.EM)("matter-add-device-google-home")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"method",key:"render",value:function(){return s.qy` <div class="content"> <ol> <li> ${this.hass.localize("ui.dialogs.matter-add-device.google_home.step_1")} </li> <li> ${this.hass.localize("ui.dialogs.matter-add-device.google_home.step_2",{linked_matter_apps_services:s.qy`<b>${this.hass.localize("ui.dialogs.matter-add-device.google_home.linked_matter_apps_services")}</b>`})} </li> <li> ${this.hass.localize("ui.dialogs.matter-add-device.google_home.step_3",{link_apps_services:s.qy`<b>${this.hass.localize("ui.dialogs.matter-add-device.google_home.link_apps_services")}</b>`,home_assistant:s.qy`<b>Home Assistant</b>`})} <br> <span class="link" type="button" tabindex="0" @keydown="${this._nextStep}" @click="${this._nextStep}"> ${this.hass.localize("ui.dialogs.matter-add-device.google_home.no_home_assistant")} </span> </li> </ol> <br> <p> ${this.hass.localize("ui.dialogs.matter-add-device.google_home.redirect")} </p> </div> `}},{kind:"method",key:"_nextStep",value:function(){(0,n.r)(this,"step-selected",{step:"google_home_fallback"})}},{kind:"field",static:!0,key:"styles",value:()=>[r]}]}}),s.WF),(0,a.A)([(0,o.EM)("matter-add-device-google-home-fallback")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_code",value:()=>""},{kind:"method",key:"render",value:function(){return s.qy` <div class="content"> <ol> <li> ${this.hass.localize("ui.dialogs.matter-add-device.google_home_fallback.step_1")} </li> <li> ${this.hass.localize("ui.dialogs.matter-add-device.google_home_fallback.step_2",{linked_matter_apps_services:s.qy`<b>${this.hass.localize("ui.dialogs.matter-add-device.google_home_fallback.linked_matter_apps_services")}</b>`})} </li> <li> ${this.hass.localize("ui.dialogs.matter-add-device.google_home_fallback.step_3",{link_apps_services:s.qy`<b>${this.hass.localize("ui.dialogs.matter-add-device.google_home_fallback.link_apps_services")}</b>`,use_pairing_code:s.qy`<b>${this.hass.localize("ui.dialogs.matter-add-device.google_home_fallback.use_pairing_code")}</b>`})} </li> </ol> <br> <p> ${this.hass.localize("ui.dialogs.matter-add-device.google_home_fallback.code_instructions")} </p> <ha-textfield label="${this.hass.localize("ui.dialogs.matter-add-device.google_home_fallback.pairing_code")}" .value="${this._code}" @input="${this._onCodeChanged}"></ha-textfield> </div> `}},{kind:"method",key:"_onCodeChanged",value:function(e){const i=e.currentTarget.value;this._code=i,(0,n.r)(this,"pairing-code-changed",{code:i})}},{kind:"field",static:!0,key:"styles",value:()=>[r]}]}}),s.WF),(0,a.A)([(0,o.EM)("matter-add-device-main")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"method",key:"render",value:function(){return s.qy` <div class="content"> <p class="text"> ${this.hass.localize("ui.dialogs.matter-add-device.main.question")} </p> </div> <ha-list-new> <ha-list-item-new interactive type="button" .step="${"new"}" @click="${this._onItemClick}" @keydown="${this._onItemClick}"> <span slot="headline"> ${this.hass.localize("ui.dialogs.matter-add-device.main.answer_new")} </span> <span slot="supporting-text"> ${this.hass.localize("ui.dialogs.matter-add-device.main.answer_new_description")} </span> <ha-icon-next slot="end"></ha-icon-next> </ha-list-item-new> <ha-list-item-new interactive type="button" .step="${"existing"}" @click="${this._onItemClick}" @keydown="${this._onItemClick}"> <span slot="headline"> ${this.hass.localize("ui.dialogs.matter-add-device.main.answer_existing")} </span> <span slot="supporting-text"> ${this.hass.localize("ui.dialogs.matter-add-device.main.answer_existing_description")} </span> <ha-icon-next slot="end"></ha-icon-next> </ha-list-item-new> </ha-list-new> `}},{kind:"method",key:"_onItemClick",value:function(e){if("keydown"===e.type&&"Enter"!==e.key&&" "!==e.key)return;const i=e.currentTarget.step;(0,n.r)(this,"step-selected",{step:i})}},{kind:"field",static:!0,key:"styles",value:()=>[r]}]}}),s.WF);t(32885);(0,a.A)([(0,o.EM)("matter-add-device-new")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"method",key:"firstUpdated",value:function(){(0,l.k2)(this.hass)&&(0,l.VN)(this.hass)}},{kind:"method",key:"render",value:function(){return(0,l.k2)(this.hass)?s.qy` <div class="content"> <ha-circular-progress size="medium" indeterminate></ha-circular-progress> </div> `:s.qy` <div class="content"> <p>${this.hass.localize("ui.dialogs.matter-add-device.new.note")}</p> <p> ${this.hass.localize("ui.dialogs.matter-add-device.new.download_app")} </p> <div class="app-qr"> <a target="_blank" rel="noreferrer noopener" href="https://apps.apple.com/app/home-assistant/id1099568401?mt=8"> <img loading="lazy" src="/static/images/appstore.svg" alt="${this.hass.localize("ui.dialogs.matter-add-device.new.appstore")}" class="icon"> <img loading="lazy" src="/static/images/qr-appstore.svg" alt="${this.hass.localize("ui.dialogs.matter-add-device.new.appstore")}"> </a> <a target="_blank" rel="noreferrer noopener" href="https://play.google.com/store/apps/details?id=io.homeassistant.companion.android"> <img loading="lazy" src="/static/images/playstore.svg" alt="${this.hass.localize("ui.dialogs.matter-add-device.new.playstore")}" class="icon"> <img loading="lazy" src="/static/images/qr-playstore.svg" alt="${this.hass.localize("ui.dialogs.matter-add-device.new.playstore")}"> </a> </div> </div> `}},{kind:"field",static:!0,key:"styles",value:()=>[r,s.AH`.app-qr{margin:24px auto 0 auto;display:flex;justify-content:space-between;padding:0 24px;box-sizing:border-box;gap:16px;width:100%;max-width:400px}.app-qr a,.app-qr img{flex:1}`]}]}}),s.WF),(0,a.A)([(0,o.EM)("matter-add-device-commissioning")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"method",key:"render",value:function(){return s.qy` <div class="content"> <ha-circular-progress size="medium" indeterminate></ha-circular-progress> <p> ${this.hass.localize("ui.dialogs.matter-add-device.commissioning.note")} </p> </div> `}},{kind:"field",static:!0,key:"styles",value:()=>[r,s.AH`.content{display:flex;align-items:center;flex-direction:column;text-align:center}ha-circular-progress{margin-bottom:24px}`]}]}}),s.WF);var h=t(18589);const p={main:void 0,new:"main",existing:"main",google_home:"existing",google_home_fallback:"google_home",apple_home:"existing",generic:"existing",commissioning:void 0};(0,a.A)([(0,o.EM)("dialog-matter-add-device")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_open",value:()=>!1},{kind:"field",decorators:[(0,o.wk)()],key:"_pairingCode",value:()=>""},{kind:"field",decorators:[(0,o.wk)()],key:"_step",value:()=>"main"},{kind:"field",key:"_unsub",value:void 0},{kind:"method",key:"showDialog",value:function(){this._open=!0,this._unsub=(0,l.hM)(this.hass,(()=>this.closeDialog()))}},{kind:"method",key:"closeDialog",value:function(){this._open=!1,this._step="main",this._pairingCode="",this._unsub?.(),this._unsub=void 0,(0,n.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"_handleStepSelected",value:function(e){this._step=e.detail.step,this._pairingCode=""}},{kind:"method",key:"_handlePairingCodeChanged",value:function(e){this._pairingCode=e.detail.code}},{kind:"method",key:"_back",value:function(){const e=p[this._step];e&&(this._step=e)}},{kind:"method",key:"_renderStep",value:function(){return s.qy` <div @pairing-code-changed="${this._handlePairingCodeChanged}" @step-selected="${this._handleStepSelected}" .hass="${this.hass}"> ${(0,d._)(`matter-add-device-${this._step.replaceAll("_","-")}`,{hass:this.hass})} </div> `}},{kind:"method",key:"_addDevice",value:async function(){const e=this._pairingCode,i=this._step;try{this._step="commissioning",await(0,l.PO)(this.hass,e)}catch(e){(0,h.P)(this,{message:this.hass.localize("ui.dialogs.matter-add-device.add_device_failed"),duration:2e3})}this._step=i}},{kind:"method",key:"_renderActions",value:function(){return"apple_home"===this._step||"google_home_fallback"===this._step||"generic"===this._step?s.qy` <ha-button slot="primaryAction" @click="${this._addDevice}" .disabled="${!this._pairingCode}"> ${this.hass.localize("ui.dialogs.matter-add-device.add_device")} </ha-button> `:"new"===this._step?s.qy` <ha-button slot="primaryAction" @click="${this.closeDialog}"> ${this.hass.localize("ui.common.ok")} </ha-button> `:s.s6}},{kind:"method",key:"render",value:function(){if(!this._open)return s.s6;const e=this.hass.localize(`ui.dialogs.matter-add-device.${this._step}.header`),i=p[this._step],t=this._renderActions();return s.qy` <ha-dialog open @closed="${this.closeDialog}" .heading="${e}" ?hideActions="${t===s.s6}" scrimClickAction escapeKeyAction> <ha-dialog-header slot="heading"> ${i?s.qy` <ha-icon-button-arrow-prev slot="navigationIcon" .hass="${this.hass}" @click="${this._back}"></ha-icon-button-arrow-prev> `:s.qy` <ha-icon-button slot="navigationIcon" dialogAction="cancel" .label="${this.hass.localize("ui.common.close")}" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}"></ha-icon-button> `} <span slot="title">${e}</span> </ha-dialog-header> ${this._renderStep()} ${t} </ha-dialog> `}},{kind:"field",static:!0,key:"styles",value:()=>[c.nA,s.AH`:host{--horizontal-padding:24px}ha-dialog{--dialog-content-padding:0}ha-dialog{--mdc-dialog-min-width:450px;--mdc-dialog-max-width:450px}@media all and (max-width:450px),all and (max-height:500px){:host{--horizontal-padding:16px}ha-dialog{--mdc-dialog-min-width:calc(
            100vw - env(safe-area-inset-right) - env(safe-area-inset-left)
          );--mdc-dialog-max-width:calc(
            100vw - env(safe-area-inset-right) - env(safe-area-inset-left)
          )}}.loading{padding:24px;display:flex;align-items:center;justify-content:center}`]}]}}),s.WF)}};
//# sourceMappingURL=49721.r-cYgFiS7-g.js.map