export const id=94866;export const ids=[94866,55337,36185];export const modules={36185:(e,i,t)=>{var a=t(36312),s=t(68689),n=(t(253),t(54846),t(16891),t(50289)),o=t(29818),l=t(85920),r=t(34897);t(13292),t(9421);const d={boolean:()=>t.e(96292).then(t.bind(t,96292)),constant:()=>t.e(44354).then(t.bind(t,44354)),float:()=>t.e(80866).then(t.bind(t,80866)),grid:()=>t.e(21306).then(t.bind(t,21306)),expandable:()=>t.e(82178).then(t.bind(t,82178)),integer:()=>t.e(65622).then(t.bind(t,43241)),multi_select:()=>t.e(26964).then(t.bind(t,26964)),positive_time_period_dict:()=>t.e(24280).then(t.bind(t,24280)),select:()=>t.e(22038).then(t.bind(t,22038)),string:()=>t.e(38819).then(t.bind(t,38819))},c=(e,i)=>e?!i.name||i.flatten?e:e[i.name]:null;(0,a.A)([(0,o.EM)("ha-form")],(function(e,i){class t extends i{constructor(...i){super(...i),e(this)}}return{F:t,d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"data",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"schema",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"error",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"warning",value:void 0},{kind:"field",decorators:[(0,o.MZ)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"computeError",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"computeWarning",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"computeLabel",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"computeHelper",value:void 0},{kind:"method",key:"getFormProperties",value:function(){return{}}},{kind:"method",key:"focus",value:async function(){await this.updateComplete;const e=this.renderRoot.querySelector(".root");if(e)for(const i of e.children)if("HA-ALERT"!==i.tagName){i instanceof n.mN&&await i.updateComplete,i.focus();break}}},{kind:"method",key:"willUpdate",value:function(e){e.has("schema")&&this.schema&&this.schema.forEach((e=>{"selector"in e||d[e.type]?.()}))}},{kind:"method",key:"render",value:function(){return n.qy` <div class="root" part="root"> ${this.error&&this.error.base?n.qy` <ha-alert alert-type="error"> ${this._computeError(this.error.base,this.schema)} </ha-alert> `:""} ${this.schema.map((e=>{const i=((e,i)=>e&&i.name?e[i.name]:null)(this.error,e),t=((e,i)=>e&&i.name?e[i.name]:null)(this.warning,e);return n.qy` ${i?n.qy` <ha-alert own-margin alert-type="error"> ${this._computeError(i,e)} </ha-alert> `:t?n.qy` <ha-alert own-margin alert-type="warning"> ${this._computeWarning(t,e)} </ha-alert> `:""} ${"selector"in e?n.qy`<ha-selector .schema="${e}" .hass="${this.hass}" .name="${e.name}" .selector="${e.selector}" .value="${c(this.data,e)}" .label="${this._computeLabel(e,this.data)}" .disabled="${e.disabled||this.disabled||!1}" .placeholder="${e.required?"":e.default}" .helper="${this._computeHelper(e)}" .required="${e.required||!1}" .context="${this._generateContext(e)}"></ha-selector>`:(0,l._)(this.fieldElementName(e.type),{schema:e,data:c(this.data,e),label:this._computeLabel(e,this.data),helper:this._computeHelper(e),disabled:this.disabled||e.disabled||!1,hass:this.hass,localize:this.hass?.localize,computeLabel:this.computeLabel,computeHelper:this.computeHelper,context:this._generateContext(e),...this.getFormProperties()})} `}))} </div> `}},{kind:"method",key:"fieldElementName",value:function(e){return`ha-form-${e}`}},{kind:"method",key:"_generateContext",value:function(e){if(!e.context)return;const i={};for(const[t,a]of Object.entries(e.context))i[t]=this.data[a];return i}},{kind:"method",key:"createRenderRoot",value:function(){const e=(0,s.A)(t,"createRenderRoot",this,3)([]);return this.addValueChangedListener(e),e}},{kind:"method",key:"addValueChangedListener",value:function(e){e.addEventListener("value-changed",(e=>{e.stopPropagation();const i=e.target.schema;if(e.target===this)return;const t=!i.name||"flatten"in i&&i.flatten?e.detail.value:{[i.name]:e.detail.value};this.data={...this.data,...t},(0,r.r)(this,"value-changed",{value:this.data})}))}},{kind:"method",key:"_computeLabel",value:function(e,i){return this.computeLabel?this.computeLabel(e,i):e?e.name:""}},{kind:"method",key:"_computeHelper",value:function(e){return this.computeHelper?this.computeHelper(e):""}},{kind:"method",key:"_computeError",value:function(e,i){return Array.isArray(e)?n.qy`<ul> ${e.map((e=>n.qy`<li> ${this.computeError?this.computeError(e,i):e} </li>`))} </ul>`:this.computeError?this.computeError(e,i):e}},{kind:"method",key:"_computeWarning",value:function(e,i){return this.computeWarning?this.computeWarning(e,i):e}},{kind:"get",static:!0,key:"styles",value:function(){return n.AH`.root>*{display:block}.root>:not([own-margin]):not(:last-child){margin-bottom:24px}ha-alert[own-margin]{margin-bottom:4px}`}}]}}),n.WF)},55337:(e,i,t)=>{t.r(i),t.d(i,{HaImageSelector:()=>d});var a=t(36312),s=t(68689),n=t(50289),o=t(29818),l=t(34897),r=(t(4169),t(45920),t(90431),t(98645),t(51513),t(54867));let d=(0,a.A)([(0,o.EM)("ha-selector-image")],(function(e,i){class t extends i{constructor(...i){super(...i),e(this)}}return{F:t,d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"name",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"placeholder",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"selector",value:void 0},{kind:"field",decorators:[(0,o.MZ)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,o.MZ)({type:Boolean})],key:"required",value:()=>!0},{kind:"field",decorators:[(0,o.wk)()],key:"showUpload",value:()=>!1},{kind:"method",key:"firstUpdated",value:function(e){(0,s.A)(t,"firstUpdated",this,3)([e]),this.value&&!this.value.startsWith(r.fO)||(this.showUpload=!0)}},{kind:"method",key:"render",value:function(){return n.qy` <div> <label> ${this.hass.localize("ui.components.selectors.image.select_image_with_label",{label:this.label||this.hass.localize("ui.components.selectors.image.image")})} <ha-formfield .label="${this.hass.localize("ui.components.selectors.image.upload")}"> <ha-radio name="mode" value="upload" .checked="${this.showUpload}" @change="${this._radioGroupPicked}"></ha-radio> </ha-formfield> <ha-formfield .label="${this.hass.localize("ui.components.selectors.image.url")}"> <ha-radio name="mode" value="url" .checked="${!this.showUpload}" @change="${this._radioGroupPicked}"></ha-radio> </ha-formfield> </label> ${this.showUpload?n.qy` <ha-picture-upload .hass="${this.hass}" .value="${this.value?.startsWith(r.fO)?this.value:null}" .original="${this.selector.image?.original}" .cropOptions="${this.selector.image?.crop}" @change="${this._pictureChanged}"></ha-picture-upload> `:n.qy` <ha-textfield .name="${this.name}" .value="${this.value||""}" .placeholder="${this.placeholder||""}" .helper="${this.helper}" helperPersistent .disabled="${this.disabled}" @input="${this._handleChange}" .label="${this.label||""}" .required="${this.required}"></ha-textfield> `} </div> `}},{kind:"method",key:"_radioGroupPicked",value:function(e){this.showUpload="upload"===e.target.value}},{kind:"method",key:"_pictureChanged",value:function(e){const i=e.target.value;(0,l.r)(this,"value-changed",{value:i??void 0})}},{kind:"method",key:"_handleChange",value:function(e){let i=e.target.value;this.value!==i&&(""!==i||this.required||(i=void 0),(0,l.r)(this,"value-changed",{value:i}))}},{kind:"get",static:!0,key:"styles",value:function(){return n.AH`:host{display:block;position:relative}div{display:flex;flex-direction:column}label{display:flex;flex-direction:column}ha-textarea,ha-textfield{width:100%}`}}]}}),n.WF)},66018:(e,i,t)=>{var a=t(36312),s=t(50289),n=t(29818),o=t(66066),l=t(34897);t(94548),t(4169),t(24260);(0,a.A)([(0,n.EM)("hui-entity-editor")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"entities",value:void 0},{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"entityFilter",value:void 0},{kind:"field",decorators:[(0,n.MZ)()],key:"label",value:void 0},{kind:"field",key:"_entityKeys",value:()=>new WeakMap},{kind:"method",key:"_getKey",value:function(e){return this._entityKeys.has(e)||this._entityKeys.set(e,Math.random().toString()),this._entityKeys.get(e)}},{kind:"method",key:"render",value:function(){return this.entities?s.qy` <h3> ${this.label||this.hass.localize("ui.panel.lovelace.editor.card.generic.entities")+" ("+this.hass.localize("ui.panel.lovelace.editor.card.config.required")+")"} </h3> <ha-sortable handle-selector=".handle" @item-moved="${this._entityMoved}"> <div class="entities"> ${(0,o.u)(this.entities,(e=>this._getKey(e)),((e,i)=>s.qy` <div class="entity" data-entity-id="${e.entity}"> <div class="handle"> <ha-svg-icon .path="${"M7,19V17H9V19H7M11,19V17H13V19H11M15,19V17H17V19H15M7,15V13H9V15H7M11,15V13H13V15H11M15,15V13H17V15H15M7,11V9H9V11H7M11,11V9H13V11H11M15,11V9H17V11H15M7,7V5H9V7H7M11,7V5H13V7H11M15,7V5H17V7H15Z"}"></ha-svg-icon> </div> <ha-entity-picker .hass="${this.hass}" .value="${e.entity}" .index="${i}" .entityFilter="${this.entityFilter}" @value-changed="${this._valueChanged}" allow-custom-entity></ha-entity-picker> </div> `))} </div> </ha-sortable> <ha-entity-picker class="add-entity" .hass="${this.hass}" .entityFilter="${this.entityFilter}" @value-changed="${this._addEntity}"></ha-entity-picker> `:s.s6}},{kind:"method",key:"_addEntity",value:async function(e){const i=e.detail.value;if(""===i)return;const t=this.entities.concat({entity:i});e.target.value="",(0,l.r)(this,"entities-changed",{entities:t})}},{kind:"method",key:"_entityMoved",value:function(e){e.stopPropagation();const{oldIndex:i,newIndex:t}=e.detail,a=this.entities.concat();a.splice(t,0,a.splice(i,1)[0]),(0,l.r)(this,"entities-changed",{entities:a})}},{kind:"method",key:"_valueChanged",value:function(e){const i=e.detail.value,t=e.target.index,a=this.entities.concat();""===i||void 0===i?a.splice(t,1):a[t]={...a[t],entity:i},(0,l.r)(this,"entities-changed",{entities:a})}},{kind:"get",static:!0,key:"styles",value:function(){return s.AH`ha-entity-picker{margin-top:8px}.add-entity{display:block;margin-left:31px;margin-inline-start:31px;margin-inline-end:initial;direction:var(--direction)}.entity{display:flex;align-items:center}.entity .handle{padding-right:8px;cursor:move;cursor:grab;padding-inline-end:8px;padding-inline-start:initial;direction:var(--direction)}.entity .handle>*{pointer-events:none}.entity ha-entity-picker{flex-grow:1}`}}]}}),s.WF)},94866:(e,i,t)=>{t.r(i),t.d(i,{HuiDialogEditView:()=>x});var a=t(36312),s=(t(72606),t(50289)),n=t(29818),o=t(85323),l=t(34897),r=t(79051),d=t(16312),c=t(16569),h=(t(13292),t(32885),t(29180),t(10900),t(57641),t(57198)),u=t(6121),v=t(55321),m=(t(66018),t(51155)),g=t(23754),p=(t(16891),t(94100)),y=t(81566);t(36185);(0,a.A)([(0,n.EM)("hui-view-editor")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.MZ)({type:Boolean})],key:"isNew",value:()=>!1},{kind:"field",decorators:[(0,n.wk)()],key:"_config",value:void 0},{kind:"field",key:"_suggestedPath",value:()=>!1},{kind:"field",key:"_schema",value:()=>(0,p.A)(((e,i)=>[{name:"title",selector:{text:{}}},{name:"icon",selector:{icon:{}}},{name:"path",selector:{text:{}}},{name:"theme",selector:{theme:{}}},{name:"subview",selector:{boolean:{}}},{name:"type",selector:{select:{options:[m.Zy,m.oH,m.YG,m.LQ].map((i=>({value:i,label:e(`ui.panel.lovelace.editor.edit_view.types.${i}`)})))}}},...i===m.LQ?[{name:"section_specifics",type:"expandable",flatten:!0,expanded:!0,schema:[{name:"max_columns",selector:{number:{min:1,max:10,mode:"slider",slider_ticks:!0}}},{name:"dense_section_placement",selector:{boolean:{}}}]}]:[]]))},{kind:"set",key:"config",value:function(e){this._config=e}},{kind:"get",key:"_type",value:function(){return this._config?this._config.panel?m.YG:this._config.type||m.Zy:m.Zy}},{kind:"method",key:"render",value:function(){if(!this.hass)return s.s6;const e=this._schema(this.hass.localize,this._type),i={...this._config,type:this._type};return void 0===i.max_columns&&this._type===m.LQ&&(i.max_columns=4),s.qy` <ha-form .hass="${this.hass}" .data="${i}" .schema="${e}" .computeLabel="${this._computeLabel}" .computeHelper="${this._computeHelper}" @value-changed="${this._valueChanged}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){const i=e.detail.value;i.type===m.Zy&&delete i.type,i.type!==m.LQ&&delete i.max_columns,!this.isNew||this._suggestedPath||this._config.path!==i.path||this._config.path&&i.path!==(0,y.Y)(this._config.title||"","-")||(i.path=(0,y.Y)(i.title||"","-")),(0,l.r)(this,"view-config-changed",{config:i})}},{kind:"field",key:"_computeLabel",value(){return e=>{switch(e.name){case"path":return this.hass.localize("ui.panel.lovelace.editor.card.generic.url");case"type":case"subview":case"max_columns":case"dense_section_placement":case"section_specifics":return this.hass.localize(`ui.panel.lovelace.editor.edit_view.${e.name}`);default:return this.hass.localize(`ui.panel.lovelace.editor.card.generic.${e.name}`)}}}},{kind:"field",key:"_computeHelper",value(){return e=>{switch(e.name){case"subview":case"dense_section_placement":return this.hass.localize(`ui.panel.lovelace.editor.edit_view.${e.name}_helper`);default:return}}}}]}}),s.WF);t(67056),t(55337);const f={image:{original:!0}};(0,a.A)([(0,n.EM)("hui-view-background-editor")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_config",value:void 0},{kind:"set",key:"config",value:function(e){this._config=e}},{kind:"method",key:"render",value:function(){if(!this.hass)return s.s6;const e=this._config?.background,i="string"==typeof e?e.match(/url\(['"]?([^'"]+)['"]?\)/)?.[1]:e?.image;return s.qy` <ha-selector-image .hass="${this.hass}" .label="${this.hass.localize("ui.panel.lovelace.editor.edit_view.background.title")}" .value="${i}" .selector="${f}" @value-changed="${this._backgroundChanged}"></ha-selector-image> `}},{kind:"method",key:"_backgroundChanged",value:function(e){const i=e.detail.value,t={...this._config,background:{..."string"==typeof this._config.background?{}:this._config.background,image:i||void 0}};(0,l.r)(this,"view-config-changed",{config:t})}},{kind:"get",static:!0,key:"styles",value:function(){return s.AH`:host{display:block}`}}]}}),s.WF);var k=t(68689),_=(t(89655),t(253),t(2075),t(4525),t(2682)),b=(t(78219),t(71443));(0,a.A)([(0,n.EM)("hui-view-visibility-editor")],(function(e,i){class t extends i{constructor(...i){super(...i),e(this)}}return{F:t,d:[{kind:"set",key:"config",value:function(e){this._config=e,this._visible=void 0===this._config.visible||this._config.visible}},{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_users",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_visible",value:void 0},{kind:"field",key:"_sortedUsers",value(){return(0,p.A)((e=>e.sort(((e,i)=>(0,_.x)(e.name,i.name,this.hass.locale.language)))))}},{kind:"method",key:"firstUpdated",value:function(e){(0,k.A)(t,"firstUpdated",this,3)([e]),(0,b.hU)(this.hass).then((e=>{this._users=e.filter((e=>!e.system_generated))}))}},{kind:"method",key:"render",value:function(){return this.hass&&this._users?s.qy` <p> ${this.hass.localize("ui.panel.lovelace.editor.edit_view.visibility.select_users")} </p> ${this._sortedUsers(this._users).map((e=>s.qy` <mwc-list-item graphic="avatar" hasMeta> <ha-user-badge slot="graphic" .hass="${this.hass}" .user="${e}"></ha-user-badge> <span>${e.name}</span> <ha-switch slot="meta" .userId="${e.id}" @change="${this.valChange}" .checked="${this.checkUser(e.id)}"></ha-switch> </mwc-list-item> `))} `:s.s6}},{kind:"method",key:"checkUser",value:function(e){return void 0===this._visible||("boolean"==typeof this._visible?this._visible:this._visible.some((i=>i.user===e)))}},{kind:"method",key:"valChange",value:function(e){const i=e.currentTarget.userId,t=e.currentTarget.checked;let a=[];if("boolean"==typeof this._visible){this._visible&&(a=this._users.map((e=>({user:e.id}))))}else a=[...this._visible];if(!0===t){const e={user:i};a.push(e)}else a=a.filter((e=>e.user!==i));this._visible=a.filter((e=>this._users.some((i=>i.id===e.user)))),(0,l.r)(this,"view-visibility-changed",{visible:this._visible})}},{kind:"get",static:!0,key:"styles",value:function(){return s.AH`:host{display:block}`}}]}}),s.WF);t(13618),t(34736);const w="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",$=["tab-settings","tab-background","tab-visibility"];let x=(0,a.A)([(0,n.EM)("hui-dialog-edit-view")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_saving",value:()=>!1},{kind:"field",decorators:[(0,n.wk)()],key:"_currTab",value:()=>$[0]},{kind:"field",decorators:[(0,n.wk)()],key:"_dirty",value:()=>!1},{kind:"field",decorators:[(0,n.wk)()],key:"_yamlMode",value:()=>!1},{kind:"field",decorators:[(0,n.P)("ha-yaml-editor")],key:"_editor",value:void 0},{kind:"get",key:"_type",value:function(){return this._config?this._config.panel?m.YG:this._config.type||m.Zy:m.Zy}},{kind:"method",key:"updated",value:function(e){if(this._yamlMode&&e.has("_yamlMode")){const e={...this._config};this._editor?.setValue(e)}}},{kind:"method",key:"showDialog",value:function(e){if(this._params=e,void 0===this._params.viewIndex)return this._config={},void(this._dirty=!1);const i=this._params.lovelace.config.views[this._params.viewIndex];if((0,h.R)(i)){const{strategy:e,...t}=i;this._config=t}else this._config=i}},{kind:"method",key:"closeDialog",value:function(){this._params=void 0,this._config={},this._yamlMode=!1,this._dirty=!1,this._currTab=$[0],(0,l.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"get",key:"_viewConfigTitle",value:function(){return this._config&&this._config.title?this.hass.localize("ui.panel.lovelace.editor.edit_view.header_name",{name:this._config.title}):this.hass.localize("ui.panel.lovelace.editor.edit_view.header")}},{kind:"method",key:"render",value:function(){if(!this._params)return s.s6;let e;if(this._yamlMode)e=s.qy` <ha-yaml-editor .hass="${this.hass}" dialogInitialFocus @value-changed="${this._viewYamlChanged}"></ha-yaml-editor> `;else switch(this._currTab){case"tab-settings":e=s.qy` <hui-view-editor .isNew="${void 0===this._params.viewIndex}" .hass="${this.hass}" .config="${this._config}" @view-config-changed="${this._viewConfigChanged}"></hui-view-editor> `;break;case"tab-background":e=s.qy` <hui-view-background-editor .hass="${this.hass}" .config="${this._config}" @view-config-changed="${this._viewConfigChanged}"></hui-view-background-editor> `;break;case"tab-visibility":e=s.qy` <hui-view-visibility-editor .hass="${this.hass}" .config="${this._config}" @view-visibility-changed="${this._viewVisibilityChanged}"></hui-view-visibility-editor> `}const i=this._config?.type===m.LQ?this._config?.type===m.LQ&&!this._config?.cards?.length:this._config?.type!==m.LQ&&!this._config?.sections?.length;return s.qy` <ha-dialog open scrimClickAction escapeKeyAction @closed="${this.closeDialog}" .heading="${this._viewConfigTitle}" class="${(0,o.H)({"yaml-mode":this._yamlMode})}"> <ha-dialog-header show-border slot="heading"> <ha-icon-button slot="navigationIcon" dialogAction="cancel" .label="${this.hass.localize("ui.common.close")}" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}"></ha-icon-button> <h2 slot="title">${this._viewConfigTitle}</h2> <ha-button-menu slot="actionItems" fixed corner="BOTTOM_END" menuCorner="END" @action="${this._handleAction}" @closed="${r.d}"> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.common.menu")}" .path="${"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"}"></ha-icon-button> <mwc-list-item graphic="icon"> ${this.hass.localize("ui.panel.lovelace.editor.edit_view.edit_ui")} ${this._yamlMode?"":s.qy`<ha-svg-icon class="selected_menu_item" slot="graphic" .path="${w}"></ha-svg-icon>`} </mwc-list-item> <mwc-list-item graphic="icon"> ${this.hass.localize("ui.panel.lovelace.editor.edit_view.edit_yaml")} ${this._yamlMode?s.qy`<ha-svg-icon class="selected_menu_item" slot="graphic" .path="${w}"></ha-svg-icon>`:""} </mwc-list-item> </ha-button-menu> ${i?s.s6:s.qy` <ha-alert class="incompatible" alert-type="warning"> ${this._config?.type===m.LQ?this.hass.localize("ui.panel.lovelace.editor.edit_view.type_warning_sections"):this.hass.localize("ui.panel.lovelace.editor.edit_view.type_warning_others")} </ha-alert> `} ${this._yamlMode?s.s6:s.qy`<mwc-tab-bar .activeIndex="${$.indexOf(this._currTab)}" @MDCTabBar:activated="${this._handleTabChanged}"> ${$.map((e=>s.qy` <mwc-tab .label="${this.hass.localize(`ui.panel.lovelace.editor.edit_view.${e.replace("-","_")}`)}"> </mwc-tab> `))} </mwc-tab-bar>`} </ha-dialog-header> ${e} ${void 0!==this._params.viewIndex?s.qy` <mwc-button class="warning" slot="secondaryAction" @click="${this._deleteConfirm}"> ${this.hass.localize("ui.panel.lovelace.editor.edit_view.delete")} </mwc-button> `:s.s6} <mwc-button slot="primaryAction" ?disabled="${!this._config||this._saving||!this._dirty||!i}" @click="${this._save}"> ${this._saving?s.qy`<ha-circular-progress indeterminate size="small" aria-label="Saving"></ha-circular-progress>`:s.s6} ${this.hass.localize("ui.common.save")}</mwc-button> </ha-dialog> `}},{kind:"method",key:"_handleAction",value:async function(e){switch(e.stopPropagation(),e.preventDefault(),e.detail.index){case 0:this._yamlMode=!1;break;case 1:this._yamlMode=!0}}},{kind:"method",key:"_delete",value:async function(){if(this._params)try{await this._params.lovelace.saveConfig((0,g.lD)(this._params.lovelace.config,this._params.viewIndex)),this.closeDialog(),(0,d.o)(`/${window.location.pathname.split("/")[1]}`)}catch(e){(0,u.showAlertDialog)(this,{text:`Deleting failed: ${e.message}`})}}},{kind:"method",key:"_deleteConfirm",value:async function(){const e=this._config?.sections?.length?"sections":this._config?.cards?.length?"cards":"only",i=this._config?.title?"named":"unnamed";await(0,u.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.lovelace.views.delete_title"),text:this.hass.localize(`ui.panel.lovelace.views.delete_${i}_view_${e}`,{name:this._config?.title}),confirmText:this.hass.localize("ui.common.delete"),destructive:!0})&&this._delete()}},{kind:"method",key:"_handleTabChanged",value:function(e){const i=$[e.detail.index];i!==this._currTab&&(this._currTab=i)}},{kind:"method",key:"_save",value:async function(){if(!this._params||!this._config)return;if(!this._isConfigChanged())return void this.closeDialog();this._saving=!0;const e={...this._config};e.type!==m.LQ||e.sections?.length?e.cards?.length||(e.cards=[]):e.sections=[{type:"grid",cards:[]}];const i=this._params.lovelace;try{await i.saveConfig(this._creatingView?(0,g.fJ)(this.hass,i.config,e):(0,g.Iq)(this.hass,i.config,this._params.viewIndex,e)),this._params.saveCallback&&this._params.saveCallback(this._params.viewIndex||i.config.views.length,e),this.closeDialog()}catch(e){(0,u.showAlertDialog)(this,{text:`${this.hass.localize("ui.panel.lovelace.editor.edit_view.saving_failed")}: ${e.message}`})}finally{this._saving=!1}}},{kind:"method",key:"_viewConfigChanged",value:function(e){e.detail&&e.detail.config&&!(0,c.b)(this._config,e.detail.config)&&(this._config=e.detail.config,this._dirty=!0)}},{kind:"method",key:"_viewVisibilityChanged",value:function(e){e.detail.visible&&this._config&&(this._config={...this._config,visible:e.detail.visible}),this._dirty=!0}},{kind:"method",key:"_viewYamlChanged",value:function(e){e.stopPropagation(),e.detail.isValid&&(this._config=e.detail.value,this._dirty=!0)}},{kind:"method",key:"_isConfigChanged",value:function(){return this._creatingView||JSON.stringify(this._config)!==JSON.stringify(this._params.lovelace.config.views[this._params.viewIndex])}},{kind:"get",key:"_creatingView",value:function(){return void 0===this._params.viewIndex}},{kind:"get",static:!0,key:"styles",value:function(){return[v.nA,s.AH`ha-dialog{--vertical-align-dialog:flex-start;--dialog-surface-margin-top:40px}@media all and (max-width:450px),all and (max-height:500px){ha-dialog{--dialog-surface-margin-top:0px}}ha-dialog.yaml-mode{--dialog-content-padding:0}h2{margin:0;font-size:inherit;font-weight:inherit}mwc-tab-bar{color:var(--primary-text-color);text-transform:uppercase;padding:0 20px}mwc-button.warning{margin-right:auto;margin-inline-end:auto;margin-inline-start:initial}ha-circular-progress{display:none}ha-circular-progress[indeterminate]{display:block}.selected_menu_item{color:var(--primary-color)}.hidden{display:none}.error{color:var(--error-color);border-bottom:1px solid var(--error-color)}.incompatible{display:block}@media all and (min-width:600px){ha-dialog{--mdc-dialog-min-width:600px}}`]}}]}}),s.WF)}};
//# sourceMappingURL=94866.al7UgaivCcA.js.map