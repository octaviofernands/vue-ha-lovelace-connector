export const id=91416;export const ids=[91416];export const modules={29136:(e,t,i)=>{i.d(t,{H:()=>r,R:()=>n});const n=(e,t,i)=>e.subscribeMessage((e=>t(e)),{type:"render_template",...i}),r=(e,t,i,n,r)=>e.connection.subscribeMessage(r,{type:"template/start_preview",flow_id:t,flow_type:i,user_input:n})},91416:(e,t,i)=>{i.r(t),i.d(t,{HuiMarkdownCard:()=>l});var n=i(36312),r=i(68689),o=i(50289),s=i(29818),a=i(85323),d=i(34897),h=i(38962),c=(i(13082),i(45649),i(13292),i(29136));let l=(0,n.A)([(0,s.EM)("hui-markdown-card")],(function(e,t){class n extends t{constructor(...t){super(...t),e(this)}}return{F:n,d:[{kind:"method",static:!0,key:"getConfigElement",value:async function(){return await i.e(43075).then(i.bind(i,43075)),document.createElement("hui-markdown-card-editor")}},{kind:"method",static:!0,key:"getStubConfig",value:function(){return{type:"markdown",content:"The **Markdown** card allows you to write any text. You can style it **bold**, *italicized*, ~strikethrough~ etc. You can do images, links, and more.\n\nFor more information see the [Markdown Cheatsheet](https://commonmark.org/help)."}}},{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"preview",value:()=>!1},{kind:"field",decorators:[(0,s.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,s.wk)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,s.wk)()],key:"_errorLevel",value:void 0},{kind:"field",decorators:[(0,s.wk)()],key:"_templateResult",value:void 0},{kind:"field",key:"_unsubRenderTemplate",value:void 0},{kind:"method",key:"getCardSize",value:function(){return void 0===this._config?3:void 0===this._config.card_size?Math.round(this._config.content.split("\n").length/2)+(this._config.title?1:0):this._config.card_size}},{kind:"method",key:"setConfig",value:function(e){if(!e.content)throw new Error("Content required");this._config?.content!==e.content&&this._tryDisconnect(),this._config=e}},{kind:"method",key:"connectedCallback",value:function(){(0,r.A)(n,"connectedCallback",this,3)([]),this._tryConnect()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,r.A)(n,"disconnectedCallback",this,3)([]),this._tryDisconnect()}},{kind:"method",key:"render",value:function(){return this._config?o.qy` ${this._error?o.qy`<ha-alert alert-type="${this._errorLevel?.toLowerCase()||"error"}">${this._error}</ha-alert>`:o.s6} <ha-card .header="${this._config.title}"> <ha-markdown breaks class="${(0,a.H)({"no-header":!this._config.title})}" .content="${this._templateResult?.result}"></ha-markdown> </ha-card> `:o.s6}},{kind:"method",key:"updated",value:function(e){if((0,r.A)(n,"updated",this,3)([e]),!this._config||!this.hass)return;e.has("_config")&&this._tryConnect();const t=this._templateResult&&!1===this._config.show_empty&&0===this._templateResult.result.length;t!==this.hidden&&(this.style.display=t?"none":"block",this.toggleAttribute("hidden",t),(0,d.r)(this,"card-visibility-changed",{value:!t}));const i=e.get("hass"),o=e.get("_config");i&&o&&i.themes===this.hass.themes&&o.theme===this._config.theme||(0,h.Q)(this,this.hass.themes,this._config.theme)}},{kind:"method",key:"_tryConnect",value:async function(){if(void 0===this._unsubRenderTemplate&&this.hass&&this._config){this._error=void 0,this._errorLevel=void 0;try{this._unsubRenderTemplate=(0,c.R)(this.hass.connection,(e=>{"error"in e?"ERROR"!==e.level&&"ERROR"===this._errorLevel||(this._error=e.error,this._errorLevel=e.level):this._templateResult=e}),{template:this._config.content,entity_ids:this._config.entity_id,variables:{config:this._config,user:this.hass.user.name},strict:!0,report_errors:this.preview}),await this._unsubRenderTemplate}catch(e){this.preview&&(this._error=e.message,this._errorLevel=void 0),this._templateResult={result:this._config.content,listeners:{all:!1,domains:[],entities:[],time:!1}},this._unsubRenderTemplate=void 0}}}},{kind:"method",key:"_tryDisconnect",value:async function(){this._unsubRenderTemplate&&(this._unsubRenderTemplate.then((e=>e())).catch((()=>{})),this._unsubRenderTemplate=void 0,this._error=void 0,this._errorLevel=void 0)}},{kind:"get",static:!0,key:"styles",value:function(){return o.AH`ha-card{height:100%}ha-alert{margin-bottom:8px}ha-markdown{padding:0 16px 16px;word-wrap:break-word}ha-markdown.no-header{padding-top:16px}`}}]}}),o.WF)}};
//# sourceMappingURL=91416.Opbd7WfFRYE.js.map