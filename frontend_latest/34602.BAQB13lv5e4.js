export const id=34602;export const ids=[34602];export const modules={68009:(t,e,i)=>{i.d(e,{A:()=>s});i(253),i(54846),i(16891);function s(t){if(!t||"object"!=typeof t)return t;if("[object Date]"==Object.prototype.toString.call(t))return new Date(t.getTime());if(Array.isArray(t))return t.map(s);var e={};return Object.keys(t).forEach((function(i){e[i]=s(t[i])})),e}},42072:(t,e,i)=>{i(253),i(54846),t.exports=function t(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(i){!e.hasOwnProperty(i)||null===e[i]||"object"!=typeof e[i]&&"function"!=typeof e[i]||Object.isFrozen(e[i])||t(e[i])})),e}},80675:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.r(e),i.d(e,{HuiDialogSuggestCard:()=>f});var a=i(36312),o=(i(16891),i(42072)),r=i.n(o),n=i(50289),h=i(29818),d=i(34897),l=(i(57641),i(57198)),c=i(55321),u=i(50157),g=i(26566),p=i(23754),_=i(14182),v=i(57898),m=i(90976),y=t([g,v]);[g,v]=y.then?(await y)():y;let f=(0,a.A)([(0,h.EM)("hui-dialog-suggest-card")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,h.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,h.wk)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,h.wk)()],key:"_cardConfig",value:void 0},{kind:"field",decorators:[(0,h.wk)()],key:"_sectionConfig",value:void 0},{kind:"field",decorators:[(0,h.wk)()],key:"_saving",value:()=>!1},{kind:"field",decorators:[(0,h.P)("ha-yaml-editor")],key:"_yamlEditor",value:void 0},{kind:"method",key:"showDialog",value:function(t){this._params=t,this._cardConfig=t.cardConfig,this._sectionConfig=t.sectionConfig,Object.isFrozen(this._cardConfig)||(this._cardConfig=r()(this._cardConfig)),Object.isFrozen(this._sectionConfig)||(this._sectionConfig=r()(this._sectionConfig)),this._yamlEditor&&this._yamlEditor.setValue(this._cardConfig)}},{kind:"method",key:"closeDialog",value:function(){this._params=void 0,this._cardConfig=void 0,(0,d.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"get",key:"_viewSupportsSection",value:function(){if(!this._params?.lovelaceConfig||!this._params?.path)return!1;const{viewIndex:t}=(0,_.$P)(this._params.path),e=this._params.lovelaceConfig.views[t];return!(0,l.R)(e)&&"sections"===e.type}},{kind:"method",key:"_renderPreview",value:function(){return this._sectionConfig&&this._viewSupportsSection?n.qy` <div class="element-preview"> <hui-section .hass="${this.hass}" .config="${this._sectionConfig}" preview></hui-section> </div> `:this._cardConfig?n.qy` <div class="element-preview"> ${this._cardConfig.map((t=>n.qy` <hui-card .hass="${this.hass}" .config="${t}" preview></hui-card> `))} </div> `:n.s6}},{kind:"method",key:"render",value:function(){return this._params?n.qy` <ha-dialog open scrimClickAction @closed="${this.closeDialog}" .heading="${this.hass.localize("ui.panel.lovelace.editor.suggest_card.header")}"> <div> ${this._renderPreview()} ${this._params.yaml&&this._cardConfig?n.qy` <div class="editor"> <ha-yaml-editor .hass="${this.hass}" .defaultValue="${this._cardConfig}"></ha-yaml-editor> </div> `:n.s6} </div> <mwc-button slot="secondaryAction" @click="${this.closeDialog}" dialogInitialFocus> ${this._params.yaml?this.hass.localize("ui.common.close"):this.hass.localize("ui.common.cancel")} </mwc-button> ${this._params.yaml?n.s6:n.qy` ${this._sectionConfig&&this._viewSupportsSection?n.s6:n.qy` <mwc-button slot="primaryAction" @click="${this._pickCard}"> ${this.hass.localize("ui.panel.lovelace.editor.suggest_card.create_own")} </mwc-button> `} <mwc-button slot="primaryAction" .disabled="${this._saving}" @click="${this._save}"> ${this._saving?n.qy` <ha-circular-progress indeterminate aria-label="Saving" size="small"></ha-circular-progress> `:this.hass.localize("ui.panel.lovelace.editor.suggest_card.add")} </mwc-button> `} </ha-dialog> `:n.s6}},{kind:"get",static:!0,key:"styles",value:function(){return[c.nA,n.AH`@media all and (max-width:450px),all and (max-height:500px){ha-dialog{max-height:100%;height:100%}}@media all and (min-width:850px){ha-dialog{width:845px}}ha-dialog{max-width:845px;--dialog-z-index:6}.hidden{display:none}.element-preview{position:relative}hui-card,hui-section{padding-top:8px;margin:4px auto;max-width:390px;display:block;width:100%}.editor{padding-top:16px}`]}},{kind:"method",key:"_pickCard",value:function(){this._params?.lovelaceConfig&&this._params?.path&&this._params?.saveConfig&&((0,m.u)(this,{lovelaceConfig:this._params.lovelaceConfig,saveConfig:this._params.saveConfig,path:this._params.path,entities:this._params.entities}),this.closeDialog())}},{kind:"method",key:"_computeNewConfig",value:function(t,e){if(!this._viewSupportsSection)return(0,p.DU)(t,e,this._cardConfig);const{viewIndex:i,sectionIndex:s}=(0,_.$P)(e);if(void 0===s){const e=this._sectionConfig??{type:"grid",cards:this._cardConfig};return(0,p.Bn)(t,i,e)}const a=this._sectionConfig?this._sectionConfig.cards||[]:this._cardConfig;return(0,p.DU)(t,[i,s],a)}},{kind:"method",key:"_save",value:async function(){if(!(this._params?.lovelaceConfig&&this._params?.path&&this._params?.saveConfig&&this._cardConfig))return;this._saving=!0;const t=this._computeNewConfig(this._params.lovelaceConfig,this._params.path);await this._params.saveConfig(t),this._saving=!1,(0,u.f)(this,this.hass),this.closeDialog()}}]}}),n.WF);s()}catch(t){s(t)}}))},50157:(t,e,i)=>{i.d(e,{f:()=>a});var s=i(18589);const a=(t,e)=>(0,s.P)(t,{message:e.localize("ui.common.successfully_saved")})},24892:(t,e,i)=>{i(253),i(54846);var s=i(79192),a=i(50289),o=i(29818);class r extends a.WF{constructor(){super(),this.min=0,this.max=100,this.step=1,this.startAngle=135,this.arcLength=270,this.handleSize=6,this.handleZoom=1.5,this.readonly=!1,this.disabled=!1,this.dragging=!1,this.rtl=!1,this.outside=!1,this._scale=1,this.dragEnd=this.dragEnd.bind(this),this.drag=this.drag.bind(this),this._keyStep=this._keyStep.bind(this)}connectedCallback(){super.connectedCallback(),document.addEventListener("mouseup",this.dragEnd),document.addEventListener("touchend",this.dragEnd,{passive:!1}),document.addEventListener("mousemove",this.drag),document.addEventListener("touchmove",this.drag,{passive:!1}),document.addEventListener("keydown",this._keyStep)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("mouseup",this.dragEnd),document.removeEventListener("touchend",this.dragEnd),document.removeEventListener("mousemove",this.drag),document.removeEventListener("touchmove",this.drag),document.removeEventListener("keydown",this._keyStep)}get _start(){return this.startAngle*Math.PI/180}get _len(){return Math.min(this.arcLength*Math.PI/180,2*Math.PI-.01)}get _end(){return this._start+this._len}get _showHandle(){return!this.readonly&&(null!=this.value||null!=this.high&&null!=this.low)}_angleInside(t){let e=(this.startAngle+this.arcLength/2-t+180+360)%360-180;return e<this.arcLength/2&&e>-this.arcLength/2}_angle2xy(t){return this.rtl?{x:-Math.cos(t),y:Math.sin(t)}:{x:Math.cos(t),y:Math.sin(t)}}_xy2angle(t,e){return this.rtl&&(t=-t),(Math.atan2(e,t)-this._start+8*Math.PI)%(2*Math.PI)}_value2angle(t){const e=((t=Math.min(this.max,Math.max(this.min,t)))-this.min)/(this.max-this.min);return this._start+e*this._len}_angle2value(t){return Math.round((t/this._len*(this.max-this.min)+this.min)/this.step)*this.step}get _boundaries(){const t=this._angle2xy(this._start),e=this._angle2xy(this._end);let i=1;this._angleInside(270)||(i=Math.max(-t.y,-e.y));let s=1;this._angleInside(90)||(s=Math.max(t.y,e.y));let a=1;this._angleInside(180)||(a=Math.max(-t.x,-e.x));let o=1;return this._angleInside(0)||(o=Math.max(t.x,e.x)),{up:i,down:s,left:a,right:o,height:i+s,width:a+o}}_mouse2value(t){const e=t.type.startsWith("touch")?t.touches[0].clientX:t.clientX,i=t.type.startsWith("touch")?t.touches[0].clientY:t.clientY,s=this.shadowRoot.querySelector("svg").getBoundingClientRect(),a=this._boundaries,o=e-(s.left+a.left*s.width/a.width),r=i-(s.top+a.up*s.height/a.height),n=this._xy2angle(o,r);return this._angle2value(n)}dragStart(t){if(!this._showHandle||this.disabled)return;let e,i=t.target;if(this._rotation&&"focus"!==this._rotation.type)return;if(i.classList.contains("shadowpath"))if("touchstart"===t.type&&(e=window.setTimeout((()=>{this._rotation&&(this._rotation.cooldown=void 0)}),200)),null==this.low)i=this.shadowRoot.querySelector("#value");else{const e=this._mouse2value(t);i=Math.abs(e-this.low)<Math.abs(e-this.high)?this.shadowRoot.querySelector("#low"):this.shadowRoot.querySelector("#high")}if(i.classList.contains("overflow")&&(i=i.nextElementSibling),!i.classList.contains("handle"))return;i.setAttribute("stroke-width",String(2*this.handleSize*this.handleZoom*this._scale));const s="high"===i.id?this.low:this.min,a="low"===i.id?this.high:this.max;this._rotation={handle:i,min:s,max:a,start:this[i.id],type:t.type,cooldown:e},this.dragging=!0}_cleanupRotation(){const t=this._rotation.handle;t.setAttribute("stroke-width",String(2*this.handleSize*this._scale)),this._rotation=void 0,this.dragging=!1,t.blur()}dragEnd(t){if(!this._showHandle||this.disabled)return;if(!this._rotation)return;const e=this._rotation.handle;this._cleanupRotation();let i=new CustomEvent("value-changed",{detail:{[e.id]:this[e.id]},bubbles:!0,composed:!0});this.dispatchEvent(i),this.low&&this.low>=.99*this.max?this._reverseOrder=!0:this._reverseOrder=!1}drag(t){if(!this._showHandle||this.disabled)return;if(!this._rotation)return;if(this._rotation.cooldown)return window.clearTimeout(this._rotation.cooldown),void this._cleanupRotation();if("focus"===this._rotation.type)return;t.preventDefault();const e=this._mouse2value(t);this._dragpos(e)}_dragpos(t){if(t<this._rotation.min||t>this._rotation.max)return;const e=this._rotation.handle;this[e.id]=t;let i=new CustomEvent("value-changing",{detail:{[e.id]:t},bubbles:!0,composed:!0});this.dispatchEvent(i)}_keyStep(t){if(!this._showHandle||this.disabled)return;if(!this._rotation)return;const e=this._rotation.handle;"ArrowLeft"!==t.key&&"ArrowDown"!==t.key||(t.preventDefault(),this.rtl?this._dragpos(this[e.id]+this.step):this._dragpos(this[e.id]-this.step)),"ArrowRight"!==t.key&&"ArrowUp"!==t.key||(t.preventDefault(),this.rtl?this._dragpos(this[e.id]-this.step):this._dragpos(this[e.id]+this.step)),"Home"===t.key&&(t.preventDefault(),this._dragpos(this.min)),"End"===t.key&&(t.preventDefault(),this._dragpos(this.max))}updated(t){if(this.shadowRoot.querySelector(".slider")){const t=window.getComputedStyle(this.shadowRoot.querySelector(".slider"));if(t&&t.strokeWidth){const e=parseFloat(t.strokeWidth);if(e>this.handleSize*this.handleZoom){const t=this._boundaries,i=`\n          ${e/2*Math.abs(t.up)}px\n          ${e/2*Math.abs(t.right)}px\n          ${e/2*Math.abs(t.down)}px\n          ${e/2*Math.abs(t.left)}px`;this.shadowRoot.querySelector("svg").style.margin=i}}}if(this.shadowRoot.querySelector("svg")&&void 0===this.shadowRoot.querySelector("svg").style.vectorEffect){t.has("_scale")&&1!=this._scale&&this.shadowRoot.querySelector("svg").querySelectorAll("path").forEach((t=>{if(t.getAttribute("stroke-width"))return;const e=parseFloat(getComputedStyle(t).getPropertyValue("stroke-width"));t.style.strokeWidth=e*this._scale+"px"}));const e=this.shadowRoot.querySelector("svg").getBoundingClientRect(),i=Math.max(e.width,e.height);this._scale=2/i}}_renderArc(t,e){const i=e-t,s=this._angle2xy(t),a=this._angle2xy(e+.001);return`\n      M ${s.x} ${s.y}\n      A 1 1,\n        0,\n        ${i>Math.PI?"1":"0"} ${this.rtl?"0":"1"},\n        ${a.x} ${a.y}\n    `}_renderHandle(t){const e=this._value2angle(this[t]),i=this._angle2xy(e),s={value:this.valueLabel,low:this.lowLabel,high:this.highLabel}[t]||"";return a.JW` <g class="${t} handle"> <path id="${t}" class="overflow" d="
          M ${i.x} ${i.y}
          L ${i.x+.001} ${i.y+.001}
          " vector-effect="non-scaling-stroke" stroke="rgba(0,0,0,0)" stroke-width="${4*this.handleSize*this._scale}"/> <path id="${t}" class="handle" d="
          M ${i.x} ${i.y}
          L ${i.x+.001} ${i.y+.001}
          " vector-effect="non-scaling-stroke" stroke-width="${2*this.handleSize*this._scale}" tabindex="0" @focus="${this.dragStart}" @blur="${this.dragEnd}" role="slider" aria-valuemin="${this.min}" aria-valuemax="${this.max}" aria-valuenow="${this[t]}" aria-disabled="${this.disabled}" aria-label="${s||""}"/> </g> `}render(){const t=this._boundaries;return a.qy` <svg @mousedown="${this.dragStart}" @touchstart="${this.dragStart}" xmln="http://www.w3.org/2000/svg" viewBox="${-t.left} ${-t.up} ${t.width} ${t.height}" style="margin:${this.handleSize*this.handleZoom}px" ?disabled="${this.disabled}" focusable="false"> <g class="slider"> <path class="path" d="${this._renderArc(this._start,this._end)}" vector-effect="non-scaling-stroke"/> <g class="bar"> ${null!=this.low&&null!=this.high&&this.outside?a.JW` <path class="bar low" vector-effect="non-scaling-stroke" d="${this._renderArc(this._value2angle(this.min),this._value2angle(this.low))}"/> <path class="bar high" vector-effect="non-scaling-stroke" d="${this._renderArc(this._value2angle(this.high),this._value2angle(this.max))}"/> `:a.JW` <path class="bar" vector-effect="non-scaling-stroke" d="${this._renderArc(this._value2angle(null!=this.low?this.low:this.min),this._value2angle(null!=this.high?this.high:this.value))}"/> `} </g> <path class="shadowpath" d="${this._renderArc(this._start,this._end)}" vector-effect="non-scaling-stroke" stroke="rgba(0,0,0,0)" stroke-width="${3*this.handleSize*this._scale}" stroke-linecap="butt"/> </g> <g class="handles"> ${this._showHandle?null!=this.low?this._reverseOrder?a.JW`${this._renderHandle("high")} ${this._renderHandle("low")}`:a.JW`${this._renderHandle("low")} ${this._renderHandle("high")}`:a.JW`${this._renderHandle("value")}`:""} </g> </svg> `}static get styles(){return a.AH`:host{display:inline-block;width:100%}svg{overflow:visible;display:block}path{transition:stroke 1s ease-out,stroke-width .2s ease-out}.slider{fill:none;stroke-width:var(--round-slider-path-width,3);stroke-linecap:var(--round-slider-linecap,round)}.path{stroke:var(--round-slider-path-color,lightgray)}g.bar{stroke:var(--round-slider-bar-color,deepskyblue)}.bar.low{stroke:var(--round-slider-low-bar-color)}.bar.high{stroke:var(--round-slider-high-bar-color)}svg[disabled] .bar{stroke:var(--round-slider-disabled-bar-color,darkgray)}g.handles{stroke:var(--round-slider-handle-color,var(--round-slider-bar-color,deepskyblue));stroke-linecap:round;cursor:var(--round-slider-handle-cursor,pointer)}g.low.handle{stroke:var(--round-slider-low-handle-color)}g.high.handle{stroke:var(--round-slider-high-handle-color)}svg[disabled] g.handles{stroke:var(--round-slider-disabled-bar-color,darkgray)}.handle:focus{outline:unset}`}}(0,s.__decorate)([(0,o.MZ)({type:Number})],r.prototype,"value",void 0),(0,s.__decorate)([(0,o.MZ)({type:Number})],r.prototype,"high",void 0),(0,s.__decorate)([(0,o.MZ)({type:Number})],r.prototype,"low",void 0),(0,s.__decorate)([(0,o.MZ)({type:Number})],r.prototype,"min",void 0),(0,s.__decorate)([(0,o.MZ)({type:Number})],r.prototype,"max",void 0),(0,s.__decorate)([(0,o.MZ)({type:Number})],r.prototype,"step",void 0),(0,s.__decorate)([(0,o.MZ)({type:Number})],r.prototype,"startAngle",void 0),(0,s.__decorate)([(0,o.MZ)({type:Number})],r.prototype,"arcLength",void 0),(0,s.__decorate)([(0,o.MZ)({type:Number})],r.prototype,"handleSize",void 0),(0,s.__decorate)([(0,o.MZ)({type:Number})],r.prototype,"handleZoom",void 0),(0,s.__decorate)([(0,o.MZ)({type:Boolean})],r.prototype,"readonly",void 0),(0,s.__decorate)([(0,o.MZ)({type:Boolean})],r.prototype,"disabled",void 0),(0,s.__decorate)([(0,o.MZ)({type:Boolean,reflect:!0})],r.prototype,"dragging",void 0),(0,s.__decorate)([(0,o.MZ)({type:Boolean})],r.prototype,"rtl",void 0),(0,s.__decorate)([(0,o.MZ)()],r.prototype,"valueLabel",void 0),(0,s.__decorate)([(0,o.MZ)()],r.prototype,"lowLabel",void 0),(0,s.__decorate)([(0,o.MZ)()],r.prototype,"highLabel",void 0),(0,s.__decorate)([(0,o.MZ)({type:Boolean})],r.prototype,"outside",void 0),(0,s.__decorate)([(0,o.wk)()],r.prototype,"_scale",void 0),customElements.define("round-slider",r)}};
//# sourceMappingURL=34602.BAQB13lv5e4.js.map