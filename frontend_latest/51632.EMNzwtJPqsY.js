export const id=51632;export const ids=[51632,96394,921];export const modules={79682:(e,t,a)=>{a.d(t,{f:()=>n});a(253),a(4525);var i=a(21863),o=a(33922);const n=(e,t)=>(l(t)||r(e,t))&&!d(e,t)&&s(e,t),r=(e,t)=>!t.component||(0,i.e)(t.component).some((t=>(0,o.x)(e,t))),s=(e,t)=>!t.not_component||!(0,i.e)(t.not_component).some((t=>(0,o.x)(e,t))),l=e=>e.core,d=(e,t)=>(e=>e.advancedOnly)(t)&&!(e=>e.userData?.showAdvanced)(e)},37456:(e,t,a)=>{a.d(t,{a:()=>o});const i=(0,a(58034).n)((e=>{history.replaceState({scrollPosition:e},"")}),300),o=e=>t=>({kind:"method",placement:"prototype",key:t.key,descriptor:{set(e){i(e),this[`__${String(t.key)}`]=e},get(){return this[`__${String(t.key)}`]||history.state?.scrollPosition},enumerable:!0,configurable:!0},finisher(a){const i=a.prototype.connectedCallback;a.prototype.connectedCallback=function(){i.call(this);const a=this[t.key];a&&this.updateComplete.then((()=>{const t=this.renderRoot.querySelector(e);t&&setTimeout((()=>{t.scrollTop=a}),0)}))}}})},96394:(e,t,a)=>{a.r(t);var i=a(36312),o=a(50289),n=a(29818),r=(a(32885),a(45346),a(11804),a(55321));(0,i.A)([(0,n.EM)("hass-loading-screen")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.MZ)({type:Boolean,attribute:"no-toolbar"})],key:"noToolbar",value:()=>!1},{kind:"field",decorators:[(0,n.MZ)({type:Boolean})],key:"rootnav",value:()=>!1},{kind:"field",decorators:[(0,n.MZ)({type:Boolean})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,n.MZ)()],key:"message",value:void 0},{kind:"method",key:"render",value:function(){return o.qy` ${this.noToolbar?"":o.qy`<div class="toolbar"> ${this.rootnav||history.state?.root?o.qy` <ha-menu-button .hass="${this.hass}" .narrow="${this.narrow}"></ha-menu-button> `:o.qy` <ha-icon-button-arrow-prev .hass="${this.hass}" @click="${this._handleBack}"></ha-icon-button-arrow-prev> `} </div>`} <div class="content"> <ha-circular-progress indeterminate></ha-circular-progress> ${this.message?o.qy`<div id="loading-text">${this.message}</div>`:o.s6} </div> `}},{kind:"method",key:"_handleBack",value:function(){history.back()}},{kind:"get",static:!0,key:"styles",value:function(){return[r.RF,o.AH`:host{display:block;height:100%;background-color:var(--primary-background-color)}.toolbar{display:flex;align-items:center;font-size:20px;height:var(--header-height);padding:8px 12px;pointer-events:none;background-color:var(--app-header-background-color);font-weight:400;color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box}@media (max-width:599px){.toolbar{padding:4px}}ha-icon-button-arrow-prev,ha-menu-button{pointer-events:auto}.content{height:calc(100% - var(--header-height));display:flex;flex-direction:column;align-items:center;justify-content:center}#loading-text{max-width:350px;margin-top:16px}`]}}]}}),o.WF)},921:(e,t,a)=>{var i=a(36312),o=a(68689),n=(a(253),a(2075),a(94438),a(16891),a(50289)),r=a(29818),s=a(85323),l=a(94100),d=a(37456),c=(a(45346),a(11804),a(88400),a(17081),a(55321)),h=a(79682);(0,i.A)([(0,r.EM)("hass-tabs-subpage")],(function(e,t){class a extends t{constructor(...t){super(...t),e(this)}}return{F:a,d:[{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.MZ)({type:Boolean})],key:"supervisor",value:()=>!1},{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"localizeFunc",value:void 0},{kind:"field",decorators:[(0,r.MZ)({type:String,attribute:"back-path"})],key:"backPath",value:void 0},{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"backCallback",value:void 0},{kind:"field",decorators:[(0,r.MZ)({type:Boolean,attribute:"main-page"})],key:"mainPage",value:()=>!1},{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"route",value:void 0},{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"tabs",value:void 0},{kind:"field",decorators:[(0,r.MZ)({type:Boolean,reflect:!0})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,r.MZ)({type:Boolean,reflect:!0,attribute:"is-wide"})],key:"isWide",value:()=>!1},{kind:"field",decorators:[(0,r.MZ)({type:Boolean})],key:"pane",value:()=>!1},{kind:"field",decorators:[(0,r.wk)()],key:"_activeTab",value:void 0},{kind:"field",decorators:[(0,d.a)(".content")],key:"_savedScrollPos",value:void 0},{kind:"field",key:"_getTabs",value(){return(0,l.A)(((e,t,a,i,o,r)=>{const s=e.filter((e=>(0,h.f)(this.hass,e)));if(s.length<2){if(1===s.length){const e=s[0];return[e.translationKey?r(e.translationKey):e.name]}return[""]}return s.map((e=>n.qy` <a href="${e.path}"> <ha-tab .hass="${this.hass}" .active="${e.path===t?.path}" .narrow="${this.narrow}" .name="${e.translationKey?r(e.translationKey):e.name}"> ${e.iconPath?n.qy`<ha-svg-icon slot="icon" .path="${e.iconPath}"></ha-svg-icon>`:""} </ha-tab> </a> `))}))}},{kind:"method",key:"willUpdate",value:function(e){e.has("route")&&(this._activeTab=this.tabs.find((e=>`${this.route.prefix}${this.route.path}`.includes(e.path)))),(0,o.A)(a,"willUpdate",this,3)([e])}},{kind:"method",key:"render",value:function(){const e=this._getTabs(this.tabs,this._activeTab,this.hass.config.components,this.hass.language,this.narrow,this.localizeFunc||this.hass.localize),t=e.length>1;return n.qy` <div class="toolbar"> <slot name="toolbar"> <div class="toolbar-content"> ${this.mainPage||!this.backPath&&history.state?.root?n.qy` <ha-menu-button .hassio="${this.supervisor}" .hass="${this.hass}" .narrow="${this.narrow}"></ha-menu-button> `:this.backPath?n.qy` <a href="${this.backPath}"> <ha-icon-button-arrow-prev .hass="${this.hass}"></ha-icon-button-arrow-prev> </a> `:n.qy` <ha-icon-button-arrow-prev .hass="${this.hass}" @click="${this._backTapped}"></ha-icon-button-arrow-prev> `} ${this.narrow||!t?n.qy`<div class="main-title"> <slot name="header">${t?"":e[0]}</slot> </div>`:""} ${t&&!this.narrow?n.qy`<div id="tabbar">${e}</div>`:""} <div id="toolbar-icon"> <slot name="toolbar-icon"></slot> </div> </div> </slot> ${t&&this.narrow?n.qy`<div id="tabbar" class="bottom-bar">${e}</div>`:""} </div> <div class="container"> ${this.pane?n.qy`<div class="pane"> <div class="shadow-container"></div> <div class="ha-scrollbar"> <slot name="pane"></slot> </div> </div>`:n.s6} <div class="content ha-scrollbar ${(0,s.H)({tabs:t})}" @scroll="${this._saveScrollPos}"> <slot></slot> </div> </div> <div id="fab" class="${(0,s.H)({tabs:t})}"> <slot name="fab"></slot> </div> `}},{kind:"method",decorators:[(0,r.Ls)({passive:!0})],key:"_saveScrollPos",value:function(e){this._savedScrollPos=e.target.scrollTop}},{kind:"method",key:"_backTapped",value:function(){this.backCallback?this.backCallback():history.back()}},{kind:"get",static:!0,key:"styles",value:function(){return[c.dp,n.AH`:host{display:block;height:100%;background-color:var(--primary-background-color)}:host([narrow]){width:100%;position:fixed}.container{display:flex;height:calc(100% - var(--header-height))}:host([narrow]) .container{height:100%}ha-menu-button{margin-right:24px;margin-inline-end:24px;margin-inline-start:initial}.toolbar{font-size:20px;height:var(--header-height);background-color:var(--sidebar-background-color);font-weight:400;border-bottom:1px solid var(--divider-color);box-sizing:border-box}.toolbar-content{padding:8px 12px;display:flex;align-items:center;height:100%;box-sizing:border-box}@media (max-width:599px){.toolbar-content{padding:4px}}.toolbar a{color:var(--sidebar-text-color);text-decoration:none}.bottom-bar a{width:25%}#tabbar{display:flex;font-size:14px;overflow:hidden}#tabbar>a{overflow:hidden;max-width:45%}#tabbar.bottom-bar{position:absolute;bottom:0;left:0;padding:0 16px;box-sizing:border-box;background-color:var(--sidebar-background-color);border-top:1px solid var(--divider-color);justify-content:space-around;z-index:2;font-size:12px;width:100%;padding-bottom:env(safe-area-inset-bottom)}#tabbar:not(.bottom-bar){flex:1;justify-content:center}:host(:not([narrow])) #toolbar-icon{min-width:40px}::slotted([slot=toolbar-icon]),ha-icon-button-arrow-prev,ha-menu-button{display:flex;flex-shrink:0;pointer-events:auto;color:var(--sidebar-icon-color)}.main-title{flex:1;max-height:var(--header-height);line-height:20px;color:var(--sidebar-text-color);margin:var(--main-title-margin,var(--margin-title))}.content{position:relative;width:calc(100% - env(safe-area-inset-left) - env(safe-area-inset-right));margin-left:env(safe-area-inset-left);margin-right:env(safe-area-inset-right);margin-inline-start:env(safe-area-inset-left);margin-inline-end:env(safe-area-inset-right);overflow:auto;-webkit-overflow-scrolling:touch}:host([narrow]) .content.tabs{height:calc(100% - 2 * var(--header-height));height:calc(100% - 2 * var(--header-height) - env(safe-area-inset-bottom))}#fab{position:fixed;right:calc(16px + env(safe-area-inset-right));inset-inline-end:calc(16px + env(safe-area-inset-right));inset-inline-start:initial;bottom:calc(16px + env(safe-area-inset-bottom));z-index:1;display:flex;flex-wrap:wrap;justify-content:flex-end;gap:8px}:host([narrow]) #fab.tabs{bottom:calc(84px + env(safe-area-inset-bottom))}#fab[is-wide]{bottom:24px;right:24px;inset-inline-end:24px;inset-inline-start:initial}.pane{border-right:1px solid var(--divider-color);border-inline-end:1px solid var(--divider-color);border-inline-start:initial;box-sizing:border-box;display:flex;flex:0 0 var(--sidepane-width,250px);width:var(--sidepane-width,250px);flex-direction:column;position:relative}.pane .ha-scrollbar{flex:1}`]}}]}}),n.WF)},71622:(e,t,a)=>{var i=a(36312),o=a(50289),n=a(29818),r=a(85323);(0,i.A)([(0,n.EM)("ha-config-section")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.MZ)({type:Boolean})],key:"isWide",value:()=>!1},{kind:"field",decorators:[(0,n.MZ)({type:Boolean})],key:"vertical",value:()=>!1},{kind:"field",decorators:[(0,n.MZ)({type:Boolean,attribute:"full-width"})],key:"fullWidth",value:()=>!1},{kind:"method",key:"render",value:function(){return o.qy` <div class="content ${(0,r.H)({narrow:!this.isWide,"full-width":this.fullWidth})}"> <div class="header"><slot name="header"></slot></div> <div class="together layout ${(0,r.H)({narrow:!this.isWide,vertical:this.vertical||!this.isWide,horizontal:!this.vertical&&this.isWide})}"> <div class="intro"><slot name="introduction"></slot></div> <div class="panel flex-auto"><slot></slot></div> </div> </div> `}},{kind:"get",static:!0,key:"styles",value:function(){return o.AH`:host{display:block}.content{padding:28px 20px 0;max-width:1040px;margin:0 auto}.layout{display:flex}.horizontal{flex-direction:row}.vertical{flex-direction:column}.flex-auto{flex:1 1 auto}.header{font-family:var(--paper-font-headline_-_font-family);-webkit-font-smoothing:var(--paper-font-headline_-_-webkit-font-smoothing);font-size:var(--paper-font-headline_-_font-size);font-weight:var(--paper-font-headline_-_font-weight);letter-spacing:var(--paper-font-headline_-_letter-spacing);line-height:var(--paper-font-headline_-_line-height);opacity:var(--dark-primary-opacity)}.together{margin-top:32px}.intro{font-family:var(--paper-font-subhead_-_font-family);-webkit-font-smoothing:var(--paper-font-subhead_-_-webkit-font-smoothing);font-weight:var(--paper-font-subhead_-_font-weight);line-height:var(--paper-font-subhead_-_line-height);width:100%;opacity:var(--dark-primary-opacity);font-size:14px;padding-bottom:20px}.horizontal .intro{max-width:400px;margin-right:40px;margin-inline-end:40px;margin-inline-start:initial}.panel{margin-top:-24px}.panel ::slotted(*){margin-top:24px;display:block}.narrow.content{max-width:640px}.narrow .together{margin-top:20px}.narrow .intro{padding-bottom:20px;margin-right:0;margin-inline-end:0;margin-inline-start:initial;max-width:500px}.full-width{padding:0}.full-width .layout{flex-direction:column}`}}]}}),o.WF)},51632:(e,t,a)=>{a.r(t),a.d(t,{HaConfigPerson:()=>v});var i=a(36312),o=a(68689),n=(a(24545),a(51855),a(82130),a(31743),a(22328),a(4959),a(62435),a(253),a(2075),a(94438),a(16891),a(63893),a(50289)),r=a(29818),s=a(2682),l=(a(13082),a(52427),a(88400),a(13830),a(85323)),d=a(55165),c=a(71443);(0,i.A)([(0,r.EM)("ha-person-badge")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"person",value:void 0},{kind:"method",key:"render",value:function(){if(!this.person)return n.s6;const e=this.person.picture;if(e)return n.qy`<div style="${(0,d.W)({backgroundImage:`url(${e})`})}" class="picture"></div>`;const t=(0,c._2)(this.person.name);return n.qy`<div class="initials ${(0,l.H)({long:t.length>2})}"> ${t} </div>`}},{kind:"get",static:!0,key:"styles",value:function(){return n.AH`:host{width:40px;height:40px;display:block}.picture{width:100%;height:100%;background-size:cover;border-radius:50%}.initials{display:inline-flex;justify-content:center;align-items:center;box-sizing:border-box;width:100%;height:100%;border-radius:50%;background-color:var(--light-primary-color);text-decoration:none;color:var(--text-light-primary-color,var(--primary-text-color));overflow:hidden;font-size:var(--person-badge-font-size, 1em)}.initials.long{font-size:80%}`}}]}}),n.WF);var h=a(6121),p=(a(96394),a(921),a(84976)),u=(a(71622),a(25473)),f=a(34897);const g=()=>a.e(12154).then(a.bind(a,12154));let v=(0,i.A)([(0,r.EM)("ha-config-person")],(function(e,t){class a extends t{constructor(...t){super(...t),e(this)}}return{F:a,d:[{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.MZ)({type:Boolean})],key:"isWide",value:()=>!1},{kind:"field",decorators:[(0,r.MZ)({type:Boolean})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"route",value:void 0},{kind:"field",decorators:[(0,r.wk)()],key:"_storageItems",value:void 0},{kind:"field",decorators:[(0,r.wk)()],key:"_configItems",value:void 0},{kind:"field",key:"_usersLoad",value:void 0},{kind:"method",key:"render",value:function(){if(!this.hass||void 0===this._storageItems||void 0===this._configItems)return n.qy` <hass-loading-screen></hass-loading-screen> `;const e=this.hass;return n.qy` <hass-tabs-subpage .hass="${this.hass}" .narrow="${this.narrow}" .route="${this.route}" back-path="/config" .tabs="${u.configSections.persons}"> <ha-config-section .isWide="${this.isWide}"> <span slot="header">${e.localize("ui.panel.config.person.caption")}</span> <span slot="introduction"> <p>${e.localize("ui.panel.config.person.introduction")}</p> ${this._configItems.length>0?n.qy` <p> ${e.localize("ui.panel.config.person.note_about_persons_configured_in_yaml")} </p> `:""} <a href="${(0,p.o)(this.hass,"/integrations/person/")}" target="_blank" rel="noreferrer"> ${this.hass.localize("ui.panel.config.person.learn_more")} </a> </span> <ha-card outlined class="storage"> <mwc-list> ${this._storageItems.map((e=>n.qy` <ha-list-item graphic="avatar" @click="${this._openEditEntry}" .entry="${e}"> <ha-person-badge .hass="${this.hass}" .person="${e}" slot="graphic"></ha-person-badge> <span>${e.name}</span> </ha-list-item> `))} </mwc-list> ${0===this._storageItems.length?n.qy` <div class="empty"> ${e.localize("ui.panel.config.person.no_persons_created_yet")} <mwc-button @click="${this._createPerson}"> ${e.localize("ui.panel.config.person.create_person")}</mwc-button> </div> `:n.s6} </ha-card> ${this._configItems.length>0?n.qy` <ha-card outlined header="Configuration.yaml persons"> <mwc-list> ${this._configItems.map((e=>n.qy` <ha-list-item graphic="avatar"> <ha-person-badge .hass="${this.hass}" .person="${e}" slot="graphic"></ha-person-badge> <span>${e.name}</span> </ha-list-item> `))} </mwc-list> </ha-card> `:n.s6} </ha-config-section> <ha-fab slot="fab" .label="${e.localize("ui.panel.config.person.add_person")}" extended @click="${this._createPerson}"> <ha-svg-icon slot="icon" .path="${"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}"></ha-svg-icon> </ha-fab> </hass-tabs-subpage> `}},{kind:"method",key:"firstUpdated",value:function(e){(0,o.A)(a,"firstUpdated",this,3)([e]),this._fetchData(),g()}},{kind:"method",key:"_fetchData",value:async function(){this._usersLoad=(0,c.hU)(this.hass);const e=await(t=this.hass,t.callWS({type:"person/list"}));var t;this._storageItems=e.storage.sort(((e,t)=>(0,s.x)(e.name,t.name,this.hass.locale.language))),this._configItems=e.config.sort(((e,t)=>(0,s.x)(e.name,t.name,this.hass.locale.language))),this._openDialogIfPersonSpecifiedInRoute()}},{kind:"method",key:"_openDialogIfPersonSpecifiedInRoute",value:function(){if(!this.route.path.includes("/edit/"))return;const e=this.route.path.split("/edit/"),t=e.length>1?e[1]:null;if(!t)return;const a=this._storageItems.find((e=>e.id===t));a?this._openDialog(a):(0,h.showAlertDialog)(this,{title:this.hass?.localize("ui.panel.config.person.person_not_found_title"),text:this.hass?.localize("ui.panel.config.person.person_not_found")})}},{kind:"method",key:"_createPerson",value:function(){this._openDialog()}},{kind:"method",key:"_openEditEntry",value:function(e){const t=e.currentTarget.entry;this._openDialog(t)}},{kind:"method",key:"_allowedUsers",value:function(e,t){const a=new Set;for(const e of[this._configItems,this._storageItems])for(const t of e)t.user_id&&a.add(t.user_id);const i=t?t.user_id:void 0;return e.filter((e=>e.id===i||!a.has(e.id)))}},{kind:"method",key:"_openDialog",value:async function(e){const t=await this._usersLoad;var a,i;a=this,i={entry:e,users:this._allowedUsers(t,e),createEntry:async e=>{const t=await((e,t)=>e.callWS({type:"person/create",...t}))(this.hass,e);this._storageItems=this._storageItems.concat(t).sort(((e,t)=>(0,s.x)(e.name,t.name,this.hass.locale.language)))},updateEntry:async t=>{const a=await(i=this.hass,o=e.id,n=t,i.callWS({type:"person/update",person_id:o,...n}));var i,o,n;this._storageItems=this._storageItems.map((t=>t===e?a:t))},removeEntry:async()=>{if(!await(0,h.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.person.confirm_delete_title",{name:e.name}),text:this.hass.localize("ui.panel.config.person.confirm_delete_text"),dismissText:this.hass.localize("ui.common.cancel"),confirmText:this.hass.localize("ui.common.delete"),destructive:!0}))return!1;try{return await(t=this.hass,a=e.id,t.callWS({type:"person/delete",person_id:a})),this._storageItems=this._storageItems.filter((t=>t!==e)),!0}catch(e){return!1}var t,a},refreshUsers:()=>{this._usersLoad=(0,c.hU)(this.hass)}},(0,f.r)(a,"show-dialog",{dialogTag:"dialog-person-detail",dialogImport:g,dialogParams:i})}},{kind:"get",static:!0,key:"styles",value:function(){return n.AH`a{color:var(--primary-color)}ha-card{max-width:600px;margin:16px auto;overflow:hidden}.empty{padding:8px;display:flex;align-items:center;justify-content:space-around}`}}]}}),n.WF)}};
//# sourceMappingURL=51632.EMNzwtJPqsY.js.map