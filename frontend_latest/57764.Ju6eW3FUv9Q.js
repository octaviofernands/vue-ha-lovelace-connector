export const id=57764;export const ids=[57764];export const modules={50506:(s,e,t)=>{t.d(e,{G:()=>i});const i=(s,e,t)=>{let i;const o=async()=>{try{await e(s)}finally{i=setTimeout((()=>o()),t)}};return o(),()=>clearTimeout(i)}},58154:(s,e,t)=>{t.d(e,{q:()=>a});var i=t(95266),o=t(26025);const a=async s=>(0,i.v)(s.config.version,2021,2,4)?s.callWS({type:"supervisor/api",endpoint:"/resolution/info",method:"get"}):(0,o.PS)(await s.callApi("GET","hassio/resolution/info"))},24954:(s,e,t)=>{t.d(e,{G:()=>i});const i=(s,e)=>{let t={};const i=s.connection.subscribeMessage((s=>"initial"===s.type?(t=s.data,void e(t)):"finish"===s.type?(i.then((s=>s())),void e(void 0)):(t={...t,[s.domain]:{...t[s.domain],info:{...t[s.domain].info,[s.key]:s.success?s.data:{error:!0,value:s.error.msg}}}},void e(t))),{type:"system_health/info"});return i}},57764:(s,e,t)=>{t.a(s,(async(s,i)=>{try{t.r(e),t.d(e,{UNHEALTHY_REASON_URL:()=>w,UNSUPPORTED_REASON_URL:()=>S});var o=t(36312),a=(t(89655),t(16891),t(72606),t(50289)),n=t(29818),l=t(33922),r=t(8581),h=t(34897),c=t(32920),u=t(50506),d=(t(13292),t(13082),t(32885),t(29180)),p=(t(21468),t(26025)),y=t(58154),m=t(46092),f=t(24954),_=t(6121),g=t(55321),v=t(84976),$=t(18589),k=s([r]);r=(k.then?(await k)():k)[0];const b=(s,e)=>"homeassistant"===s?-1:"homeassistant"===e?1:s<e?-1:e<s?1:0,S={},w={privileged:"/more-info/unsupported/privileged"};(0,o.A)([(0,n.EM)("dialog-system-information")],(function(s,e){return{F:class extends e{constructor(...e){super(...e),s(this)}},d:[{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_systemInfo",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_resolutionInfo",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_supervisorStats",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_coreStats",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_opened",value:()=>!1},{kind:"field",key:"_systemHealthSubscription",value:void 0},{kind:"field",key:"_hassIOSubscription",value:void 0},{kind:"method",key:"showDialog",value:function(){this._opened=!0,this.hass.loadBackendTranslation("system_health"),this._subscribe()}},{kind:"method",key:"closeDialog",value:function(){this._opened=!1,this._unsubscribe(),(0,h.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"_subscribe",value:function(){(0,l.x)(this.hass,"system_health")&&(this._systemHealthSubscription=(0,f.G)(this.hass,(s=>{s?this._systemInfo=s:this._systemHealthSubscription=void 0}))),(0,l.x)(this.hass,"hassio")&&(this._hassIOSubscription=(0,u.G)(this.hass,(async()=>{this._supervisorStats=await(0,p.lE)(this.hass,"supervisor"),this._coreStats=await(0,p.lE)(this.hass,"core")}),1e4),(0,y.q)(this.hass).then((s=>{this._resolutionInfo=s})))}},{kind:"method",key:"_unsubscribe",value:function(){this._systemHealthSubscription?.then((s=>s())),this._systemHealthSubscription=void 0,this._hassIOSubscription?.(),this._hassIOSubscription=void 0,this._systemInfo=void 0,this._resolutionInfo=void 0,this._coreStats=void 0,this._supervisorStats=void 0}},{kind:"method",key:"render",value:function(){if(!this._opened)return a.s6;const s=this._getSections();return a.qy` <ha-dialog open @closed="${this.closeDialog}" .heading="${(0,d.l)(this.hass,this.hass.localize("ui.panel.config.repairs.system_information"))}"> <div> ${this._resolutionInfo?a.qy`${this._resolutionInfo.unhealthy.length?a.qy`<ha-alert alert-type="error"> ${this.hass.localize("ui.dialogs.unhealthy.title")} <mwc-button slot="action" .label="${this.hass.localize("ui.panel.config.common.learn_more")}" @click="${this._unhealthyDialog}"> </mwc-button></ha-alert>`:""} ${this._resolutionInfo.unsupported.length?a.qy`<ha-alert alert-type="warning"> ${this.hass.localize("ui.dialogs.unsupported.title")} <mwc-button slot="action" .label="${this.hass.localize("ui.panel.config.common.learn_more")}" @click="${this._unsupportedDialog}"> </mwc-button> </ha-alert>`:""} `:""} <div>${s}</div> ${this._coreStats||this._supervisorStats?a.qy` <div> ${this._coreStats?a.qy` <h3> ${this.hass.localize("ui.panel.config.system_health.core_stats")} </h3> <ha-metric .heading="${this.hass.localize("ui.panel.config.system_health.cpu_usage")}" .value="${this._coreStats.cpu_percent}"></ha-metric> <ha-metric .heading="${this.hass.localize("ui.panel.config.system_health.ram_usage")}" .value="${this._coreStats.memory_percent}"></ha-metric> `:""} ${this._supervisorStats?a.qy` <h3> ${this.hass.localize("ui.panel.config.system_health.supervisor_stats")} </h3> <ha-metric .heading="${this.hass.localize("ui.panel.config.system_health.cpu_usage")}" .value="${this._supervisorStats.cpu_percent}"></ha-metric> <ha-metric .heading="${this.hass.localize("ui.panel.config.system_health.ram_usage")}" .value="${this._supervisorStats.memory_percent}"></ha-metric> `:""} </div> `:""} </div> <mwc-button slot="primaryAction" .label="${this.hass.localize("ui.panel.config.repairs.copy")}" @click="${this._copyInfo}"></mwc-button> </ha-dialog> `}},{kind:"method",key:"_unsupportedDialog",value:async function(){await(0,_.showAlertDialog)(this,{title:this.hass.localize("ui.dialogs.unsupported.title"),text:a.qy`${this.hass.localize("ui.dialogs.unsupported.description")} <br><br> <ul> ${this._resolutionInfo.unsupported.map((s=>a.qy` <li> <a href="${(0,v.o)(this.hass,S[s]||`/more-info/unsupported/${s}`)}" target="_blank" rel="noreferrer"> ${this.hass.localize(`ui.dialogs.unsupported.reason.${s}`)||s} </a> </li> `))} </ul>`})}},{kind:"method",key:"_unhealthyDialog",value:async function(){await(0,_.showAlertDialog)(this,{title:this.hass.localize("ui.dialogs.unhealthy.title"),text:a.qy`${this.hass.localize("ui.dialogs.unhealthy.description")} <br><br> <ul> ${this._resolutionInfo.unhealthy.map((s=>a.qy` <li> <a href="${(0,v.o)(this.hass,w[s]||`/more-info/unhealthy/${s}`)}" target="_blank" rel="noreferrer"> ${this.hass.localize(`ui.dialogs.unhealthy.reason.${s}`)||s} </a> </li> `))} </ul>`})}},{kind:"method",key:"_getSections",value:function(){const s=[];if(this._systemInfo){const e=Object.keys(this._systemInfo).sort(b);for(const t of e){const e=this._systemInfo[t],i=[];for(const s of Object.keys(e.info)){let o;if(e.info[s]&&"object"==typeof e.info[s]){const t=e.info[s];"pending"===t.type?o=a.qy` <ha-circular-progress indeterminate size="small"></ha-circular-progress> `:"failed"===t.type?o=a.qy` <span class="error">${t.error}</span>${t.more_info?a.qy` â€“ <a href="${t.more_info}" target="_blank" rel="noreferrer noopener"> ${this.hass.localize("ui.panel.config.info.system_health.more_info")} </a> `:""} `:"date"===t.type&&(o=(0,r.r6)(new Date(t.value),this.hass.locale,this.hass.config))}else o=e.info[s];i.push(a.qy` <tr> <td> ${this.hass.localize(`component.${t}.system_health.info.${s}`)||s} </td> <td>${o}</td> </tr> `)}"homeassistant"!==t&&s.push(a.qy` <div class="card-header"> <h3>${(0,m.p$)(this.hass.localize,t)}</h3> ${e.manage_url?a.qy` <a class="manage" href="${e.manage_url}"> <mwc-button> ${this.hass.localize("ui.panel.config.info.system_health.manage")} </mwc-button> </a> `:""} </div> `),s.push(a.qy` <table> ${i} </table> `)}}else s.push(a.qy` <div class="loading-container"> <ha-circular-progress indeterminate></ha-circular-progress> </div> `);return s}},{kind:"method",key:"_copyInfo",value:async function(){let s;const e=[];for(const t of Object.keys(this._systemInfo).sort(b)){const i=this._systemInfo[t];let o=!0;const a=[""+("homeassistant"!==t?`<details><summary>${(0,m.p$)(this.hass.localize,t)}</summary>\n`:"")];for(const s of Object.keys(i.info)){let e;if(i.info[s]&&"object"==typeof i.info[s]){const t=i.info[s];"pending"===t.type?e="pending":"failed"===t.type?e=`failed to load: ${t.error}`:"date"===t.type&&(e=(0,r.r6)(new Date(t.value),this.hass.locale,this.hass.config))}else e=i.info[s];o?(a.push(`${s} | ${e}\n-- | --`),o=!1):a.push(`${s} | ${e}`)}"homeassistant"===t?s=a.join("\n"):(e.push(a.join("\n")),"homeassistant"!==t&&e.push("</details>"))}await(0,c.l)(`## System Information\n${s}\n\n${e.join("\n\n")}`),(0,$.P)(this,{message:this.hass.localize("ui.common.copied_clipboard")})}},{kind:"field",static:!0,key:"styles",value:()=>[g.nA,a.AH`ha-alert{margin-bottom:16px;display:block}table{width:100%}td:first-child{width:45%}td:last-child{direction:ltr}.loading-container{display:flex;align-items:center;justify-content:center}.card-header{justify-content:space-between;display:flex;align-items:center}.error{color:var(--error-color)}a.manage{text-decoration:none}`]}]}}),a.WF);i()}catch(s){i(s)}}))}};
//# sourceMappingURL=57764.Ju6eW3FUv9Q.js.map