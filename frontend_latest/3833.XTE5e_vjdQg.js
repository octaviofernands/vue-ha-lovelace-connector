export const id=3833;export const ids=[3833];export const modules={3833:(a,e,s)=>{s.r(e),s.d(e,{TTSTryDialog:()=>g});var t=s(36312),i=s(50289),l=s(29818),o=s(96979),n=s(34897),d=(s(77372),s(29180)),r=(s(45920),s(12803)),h=s(6121);s(32885);let g=(0,t.A)([(0,l.EM)("dialog-tts-try")],(function(a,e){return{F:class extends e{constructor(...e){super(...e),a(this)}},d:[{kind:"field",decorators:[(0,l.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_loadingExample",value:()=>!1},{kind:"field",decorators:[(0,l.wk)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_valid",value:()=>!1},{kind:"field",decorators:[(0,l.P)("#message")],key:"_messageInput",value:void 0},{kind:"field",decorators:[(0,o.I)({key:"ttsTryMessages",state:!1,subscribe:!1})],key:"_messages",value:void 0},{kind:"method",key:"showDialog",value:function(a){this._params=a,this._valid=Boolean(this._defaultMessage)}},{kind:"method",key:"closeDialog",value:function(){this._params=void 0,(0,n.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"get",key:"_defaultMessage",value:function(){const a=this._params.language?.substring(0,2),e=this.hass.locale.language.substring(0,2);return a&&this._messages?.[a]?this._messages[a]:a===e?this.hass.localize("ui.dialogs.tts-try.message_example"):""}},{kind:"method",key:"render",value:function(){return this._params?i.qy` <ha-dialog open @closed="${this.closeDialog}" .heading="${(0,d.l)(this.hass,this.hass.localize("ui.dialogs.tts-try.header"))}"> <ha-textarea autogrow id="message" .label="${this.hass.localize("ui.dialogs.tts-try.message")}" .placeholder="${this.hass.localize("ui.dialogs.tts-try.message_placeholder")}" .value="${this._defaultMessage}" @input="${this._inputChanged}" ?dialogInitialFocus="${!this._defaultMessage}"> </ha-textarea> ${this._loadingExample?i.qy` <ha-circular-progress size="small" indeterminate slot="primaryAction" class="loading"></ha-circular-progress> `:i.qy` <ha-button ?dialogInitialFocus="${Boolean(this._defaultMessage)}" slot="primaryAction" .label="${this.hass.localize("ui.dialogs.tts-try.play")}" @click="${this._playExample}" .disabled="${!this._valid}"> <ha-svg-icon slot="icon" .path="${"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z"}"></ha-svg-icon> </ha-button> `} </ha-dialog> `:i.s6}},{kind:"method",key:"_inputChanged",value:async function(){this._valid=Boolean(this._messageInput?.value)}},{kind:"method",key:"_playExample",value:async function(){const a=this._messageInput?.value;if(!a)return;const e=this._params.engine,s=this._params.language,t=this._params.voice;s&&(this._messages={...this._messages,[s.substring(0,2)]:a}),this._loadingExample=!0;const i=new Audio;let l;i.play();try{l=(await(0,r.S_)(this.hass,{platform:e,message:a,language:s,options:{voice:t}})).path}catch(a){return this._loadingExample=!1,void(0,h.showAlertDialog)(this,{text:`Unable to load example. ${a.error||a.body||a}`,warning:!0})}i.src=l,i.addEventListener("canplaythrough",(()=>i.play())),i.addEventListener("playing",(()=>{this._loadingExample=!1})),i.addEventListener("error",(()=>{(0,h.showAlertDialog)(this,{title:"Error playing audio."}),this._loadingExample=!1}))}},{kind:"get",static:!0,key:"styles",value:function(){return i.AH`ha-dialog{--mdc-dialog-max-width:500px}ha-select,ha-textarea{width:100%}ha-select{margin-top:8px}.loading{height:36px}`}}]}}),i.WF)}};
//# sourceMappingURL=3833.XTE5e_vjdQg.js.map