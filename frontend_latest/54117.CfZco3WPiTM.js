export const id=54117;export const ids=[54117];export const modules={54117:(i,a,e)=>{e.r(a),e.d(a,{HuiSaveConfig:()=>d});var o=e(36312),t=(e(72606),e(50289)),s=e(29818),l=e(34897),n=(e(32885),e(29180),e(10900),e(24284),e(4169),e(60203),e(57641),e(55321)),c=e(84976),h=e(71797);const r={views:[{title:"Home"}]};let d=(0,o.A)([(0,s.EM)("hui-dialog-save-config")],(function(i,a){return{F:class extends a{constructor(){super(),i(this),this._saving=!1}},d:[{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.wk)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,s.wk)()],key:"_emptyConfig",value:()=>!1},{kind:"field",decorators:[(0,s.wk)()],key:"_saving",value:void 0},{kind:"method",key:"showDialog",value:function(i){this._params=i,this._emptyConfig=!1}},{kind:"method",key:"closeDialog",value:function(){return this._params=void 0,(0,l.r)(this,"dialog-closed",{dialog:this.localName}),!0}},{kind:"method",key:"render",value:function(){if(!this._params)return t.s6;const i=this.hass.localize("ui.panel.lovelace.editor.save_config.header");return t.qy` <ha-dialog open scrimClickAction escapeKeyAction @closed="${this._close}" .heading="${i}"> <ha-dialog-header slot="heading"> <ha-icon-button slot="navigationIcon" dialogAction="cancel" .label="${this.hass.localize("ui.common.close")}" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}"></ha-icon-button> <span slot="title">${i}</span> <a href="${(0,c.o)(this.hass,"/lovelace/")}" title="${this.hass.localize("ui.panel.lovelace.menu.help")}" target="_blank" rel="noreferrer" slot="actionItems"> <ha-icon-button .path="${"M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"}" .label="${this.hass.localize("ui.common.help")}"></ha-icon-button> </a> </ha-dialog-header> <div> <p> ${this.hass.localize("ui.panel.lovelace.editor.save_config.para")} </p> ${"storage"===this._params.mode?t.qy` <p> ${this.hass.localize("ui.panel.lovelace.editor.save_config.para_sure")} </p> <ha-formfield .label="${this.hass.localize("ui.panel.lovelace.editor.save_config.empty_config")}"> <ha-switch .checked="${this._emptyConfig}" @change="${this._emptyConfigChanged}" dialogInitialFocus></ha-switch></ha-formfield> `:t.qy` <p> ${this.hass.localize("ui.panel.lovelace.editor.save_config.yaml_mode")} </p> <p> ${this.hass.localize("ui.panel.lovelace.editor.save_config.yaml_control")} </p> <p> ${this.hass.localize("ui.panel.lovelace.editor.save_config.yaml_config")} </p> <ha-yaml-editor .hass="${this.hass}" .defaultValue="${this._params.lovelace.config}" dialogInitialFocus></ha-yaml-editor> `} </div> ${"storage"===this._params.mode?t.qy` <mwc-button slot="primaryAction" @click="${this.closeDialog}"> ${this.hass.localize("ui.common.cancel")} </mwc-button> <mwc-button slot="primaryAction" ?disabled="${this._saving}" @click="${this._saveConfig}"> ${this._saving?t.qy`<ha-circular-progress indeterminate size="small" aria-label="Saving"></ha-circular-progress>`:""} ${this.hass.localize("ui.panel.lovelace.editor.save_config.save")} </mwc-button> `:t.qy` <mwc-button slot="primaryAction" @click="${this.closeDialog}"> ${this.hass.localize("ui.panel.lovelace.editor.save_config.close")}</mwc-button> `} </ha-dialog> `}},{kind:"method",key:"_close",value:function(i){i&&i.stopPropagation(),this.closeDialog()}},{kind:"method",key:"_emptyConfigChanged",value:function(i){this._emptyConfig=i.target.checked}},{kind:"method",key:"_saveConfig",value:async function(){if(this.hass&&this._params){this._saving=!0;try{const i=this._params.lovelace;await i.saveConfig(this._emptyConfig?r:await(0,h.d4)(i.config,this.hass)),i.setEditMode(!0),this._saving=!1,this.closeDialog()}catch(i){alert(`Saving failed: ${i.message}`),this._saving=!1}}}},{kind:"get",static:!0,key:"styles",value:function(){return[n.nA,t.AH`ha-dialog{--dialog-content-padding:0 24px 24px 24px}ha-dialog-header a{color:inherit;text-decoration:none}`]}}]}}),t.WF)}};
//# sourceMappingURL=54117.CfZco3WPiTM.js.map