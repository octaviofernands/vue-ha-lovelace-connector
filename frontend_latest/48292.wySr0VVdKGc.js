export const id=48292;export const ids=[48292];export const modules={48292:(e,t,i)=>{i.a(e,(async(e,s)=>{try{i.r(t),i.d(t,{HuiTodoListCard:()=>T});var o=i(36312),a=i(68689),n=(i(54774),i(253),i(2075),i(94438),i(16891),i(63893),i(60132)),d=i(9854),l=i(50289),h=i(29818),c=i(85323),r=i(66066),u=i(94100),m=i(38962),p=i(42496),g=i(79051),_=(i(13082),i(35619),i(88725),i(4169),i(13830),i(32172),i(13740)),y=(i(77312),i(24260),i(88400),i(90431),i(9883)),k=i(38204),v=i(6121),f=i(24137),I=i(18102),b=i(46645),x=e([_]);_=(x.then?(await x)():x)[0];const $="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z",H="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",w="M15,16H19V18H15V16M15,8H22V10H15V8M15,12H21V14H15V12M3,18A2,2 0 0,0 5,20H11A2,2 0 0,0 13,18V8H3V18M14,5H11L10,4H6L5,5H2V7H14V5Z",V="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",M="M7,19V17H9V19H7M11,19V17H13V19H11M15,19V17H17V19H15M7,15V13H9V15H7M11,15V13H13V15H11M15,15V13H17V15H15M7,11V9H9V11H7M11,11V9H13V11H11M15,11V9H17V11H15M7,7V5H9V7H7M11,7V5H13V7H11M15,7V5H17V7H15Z",A="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",E="M18 21L14 17H17V7H14L18 3L22 7H19V17H22M2 19V17H12V19M2 13V11H9V13M2 7V5H6V7H2Z";let T=(0,o.A)([(0,h.EM)("hui-todo-list-card")],(function(e,t){class s extends t{constructor(...t){super(...t),e(this)}}return{F:s,d:[{kind:"method",static:!0,key:"getConfigElement",value:async function(){return await i.e(82656).then(i.bind(i,82656)),document.createElement("hui-todo-list-card-editor")}},{kind:"method",static:!0,key:"getStubConfig",value:function(e,t,i){return{type:"todo-list",entity:(0,I.B)(e,1,t,i,["todo"])[0]||""}}},{kind:"field",decorators:[(0,h.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,h.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,h.wk)()],key:"_entityId",value:void 0},{kind:"field",decorators:[(0,h.wk)()],key:"_items",value:void 0},{kind:"field",decorators:[(0,h.wk)()],key:"_reordering",value:()=>!1},{kind:"field",key:"_unsubItems",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,a.A)(s,"connectedCallback",this,3)([]),this.hasUpdated&&this._subscribeItems()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,a.A)(s,"disconnectedCallback",this,3)([]),this._unsubItems?.then((e=>e())),this._unsubItems=void 0}},{kind:"method",key:"getCardSize",value:function(){return 3+(this._config&&this._config.title?2:0)}},{kind:"method",key:"setConfig",value:function(e){this.checkConfig(e),this._config=e,this._entityId=e.entity}},{kind:"method",key:"checkConfig",value:function(e){if(!e.entity||"todo"!==e.entity.split(".")[0])throw new Error("Specify an entity from within the todo domain")}},{kind:"method",key:"getEntityId",value:function(){}},{kind:"field",key:"_getCheckedItems",value:()=>(0,u.A)((e=>e?e.filter((e=>e.status===k.aO.Completed)):[]))},{kind:"field",key:"_getUncheckedItems",value:()=>(0,u.A)((e=>e?e.filter((e=>e.status===k.aO.NeedsAction)):[]))},{kind:"method",key:"willUpdate",value:function(e){this.hasUpdated?!e.has("_entityId")&&this._items||(this._items=void 0,this._subscribeItems()):(this._entityId||(this._entityId=this.getEntityId()),this._subscribeItems())}},{kind:"method",key:"updated",value:function(e){if((0,a.A)(s,"updated",this,3)([e]),!this._config||!this.hass)return;const t=e.get("hass"),i=e.get("_config");(e.has("hass")&&t?.themes!==this.hass.themes||e.has("_config")&&i?.theme!==this._config.theme)&&(0,m.Q)(this,this.hass.themes,this._config.theme)}},{kind:"method",key:"render",value:function(){if(!this._config||!this.hass||!this._entityId)return l.s6;const e=this.hass.states[this._entityId];if(!e)return l.qy` <hui-warning> ${(0,b.j)(this.hass,this._entityId)} </hui-warning> `;const t=(0,y.g0)(e.state),i=this._getCheckedItems(this._items),s=this._getUncheckedItems(this._items);return l.qy` <ha-card .header="${this._config.title}" class="${(0,c.H)({"has-header":"title"in this._config})}"> <div class="addRow"> ${this.todoListSupportsFeature(k.Ed.CREATE_TODO_ITEM)?l.qy` <ha-textfield class="addBox" .placeholder="${this.hass.localize("ui.panel.lovelace.cards.todo-list.add_item")}" @keydown="${this._addKeyPress}" .disabled="${t}"></ha-textfield> <ha-icon-button class="addButton" .path="${A}" .title="${this.hass.localize("ui.panel.lovelace.cards.todo-list.add_item")}" .disabled="${t}" @click="${this._addItem}"> </ha-icon-button> `:l.s6} </div> <ha-sortable handle-selector="ha-svg-icon" draggable-selector=".draggable" .disabled="${!this._reordering}" @item-moved="${this._itemMoved}"> <mwc-list wrapFocus multi> ${s.length?l.qy` <div class="header" role="seperator"> <h2> ${this.hass.localize("ui.panel.lovelace.cards.todo-list.unchecked_items")} </h2> ${this.todoListSupportsFeature(k.Ed.MOVE_TODO_ITEM)?l.qy`<ha-button-menu @closed="${g.d}"> <ha-icon-button slot="trigger" .path="${V}"></ha-icon-button> <ha-list-item @click="${this._toggleReorder}" graphic="icon"> ${this.hass.localize(this._reordering?"ui.panel.lovelace.cards.todo-list.exit_reorder_items":"ui.panel.lovelace.cards.todo-list.reorder_items")} <ha-svg-icon slot="graphic" .path="${E}" .disabled="${t}"> </ha-svg-icon> </ha-list-item> </ha-button-menu>`:l.s6} </div> ${this._renderItems(s,t)} `:l.qy`<p class="empty"> ${this.hass.localize("ui.panel.lovelace.cards.todo-list.no_unchecked_items")} </p>`} ${i.length?l.qy` <div role="separator"> <div class="divider"></div> <div class="header"> <h2> ${this.hass.localize("ui.panel.lovelace.cards.todo-list.checked_items")} </h2> ${this.todoListSupportsFeature(k.Ed.DELETE_TODO_ITEM)?l.qy`<ha-button-menu @closed="${g.d}"> <ha-icon-button slot="trigger" .path="${V}"></ha-icon-button> <ha-list-item @click="${this._clearCompletedItems}" graphic="icon" class="warning"> ${this.hass.localize("ui.panel.lovelace.cards.todo-list.clear_items")} <ha-svg-icon class="warning" slot="graphic" .path="${w}" .disabled="${t}"> </ha-svg-icon> </ha-list-item> </ha-button-menu>`:l.s6} </div> </div> ${this._renderItems(i,t)} `:""} </mwc-list> </ha-sortable> </ha-card> `}},{kind:"method",key:"_renderItems",value:function(e,t=!1){return l.qy` ${(0,r.u)(e,(e=>e.uid),(e=>{const i=this.todoListSupportsFeature(k.Ed.DELETE_TODO_ITEM)&&!this.todoListSupportsFeature(k.Ed.UPDATE_TODO_ITEM),s=e.status!==k.aO.Completed&&this._reordering,o=e.due?e.due.includes("T")?new Date(e.due):(0,n.D)(new Date(`${e.due}T00:00:00`)):void 0,a=o&&!e.due.includes("T")&&(0,d.r)(new Date,o);return l.qy` <ha-check-list-item left .hasMeta="${s||i}" class="editRow ${(0,c.H)({draggable:e.status===k.aO.NeedsAction,completed:e.status===k.aO.Completed,multiline:Boolean(e.description||e.due)})}" .selected="${e.status===k.aO.Completed}" .disabled="${t||!this.todoListSupportsFeature(k.Ed.UPDATE_TODO_ITEM)}" item-id="${e.uid}" .itemId="${e.uid}" @change="${this._completeItem}" @click="${this._openItem}" @request-selected="${this._requestSelected}" @keydown="${this._handleKeydown}"> <div class="column"> <span class="summary">${e.summary}</span> ${e.description?l.qy`<ha-markdown-element class="description" .content="${e.description}"></ha-markdown-element>`:l.s6} ${o?l.qy`<div class="due ${o<new Date?"overdue":""}"> <ha-svg-icon .path="${$}"></ha-svg-icon>${a?this.hass.localize("ui.panel.lovelace.cards.todo-list.today"):l.qy`<ha-relative-time capitalize .hass="${this.hass}" .datetime="${o}"></ha-relative-time>`} </div>`:l.s6} </div> ${s?l.qy` <ha-svg-icon .title="${this.hass.localize("ui.panel.lovelace.cards.todo-list.drag_and_drop")}" class="reorderButton handle" .path="${M}" slot="meta"> </ha-svg-icon> `:i?l.qy`<ha-icon-button .title="${this.hass.localize("ui.panel.lovelace.cards.todo-list.delete_item")}" class="deleteItemButton" .path="${H}" .itemId="${e.uid}" slot="meta" @click="${this._deleteItem}"> </ha-icon-button>`:l.s6} </ha-check-list-item> `}))} `}},{kind:"method",key:"todoListSupportsFeature",value:function(e){const t=this.hass.states[this._entityId];return t&&(0,p.$)(t,e)}},{kind:"method",key:"_subscribeItems",value:async function(){this._unsubItems&&(this._unsubItems.then((e=>e())),this._unsubItems=void 0),this.hass&&this._entityId&&this._entityId in this.hass.states&&(this._unsubItems=(0,k.Xf)(this.hass,this._entityId,(e=>{this._items=e.items})))}},{kind:"method",key:"_getItem",value:function(e){return this._items?.find((t=>t.uid===e))}},{kind:"method",key:"_requestSelected",value:function(e){e.stopPropagation()}},{kind:"method",key:"_handleKeydown",value:function(e){" "!==e.key?"Enter"===e.key&&this._openItem(e):this._completeItem(e)}},{kind:"method",key:"_openItem",value:function(e){if(e.stopPropagation(),e.composedPath().find((e=>["input","a","button"].includes(e.localName))))return;const t=this._getItem(e.currentTarget.itemId);(0,f.X)(this,{entity:this._entityId,item:t})}},{kind:"method",key:"_completeItem",value:async function(e){let t,i;"keydown"===e.type&&(i=this.renderRoot.querySelector("mwc-list"),t=i.getFocusedItemIndex());const s=this._getItem(e.currentTarget.itemId);s&&(await(0,k.fk)(this.hass,this._entityId,{uid:s.uid,summary:s.summary,status:s.status===k.aO.NeedsAction?k.aO.Completed:k.aO.NeedsAction}),void 0!==t&&i&&(await this.updateComplete,await i.updateComplete,i.focusItemAtIndex(t)))}},{kind:"method",key:"_clearCompletedItems",value:async function(){if(!this.hass)return;const e=this._getCheckedItems(this._items).map((e=>e.uid));(0,v.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.lovelace.cards.todo-list.delete_confirm_title"),text:this.hass.localize("ui.panel.lovelace.cards.todo-list.delete_confirm_text",{number:e.length}),dismissText:this.hass.localize("ui.common.cancel"),confirmText:this.hass.localize("ui.common.delete"),destructive:!0,confirm:()=>{(0,k.K1)(this.hass,this._entityId,e)}})}},{kind:"get",key:"_newItem",value:function(){return this.shadowRoot.querySelector(".addBox")}},{kind:"method",key:"_addItem",value:function(e){const t=this._newItem;t.value.length>0&&(0,k.wE)(this.hass,this._entityId,{summary:t.value}),t.value="",e&&t.focus()}},{kind:"method",key:"_deleteItem",value:function(e){const t=this._getItem(e.target.itemId);t&&(0,k.K1)(this.hass,this._entityId,[t.uid])}},{kind:"method",key:"_addKeyPress",value:function(e){"Enter"===e.key&&this._addItem(null)}},{kind:"method",key:"_toggleReorder",value:async function(){this._reordering=!this._reordering}},{kind:"method",key:"_itemMoved",value:async function(e){e.stopPropagation();const{oldIndex:t,newIndex:i}=e.detail;this._moveItem(t,i)}},{kind:"method",key:"_moveItem",value:async function(e,t){e-=1,t-=1;const i=this._getUncheckedItems(this._items),s=i[e];let o;t>0&&(o=t<e?i[t-1]:i[t]);const a=this._items.findIndex((e=>e.uid===s.uid));if(this._items.splice(a,1),0===t)this._items.unshift(s);else{const e=this._items.findIndex((e=>e.uid===o.uid));this._items.splice(e+1,0,s)}this._items=[...this._items],await(0,k.Pe)(this.hass,this._entityId,s.uid,o?.uid)}},{kind:"get",static:!0,key:"styles",value:function(){return l.AH`ha-card{height:100%;box-sizing:border-box}.has-header{padding-top:0}.addRow{padding:16px;padding-bottom:0;position:relative}.addRow ha-icon-button{position:absolute;right:16px;inset-inline-start:initial;inset-inline-end:16px}.addRow,.header{display:flex;flex-direction:row;align-items:center}.header{padding-left:30px;padding-right:16px;padding-inline-start:30px;padding-inline-end:16px;margin-top:8px;justify-content:space-between;direction:var(--direction)}.header h2{color:var(--primary-text-color);font-size:inherit;font-weight:500}.empty{padding:16px 32px;display:inline-block}.item{margin-top:8px}ha-check-list-item{--mdc-list-item-meta-size:56px;min-height:56px;height:auto}ha-check-list-item.multiline{align-items:flex-start;--check-list-item-graphic-margin-top:8px}.row{display:flex;justify-content:space-between}.multiline .column{display:flex;flex-direction:column;margin-top:18px;margin-bottom:12px}.completed .summary{text-decoration:line-through}.description,.due{font-size:12px;color:var(--secondary-text-color)}.description{white-space:initial;overflow:hidden;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical}.description p{margin:0}.description a{color:var(--primary-color)}.due{display:flex;align-items:center}.due ha-svg-icon{margin-right:4px;margin-inline-end:4px;margin-inline-start:initial;--mdc-icon-size:14px}.due.overdue{color:var(--warning-color)}.completed .due.overdue{color:var(--secondary-text-color)}.handle{cursor:move;cursor:grab;height:24px;padding:16px 4px}.deleteItemButton{position:relative;left:8px;inset-inline-start:8px;inset-inline-end:initial}ha-textfield{flex-grow:1}.divider{height:1px;background-color:var(--divider-color);margin:10px 0}.clearall{cursor:pointer}.todoList{display:block;padding:8px}.warning{color:var(--error-color)}`}}]}}),l.WF);s()}catch(e){s(e)}}))},24137:(e,t,i)=>{i.d(t,{X:()=>a});var s=i(34897);const o=()=>i.e(93423).then(i.bind(i,93423)),a=(e,t)=>{(0,s.r)(e,"show-dialog",{dialogTag:"dialog-todo-item-editor",dialogImport:o,dialogParams:t})}}};
//# sourceMappingURL=48292.wySr0VVdKGc.js.map