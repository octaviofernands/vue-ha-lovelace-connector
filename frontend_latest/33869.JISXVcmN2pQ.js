export const id=33869;export const ids=[33869];export const modules={33869:(e,o,i)=>{i.r(o);var t=i(36312),a=i(68689),s=i(96087),l=(i(72606),i(51431)),r=i(50289),d=i(29818),n=i(85323),c=i(66419),h=i(16569),u=(i(32885),i(31979),i(4169),i(6121)),v=i(55321),m=i(18589),_=(i(94110),i(50118));const f=(0,c.NW)({title:(0,c.lq)((0,c.Yj)()),views:(0,c.YO)((0,c.Ik)())}),g=(0,c.NW)({strategy:(0,c.NW)({type:(0,c.Yj)()})});(0,t.A)([(0,d.EM)("hui-editor")],(function(e,o){class i extends o{constructor(...o){super(...o),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,d.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.MZ)({attribute:!1})],key:"lovelace",value:void 0},{kind:"field",decorators:[(0,d.MZ)({attribute:!1})],key:"closeEditor",value:void 0},{kind:"field",decorators:[(0,d.wk)()],key:"_saving",value:void 0},{kind:"field",decorators:[(0,d.wk)()],key:"_changed",value:void 0},{kind:"method",key:"render",value:function(){return r.qy` <ha-top-app-bar-fixed> <ha-icon-button slot="navigationIcon" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}" @click="${this._closeEditor}" .label="${this.hass.localize("ui.common.close")}"></ha-icon-button> <div slot="title"> ${this.hass.localize("ui.panel.lovelace.editor.raw_editor.header")} </div> <div slot="actionItems" class="save-button ${(0,n.H)({saved:!1===this._saving||!0===this._changed})}"> ${this._changed?this.hass.localize("ui.panel.lovelace.editor.raw_editor.unsaved_changes"):this.hass.localize("ui.panel.lovelace.editor.raw_editor.saved")} </div> <mwc-button raised slot="actionItems" @click="${this._handleSave}" .disabled="${!this._changed}">${this.hass.localize("ui.panel.lovelace.editor.raw_editor.save")}</mwc-button> <div class="content"> <ha-code-editor mode="yaml" autofocus autocomplete-entities autocomplete-icons .hass="${this.hass}" @value-changed="${this._yamlChanged}" @editor-save="${this._handleSave}" dir="ltr"> </ha-code-editor> </div> </ha-top-app-bar-fixed> `}},{kind:"method",key:"firstUpdated",value:function(e){(0,a.A)(i,"firstUpdated",this,3)([e]),this.yamlEditor.value=(0,l.dump)(this.lovelace.rawConfig)}},{kind:"method",key:"updated",value:function(e){const o=e.get("lovelace");!this._saving&&o&&this.lovelace&&o.rawConfig!==this.lovelace.rawConfig&&!(0,h.b)(o.rawConfig,this.lovelace.rawConfig)&&(0,m.P)(this,{message:this.hass.localize("ui.panel.lovelace.editor.raw_editor.lovelace_changed"),action:{action:()=>{this.yamlEditor.value=(0,l.dump)(this.lovelace.rawConfig)},text:this.hass.localize("ui.panel.lovelace.editor.raw_editor.reload")},duration:-1,dismissable:!1})}},{kind:"get",static:!0,key:"styles",value:function(){return[v.RF,r.AH`:host{--code-mirror-height:100%;--app-header-background-color:var(
            --app-header-edit-background-color,
            #455a64
          );--app-header-text-color:var(--app-header-edit-text-color, #fff)}mwc-button[disabled]{background-color:var(--mdc-theme-on-primary);border-radius:4px}.content{height:calc(100vh - var(--header-height))}.comments{font-size:16px}.save-button{opacity:0;font-size:14px;padding:0px 10px}.saved{opacity:1}`]}},{kind:"method",key:"_yamlChanged",value:function(){this._changed=(0,s.mk)(this.yamlEditor.codemirror.state)>0,this._changed&&!window.onbeforeunload?window.onbeforeunload=()=>!0:!this._changed&&window.onbeforeunload&&(window.onbeforeunload=null)}},{kind:"method",key:"_closeEditor",value:async function(){this._changed&&!await(0,u.showConfirmationDialog)(this,{text:this.hass.localize("ui.panel.lovelace.editor.raw_editor.confirm_unsaved_changes"),dismissText:this.hass.localize("ui.common.stay"),confirmText:this.hass.localize("ui.common.leave")})||(window.onbeforeunload=null,this.closeEditor&&this.closeEditor())}},{kind:"method",key:"_removeConfig",value:async function(){try{await this.lovelace.deleteConfig()}catch(e){(0,u.showAlertDialog)(this,{text:this.hass.localize("ui.panel.lovelace.editor.raw_editor.error_remove",{error:e})})}window.onbeforeunload=null,this.closeEditor&&this.closeEditor()}},{kind:"method",key:"_handleSave",value:async function(){this._saving=!0;const e=this.yamlEditor.value;if(!e)return void(0,u.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.lovelace.editor.raw_editor.confirm_delete_config_title"),text:this.hass.localize("ui.panel.lovelace.editor.raw_editor.confirm_delete_config_text"),confirmText:this.hass.localize("ui.common.delete"),dismissText:this.hass.localize("ui.common.cancel"),confirm:()=>this._removeConfig(),destructive:!0});if(this.yamlEditor.hasComments&&!confirm(this.hass.localize("ui.panel.lovelace.editor.raw_editor.confirm_unsaved_comments")))return;let o;try{o=(0,l.load)(e)}catch(e){return(0,u.showAlertDialog)(this,{text:this.hass.localize("ui.panel.lovelace.editor.raw_editor.error_parse_yaml",{error:e})}),void(this._saving=!1)}try{(0,_.Wu)(o)?(0,c.vA)(o,g):(0,c.vA)(o,f)}catch(e){return void(0,u.showAlertDialog)(this,{text:this.hass.localize("ui.panel.lovelace.editor.raw_editor.error_invalid_config",{error:e})})}o.resources&&(0,u.showAlertDialog)(this,{text:this.hass.localize("ui.panel.lovelace.editor.raw_editor.resources_moved")});try{await this.lovelace.saveConfig(o)}catch(e){(0,u.showAlertDialog)(this,{text:this.hass.localize("ui.panel.lovelace.editor.raw_editor.error_save_yaml",{error:e})})}window.onbeforeunload=null,this._changed=!1,this._saving=!1}},{kind:"get",key:"yamlEditor",value:function(){return this.shadowRoot.querySelector("ha-code-editor")}}]}}),r.WF)}};
//# sourceMappingURL=33869.JISXVcmN2pQ.js.map