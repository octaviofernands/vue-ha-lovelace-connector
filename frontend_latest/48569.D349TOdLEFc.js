export const id=48569;export const ids=[48569];export const modules={31338:(t,e,i)=>{i.d(e,{I$:()=>r,I3:()=>v,PV:()=>m,Po:()=>h,RK:()=>f,TB:()=>l,TH:()=>k,T_:()=>_,am:()=>n,jR:()=>d,ng:()=>s,nx:()=>g,o9:()=>c});var a=i(19244),o=i(54108);const n=(t,e)=>t.callWS({type:"device_automation/action/list",device_id:e}),s=(t,e)=>t.callWS({type:"device_automation/condition/list",device_id:e}),c=(t,e)=>t.callWS({type:"device_automation/trigger/list",device_id:e}),d=(t,e)=>t.callWS({type:"device_automation/action/capabilities",action:e}),r=(t,e)=>t.callWS({type:"device_automation/condition/capabilities",condition:e}),l=(t,e)=>t.callWS({type:"device_automation/trigger/capabilities",trigger:e}),u=["device_id","domain","entity_id","type","subtype","event","condition","platform"],h=(t,e,i)=>{if(typeof e!=typeof i)return!1;for(const a in e)if(u.includes(a))if("entity_id"!==a||e[a]?.includes(".")===i[a]?.includes(".")){if(!Object.is(e[a],i[a]))return!1}else if(!y(t,e[a],i[a]))return!1;for(const a in i)if(u.includes(a))if("entity_id"!==a||e[a]?.includes(".")===i[a]?.includes(".")){if(!Object.is(e[a],i[a]))return!1}else if(!y(t,e[a],i[a]))return!1;return!0},y=(t,e,i)=>!(!e||!i)&&(e.includes(".")&&(e=(0,o.Ox)(t)[e].id),i.includes(".")&&(i=(0,o.Ox)(t)[i].id),e===i),p=(t,e,i)=>{if(!i)return"<"+t.localize("ui.panel.config.automation.editor.unknown_entity")+">";if(i.includes(".")){const e=t.states[i];return e?(0,a.u)(e):i}const n=(0,o.P9)(e)[i];return n?(0,o.jh)(t,n)||i:"<"+t.localize("ui.panel.config.automation.editor.unknown_entity")+">"},m=(t,e,i)=>t.localize(`component.${i.domain}.device_automation.action_type.${i.type}`,{entity_name:p(t,e,i.entity_id),subtype:i.subtype?t.localize(`component.${i.domain}.device_automation.action_subtype.${i.subtype}`)||i.subtype:""})||(i.subtype?`"${i.subtype}" ${i.type}`:i.type),v=(t,e,i)=>t.localize(`component.${i.domain}.device_automation.condition_type.${i.type}`,{entity_name:p(t,e,i.entity_id),subtype:i.subtype?t.localize(`component.${i.domain}.device_automation.condition_subtype.${i.subtype}`)||i.subtype:""})||(i.subtype?`"${i.subtype}" ${i.type}`:i.type),g=(t,e,i)=>t.localize(`component.${i.domain}.device_automation.trigger_type.${i.type}`,{entity_name:p(t,e,i.entity_id),subtype:i.subtype?t.localize(`component.${i.domain}.device_automation.trigger_subtype.${i.subtype}`)||i.subtype:""})||(i.subtype?`"${i.subtype}" ${i.type}`:i.type),_=(t,e)=>i=>t.localize(`component.${e.domain}.device_automation.extra_fields.${i.name}`)||i.name,k=(t,e)=>i=>t.localize(`component.${e.domain}.device_automation.extra_fields_descriptions.${i.name}`),f=(t,e)=>t.metadata?.secondary&&!e.metadata?.secondary?1:!t.metadata?.secondary&&e.metadata?.secondary?-1:0},48569:(t,e,i)=>{i.r(e),i.d(e,{DialogDeviceAutomation:()=>y});var a=i(36312),o=i(68689),n=(i(72606),i(50289)),s=i(29818),c=i(34897),d=(i(29180),i(31338)),r=i(55321),l=(i(253),i(2075),i(16891),i(83546),i(76509),i(81771)),u=i(55979);let h=(0,a.A)(null,(function(t,e){return{F:class extends e{constructor(e){super(),this.headerKey=void 0,this.type=void 0,t(this),this._localizeDeviceAutomation=e}},d:[{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.MZ)()],key:"deviceId",value:void 0},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"script",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"automations",value:()=>[]},{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"entityReg",value:void 0},{kind:"field",decorators:[(0,s.wk)()],key:"_showSecondary",value:()=>!1},{kind:"field",key:"_localizeDeviceAutomation",value:void 0},{kind:"method",key:"shouldUpdate",value:function(t){if(t.has("deviceId")||t.has("automations"))return!0;const e=t.get("hass");return!e||e.language!==this.hass.language}},{kind:"method",key:"render",value:function(){if(0===this.automations.length||!this.entityReg)return n.s6;const t=this._showSecondary?this.automations:this.automations.filter((t=>!1===t.metadata?.secondary));return n.qy` <h3>${this.hass.localize(this.headerKey)}</h3> <div class="content"> <ha-chip-set> ${t.map(((t,e)=>n.qy` <ha-assist-chip filled .index="${e}" @click="${this._handleAutomationClicked}" class="${t.metadata?.secondary?"secondary":""}" .label="${this._localizeDeviceAutomation(this.hass,this.entityReg,t)}"> </ha-assist-chip> `))} </ha-chip-set> ${!this._showSecondary&&t.length<this.automations.length?n.qy`<button class="link" @click="${this._toggleSecondary}"> Show ${this.automations.length-t.length} more... </button>`:""} </div> `}},{kind:"method",key:"_toggleSecondary",value:function(){this._showSecondary=!this._showSecondary}},{kind:"method",key:"_handleAutomationClicked",value:function(t){const e={...this.automations[t.currentTarget.index]};if(!e)return;if(delete e.metadata,this.script)return(0,u.AM)({sequence:[e]}),void(0,c.r)(this,"entry-selected");const i={};i[this.type]=[e],(0,l.mX)(i),(0,c.r)(this,"entry-selected")}},{kind:"field",static:!0,key:"styles",value:()=>[r.og,n.AH`h3{color:var(--primary-text-color)}.secondary{--ha-assist-chip-filled-container-color:rgba(
          var(--rgb-primary-text-color),
          0.07
        )}button.link{color:var(--primary-color)}`]}]}}),n.WF),y=((0,a.A)([(0,s.EM)("ha-device-actions-card")],(function(t,e){return{F:class extends e{constructor(){super(d.PV),t(this)}},d:[{kind:"field",key:"type",value:()=>"action"},{kind:"field",key:"headerKey",value:()=>"ui.panel.config.devices.automation.actions.caption"}]}}),h),(0,a.A)([(0,s.EM)("ha-device-conditions-card")],(function(t,e){return{F:class extends e{constructor(){super(d.I3),t(this)}},d:[{kind:"field",key:"type",value:()=>"condition"},{kind:"field",key:"headerKey",value:()=>"ui.panel.config.devices.automation.conditions.caption"}]}}),h),(0,a.A)([(0,s.EM)("ha-device-triggers-card")],(function(t,e){return{F:class extends e{constructor(){super(d.nx),t(this)}},d:[{kind:"field",key:"type",value:()=>"trigger"},{kind:"field",key:"headerKey",value:()=>"ui.panel.config.devices.automation.triggers.caption"}]}}),h),(0,a.A)([(0,s.EM)("dialog-device-automation")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.wk)()],key:"_triggers",value:()=>[]},{kind:"field",decorators:[(0,s.wk)()],key:"_conditions",value:()=>[]},{kind:"field",decorators:[(0,s.wk)()],key:"_actions",value:()=>[]},{kind:"field",decorators:[(0,s.wk)()],key:"_params",value:void 0},{kind:"method",key:"showDialog",value:async function(t){this._params=t,await this.updateComplete}},{kind:"method",key:"closeDialog",value:function(){this._params=void 0,(0,c.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"firstUpdated",value:function(t){(0,o.A)(i,"firstUpdated",this,3)([t]),this.hass.loadBackendTranslation("device_automation")}},{kind:"method",key:"updated",value:function(t){if((0,o.A)(i,"updated",this,3)([t]),!t.has("_params"))return;if(this._triggers=[],this._conditions=[],this._actions=[],!this._params)return;const{device:e,script:a}=this._params;(0,d.am)(this.hass,e.id).then((t=>{this._actions=t.sort(d.RK)})),a||((0,d.o9)(this.hass,e.id).then((t=>{this._triggers=t.sort(d.RK)})),(0,d.ng)(this.hass,e.id).then((t=>{this._conditions=t.sort(d.RK)})))}},{kind:"method",key:"render",value:function(){return this._params?n.qy` <ha-dialog open @closed="${this.closeDialog}" .heading="${this.hass.localize(`ui.panel.config.devices.${this._params.script?"script":"automation"}.create`,{type:this.hass.localize(`ui.panel.config.devices.type.${this._params.device.entry_type||"device"}`)})}"> <div @entry-selected="${this.closeDialog}"> ${this._triggers.length||this._conditions.length||this._actions.length?n.qy` ${this._triggers.length?n.qy` <ha-device-triggers-card .hass="${this.hass}" .automations="${this._triggers}" .entityReg="${this._params.entityReg}"></ha-device-triggers-card> `:""} ${this._conditions.length?n.qy` <ha-device-conditions-card .hass="${this.hass}" .automations="${this._conditions}" .entityReg="${this._params.entityReg}"></ha-device-conditions-card> `:""} ${this._actions.length?n.qy` <ha-device-actions-card .hass="${this.hass}" .automations="${this._actions}" .script="${this._params.script}" .entityReg="${this._params.entityReg}"></ha-device-actions-card> `:""} `:this.hass.localize("ui.panel.config.devices.automation.no_device_automations")} </div> <mwc-button slot="primaryAction" @click="${this.closeDialog}"> ${this.hass.localize("ui.common.close")} </mwc-button> </ha-dialog> `:n.s6}},{kind:"get",static:!0,key:"styles",value:function(){return r.nA}}]}}),n.WF))}};
//# sourceMappingURL=48569.D349TOdLEFc.js.map