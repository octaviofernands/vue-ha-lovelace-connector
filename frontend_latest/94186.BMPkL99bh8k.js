export const id=94186;export const ids=[94186,96394];export const modules={35918:(a,e,t)=>{t.d(e,{SG:()=>n,TC:()=>s,pI:()=>o,yL:()=>i});const i=a=>`/api/backup/download/${a}`,o=a=>a.callWS({type:"backup/info"}),s=(a,e)=>a.callWS({type:"backup/remove",slug:e}),n=a=>a.callWS({type:"backup/generate"})},96394:(a,e,t)=>{t.r(e);var i=t(36312),o=t(50289),s=t(29818),n=(t(32885),t(45346),t(11804),t(55321));(0,i.A)([(0,s.EM)("hass-loading-screen")],(function(a,e){return{F:class extends e{constructor(...e){super(...e),a(this)}},d:[{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.MZ)({type:Boolean,attribute:"no-toolbar"})],key:"noToolbar",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"rootnav",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)()],key:"message",value:void 0},{kind:"method",key:"render",value:function(){return o.qy` ${this.noToolbar?"":o.qy`<div class="toolbar"> ${this.rootnav||history.state?.root?o.qy` <ha-menu-button .hass="${this.hass}" .narrow="${this.narrow}"></ha-menu-button> `:o.qy` <ha-icon-button-arrow-prev .hass="${this.hass}" @click="${this._handleBack}"></ha-icon-button-arrow-prev> `} </div>`} <div class="content"> <ha-circular-progress indeterminate></ha-circular-progress> ${this.message?o.qy`<div id="loading-text">${this.message}</div>`:o.s6} </div> `}},{kind:"method",key:"_handleBack",value:function(){history.back()}},{kind:"get",static:!0,key:"styles",value:function(){return[n.RF,o.AH`:host{display:block;height:100%;background-color:var(--primary-background-color)}.toolbar{display:flex;align-items:center;font-size:20px;height:var(--header-height);padding:8px 12px;pointer-events:none;background-color:var(--app-header-background-color);font-weight:400;color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box}@media (max-width:599px){.toolbar{padding:4px}}ha-icon-button-arrow-prev,ha-menu-button{pointer-events:auto}.content{height:calc(100% - var(--header-height));display:flex;flex-direction:column;align-items:center;justify-content:center}#loading-text{max-width:350px;margin-top:16px}`]}}]}}),o.WF)},94186:(a,e,t)=>{t.a(a,(async(a,i)=>{try{t.r(e);var o=t(36312),s=t(68689),n=(t(16891),t(7986),t(50289)),c=t(29818),r=t(94100),l=t(30125),h=(t(32885),t(52427),t(33381),t(16850),t(88400),t(94526)),d=t(35918),u=t(6121),p=(t(96394),t(71158),t(30489)),k=a([l]);l=(k.then?(await k)():k)[0];const b="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",g="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",f="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z";(0,o.A)([(0,c.EM)("ha-config-backup")],(function(a,e){class t extends e{constructor(...e){super(...e),a(this)}}return{F:t,d:[{kind:"field",decorators:[(0,c.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,c.MZ)({type:Boolean})],key:"isWide",value:()=>!1},{kind:"field",decorators:[(0,c.MZ)({type:Boolean})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,c.MZ)({attribute:!1})],key:"route",value:void 0},{kind:"field",decorators:[(0,c.wk)()],key:"_backupData",value:void 0},{kind:"field",key:"_columns",value(){return(0,r.A)(((a,e,t)=>({name:{title:t("ui.panel.config.backup.name"),main:!0,sortable:!0,filterable:!0,flex:2,template:a?void 0:a=>n.qy`${a.name} <div class="secondary">${a.path}</div>`},path:{title:t("ui.panel.config.backup.path"),hidden:!a},size:{title:t("ui.panel.config.backup.size"),filterable:!0,sortable:!0,template:a=>Math.ceil(10*a.size)/10+" MB"},date:{title:t("ui.panel.config.backup.created"),direction:"desc",filterable:!0,sortable:!0,template:a=>(0,l.K)(new Date(a.date),this.hass.locale)},actions:{title:"",type:"overflow-menu",showNarrow:!0,hideable:!1,moveable:!1,template:a=>n.qy`<ha-icon-overflow-menu .hass="${this.hass}" .narrow="${this.narrow}" .items="${[{path:g,label:this.hass.localize("ui.panel.config.backup.download_backup"),action:()=>this._downloadBackup(a)},{path:b,label:this.hass.localize("ui.panel.config.backup.remove_backup"),action:()=>this._removeBackup(a)}]}" style="color:var(--secondary-text-color)"> </ha-icon-overflow-menu>`}})))}},{kind:"field",key:"_getItems",value:()=>(0,r.A)((a=>a.map((a=>({name:a.name,slug:a.slug,date:a.date,size:a.size,path:a.path})))))},{kind:"method",key:"render",value:function(){return this.hass&&void 0!==this._backupData?n.qy` <hass-tabs-subpage-data-table hasFab .tabs="${[{translationKey:"ui.panel.config.backup.caption",path:"/config/backup"}]}" .hass="${this.hass}" .narrow="${this.narrow}" back-path="/config/system" .route="${this.route}" .columns="${this._columns(this.narrow,this.hass.language,this.hass.localize)}" .data="${this._getItems(this._backupData.backups)}" .noDataText="${this.hass.localize("ui.panel.config.backup.no_backups")}" .searchLabel="${this.hass.localize("ui.panel.config.backup.picker.search")}"> <ha-fab slot="fab" ?disabled="${this._backupData.backing_up}" .label="${this._backupData.backing_up?this.hass.localize("ui.panel.config.backup.creating_backup"):this.hass.localize("ui.panel.config.backup.create_backup")}" extended @click="${this._generateBackup}"> ${this._backupData.backing_up?n.qy`<ha-circular-progress slot="icon" indeterminate></ha-circular-progress>`:n.qy`<ha-svg-icon slot="icon" .path="${f}"></ha-svg-icon>`} </ha-fab> </hass-tabs-subpage-data-table> `:n.qy`<hass-loading-screen></hass-loading-screen>`}},{kind:"method",key:"firstUpdated",value:function(a){(0,s.A)(t,"firstUpdated",this,3)([a]),this._getBackups()}},{kind:"method",key:"_getBackups",value:async function(){this._backupData=await(0,d.pI)(this.hass)}},{kind:"method",key:"_downloadBackup",value:async function(a){const e=await(0,h.e0)(this.hass,(0,d.yL)(a.slug));(0,p.R)(e.path)}},{kind:"method",key:"_generateBackup",value:async function(){await(0,u.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.backup.create.title"),text:this.hass.localize("ui.panel.config.backup.create.description"),confirmText:this.hass.localize("ui.panel.config.backup.create.confirm")})&&((0,d.SG)(this.hass).then((()=>this._getBackups())).catch((a=>(0,u.showAlertDialog)(this,{text:a.message}))),await this._getBackups())}},{kind:"method",key:"_removeBackup",value:async function(a){await(0,u.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.backup.remove.title"),text:this.hass.localize("ui.panel.config.backup.remove.description",{name:a.name}),confirmText:this.hass.localize("ui.panel.config.backup.remove.confirm")})&&(await(0,d.TC)(this.hass,a.slug),await this._getBackups())}},{kind:"get",static:!0,key:"styles",value:function(){return[n.AH`ha-fab[disabled]{--mdc-theme-secondary:var(--disabled-text-color)!important}`]}}]}}),n.WF);i()}catch(a){i(a)}}))},30489:(a,e,t)=>{t.d(e,{R:()=>i});const i=(a,e="")=>{const t=document.createElement("a");t.target="_blank",t.href=a,t.download=e,document.body.appendChild(t),t.dispatchEvent(new MouseEvent("click")),document.body.removeChild(t)}}};
//# sourceMappingURL=94186.BMPkL99bh8k.js.map