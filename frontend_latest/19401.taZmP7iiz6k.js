export const id=19401;export const ids=[19401];export const modules={19401:(e,i,t)=>{var o=t(36312),s=(t(72606),t(50289)),a=t(29818),n=t(34897),d=(t(13292),t(29180)),r=(t(85288),t(24640),t(90431),t(54108)),c=t(55321),l=(t(89655),t(16891),t(85323)),h=t(94100),u=t(55792),g=(t(85242),t(4169),t(13830),t(88400),t(8640)),_=t(20712),y=t(34336);const k="___ADD_NEW___",m="___NO_CATEGORIES___",p="___ADD_NEW_SUGGESTION___",v=e=>s.qy`<ha-list-item graphic="icon" class="${(0,l.H)({"add-new":e.category_id===k})}"> ${e.icon?s.qy`<ha-icon slot="graphic" .icon="${e.icon}"></ha-icon>`:s.qy`<ha-svg-icon .path="${"M5.5,7A1.5,1.5 0 0,1 4,5.5A1.5,1.5 0 0,1 5.5,4A1.5,1.5 0 0,1 7,5.5A1.5,1.5 0 0,1 5.5,7M21.41,11.58L12.41,2.58C12.05,2.22 11.55,2 11,2H4C2.89,2 2,2.89 2,4V11C2,11.55 2.22,12.05 2.59,12.41L11.58,21.41C11.95,21.77 12.45,22 13,22C13.55,22 14.05,21.77 14.41,21.41L21.41,14.41C21.78,14.05 22,13.55 22,13C22,12.44 21.77,11.94 21.41,11.58Z"}" slot="graphic"></ha-svg-icon>`} ${e.name} </ha-list-item>`;(0,o.A)([(0,a.EM)("ha-category-picker")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,a.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,a.MZ)()],key:"scope",value:void 0},{kind:"field",decorators:[(0,a.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,a.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,a.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,a.MZ)()],key:"placeholder",value:void 0},{kind:"field",decorators:[(0,a.MZ)({type:Boolean,attribute:"no-add"})],key:"noAdd",value:()=>!1},{kind:"field",decorators:[(0,a.MZ)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,a.MZ)({type:Boolean})],key:"required",value:()=>!1},{kind:"field",decorators:[(0,a.wk)()],key:"_opened",value:void 0},{kind:"field",decorators:[(0,a.wk)()],key:"_categories",value:void 0},{kind:"field",decorators:[(0,a.P)("ha-combo-box",!0)],key:"comboBox",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:()=>["scope"]},{kind:"method",key:"hassSubscribe",value:function(){return[(0,g.Ar)(this.hass.connection,this.scope,(e=>{this._categories=e}))]}},{kind:"field",key:"_suggestion",value:void 0},{kind:"field",key:"_init",value:()=>!1},{kind:"method",key:"open",value:async function(){await this.updateComplete,await(this.comboBox?.open())}},{kind:"method",key:"focus",value:async function(){await this.updateComplete,await(this.comboBox?.focus())}},{kind:"field",key:"_getCategories",value(){return(0,h.A)(((e,i)=>{const t=e?[...e]:[];return t?.length||t.push({category_id:m,name:this.hass.localize("ui.components.category-picker.no_categories"),icon:null}),i?t:[...t,{category_id:k,name:this.hass.localize("ui.components.category-picker.add_new"),icon:"mdi:plus"}]}))}},{kind:"method",key:"updated",value:function(e){if(!this._init&&this.hass&&this._categories||this._init&&e.has("_opened")&&this._opened){this._init=!0;const e=this._getCategories(this._categories,this.noAdd).map((e=>({...e,strings:[e.name]})));this.comboBox.items=e,this.comboBox.filteredItems=e}}},{kind:"method",key:"render",value:function(){return this._categories?s.qy` <ha-combo-box .hass="${this.hass}" .helper="${this.helper}" item-value-path="category_id" item-id-path="category_id" item-label-path="name" .value="${this._value}" .disabled="${this.disabled}" .required="${this.required}" .label="${void 0===this.label&&this.hass?this.hass.localize("ui.components.category-picker.category"):this.label}" .placeholder="${this.placeholder}" .renderer="${v}" @filter-changed="${this._filterChanged}" @opened-changed="${this._openedChanged}" @value-changed="${this._categoryChanged}"> </ha-combo-box> `:s.s6}},{kind:"method",key:"_filterChanged",value:function(e){const i=e.target,t=e.detail.value;if(!t)return void(this.comboBox.filteredItems=this.comboBox.items);const o=(0,u.H)(t,i.items?.filter((e=>![m,k].includes(e.category_id)))||[]);0===o?.length?this.noAdd?this.comboBox.filteredItems=[{category_id:m,name:this.hass.localize("ui.components.category-picker.no_match"),icon:null}]:(this._suggestion=t,this.comboBox.filteredItems=[{category_id:p,name:this.hass.localize("ui.components.category-picker.add_new_sugestion",{name:this._suggestion}),icon:"mdi:plus"}]):this.comboBox.filteredItems=o}},{kind:"get",key:"_value",value:function(){return this.value||""}},{kind:"method",key:"_openedChanged",value:function(e){this._opened=e.detail.value}},{kind:"method",key:"_categoryChanged",value:function(e){e.stopPropagation();let i=e.detail.value;if(i===m)return i="",void this.comboBox.setInputValue("");[p,k].includes(i)?(e.target.value=this._value,this.hass.loadFragmentTranslation("config"),(0,y.S)(this,{scope:this.scope,suggestedName:i===p?this._suggestion:"",createEntry:async e=>{const i=await(0,g.s_)(this.hass,this.scope,e);return this._categories=[...this._categories,i],this.comboBox.filteredItems=this._getCategories(this._categories,this.noAdd),await this.updateComplete,await this.comboBox.updateComplete,this._setValue(i.category_id),i}}),this._suggestion=void 0,this.comboBox.setInputValue("")):i!==this._value&&this._setValue(i)}},{kind:"method",key:"_setValue",value:function(e){this.value=e,setTimeout((()=>{(0,n.r)(this,"value-changed",{value:e}),(0,n.r)(this,"change")}),0)}}]}}),(0,_.E)(s.WF)),(0,o.A)([(0,a.EM)("dialog-assign-category")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,a.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,a.wk)()],key:"_scope",value:void 0},{kind:"field",decorators:[(0,a.wk)()],key:"_category",value:void 0},{kind:"field",decorators:[(0,a.wk)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,a.wk)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,a.wk)()],key:"_submitting",value:void 0},{kind:"method",key:"showDialog",value:function(e){this._params=e,this._scope=e.scope,this._category=e.entityReg.categories[e.scope],this._error=void 0}},{kind:"method",key:"closeDialog",value:function(){this._error="",this._params=void 0,(0,n.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"render",value:function(){if(!this._params)return s.s6;const e=this._params.entityReg.categories[this._params.scope];return s.qy` <ha-dialog open @closed="${this.closeDialog}" .heading="${(0,d.l)(this.hass,e?this.hass.localize("ui.panel.config.category.assign.edit"):this.hass.localize("ui.panel.config.category.assign.assign"))}"> <div> ${this._error?s.qy`<ha-alert alert-type="error">${this._error}</ha-alert>`:""} <div class="form"> <ha-category-picker .hass="${this.hass}" .scope="${this._scope}" .value="${this._category}" @value-changed="${this._categoryChanged}"></ha-category-picker> </div> </div> <mwc-button slot="secondaryAction" @click="${this.closeDialog}"> ${this.hass.localize("ui.common.cancel")} </mwc-button> <mwc-button slot="primaryAction" @click="${this._updateEntry}" .disabled="${this._submitting}"> ${this.hass.localize("ui.common.save")} </mwc-button> </ha-dialog> `}},{kind:"method",key:"_categoryChanged",value:function(e){e.detail.value||(this._category=void 0),this._category=e.detail.value}},{kind:"method",key:"_updateEntry",value:async function(){this._submitting=!0,this._error=void 0;try{await(0,r.G_)(this.hass,this._params.entityReg.entity_id,{categories:{[this._scope]:this._category||null}}),this.closeDialog()}catch(e){this._error=e.message||this.hass.localize("ui.panel.config.category.assign.unknown_error")}finally{this._submitting=!1}}},{kind:"get",static:!0,key:"styles",value:function(){return[c.nA,s.AH`ha-icon-picker,ha-textfield{display:block;margin-bottom:16px}`]}}]}}),s.WF)}};
//# sourceMappingURL=19401.taZmP7iiz6k.js.map