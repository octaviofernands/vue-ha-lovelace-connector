export const id=2598;export const ids=[2598];export const modules={95753:(o,e,i)=>{i.d(e,{L:()=>r,_:()=>a});const r=o=>o.callApi("GET","error_log"),a="/api/error_log"},15066:(o,e,i)=>{i.d(e,{GM:()=>t,MU:()=>l,OV:()=>s,RE:()=>d,Vo:()=>n,w9:()=>c});var r=i(95266),a=i(26025);const s=async o=>{(0,r.v)(o.config.version,2021,2,4)?await o.callWS({type:"supervisor/api",endpoint:"/supervisor/reload",method:"post"}):await o.callApi("POST","hassio/supervisor/reload")},t=async o=>(0,r.v)(o.config.version,2021,2,4)?o.callWS({type:"supervisor/api",endpoint:"/supervisor/info",method:"get"}):(0,a.PS)(await o.callApi("GET","hassio/supervisor/info")),l=async o=>(0,r.v)(o.config.version,2021,2,4)?o.callWS({type:"supervisor/api",endpoint:"/info",method:"get"}):(0,a.PS)(await o.callApi("GET","hassio/info")),d=async(o,e)=>o.callApi("GET",`hassio/${e.includes("_")?`addons/${e}`:e}/logs`),n=o=>`/api/hassio/${o.includes("_")?`addons/${o}`:o}/logs`,c=async(o,e)=>{(0,r.v)(o.config.version,2021,2,4)?await o.callWS({type:"supervisor/api",endpoint:"/supervisor/options",method:"post",data:e}):await o.callApi("POST","hassio/supervisor/options",e)}},55858:(o,e,i)=>{var r=i(36312),a=i(68689),s=(i(253),i(2075),i(16891),i(72606),i(67056),i(50289)),t=i(29818),l=i(33922),d=(i(13292),i(84563),i(13082),i(4169),i(77312),i(88400),i(94526)),n=i(95753),c=i(26025),h=i(15066),u=i(18409),v=i(30489);const p="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z";(0,r.A)([(0,t.EM)("error-log-card")],(function(o,e){class i extends e{constructor(...e){super(...e),o(this)}}return{F:i,d:[{kind:"field",decorators:[(0,t.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,t.MZ)()],key:"filter",value:()=>""},{kind:"field",decorators:[(0,t.MZ)()],key:"header",value:void 0},{kind:"field",decorators:[(0,t.MZ)()],key:"provider",value:void 0},{kind:"field",decorators:[(0,t.MZ)({type:Boolean,attribute:!0})],key:"show",value:()=>!1},{kind:"field",decorators:[(0,t.wk)()],key:"_isLogLoaded",value:()=>!1},{kind:"field",decorators:[(0,t.wk)()],key:"_logHTML",value:void 0},{kind:"field",decorators:[(0,t.wk)()],key:"_error",value:void 0},{kind:"method",key:"render",value:function(){return s.qy` <div class="error-log-intro"> ${this._error?s.qy`<ha-alert alert-type="error">${this._error}</ha-alert>`:""} ${this._logHTML?s.qy` <ha-card outlined> <div class="header"> <h1 class="card-header"> ${this.header||this.hass.localize("ui.panel.config.logs.show_full_logs")} </h1> <div> <ha-icon-button .path="${"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"}" @click="${this._refresh}" .label="${this.hass.localize("ui.common.refresh")}"></ha-icon-button> <ha-icon-button .path="${p}" @click="${this._downloadFullLog}" .label="${this.hass.localize("ui.panel.config.logs.download_full_log")}"></ha-icon-button> </div> </div> <div class="card-content error-log">${this._logHTML}</div> </ha-card> `:""} ${this._logHTML?"":s.qy` <mwc-button outlined @click="${this._downloadFullLog}"> <ha-svg-icon .path="${p}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.logs.download_full_log")} </mwc-button> <mwc-button raised @click="${this._refreshLogs}"> ${this.hass.localize("ui.panel.config.logs.load_logs")} </mwc-button> `} </div> `}},{kind:"field",key:"_debounceSearch",value(){return(0,u.s)((()=>this._isLogLoaded?this._refreshLogs():this._debounceSearch()),150,!1)}},{kind:"method",key:"firstUpdated",value:function(o){(0,a.A)(i,"firstUpdated",this,3)([o]),(this.hass?.config.recovery_mode||this.show)&&(this.hass.loadFragmentTranslation("config"),this._refreshLogs())}},{kind:"method",key:"updated",value:function(o){(0,a.A)(i,"updated",this,3)([o]),o.has("provider")&&(this._logHTML=void 0),o.has("show")&&this.show||o.has("provider")&&this.show?this._refreshLogs():o.has("filter")&&this._debounceSearch()}},{kind:"method",key:"_refresh",value:async function(o){const e=o.currentTarget;e.progress=!0,await this._refreshLogs(),e.progress=!1}},{kind:"method",key:"_downloadFullLog",value:async function(){const o=(new Date).toISOString().replace(/:/g,"-"),e="core"!==this.provider?(0,h.Vo)(this.provider):n._,i="core"!==this.provider?`${this.provider}_${o}.log`:`home-assistant_${o}.log`,r=await(0,d.e0)(this.hass,e);(0,v.R)(r.path,i)}},{kind:"method",key:"_refreshLogs",value:async function(){let o;if(this._logHTML=this.hass.localize("ui.panel.config.logs.loading_log"),"core"!==this.provider&&(0,l.x)(this.hass,"hassio"))try{return o=await(0,h.RE)(this.hass,this.provider),this.filter&&(o=o.split("\n").filter((o=>o.toLowerCase().includes(this.filter.toLowerCase()))).join("\n")),o?(this._logHTML=s.qy`<ha-ansi-to-html .content="${o}"> </ha-ansi-to-html>`,void(this._isLogLoaded=!0)):void(this._logHTML=this.hass.localize("ui.panel.config.logs.no_errors"))}catch(o){return void(this._error=this.hass.localize("ui.panel.config.logs.failed_get_logs",{provider:this.provider,error:(0,c.VR)(o)}))}else o=await(0,n.L)(this.hass);this._isLogLoaded=!0;const e=o&&o.split("\n");this._logHTML=e?(this.filter?e.filter((o=>this.filter?o.toLowerCase().includes(this.filter.toLowerCase()):o)):e).map((o=>o.includes("INFO")?s.qy`<div class="info">${o}</div>`:o.includes("WARNING")?s.qy`<div class="warning">${o}</div>`:o.includes("ERROR")||o.includes("FATAL")||o.includes("CRITICAL")?s.qy`<div class="error">${o}</div>`:s.qy`<div>${o}</div>`)):this.hass.localize("ui.panel.config.logs.no_errors")}},{kind:"field",static:!0,key:"styles",value:()=>s.AH`.error-log-intro{text-align:center;margin:16px}ha-card{padding-top:16px}.header{display:flex;justify-content:space-between;padding:0 16px}.card-header{color:var(--ha-card-header-color,--primary-text-color);font-family:var(--ha-card-header-font-family, inherit);font-size:var(--ha-card-header-font-size, 24px);letter-spacing:-.012em;line-height:48px;display:block;margin-block-start:0px;margin-block-end:0px;font-weight:400}ha-select{display:block;max-width:500px;width:100%}ha-icon-button{float:right}.error-log{font-family:var(--code-font-family, monospace);clear:both;text-align:left;padding-top:12px}.error-log>div{overflow:auto;overflow-wrap:break-word}.error-log>div:hover{background-color:var(--secondary-background-color)}.error{color:var(--error-color)}.warning{color:var(--warning-color)}mwc-button{direction:var(--direction)}`}]}}),s.WF)},2598:(o,e,i)=>{i.r(e),i.d(e,{HuiRecoveryModeCard:()=>t});var r=i(36312),a=(i(72606),i(50289)),s=i(29818);i(13082),i(55858);let t=(0,r.A)([(0,s.EM)("hui-recovery-mode-card")],(function(o,e){return{F:class extends e{constructor(...e){super(...e),o(this)}},d:[{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"method",key:"getCardSize",value:function(){return 3}},{kind:"method",key:"setConfig",value:function(o){}},{kind:"method",key:"render",value:function(){return a.qy` <ha-card .header="${this.hass.localize("ui.panel.lovelace.cards.recovery-mode.header")}"> <div class="card-content"> ${this.hass.localize("ui.panel.lovelace.cards.recovery-mode.description")} </div> <error-log-card .hass="${this.hass}"></error-log-card> </ha-card> `}},{kind:"get",static:!0,key:"styles",value:function(){return a.AH`ha-card{--ha-card-header-color:var(--primary-color)}error-log-card{display:block;padding-bottom:16px}`}}]}}),a.WF)},30489:(o,e,i)=>{i.d(e,{R:()=>r});const r=(o,e="")=>{const i=document.createElement("a");i.target="_blank",i.href=o,i.download=e,document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click")),document.body.removeChild(i)}}};
//# sourceMappingURL=2598.EPwq0BdxAmE.js.map