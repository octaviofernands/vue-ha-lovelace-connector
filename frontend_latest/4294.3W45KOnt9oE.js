export const id=4294;export const ids=[4294];export const modules={10469:(t,e,a)=>{a.d(e,{$:()=>s});a(89655);const s=(t,e)=>{const a={};for(const s of t){const t=e(s);t in a?a[t].push(s):a[t]=[s]}return a}},47076:(t,e,a)=>{a.a(t,(async(t,s)=>{try{a.d(e,{AN:()=>D,B2:()=>T,BV:()=>j,DR:()=>J,E$:()=>z,GW:()=>M,KJ:()=>N,Q4:()=>C,RB:()=>q,WN:()=>x,X4:()=>L,_d:()=>B,al:()=>Q,bs:()=>O,c:()=>W,gv:()=>R,m7:()=>w,oU:()=>Z,tb:()=>I,uh:()=>V,yM:()=>F});a(89655),a(253),a(54846),a(16891);var l=a(31195),c=a(77301),r=a(91103),o=a(39902),d=a(72730),n=a(61310),_=a(31293),i=a(63165),h=a(60132),m=a(83324),y=a(84280),u=a(94100),g=a(78691),b=a(41924),f=a(10469),p=a(31265),$=a(4826),k=t([g,b]);[g,b]=k.then?(await k)():k;const v=[],w=()=>({stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),q=()=>({stat_energy_to:"",stat_compensation:null,entity_energy_price:null,number_energy_price:null}),V=()=>({type:"grid",flow_from:[],flow_to:[],cost_adjustment_day:0}),C=()=>({type:"solar",stat_energy_from:"",config_entry_solar_forecast:null}),Z=()=>({type:"battery",stat_energy_from:"",stat_energy_to:""}),W=()=>({type:"gas",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),M=()=>({type:"water",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}),j=t=>t.callWS({type:"energy/info"}),T=async t=>(await t.loadBackendTranslation("issues","energy"),t.callWS({type:"energy/validate"})),O=t=>t.callWS({type:"energy/get_prefs"}),x=async(t,e)=>{const a=t.callWS({type:"energy/save_prefs",...e});return P(t),a},E=async(t,e,a,s,l,c="hour")=>t.callWS({type:"energy/fossil_energy_consumption",start_time:e.toISOString(),end_time:l?.toISOString(),energy_statistic_ids:a,co2_statistic_id:s,period:c}),z=t=>(0,f.$)(t.energy_sources,(t=>t.type)),D=(t,e,a)=>{const s=[];for(const l of t.energy_sources)if(!a||a.includes(l.type))if("solar"!==l.type)if("gas"!==l.type&&"water"!==l.type)if("battery"!==l.type){for(const t of l.flow_from){s.push(t.stat_energy_from),t.stat_cost&&s.push(t.stat_cost);const a=e.cost_sensors[t.stat_energy_from];a&&s.push(a)}for(const t of l.flow_to){s.push(t.stat_energy_to),t.stat_compensation&&s.push(t.stat_compensation);const a=e.cost_sensors[t.stat_energy_to];a&&s.push(a)}}else s.push(l.stat_energy_from),s.push(l.stat_energy_to);else{s.push(l.stat_energy_from),l.stat_cost&&s.push(l.stat_cost);const t=e.cost_sensors[l.stat_energy_from];t&&s.push(t)}else s.push(l.stat_energy_from);return a&&!a.includes("device")||s.push(...t.device_consumption.map((t=>t.stat_consumption))),s},S=async(t,e,a,s,i)=>{const[h,m]=await Promise.all([(0,p.VN)(t,{domain:"co2signal"}),j(t)]),y=h.length?h[0]:void 0;let u;if(y)for(const e of Object.values(t.entities)){if("co2signal"!==e.platform)continue;const a=t.states[e.entity_id];if(a&&"%"===a.attributes.unit_of_measurement){u=a.entity_id;break}}const b=[];for(const t of e.energy_sources)if("grid"===t.type)for(const e of t.flow_from)b.push(e.stat_energy_from);const f=D(e,m,["grid","solar","battery","gas","device"]),k=D(e,m,["water"]),v=[...f,...k],w=(0,l.c)(s||new Date,a),q=w>35?"month":w>2?"day":"hour",V=t.config.unit_system.length||"",C={energy:"kWh",volume:"km"===V?"m³":"ft³"},Z={volume:"km"===V?"L":"gal"},W=f.length?(0,$.sz)(t,a,s,f,q,C,["change"]):{},M=k.length?(0,$.sz)(t,a,s,k,q,Z,["change"]):{};let T,O,x,z,S,P={},H={};i&&(O=(0,g.xo)(a,c.e,t.locale,t.config)&&(0,g.xo)(s||new Date,r.c,t.locale,t.config)?(0,g.ol)(a,o.P,t.locale,t.config,-(0,g.EO)(s||new Date,a,d.W,t.locale,t.config)-1):(0,g.ol)(a,n.f,t.locale,t.config,-1*(w+1)),x=(0,_.A)(a,-1),f.length&&(P=(0,$.sz)(t,O,x,f,q,C,["change"])),k.length&&(H=(0,$.sz)(t,O,x,k,q,Z,["change"]))),void 0!==u&&(z=E(t,a,b,u,s,w>35?"month":w>2?"day":"hour"),i&&(S=E(t,O,b,u,x,w>35?"month":w>2?"day":"hour")));const I={},Q=v.length?(0,$.Wr)(t,v):[],[A,B,N,F,L,R,K]=await Promise.all([W,M,P,H,Q,z,S]),J={...A,...B};i&&(T={...N,...F}),v.length&&L.forEach((t=>{I[t.statistic_id]=t}));return{start:a,end:s,startCompare:O,endCompare:x,info:m,prefs:e,stats:J,statsMetadata:I,statsCompare:T,co2SignalConfigEntry:y,co2SignalEntity:u,fossilEnergyConsumption:R,fossilEnergyConsumptionCompare:K}},P=t=>{v.forEach((e=>{const a=I(t,{key:e});a.clearPrefs(),a._active&&a.refresh()}))},H=t=>{if(t._refreshTimeout&&clearTimeout(t._refreshTimeout),t._active&&(!t.end||t.end>new Date)){const e=new Date;e.getMinutes()>=20&&e.setHours(e.getHours()+1),e.setMinutes(20,0,0),t._refreshTimeout=window.setTimeout((()=>t.refresh()),e.getTime()-Date.now())}},I=(t,e={})=>{let a="_energy";if(e.key){if(!e.key.startsWith("energy_"))throw new Error("Key need to start with energy_");a=`_${e.key}`}if(t.connection[a])return t.connection[a];v.push(e.key);const s=(0,y.X)(t.connection,a,(async()=>(s.prefs||(s.prefs=await O(t)),H(s),S(t,s.prefs,s.start,s.end,s.compare)))),l=s.subscribe;s.subscribe=t=>{const e=l(t);return s._active++,void 0===s._refreshTimeout&&H(s),()=>{s._active--,s._active<1&&(clearTimeout(s._refreshTimeout),s._refreshTimeout=void 0),e()}},s._active=0,s.prefs=e.prefs;const c=new Date,r=(0,b.LW)(c,t.locale,t.config).split(":")[0];s.start=(0,g.ol)("0"===r?(0,n.f)(c,-1):c,i.o,t.locale,t.config),s.end=(0,g.ol)("0"===r?(0,n.f)(c,-1):c,h.D,t.locale,t.config);const o=()=>{s._updatePeriodTimeout=window.setTimeout((()=>{s.start=(0,g.ol)(new Date,i.o,t.locale,t.config),s.end=(0,g.ol)(new Date,h.D,t.locale,t.config),o()}),(0,m.L)((0,g.ol)(c,h.D,t.locale,t.config),1).getTime()-Date.now())};return o(),s.clearPrefs=()=>{s.prefs=void 0},s.setPeriod=(e,a)=>{s.start=e,s.end=a,s.start.getTime()!==(0,g.ol)(new Date,i.o,t.locale,t.config).getTime()||s.end?.getTime()!==(0,g.ol)(new Date,h.D,t.locale,t.config).getTime()||s._updatePeriodTimeout?s._updatePeriodTimeout&&(clearTimeout(s._updatePeriodTimeout),s._updatePeriodTimeout=void 0):o()},s.setCompare=t=>{s.compare=t},s},Q=t=>t.callWS({type:"energy/solar_forecast"}),A=["volume","energy"],B=(t,e={},a)=>{for(const s of t.energy_sources){if("gas"!==s.type)continue;if(a&&a===s.stat_energy_from)continue;const t=e[s.stat_energy_from];if(A.includes(t?.unit_class))return t.unit_class}},N=(t,e,a={})=>{const s=B(e,a);if(void 0!==s)return"energy"===s?"kWh":"km"===t.config.unit_system.length?"m³":"ft³"},F=t=>"km"===t.config.unit_system.length?"L":"gal",L="/docs/energy/faq/#troubleshooting-missing-entities",R=(0,u.A)((t=>({summedData:K(t),compareSummedData:t.statsCompare?K(t,!0):void 0}))),K=(t,e)=>{const a={};for(const e of t.prefs.energy_sources)if("solar"!==e.type)if("battery"!==e.type){if("grid"===e.type){for(const t of e.flow_from)a.from_grid?a.from_grid.push(t.stat_energy_from):a.from_grid=[t.stat_energy_from];for(const t of e.flow_to)a.to_grid?a.to_grid.push(t.stat_energy_to):a.to_grid=[t.stat_energy_to]}}else a.to_battery?(a.to_battery.push(e.stat_energy_to),a.from_battery.push(e.stat_energy_from)):(a.to_battery=[e.stat_energy_to],a.from_battery=[e.stat_energy_from]);else a.solar?a.solar.push(e.stat_energy_from):a.solar=[e.stat_energy_from];const s={};return Object.entries(a).forEach((([a,l])=>{const c={},r={};l.forEach((a=>{const s=e?t.statsCompare[a]:t.stats[a];if(!s)return;s.forEach((t=>{if(null===t.change||void 0===t.change)return;const e=t.change;c[t.start]=t.start in c?c[t.start]+e:e})),r[a]={}})),s[a]=c})),s},J=(0,u.A)(((t,e)=>({consumption:U(t),compareConsumption:e?U(e):void 0}))),U=t=>{const e={total:{}};return Object.keys(t).forEach((a=>{Object.keys(t[a]).forEach((a=>{if(void 0===e.total[a]){const s=(t.from_grid?.[a]||0)+(t.solar?.[a]||0)+(t.from_battery?.[a]||0)-(t.to_grid?.[a]||0)-(t.to_battery?.[a]||0);e.total[a]=s}}))})),e};s()}catch(t){s(t)}}))},23469:(t,e,a)=>{a.d(e,{g:()=>c});var s=a(45253),l=a(92164);function c(t,e,a,c,r,o){const d=t.getPropertyValue(r+"-"+o).trim(),n=d.length>0?d:t.getPropertyValue(r).trim();let _=(0,s.RQ)(n);return 0===d.length&&o&&(_=(0,s.v2)((0,s.BE)(e?(0,l.T)((0,s.Nc)((0,s.xp)(_)),o):(0,l.d)((0,s.Nc)((0,s.xp)(_)),o)))),c?_+=a?"32":"7F":a&&(_+="7F"),_}},4294:(t,e,a)=>{a.a(t,(async(t,s)=>{try{a.r(e),a.d(e,{HuiEnergySourcesTableCard:()=>p});var l=a(36312),c=(a(253),a(2075),a(16891),a(68560)),r=a(50289),o=a(29818),d=a(85323),n=a(55165),_=a(57636),i=a(23469),h=(a(13082),a(47076)),m=a(4826),y=a(20712),u=a(7934),g=a(34897),b=t([_,h]);[_,h]=b.then?(await b)():b;const f={grid_return:"--energy-grid-return-color",grid_consumption:"--energy-grid-consumption-color",battery_in:"--energy-battery-in-color",battery_out:"--energy-battery-out-color",solar:"--energy-solar-color",gas:"--energy-gas-color",water:"--energy-water-color"};let p=(0,l.A)([(0,o.EM)("hui-energy-sources-table-card")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_data",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:()=>["_config"]},{kind:"method",key:"hassSubscribe",value:function(){return[(0,h.tb)(this.hass,{key:this._config?.collection_key}).subscribe((t=>{this._data=t}))]}},{kind:"method",key:"getCardSize",value:function(){return 3}},{kind:"method",key:"setConfig",value:function(t){this._config=t}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,u.xP)(this,t)||t.size>1||!t.has("hass")}},{kind:"method",key:"render",value:function(){if(!this.hass||!this._config)return r.s6;if(!this._data)return r.qy`${this.hass.localize("ui.panel.lovelace.cards.energy.loading")}`;let t=0,e=0,a=0,s=0,l=0,c=0,o=0,y=0,u=!1,g=!1,b=!1,p=0,$=0,k=0,v=0,w=0,q=0,V=0,C=0;const Z=(0,h.E$)(this._data.prefs),W=getComputedStyle(this),M=Z.grid?.[0].flow_from.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price))||Z.grid?.[0].flow_to.some((t=>t.stat_compensation||t.entity_energy_price||t.number_energy_price))||Z.gas?.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price))||Z.water?.some((t=>t.stat_cost||t.entity_energy_price||t.number_energy_price)),j=(0,h.KJ)(this.hass,this._data.prefs,this._data.statsMetadata)||"",T=(0,h.yM)(this.hass)||"m³",O=void 0!==this._data.statsCompare;return r.qy` <ha-card> ${this._config.title?r.qy`<h1 class="card-header">${this._config.title}</h1>`:""} <div class="mdc-data-table"> <div class="mdc-data-table__table-container"> <table class="mdc-data-table__table" aria-label="Energy sources"> <thead> <tr class="mdc-data-table__header-row"> <th class="mdc-data-table__header-cell"></th> <th class="mdc-data-table__header-cell" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.source")} </th> ${O?r.qy`<th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.previous_energy")} </th> ${M?r.qy`<th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.previous_cost")} </th>`:""}`:""} <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.energy")} </th> ${M?r.qy` <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.cost")} </th>`:""} </tr> </thead> <tbody class="mdc-data-table__content"> ${Z.solar?.map(((t,e)=>{const s=(0,m.$j)(this._data.stats[t.stat_energy_from])||0;a+=s;const l=O&&(0,m.$j)(this._data.statsCompare[t.stat_energy_from])||0;return k+=l,r.qy`<tr class="mdc-data-table__row ${(0,d.H)({clickable:!(0,m.OQ)(t.stat_energy_from)})}" @click="${this._handleMoreInfo}" .entity="${t.stat_energy_from}"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,n.W)({borderColor:(0,i.g)(W,this.hass.themes.darkMode,!1,!1,f.solar,e),backgroundColor:(0,i.g)(W,this.hass.themes.darkMode,!0,!1,f.solar,e)})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,m.$O)(this.hass,t.stat_energy_from,this._data?.statsMetadata[t.stat_energy_from])} </th> ${O?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(l,this.hass.locale)} kWh </td> ${M?r.qy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(s,this.hass.locale)} kWh </td> ${M?r.qy`<td class="mdc-data-table__cell"></td>`:""} </tr>`}))} ${Z.solar?r.qy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.solar_total")} </th> ${O?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(k,this.hass.locale)} kWh </td> ${M?r.qy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(a,this.hass.locale)} kWh </td> ${M?r.qy`<td class="mdc-data-table__cell"></td>`:""} </tr>`:""} ${Z.battery?.map(((t,e)=>{const a=(0,m.$j)(this._data.stats[t.stat_energy_from])||0,l=(0,m.$j)(this._data.stats[t.stat_energy_to])||0;s+=a-l;const c=O&&(0,m.$j)(this._data.statsCompare[t.stat_energy_from])||0,o=O&&(0,m.$j)(this._data.statsCompare[t.stat_energy_to])||0;return v+=c-o,r.qy`<tr class="mdc-data-table__row ${(0,d.H)({clickable:!(0,m.OQ)(t.stat_energy_from)})}" @click="${this._handleMoreInfo}" .entity="${t.stat_energy_from}"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,n.W)({borderColor:(0,i.g)(W,this.hass.themes.darkMode,!1,!1,f.battery_out,e),backgroundColor:(0,i.g)(W,this.hass.themes.darkMode,!0,!1,f.battery_out,e)})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,m.$O)(this.hass,t.stat_energy_from,this._data?.statsMetadata[t.stat_energy_from])} </th> ${O?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(c,this.hass.locale)} kWh </td> ${M?r.qy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(a,this.hass.locale)} kWh </td> ${M?r.qy`<td class="mdc-data-table__cell"></td>`:""} </tr> <tr class="mdc-data-table__row ${(0,d.H)({clickable:!(0,m.OQ)(t.stat_energy_to)})}" @click="${this._handleMoreInfo}" .entity="${t.stat_energy_to}"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,n.W)({borderColor:(0,i.g)(W,this.hass.themes.darkMode,!1,!1,f.battery_in,e),backgroundColor:(0,i.g)(W,this.hass.themes.darkMode,!0,!1,f.battery_in,e)})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,m.$O)(this.hass,t.stat_energy_to,this._data?.statsMetadata[t.stat_energy_to])} </th> ${O?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(-1*o,this.hass.locale)} kWh </td> ${M?r.qy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(-1*l,this.hass.locale)} kWh </td> ${M?r.qy`<td class="mdc-data-table__cell"></td>`:""} </tr>`}))} ${Z.battery?r.qy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.battery_total")} </th> ${O?r.qy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(v,this.hass.locale)} kWh </td> ${M?r.qy`<td class="mdc-data-table__cell"></td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(s,this.hass.locale)} kWh </td> ${M?r.qy`<td class="mdc-data-table__cell"></td>`:""} </tr>`:""} ${Z.grid?.map((a=>r.qy`${a.flow_from.map(((a,s)=>{const l=(0,m.$j)(this._data.stats[a.stat_energy_from])||0;t+=l;const c=O&&(0,m.$j)(this._data.statsCompare[a.stat_energy_from])||0;p+=c;const o=a.stat_cost||this._data.info.cost_sensors[a.stat_energy_from],h=o?(0,m.$j)(this._data.stats[o])||0:null;null!==h&&(u=!0,e+=h);const y=O&&o?(0,m.$j)(this._data.statsCompare[o])||0:null;return null!==y&&($+=y),r.qy`<tr class="mdc-data-table__row ${(0,d.H)({clickable:!(0,m.OQ)(a.stat_energy_from)})}" @click="${this._handleMoreInfo}" .entity="${a.stat_energy_from}"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,n.W)({borderColor:(0,i.g)(W,this.hass.themes.darkMode,!1,!1,f.grid_consumption,s),backgroundColor:(0,i.g)(W,this.hass.themes.darkMode,!0,!1,f.grid_consumption,s)})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,m.$O)(this.hass,a.stat_energy_from,this._data?.statsMetadata[a.stat_energy_from])} </th> ${O?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(c,this.hass.locale)} kWh </td> ${M?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==y?(0,_.ZV)(y,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(l,this.hass.locale)} kWh </td> ${M?r.qy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==h?(0,_.ZV)(h,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${a.flow_to.map(((a,s)=>{const l=-1*((0,m.$j)(this._data.stats[a.stat_energy_to])||0);t+=l;const c=a.stat_compensation||this._data.info.cost_sensors[a.stat_energy_to],o=c?-1*((0,m.$j)(this._data.stats[c])||0):null;null!==o&&(u=!0,e+=o);const h=-1*(O&&(0,m.$j)(this._data.statsCompare[a.stat_energy_to])||0);p+=h;const y=O&&c?-1*((0,m.$j)(this._data.statsCompare[c])||0):null;return null!==y&&($+=y),r.qy`<tr class="mdc-data-table__row ${(0,d.H)({clickable:!(0,m.OQ)(a.stat_energy_to)})}" @click="${this._handleMoreInfo}" .entity="${a.stat_energy_to}"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,n.W)({borderColor:(0,i.g)(W,this.hass.themes.darkMode,!1,!1,f.grid_return,s),backgroundColor:(0,i.g)(W,this.hass.themes.darkMode,!0,!1,f.grid_return,s)})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,m.$O)(this.hass,a.stat_energy_to,this._data?.statsMetadata[a.stat_energy_to])} </th> ${O?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(h,this.hass.locale)} kWh </td> ${M?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==y?(0,_.ZV)(y,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(l,this.hass.locale)} kWh </td> ${M?r.qy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==o?(0,_.ZV)(o,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))}`))} ${Z.grid&&(Z.grid?.[0].flow_from?.length||Z.grid?.[0].flow_to?.length)?r.qy` <tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.grid_total")} </th> ${O?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(p,this.hass.locale)} kWh </td> ${M?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${u?(0,_.ZV)($,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(t,this.hass.locale)} kWh </td> ${M?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${u?(0,_.ZV)(e,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`:""} ${Z.gas?.map(((t,e)=>{const a=(0,m.$j)(this._data.stats[t.stat_energy_from])||0;l+=a;const s=O&&(0,m.$j)(this._data.statsCompare[t.stat_energy_from])||0;w+=s;const o=t.stat_cost||this._data.info.cost_sensors[t.stat_energy_from],h=o?(0,m.$j)(this._data.stats[o])||0:null;null!==h&&(g=!0,c+=h);const y=O&&o?(0,m.$j)(this._data.statsCompare[o])||0:null;return null!==y&&(q+=y),r.qy`<tr class="mdc-data-table__row ${(0,d.H)({clickable:!(0,m.OQ)(t.stat_energy_from)})}" @click="${this._handleMoreInfo}" .entity="${t.stat_energy_from}"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,n.W)({borderColor:(0,i.g)(W,this.hass.themes.darkMode,!1,!1,f.gas,e),backgroundColor:(0,i.g)(W,this.hass.themes.darkMode,!0,!1,f.gas,e)})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,m.$O)(this.hass,t.stat_energy_from,this._data?.statsMetadata[t.stat_energy_from])} </th> ${O?r.qy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(s,this.hass.locale)} ${j} </td> ${M?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==y?(0,_.ZV)(y,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(a,this.hass.locale)} ${j} </td> ${M?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==h?(0,_.ZV)(h,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${Z.gas?r.qy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.gas_total")} </th> ${O?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(w,this.hass.locale)} ${j} </td> ${M?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${g?(0,_.ZV)(q,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(l,this.hass.locale)} ${j} </td> ${M?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${g?(0,_.ZV)(c,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`:""} ${Z.water?.map(((t,e)=>{const a=(0,m.$j)(this._data.stats[t.stat_energy_from])||0;o+=a;const s=O&&(0,m.$j)(this._data.statsCompare[t.stat_energy_from])||0;V+=s;const l=t.stat_cost||this._data.info.cost_sensors[t.stat_energy_from],c=l?(0,m.$j)(this._data.stats[l])||0:null;null!==c&&(b=!0,y+=c);const h=O&&l?(0,m.$j)(this._data.statsCompare[l])||0:null;return null!==h&&(C+=h),r.qy`<tr class="mdc-data-table__row ${(0,d.H)({clickable:!(0,m.OQ)(t.stat_energy_from)})}" @click="${this._handleMoreInfo}" .entity="${t.stat_energy_from}"> <td class="mdc-data-table__cell cell-bullet"> <div class="bullet" style="${(0,n.W)({borderColor:(0,i.g)(W,this.hass.themes.darkMode,!1,!1,f.water,e),backgroundColor:(0,i.g)(W,this.hass.themes.darkMode,!0,!1,f.water,e)})}"></div> </td> <th class="mdc-data-table__cell" scope="row"> ${(0,m.$O)(this.hass,t.stat_energy_from,this._data?.statsMetadata[t.stat_energy_from])} </th> ${O?r.qy` <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(s,this.hass.locale)} ${T} </td> ${M?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==h?(0,_.ZV)(h,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(a,this.hass.locale)} ${T} </td> ${M?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${null!==c?(0,_.ZV)(c,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`}))} ${Z.water?r.qy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.water_total")} </th> ${O?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(V,this.hass.locale)} ${T} </td> ${M?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${b?(0,_.ZV)(C,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""}`:""} <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(o,this.hass.locale)} ${T} </td> ${M?r.qy`<td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${b?(0,_.ZV)(y,this.hass.locale,{style:"currency",currency:this.hass.config.currency}):""} </td>`:""} </tr>`:""} ${[g,b,u].filter(Boolean).length>1?r.qy`<tr class="mdc-data-table__row total"> <td class="mdc-data-table__cell"></td> <th class="mdc-data-table__cell" scope="row"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_sources_table.total_costs")} </th> ${O?r.qy`<td class="mdc-data-table__cell"></td> <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(q+$+C,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td>`:""} <td class="mdc-data-table__cell"></td> <td class="mdc-data-table__cell mdc-data-table__cell--numeric"> ${(0,_.ZV)(c+e+y,this.hass.locale,{style:"currency",currency:this.hass.config.currency})} </td> </tr>`:""} </tbody> </table> </div> </div> </ha-card>`}},{kind:"method",key:"_handleMoreInfo",value:function(t){const e=t.currentTarget?.entity;e&&!(0,m.OQ)(e)&&(0,g.r)(this,"hass-more-info",{entityId:e})}},{kind:"get",static:!0,key:"styles",value:function(){return r.AH`${(0,r.iz)(c)} .mdc-data-table{width:100%;border:0}.mdc-data-table__cell,.mdc-data-table__header-cell{color:var(--primary-text-color);border-bottom-color:var(--divider-color);text-align:var(--float-start)}.mdc-data-table__row:not(.mdc-data-table__row--selected):hover{background-color:rgba(var(--rgb-primary-text-color),.04)}.clickable{cursor:pointer}.total{--mdc-typography-body2-font-weight:500}.total .mdc-data-table__cell{border-top:1px solid var(--divider-color)}ha-card{height:100%;overflow:hidden}.card-header{padding-bottom:0}.content{padding:16px}.has-header{padding-top:0}.cell-bullet{width:32px;padding-right:0;padding-inline-end:0;padding-inline-start:16px;direction:var(--direction)}.bullet{border-width:1px;border-style:solid;border-radius:4px;height:16px;width:32px}.mdc-data-table__cell--numeric{direction:ltr}`}}]}}),(0,y.E)(r.WF));s()}catch(t){s(t)}}))}};
//# sourceMappingURL=4294.3W45KOnt9oE.js.map