export const id=76448;export const ids=[76448];export const modules={77226:(e,t,i)=>{i.d(t,{A:()=>s});const a=e=>{const t=parseFloat(e);if(isNaN(t))throw new Error(`${e} is not a number`);return t};function s(e){if(!e)return null;try{if(e.endsWith("%"))return{w:100,h:a(e.substr(0,e.length-1))};const t=e.replace(":","x").split("x");return 0===t.length?null:1===t.length?{w:a(t[0]),h:1}:{w:a(t[0]),h:a(t[1])}}catch(e){}return null}},75413:(e,t,i)=>{i.d(t,{d:()=>a});const a=async(e,t)=>new Promise((i=>{const a=t(e,(e=>{a(),i(e)}))}))},9755:(e,t,i)=>{i.d(t,{e:()=>a});const a=e=>`/api/image_proxy/${e.entity_id}?token=${e.attributes.access_token}&state=${e.state}`},76448:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.r(t),i.d(t,{DEFAULT_ASPECT_RATIO:()=>$,DEVICE_CLASSES:()=>H,HuiAreaCard:()=>O});var s=i(36312),n=i(68689),o=(i(89655),i(24545),i(51855),i(82130),i(31743),i(22328),i(4959),i(62435),i(253),i(2075),i(94438),i(54846),i(16891),i(37679),i(4525),i(50289)),r=i(29818),d=i(85323),c=i(55165),h=i(94100),l=i(94872),u=i(38962),m=i(213),_=i(16312),g=i(57636),v=i(40863),f=i(77226),k=i(75413),p=(i(13082),i(59400),i(4169),i(70857),i(96915)),y=i(10725),C=i(9883),b=i(54108),I=i(39914),w=i(20712),M=(i(16204),i(46645),e([g]));g=(M.then?(await M)():M)[0];const $="16:9",A=["sensor"],L=["binary_sensor"],S=["light","switch","fan"],x=["camera"],H={sensor:["temperature","humidity"],binary_sensor:["motion","moisture"]},V={light:{on:"M17 16V18C17 18.55 16.53 19 16 19H12C11.42 19 11 18.55 11 18V16C8.77 14.34 8.32 11.21 10 9S14.77 6.34 17 8 19.63 12.79 18 15C17.69 15.38 17.35 15.72 17 16M16 20H12V21C12 21.55 12.42 22 13 22H15C15.53 22 16 21.55 16 21M7.66 15H7V16C7 16.55 7.42 17 8 17H9V16.88C8.44 16.33 8 15.7 7.66 15M13.58 5C12.46 2.47 9.5 1.33 7 2.45S3.31 6.5 4.43 9.04C4.77 9.81 5.3 10.5 6 11V13C6 13.55 6.42 14 7 14H7.28C7.07 13.35 6.97 12.68 7 12C6.97 8.29 9.87 5.21 13.58 5Z",off:"M20.84 22.73L16.74 18.63C16.55 18.85 16.29 19 16 19H12C11.42 19 11 18.55 11 18V16C9.37 14.8 8.71 12.82 9.1 11L7.5 9.39C7.17 10.2 6.97 11.08 7 12C6.97 12.68 7.07 13.35 7.28 14H7C6.42 14 6 13.55 6 13V11C5.3 10.5 4.77 9.81 4.43 9.04C4 8.05 3.91 7 4.12 6L1.11 3L2.39 1.73L22.11 21.46L20.84 22.73M13.58 5C12.46 2.47 9.5 1.33 7 2.45C6.68 2.58 6.39 2.75 6.13 2.93L9.67 6.47C10.76 5.63 12.1 5.08 13.58 5M18.06 14.86C19.6 12.66 19.14 9.62 17 8C15.2 6.67 12.84 6.72 11.12 7.92L18.06 14.86M12 21C12 21.55 12.42 22 13 22H15C15.53 22 16 21.55 16 21V20H12V21M7 15V16C7 16.55 7.42 17 8 17H9V16.88C8.43 16.33 8 15.7 7.66 15H7Z"},switch:{on:"M17,7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7M17,15A3,3 0 0,1 14,12A3,3 0 0,1 17,9A3,3 0 0,1 20,12A3,3 0 0,1 17,15Z",off:"M17,7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7M7,15A3,3 0 0,1 4,12A3,3 0 0,1 7,9A3,3 0 0,1 10,12A3,3 0 0,1 7,15Z"},fan:{on:"M12,11A1,1 0 0,0 11,12A1,1 0 0,0 12,13A1,1 0 0,0 13,12A1,1 0 0,0 12,11M12.5,2C17,2 17.11,5.57 14.75,6.75C13.76,7.24 13.32,8.29 13.13,9.22C13.61,9.42 14.03,9.73 14.35,10.13C18.05,8.13 22.03,8.92 22.03,12.5C22.03,17 18.46,17.1 17.28,14.73C16.78,13.74 15.72,13.3 14.79,13.11C14.59,13.59 14.28,14 13.88,14.34C15.87,18.03 15.08,22 11.5,22C7,22 6.91,18.42 9.27,17.24C10.25,16.75 10.69,15.71 10.89,14.79C10.4,14.59 9.97,14.27 9.65,13.87C5.96,15.85 2,15.07 2,11.5C2,7 5.56,6.89 6.74,9.26C7.24,10.25 8.29,10.68 9.22,10.87C9.41,10.39 9.73,9.97 10.14,9.65C8.15,5.96 8.94,2 12.5,2Z",off:"M12.5,2C9.64,2 8.57,4.55 9.29,7.47L15,13.16C15.87,13.37 16.81,13.81 17.28,14.73C18.46,17.1 22.03,17 22.03,12.5C22.03,8.92 18.05,8.13 14.35,10.13C14.03,9.73 13.61,9.42 13.13,9.22C13.32,8.29 13.76,7.24 14.75,6.75C17.11,5.57 17,2 12.5,2M3.28,4L2,5.27L4.47,7.73C3.22,7.74 2,8.87 2,11.5C2,15.07 5.96,15.85 9.65,13.87C9.97,14.27 10.4,14.59 10.89,14.79C10.69,15.71 10.25,16.75 9.27,17.24C6.91,18.42 7,22 11.5,22C13.8,22 14.94,20.36 14.94,18.21L18.73,22L20,20.72L3.28,4Z"},binary_sensor:{motion:"M13.5,5.5C14.59,5.5 15.5,4.58 15.5,3.5C15.5,2.38 14.59,1.5 13.5,1.5C12.39,1.5 11.5,2.38 11.5,3.5C11.5,4.58 12.39,5.5 13.5,5.5M9.89,19.38L10.89,15L13,17V23H15V15.5L12.89,13.5L13.5,10.5C14.79,12 16.79,13 19,13V11C17.09,11 15.5,10 14.69,8.58L13.69,7C13.29,6.38 12.69,6 12,6C11.69,6 11.5,6.08 11.19,6.08L6,8.28V13H8V9.58L9.79,8.88L8.19,17L3.29,16L2.89,18L9.89,19.38Z",moisture:"M10 3.25C10 3.25 16 10 16 14C16 17.31 13.31 20 10 20S4 17.31 4 14C4 10 10 3.25 10 3.25M20 7V13H18V7H20M18 17H20V15H18V17Z"}};let O=(0,s.A)([(0,r.EM)("hui-area-card")],(function(e,t){class a extends t{constructor(...t){super(...t),e(this)}}return{F:a,d:[{kind:"method",static:!0,key:"getConfigElement",value:async function(){return await i.e(97539).then(i.bind(i,97539)),document.createElement("hui-area-card-editor")}},{kind:"method",static:!0,key:"getStubConfig",value:async function(e){const t=await(0,k.d)(e.connection,p.ft);return{type:"area",area:t[0]?.area_id||""}}},{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"layout",value:void 0},{kind:"field",decorators:[(0,r.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,r.wk)()],key:"_entities",value:void 0},{kind:"field",decorators:[(0,r.wk)()],key:"_devices",value:void 0},{kind:"field",decorators:[(0,r.wk)()],key:"_areas",value:void 0},{kind:"field",key:"_deviceClasses",value:()=>H},{kind:"field",key:"_ratio",value:()=>null},{kind:"field",key:"_entitiesByDomain",value:()=>(0,h.A)(((e,t,i,a,s)=>{const n=i.filter((i=>!i.entity_category&&!i.hidden_by&&(i.area_id?i.area_id===e:i.device_id&&t.has(i.device_id)))).map((e=>e.entity_id)),o={};for(const e of n){const t=(0,m.m)(e);if(!(S.includes(t)||A.includes(t)||L.includes(t)||x.includes(t)))continue;const i=s[e];i&&((!A.includes(t)&&!L.includes(t)||a[t].includes(i.attributes.device_class||""))&&(t in o||(o[t]=[]),o[t].push(i)))}return o}))},{kind:"method",key:"_isOn",value:function(e,t){const i=this._entitiesByDomain(this._config.area,this._devicesInArea(this._config.area,this._devices),this._entities,this._deviceClasses,this.hass.states)[e];if(i)return(t?i.filter((e=>e.attributes.device_class===t)):i).find((e=>!(0,C.g0)(e.state)&&!l.jj.includes(e.state)))}},{kind:"method",key:"_average",value:function(e,t){const i=this._entitiesByDomain(this._config.area,this._devicesInArea(this._config.area,this._devices),this._entities,this._deviceClasses,this.hass.states)[e].filter((e=>!t||e.attributes.device_class===t));if(!i)return;let a;const s=i.filter((e=>!(!(0,g.x)(e)||isNaN(Number(e.state)))&&(a?e.attributes.unit_of_measurement===a:(a=e.attributes.unit_of_measurement,!0))));if(!s.length)return;const n=s.reduce(((e,t)=>e+Number(t.state)),0);return`${(0,g.ZV)(n/s.length,this.hass.locale,{maximumFractionDigits:1})}${a?(0,v.A)(a,this.hass.locale):""}${a||""}`}},{kind:"field",key:"_area",value:()=>(0,h.A)(((e,t)=>t.find((t=>t.area_id===e))||null))},{kind:"field",key:"_devicesInArea",value:()=>(0,h.A)(((e,t)=>new Set(e?t.filter((t=>t.area_id===e)).map((e=>e.id)):[])))},{kind:"method",key:"hassSubscribe",value:function(){return[(0,p.ft)(this.hass.connection,(e=>{this._areas=e})),(0,y.Ag)(this.hass.connection,(e=>{this._devices=e})),(0,b.Bz)(this.hass.connection,(e=>{this._entities=e}))]}},{kind:"method",key:"getCardSize",value:function(){return 3}},{kind:"method",key:"setConfig",value:function(e){if(!e.area)throw new Error("Area Required");this._config=e,this._deviceClasses={...H},e.sensor_classes&&(this._deviceClasses.sensor=e.sensor_classes),e.alert_classes&&(this._deviceClasses.binary_sensor=e.alert_classes)}},{kind:"method",key:"shouldUpdate",value:function(e){if(e.has("_config")||!this._config)return!0;if(e.has("_devicesInArea")||e.has("_areas")||e.has("_entities"))return!0;if(!e.has("hass"))return!1;const t=e.get("hass");if(!t||t.themes!==this.hass.themes||t.locale!==this.hass.locale)return!0;if(!this._devices||!this._devicesInArea(this._config.area,this._devices)||!this._entities)return!1;const i=this._entitiesByDomain(this._config.area,this._devicesInArea(this._config.area,this._devices),this._entities,this._deviceClasses,this.hass.states);for(const e of Object.values(i))for(const i of e)if(t.states[i.entity_id]!==i)return!0;return!1}},{kind:"method",key:"willUpdate",value:function(e){(e.has("_config")||null===this._ratio)&&(this._ratio=this._config?.aspect_ratio?(0,f.A)(this._config?.aspect_ratio):null,(null===this._ratio||this._ratio.w<=0||this._ratio.h<=0)&&(this._ratio=(0,f.A)($)))}},{kind:"method",key:"render",value:function(){if(!(this._config&&this.hass&&this._areas&&this._devices&&this._entities))return o.s6;const e=this._entitiesByDomain(this._config.area,this._devicesInArea(this._config.area,this._devices),this._entities,this._deviceClasses,this.hass.states),t=this._area(this._config.area,this._areas);if(null===t)return o.qy` <hui-warning> ${this.hass.localize("ui.card.area.area_not_found")} </hui-warning> `;const i=[];let a;A.forEach((t=>{t in e&&this._deviceClasses[t].forEach((a=>{e[t].some((e=>e.attributes.device_class===a))&&i.push(o.qy` <div class="sensor"> <ha-domain-icon .hass="${this.hass}" .domain="${t}" .deviceClass="${a}"></ha-domain-icon> ${this._average(t,a)} </div> `)}))})),this._config.show_camera&&"camera"in e&&(a=e.camera[0].entity_id);const s=t.picture||a,n="grid"===this.layout;return o.qy` <ha-card class="${s?"image":""}" style="${(0,c.W)({paddingBottom:n||s?"0":`${(100*this._ratio.h/this._ratio.w).toFixed(2)}%`})}"> ${t.picture||a?o.qy` <hui-image .config="${this._config}" .hass="${this.hass}" .image="${t.picture?t.picture:void 0}" .cameraImage="${a}" .cameraView="${this._config.camera_view}" .aspectRatio="${n?void 0:this._config.aspect_ratio||$}" fitMode="cover"></hui-image> `:t.icon?o.qy` <div class="icon-container"> <ha-icon icon="${t.icon}"></ha-icon> </div> `:o.s6} <div class="container ${(0,d.H)({navigate:void 0!==this._config.navigation_path})}" @click="${this._handleNavigation}"> <div class="alerts"> ${L.map((t=>t in e?this._deviceClasses[t].map((e=>{const i=this._isOn(t,e);return i?o.qy` <ha-state-icon class="alert" .hass="${this.hass}" .stateObj="${i}"></ha-state-icon> `:o.s6})):o.s6))} </div> <div class="bottom"> <div> <div class="name">${t.name}</div> ${i.length?o.qy`<div class="sensors">${i}</div>`:""} </div> <div class="buttons"> ${S.map((t=>{if(!(t in e))return"";const i=this._isOn(t);return S.includes(t)?o.qy` <ha-icon-button class="${i?"on":"off"}" .path="${V[t][i?"on":"off"]}" .domain="${t}" @click="${this._toggle}"> </ha-icon-button> `:""}))} </div> </div> </div> </ha-card> `}},{kind:"method",key:"updated",value:function(e){if((0,n.A)(a,"updated",this,3)([e]),!this._config||!this.hass)return;const t=e.get("hass"),i=e.get("_config");(!e.has("hass")||t&&t.themes===this.hass.themes)&&(!e.has("_config")||i&&i.theme===this._config.theme)||(0,u.Q)(this,this.hass.themes,this._config.theme)}},{kind:"method",key:"_handleNavigation",value:function(){this._config.navigation_path&&(0,_.o)(this._config.navigation_path)}},{kind:"method",key:"_toggle",value:function(e){e.stopPropagation();const t=e.currentTarget.domain;S.includes(t)&&this.hass.callService(t,this._isOn(t)?"turn_off":"turn_on",void 0,{area_id:this._config.area}),(0,I.j)("light")}},{kind:"method",key:"getLayoutOptions",value:function(){return{grid_columns:4,grid_rows:3}}},{kind:"get",static:!0,key:"styles",value:function(){return o.AH`ha-card{overflow:hidden;position:relative;background-size:cover;height:100%}.container{display:flex;flex-direction:column;justify-content:space-between;position:absolute;top:0;bottom:0;left:0;right:0;background:linear-gradient(0,rgba(33,33,33,.9) 0%,rgba(33,33,33,0) 45%)}ha-card:not(.image) .container::before{position:absolute;content:"";width:100%;height:100%;background-color:var(--sidebar-selected-icon-color);opacity:.12}.image hui-image{height:100%}.icon-container{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}.icon-container ha-icon{--mdc-icon-size:60px;color:var(--sidebar-selected-icon-color)}.sensors{color:#e3e3e3;font-size:16px;--mdc-icon-size:24px;opacity:.6;margin-top:8px}.sensor{white-space:nowrap;float:left;margin-right:4px;margin-inline-end:4px;margin-inline-start:initial}.alerts{padding:16px}ha-state-icon{display:inline-flex;align-items:center;justify-content:center;position:relative}.alerts ha-state-icon{background:var(--accent-color);color:var(--text-accent-color,var(--text-primary-color));padding:8px;margin-right:8px;margin-inline-end:8px;margin-inline-start:initial;border-radius:50%}.name{color:#fff;font-size:24px}.bottom{display:flex;justify-content:space-between;align-items:center;padding:16px}.navigate{cursor:pointer}ha-icon-button{color:#fff;background-color:var(--area-button-color,#727272b2);border-radius:50%;margin-left:8px;margin-inline-start:8px;margin-inline-end:initial;--mdc-icon-button-size:44px}.on{color:var(--state-light-active-color)}`}}]}}),(0,w.E)(o.WF));a()}catch(e){a(e)}}))},16204:(e,t,i)=>{var a=i(36312),s=i(68689),n=(i(253),i(2075),i(50289)),o=i(29818),r=i(85323),d=i(55165),c=i(94872),h=i(213),l=i(77226),u=(i(6188),i(32885),i(88800)),m=i(9883),_=i(9755);var g=function(e){return e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded",e[e.Error=3]="Error",e}(g||{});(0,a.A)([(0,o.EM)("hui-image")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"entity",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"image",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"stateImage",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"cameraImage",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"cameraView",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"aspectRatio",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"filter",value:void 0},{kind:"field",decorators:[(0,o.MZ)({attribute:!1})],key:"stateFilter",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"darkModeImage",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"darkModeFilter",value:void 0},{kind:"field",decorators:[(0,o.MZ)()],key:"fitMode",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_imageVisible",value:()=>!1},{kind:"field",decorators:[(0,o.wk)()],key:"_loadState",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_cameraImageSrc",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_loadedImageSrc",value:void 0},{kind:"field",decorators:[(0,o.wk)()],key:"_lastImageHeight",value:void 0},{kind:"field",key:"_intersectionObserver",value:void 0},{kind:"field",key:"_cameraUpdater",value:void 0},{kind:"field",key:"_ratio",value:()=>null},{kind:"method",key:"connectedCallback",value:function(){(0,s.A)(i,"connectedCallback",this,3)([]),void 0===this._loadState&&(this._loadState=g.Loading),this.cameraImage&&"live"!==this.cameraView&&this._startIntersectionObserverOrUpdates()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,s.A)(i,"disconnectedCallback",this,3)([]),this._stopUpdateCameraInterval(),this._stopIntersectionObserver(),this._imageVisible=void 0}},{kind:"method",key:"handleIntersectionCallback",value:function(e){this._imageVisible=e[0].isIntersecting}},{kind:"method",key:"willUpdate",value:function(e){if(e.has("hass")){const t=e.get("hass");this._shouldStartCameraUpdates(t)?this._startIntersectionObserverOrUpdates():this.hass.connected||(this._stopUpdateCameraInterval(),this._stopIntersectionObserver(),this._loadState=g.Loading,this._cameraImageSrc=void 0,this._loadedImageSrc=void 0)}e.has("_imageVisible")&&(this._imageVisible?this._shouldStartCameraUpdates()&&this._startUpdateCameraInterval():this._stopUpdateCameraInterval()),e.has("aspectRatio")&&(this._ratio=this.aspectRatio?(0,l.A)(this.aspectRatio):null),this._loadState!==g.Loading||this.cameraImage||(this._loadState=g.Loaded)}},{kind:"method",key:"render",value:function(){if(!this.hass)return n.s6;const e=Boolean(this._ratio&&this._ratio.w>0&&this._ratio.h>0),t=this.entity?this.hass.states[this.entity]:void 0,i=t?t.state:m.Hh;let a,s,o=!this.stateImage;if(this.cameraImage)"live"===this.cameraView?s=this.hass.states[this.cameraImage]:a=this._cameraImageSrc;else if(this.stateImage){const e=this.stateImage[i];e?a=e:(a=this.image,o=!0)}else a=this.darkModeImage&&this.hass.themes.darkMode?this.darkModeImage:t&&"image"===(0,h.m)(t.entity_id)?(0,_.e)(t):this.image;a&&(a=this.hass.hassUrl(a));let l=this.filter||"";if(this.hass.themes.darkMode&&this.darkModeFilter&&(l+=this.darkModeFilter),this.stateFilter&&this.stateFilter[i]&&(l+=this.stateFilter[i]),!l&&this.entity){l=(!t||c.jj.includes(i))&&o?"grayscale(100%)":""}return n.qy` <div style="${(0,d.W)({paddingBottom:e?`${(100*this._ratio.h/this._ratio.w).toFixed(2)}%`:void 0===this._lastImageHeight?"56.25%":void 0,backgroundImage:e&&this._loadedImageSrc?`url("${this._loadedImageSrc}")`:void 0,filter:this._loadState===g.Loaded||"live"===this.cameraView?l:void 0})}" class="container ${(0,r.H)({ratio:e||void 0===this._lastImageHeight,contain:"contain"===this.fitMode,fill:"fill"===this.fitMode})}"> ${this.cameraImage&&"live"===this.cameraView?n.qy` <ha-camera-stream muted .hass="${this.hass}" .stateObj="${s}" @load="${this._onVideoLoad}"></ha-camera-stream> `:void 0===a?n.s6:n.qy` <img id="image" src="${a}" @error="${this._onImageError}" @load="${this._onImageLoad}" style="${(0,d.W)({display:e||this._loadState===g.Loaded?"block":"none"})}"> `} ${this._loadState===g.Error?n.qy`<div id="brokenImage" style="${(0,d.W)({height:e?void 0:`${this._lastImageHeight}px`||"100%"})}"></div>`:"live"===this.cameraView||void 0!==a&&this._loadState!==g.Loading?"":n.qy`<div class="progress-container" style="${(0,d.W)({height:e?void 0:`${this._lastImageHeight}px`||"100%"})}"> <ha-circular-progress class="render-spinner" indeterminate size="small"></ha-circular-progress> </div>`} </div> `}},{kind:"method",key:"_shouldStartCameraUpdates",value:function(e){return!(e&&e.connected===this.hass.connected||!this.hass.connected||"live"===this.cameraView)}},{kind:"method",key:"_startIntersectionObserverOrUpdates",value:function(){"IntersectionObserver"in window?(this._intersectionObserver||(this._intersectionObserver=new IntersectionObserver(this.handleIntersectionCallback.bind(this))),this._intersectionObserver.observe(this)):(this._imageVisible=!0,this._startUpdateCameraInterval())}},{kind:"method",key:"_stopIntersectionObserver",value:function(){this._intersectionObserver&&this._intersectionObserver.disconnect()}},{kind:"method",key:"_startUpdateCameraInterval",value:function(){this._stopUpdateCameraInterval(),this._updateCameraImageSrc(),this.cameraImage&&this.isConnected&&(this._cameraUpdater=window.setInterval((()=>this._updateCameraImageSrcAtInterval()),1e4))}},{kind:"method",key:"_stopUpdateCameraInterval",value:function(){this._cameraUpdater&&(clearInterval(this._cameraUpdater),this._cameraUpdater=void 0)}},{kind:"method",key:"_onImageError",value:function(){this._loadState=g.Error}},{kind:"method",key:"_onImageLoad",value:async function(e){this._loadState=g.Loaded;const t=e.target;this._ratio&&this._ratio.w>0&&this._ratio.h>0&&(this._loadedImageSrc=t.src),await this.updateComplete,this._lastImageHeight=t.offsetHeight}},{kind:"method",key:"_onVideoLoad",value:async function(e){this._loadState=g.Loaded;const t=e.currentTarget;await this.updateComplete,this._lastImageHeight=t.offsetHeight}},{kind:"method",key:"_updateCameraImageSrcAtInterval",value:async function(){return this._loadState===g.Loading&&this._onImageError(),this._updateCameraImageSrc()}},{kind:"method",key:"_updateCameraImageSrc",value:async function(){if(!this.hass||!this.cameraImage)return;if(!this.hass.states[this.cameraImage])return void this._onImageError();const e=this.clientWidth||640;let t,i=Math.ceil(e*devicePixelRatio);this._lastImageHeight?t=Math.ceil(this._lastImageHeight*devicePixelRatio):this._ratio&&this._ratio.w>0&&this._ratio.h>0?t=Math.ceil(i*(this._ratio.h/this._ratio.w)):(i*=2,t=Math.ceil(.5625*i)),this._cameraImageSrc=await(0,u.C4)(this.hass,this.cameraImage,i,t),void 0===this._cameraImageSrc&&this._onImageError()}},{kind:"get",static:!0,key:"styles",value:function(){return n.AH`:host{display:block}.container{transition:filter .2s linear;height:100%}img{display:block;height:100%;width:100%;object-fit:cover}.progress-container{display:flex;justify-content:center;align-items:center}.ratio{position:relative;width:100%;height:0;background-position:center;background-size:cover}.ratio.fill{background-size:100% 100%}.ratio.contain{background-size:contain;background-repeat:no-repeat}.fill img{object-fit:fill}.contain img{object-fit:contain}.ratio div,.ratio img{position:absolute;top:0;left:0;width:100%;height:100%}.ratio img{visibility:hidden}#brokenImage{background:grey url("/static/images/image-broken.svg") center/36px no-repeat}`}}]}}),n.WF)}};
//# sourceMappingURL=76448.0XOFnqScwHU.js.map