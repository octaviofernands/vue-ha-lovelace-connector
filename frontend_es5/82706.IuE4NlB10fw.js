"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[82706],{58750:function(e,t,n){var i=n(41765),r=n(18816),o=n(36643),a=n(13407),s=n(45144),c=n(22669),l=n(93187),u=n(53138),f=n(56674),h=n(81830),d=n(14329),p=n(49921),m=n(99393),v=n(26857),g=n(70029),y=n(26906),b=n(80674),x=n(44804),w=n(12850),k=n(9881),A=n(18326),C=n(53982),S=b("matchAll"),M="RegExp String",L=M+" Iterator",I=A.set,O=A.getterFor(L),E=RegExp.prototype,F=TypeError,D=o("".indexOf),R=o("".matchAll),T=!!R&&!y((function(){R("a",/./)})),P=a((function(e,t,n,i){I(this,{type:L,regexp:e,string:t,global:n,unicode:i,done:!1})}),M,(function(){var e=O(this);if(e.done)return s(void 0,!0);var t=e.regexp,n=e.string,i=k(t,n);return null===i?(e.done=!0,s(void 0,!0)):e.global?(""===u(i[0])&&(t.lastIndex=w(n,l(t.lastIndex),e.unicode)),s(i,!1)):(e.done=!0,s(i,!1))})),q=function(e){var t,n,i,r=f(this),o=u(e),a=x(r,RegExp),s=u(m(r));return t=new a(a===RegExp?r.source:r,s),n=!!~D(s,"g"),i=!!~D(s,"u"),t.lastIndex=l(r.lastIndex),new P(t,o,n,i)};i({target:"String",proto:!0,forced:T},{matchAll:function(e){var t,n,i,o,a=c(this);if(h(e)){if(T)return R(a,e)}else{if(p(e)&&(t=u(c(m(e))),!~D(t,"g")))throw new F("`.matchAll` does not allow non-global regexes");if(T)return R(a,e);if(void 0===(i=v(e,S))&&C&&"RegExp"===d(e)&&(i=q),i)return r(i,e,a)}return n=u(a),o=new RegExp(e,"g"),C?r(q,o,n):o[S](n)}}),C||S in E||g(E,S,q)},30829:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(i,o){var a,s,c,l,u,f,h,d,p,m,v,g,y,b,x,w,k,A,C,S,M,L,I,O,E,F,D,R,T,P,q,W,N,z,j,B,U,Z,$,_,H,K,J,V,Q,X,Y,G,ee,te,ne,ie,re,oe,ae,se,ce,le,ue,fe,he,de,pe,me,ve,ge,ye,be,xe,we,ke,Ae,Ce,Se,Me,Le,Ie,Oe,Ee,Fe,De,Re,Te,Pe,qe,We,Ne,ze,je,Be,Ue,Ze,$e,_e,He,Ke,Je,Ve,Qe,Xe,Ye,Ge,et,tt,nt;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[de,ie,T.of(e),fe,tt,pe]},Ye=function(e,t,n){var i=e.charCategorizer(t);if(i(e.sliceDoc(t-1,t))!=CharCategory.Word)return t;var r,o=_createForOfIteratorHelper(n);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=t-a.length;if(e.sliceDoc(s,t)==a&&i(e.sliceDoc(s-1,s))!=CharCategory.Word)return s}}catch(c){o.e(c)}finally{o.f()}return-1},Xe=function(e,t,n,i){for(var r=syntaxTree(e).resolveInner(t,-1),o=i.reduce((function(e,t){return Math.max(e,t.length)}),0),a=0;a<5;a++){var s=e.sliceDoc(r.from,Math.min(r.to,r.from+n.length+o)),c=s.indexOf(n);if(!c||c>-1&&i.indexOf(s.slice(0,c))>-1){for(var l=r.firstChild;l&&l.from==r.from&&l.to-l.from>n.length+c;){if(e.sliceDoc(l.to-n.length,l.to)==n)return!1;l=l.firstChild}return!0}var u=r.to==t&&r.parent;if(!u)break;r=u}return!1},Qe=function(e,t){var n=syntaxTree(e).resolveInner(t+1);return n.parent&&n.from==t},Ve=function(e,t,n,i){var r=i.stringPrefixes||qe.stringPrefixes,o=null,a=e.changeByRange((function(i){if(!i.empty)return{changes:[{insert:t,from:i.from},{insert:t,from:i.to}],effects:We.of(i.to+t.length),range:EditorSelection.range(i.anchor+t.length,i.head+t.length)};var a,s=i.head,c=_e(e.doc,s);if(c==t){if(Qe(e,s))return{changes:{insert:t+t,from:s},effects:We.of(s+t.length),range:EditorSelection.cursor(s+t.length)};if($e(e,s)){var l=n&&e.sliceDoc(s,s+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:s,to:s+l.length,insert:l},range:EditorSelection.cursor(s+l.length)}}}else{if(n&&e.sliceDoc(s-2*t.length,s)==t+t&&(a=Ye(e,s-2*t.length,r))>-1&&Qe(e,a))return{changes:{insert:t+t+t+t,from:s},effects:We.of(s+t.length),range:EditorSelection.cursor(s+t.length)};if(e.charCategorizer(s)(c)!=CharCategory.Word&&Ye(e,s,r)>-1&&!Xe(e,s,t,r))return{changes:{insert:t+t,from:s},effects:We.of(s+t.length),range:EditorSelection.cursor(s+t.length)}}return{range:o=i}}));return o?null:e.update(a,{scrollIntoView:!0,userEvent:"input.type"})},Je=function(e,t,n){var i=null,r=e.changeByRange((function(t){return t.empty&&_e(e.doc,t.head)==n?{changes:{from:t.head,to:t.head+n.length,insert:n},range:EditorSelection.cursor(t.head+n.length)}:i={range:t}}));return i?null:e.update(r,{scrollIntoView:!0,userEvent:"input.type"})},Ke=function(e,t,n,i){var r=null,o=e.changeByRange((function(o){if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:We.of(o.to+t.length),range:EditorSelection.range(o.anchor+t.length,o.head+t.length)};var a=_e(e.doc,o.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:t+n,from:o.head},effects:We.of(o.head+t.length),range:EditorSelection.cursor(o.head+t.length)}:{range:r=o}}));return r?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})},He=function(e,t){var n=e.sliceString(t-2,t);return(0,p.Fh)((0,p.vS)(n,0))==n.length?n:n.slice(1)},_e=function(e,t){var n=e.sliceString(t,t+2);return n.slice(0,(0,p.Fh)((0,p.vS)(n,0)))},$e=function(e,t){var n=!1;return e.field(ze).between(0,e.doc.length,(function(e){e==t&&(n=!0)})),n},Ue=function(e,t){return e.languageDataAt("closeBrackets",t)[0]||qe},Be=function(e){for(var t=0;t<je.length;t+=2)if(je.charCodeAt(t)==e)return je.charAt(t+1);return(0,p.MK)(e<128?e:e+1)},Pe=function(e,t,n,i,r){var o=e.length>=1e3,a=o&&t.get(e);if(a)return a;var s=[],c=Object.create(null);if(e.children){var l,u=0,f=_createForOfIteratorHelper(e.children);try{for(f.s();!(l=f.n()).done;){var h=l.value;if(h.length>=1e3){var d,p=_createForOfIteratorHelper(Pe(h,t,n,i-u,r-u));try{for(p.s();!(d=p.n()).done;){var m=d.value;c[m.label]||(c[m.label]=!0,s.push(m))}}catch(v){p.e(v)}finally{p.f()}}else Te(h,n,s,c,r-u);u+=h.length+1}}catch(v){f.e(v)}finally{f.f()}}else Te(e,n,s,c,r);return o&&s.length<2e3&&t.set(e,s),s},Te=function(e,t,n,i,r){for(var o=e.iterLines(),a=0;!o.next().done;){var s=o.value,c=void 0;for(t.lastIndex=0;c=t.exec(s);)if(!i[c[0]]&&a+c.index!=r&&(n.push({type:"text",label:c[0]}),i[c[0]]=!0,n.length>=2e3))return;a+=s.length+1}},Re=function(e){return De[e]||(De[e]=new WeakMap)},Fe=function(e,t){return new RegExp(t(e.source),e.unicode?"u":"")},Ee=function(e){var t=e.replace(/[\]\-\\]/g,"\\$&");try{return new RegExp("[\\p{Alphabetic}\\p{Number}_".concat(t,"]+"),"ug")}catch(n){return new RegExp("[w".concat(t,"]"),"g")}},Ce=function(e){return function(t){var n=t.state,i=t.dispatch,r=n.field(we,!1);if(!r||e<0&&0==r.active)return!1;var o=r.active+e,a=e>0&&!r.ranges.some((function(t){return t.field==o+e}));return i(n.update({selection:ke(r.ranges,o),effects:be.of(a?null:new ye(r.ranges,o)),scrollIntoView:!0})),!0}},Ae=function(e){var t=me.parse(e);return function(e,n,i,r){var o=t.instantiate(e.state,i),a=o.text,s=o.ranges,c={changes:{from:i,to:r,insert:Text.of(a)},scrollIntoView:!0,annotations:n?[M.of(n),Transaction.userEvent.of("input.complete")]:void 0};if(s.length&&(c.selection=ke(s,0)),s.some((function(e){return e.field>0}))){var l=new ye(s,0),u=c.effects=[be.of(l)];void 0===e.state.field(we,!1)&&u.push(StateEffect.appendConfig.of([we,Ie,Oe,pe]))}e.dispatch(e.state.update(c))}},ke=function(e,t){return p.OF.create(e.filter((function(e){return e.field==t})).map((function(e){return p.OF.range(e.from,e.to)})))},ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"option";return function(n){var i=n.state.field(ie,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(T).interactionDelay)return!1;var r,o=1;"page"==t&&(r=(0,m.Eg)(n,i.open.tooltip))&&(o=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));var a=i.open.options.length,s=i.open.selected>-1?i.open.selected+o*(e?1:-1):e?0:a-1;return s<0?s="page"==t?0:a-1:s>=a&&(s="page"==t?a-1:0),n.dispatch({effects:ne.of(s)}),!0}},re=function(e,t){var n=t.completion.apply||t.completion.label,i=e.state.field(ie).active.find((function(e){return e.source==t.source}));return i instanceof G&&("string"==typeof n?e.dispatch(Object.assign(Object.assign({},L(e.state,n,i.from,i.to)),{annotations:M.of(t.completion)})):n(e,t.completion,i.from,i.to),!0)},ee=function(e,t,n,i){if(!e)return!1;var r=t.sliceDoc(n,i);return"function"==typeof e?e(r,n,i,t):S(e,!0).test(r)},X=function(e,t){if(e.isUserEvent("input.complete")){var n=e.annotation(M);if(n&&t.activateOnCompletion(n))return 12}var i=e.isUserEvent("input.type");return i&&t.activateOnTyping?5:i?1:e.isUserEvent("delete.backward")?2:e.selection?8:e.docChanged?16:0},V=function(e,t){var n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n},H=function(e,t){if(e==t)return!0;for(var n=0,i=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;i<t.length&&!t[i].hasResult;)i++;var r=n==e.length,o=i==t.length;if(r||o)return r==o;if(e[n++].result!=t[i++].result)return!1}},Z=function(e,t){var n,i=[],r=null,o=function(e){i.push(e);var t=e.completion.section;if(t){r||(r=[]);var n="string"==typeof t?t:t.name;r.some((function(e){return e.name==n}))||r.push("string"==typeof t?{name:n}:t)}},a=t.facet(T),s=(0,f.A)(e);try{for(s.s();!(n=s.n()).done;){var c=n.value;if(c.hasResult()){var l=c.result.getMatch;if(!1===c.result.filter){var u,h=(0,f.A)(c.result.options);try{for(h.s();!(u=h.n()).done;){var d=u.value;o(new A(d,c.source,l?l(d):[],1e9-i.length))}}catch(B){h.e(B)}finally{h.f()}}else{var p,m=t.sliceDoc(c.from,c.to),v=void 0,g=a.filterStrict?new R(m):new D(m),y=(0,f.A)(c.result.options);try{for(y.s();!(p=y.n()).done;){var b=p.value;if(v=g.match(b.label)){var x=b.displayLabel?l?l(b,v.matched):[]:v.matched;o(new A(b,c.source,x,v.score+(b.boost||0)))}}}catch(B){y.e(B)}finally{y.f()}}}}}catch(B){s.e(B)}finally{s.f()}if(r){var w,k=Object.create(null),C=0,S=(0,f.A)(r.sort((function(e,t){var n,i;return(null!==(n=e.rank)&&void 0!==n?n:1e9)-(null!==(i=t.rank)&&void 0!==i?i:1e9)||(e.name<t.name?-1:1)})));try{for(S.s();!(w=S.n()).done;){var M=w.value;C-=1e5,k[M.name]=C}}catch(B){S.e(B)}finally{S.f()}var L,I=(0,f.A)(i);try{for(I.s();!(L=I.n()).done;){var O=L.value,E=O.completion.section;E&&(O.score+=k["string"==typeof E?E:E.name])}}catch(B){I.e(B)}finally{I.f()}}var F,P=[],q=null,W=a.compareCompletions,N=(0,f.A)(i.sort((function(e,t){return t.score-e.score||W(e.completion,t.completion)})));try{for(N.s();!(F=N.n()).done;){var z=F.value,j=z.completion;!q||q.label!=j.label||q.detail!=j.detail||null!=q.type&&null!=j.type&&q.type!=j.type||q.apply!=j.apply||q.boost!=j.boost?P.push(z):U(z.completion)>U(q)&&(P[P.length-1]=z),q=z.completion}}catch(B){N.e(B)}finally{N.f()}return P},U=function(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)},B=function(e,t){var n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),r=n.height/e.offsetHeight;i.top<n.top?e.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(e.scrollTop+=(i.bottom-n.bottom)/r)},j=function(e,t){return function(n){return new z(n,e,t)}},N=function(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){var i=Math.floor(t/n);return{from:i*n,to:(i+1)*n}}var r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}},W=function(e){var t=e.addToOptions.slice();return e.icons&&t.push({render:function(e){var t,n=document.createElement("div");return n.classList.add("cm-completionIcon"),e.type&&(t=n.classList).add.apply(t,(0,l.A)(e.type.split(/\s+/g).map((function(e){return"cm-completionIcon-"+e})))),n.setAttribute("aria-hidden","true"),n},position:20}),t.push({render:function(e,t,n,i){var r=document.createElement("span");r.className="cm-completionLabel";for(var o=e.displayLabel||e.label,a=0,s=0;s<i.length;){var c=i[s++],l=i[s++];c>a&&r.appendChild(document.createTextNode(o.slice(a,c)));var u=r.appendChild(document.createElement("span"));u.appendChild(document.createTextNode(o.slice(c,l))),u.className="cm-completionMatchedText",a=l}return a<o.length&&r.appendChild(document.createTextNode(o.slice(a))),r},position:50},{render:function(e){if(!e.detail)return null;var t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort((function(e,t){return e.position-t.position})).map((function(e){return e.render}))},q=function(e,t,n,i,r,o){var a,s,c=e.textDirection==m.OP.RTL,l=c,u=!1,f="top",h=t.left-r.left,d=r.right-t.right,p=i.right-i.left,v=i.bottom-i.top;if(l&&h<Math.min(p,d)?l=!1:!l&&d<Math.min(p,h)&&(l=!0),p<=(l?h:d))a=Math.max(r.top,Math.min(n.top,r.bottom-v))-t.top,s=Math.min(400,l?h:d);else{u=!0,s=Math.min(400,(c?t.right:r.right-t.left)-30);var g=r.bottom-t.bottom;g>=v||g>t.top?a=n.bottom-t.top:(f="bottom",a=t.bottom-n.top)}var y=(t.bottom-t.top)/o.offsetHeight,b=(t.right-t.left)/o.offsetWidth;return{style:"".concat(f,": ").concat(a/y,"px; max-width: ").concat(s/b,"px"),class:"cm-completionInfo-"+(u?c?"left-narrow":"right-narrow":l?"left":"right")}},P=function(e,t){return e?t?e+" "+t:e:t},O=function(e){if(!Array.isArray(e))return e;var t=I.get(e);return t||I.set(e,t=k(e)),t},L=function(e,t,n,i){var r=e.selection.main,o=n-r.from,a=i-r.from;return Object.assign(Object.assign({},e.changeByRange((function(s){return s!=r&&n!=i&&e.sliceDoc(s.from+o,s.from+a)!=e.sliceDoc(n,i)?{range:s}:{changes:{from:s.from+o,to:i==r.from?s.to:s.from+a,insert:t},range:p.OF.cursor(s.from+o+t.length)}}))),{scrollIntoView:!0,userEvent:"input.complete"})},S=function(e,t){var n,i=e.source,r=t&&"^"!=i[0],o="$"!=i[i.length-1];return r||o?new RegExp("".concat(r?"^":"","(?:").concat(i,")").concat(o?"$":""),null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e},C=function(e){return e.selection.main.from},k=function(e){var t=e.map((function(e){return"string"==typeof e?{label:e}:e})),n=t.every((function(e){return/^\w+$/.test(e.label)}))?[/\w*$/,/\w+$/]:w(t),i=(0,u.A)(n,2),r=i[0],o=i[1];return function(e){var n=e.matchBefore(o);return n||e.explicit?{from:n?n.from:e.pos,options:t,validFor:r}:null}},w=function(e){var t,n=Object.create(null),i=Object.create(null),r=(0,f.A)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value.label;n[o[0]]=!0;for(var a=1;a<o.length;a++)i[o[a]]=!0}}catch(c){r.e(c)}finally{r.f()}var s=x(n)+x(i)+"*$";return[new RegExp("^"+s),new RegExp(s)]},x=function(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(/[^\w\s]/g,"\\$&"),"]")},n.d(t,{yU:function(){return Ge}}),a=n(91001),s=n(62193),c=n(2816),l=n(41981),u=n(658),f=n(64782),h=n(71008),d=n(35806),n(81027),n(13025),n(44124),n(39805),n(95737),n(79243),n(97741),n(89655),n(46469),n(18193),n(33231),n(97099),n(50693),n(26098),n(10507),n(39790),n(66457),n(66385),n(13448),n(36016),n(41442),n(64646),n(98185),n(7760),n(99019),n(29276),n(43037),n(20529),n(17001),n(33628),n(15129),n(253),n(5186),n(2075),n(94438),n(16891),n(37679),n(4525),n(96858),p=n(71070),m=n(11626),v=n(9283),!(g=i([v,m])).then){e.next=113;break}return e.next=109,g;case 109:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=114;break;case 113:e.t0=g;case 114:y=e.t0,v=y[0],m=y[1],b=function(){return(0,d.A)((function e(t,n,i,r){(0,h.A)(this,e),this.state=t,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}),[{key:"tokenBefore",value:function(e){for(var t=(0,v.mv)(this.state).resolveInner(this.pos,-1);t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}},{key:"matchBefore",value:function(e){var t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),i=t.text.slice(n-t.from,this.pos-t.from),r=i.search(S(e,!1));return r<0?null:{from:n+r,to:this.pos,text:i.slice(r)}}},{key:"aborted",get:function(){return null==this.abortListeners}},{key:"addEventListener",value:function(e,t,n){"abort"==e&&this.abortListeners&&(this.abortListeners.push(t),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}])}(),A=(0,d.A)((function e(t,n,i,r){(0,h.A)(this,e),this.completion=t,this.source=n,this.match=i,this.score=r})),M=p.YH.define(),I=new WeakMap,E=p.Pe.define(),F=p.Pe.define(),D=function(){return(0,d.A)((function e(t){(0,h.A)(this,e),this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(var n=0;n<t.length;){var i=(0,p.vS)(t,n),r=(0,p.Fh)(i);this.chars.push(i);var o=t.slice(n,n+r),a=o.toUpperCase();this.folded.push((0,p.vS)(a==o?o.toLowerCase():a,0)),n+=r}this.astral=t.length!=this.chars.length}),[{key:"ret",value:function(e,t){return this.score=e,this.matched=t,this}},{key:"match",value:function(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;var t=this.chars,n=this.folded,i=this.any,r=this.precise,o=this.byWord;if(1==t.length){var a=(0,p.vS)(e,0),s=(0,p.Fh)(a),c=s==e.length?0:-100;if(a==t[0]);else{if(a!=n[0])return null;c+=-200}return this.ret(c,[0,s])}var l=e.indexOf(this.pattern);if(0==l)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);var u=t.length,f=0;if(l<0){for(var h=0,d=Math.min(e.length,200);h<d&&f<u;){var m=(0,p.vS)(e,h);m!=t[f]&&m!=n[f]||(i[f++]=h),h+=(0,p.Fh)(m)}if(f<u)return null}for(var v=0,g=0,y=!1,b=0,x=-1,w=-1,k=/[a-z]/.test(e),A=!0,C=0,S=Math.min(e.length,200),M=0;C<S&&g<u;){var L=(0,p.vS)(e,C);l<0&&(v<u&&L==t[v]&&(r[v++]=C),b<u&&(L==t[b]||L==n[b]?(0==b&&(x=C),w=C+1,b++):b=0));var I=void 0,O=L<255?L>=48&&L<=57||L>=97&&L<=122?2:L>=65&&L<=90?1:0:(I=(0,p.MK)(L))!=I.toLowerCase()?1:I!=I.toUpperCase()?2:0;(!C||1==O&&k||0==M&&0!=O)&&(t[g]==L||n[g]==L&&(y=!0)?o[g++]=C:o.length&&(A=!1)),M=O,C+=(0,p.Fh)(L)}return g==u&&0==o[0]&&A?this.result((y?-200:0)-100,o,e):b==u&&0==x?this.ret(-200-e.length+(w==e.length?0:-100),[0,w]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):b==u?this.ret(-900-e.length,[x,w]):g==u?this.result((y?-200:0)-100-700+(A?0:-1100),o,e):2==t.length?null:this.result((i[0]?-700:0)-200-1100,i,e)}},{key:"result",value:function(e,t,n){var i,r=[],o=0,a=(0,f.A)(t);try{for(a.s();!(i=a.n()).done;){var s=i.value,c=s+(this.astral?(0,p.Fh)((0,p.vS)(n,s)):1);o&&r[o-1]==s?r[o-1]=c:(r[o++]=s,r[o++]=c)}}catch(l){a.e(l)}finally{a.f()}return this.ret(e-n.length,r)}}])}(),R=function(){return(0,d.A)((function e(t){(0,h.A)(this,e),this.pattern=t,this.matched=[],this.score=0,this.folded=t.toLowerCase()}),[{key:"match",value:function(e){if(e.length<this.pattern.length)return null;var t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return null==n?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}])}(),T=p.sj.define({combine:function(e){return(0,p.QR)(e,{activateOnTyping:!0,activateOnCompletion:function(){return!1},activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:function(){return""},optionClass:function(){return""},aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:q,filterStrict:!1,compareCompletions:function(e,t){return e.label.localeCompare(t.label)},interactionDelay:75,updateSyncTime:100},{defaultKeymap:function(e,t){return e&&t},closeOnBlur:function(e,t){return e&&t},icons:function(e,t){return e&&t},tooltipClass:function(e,t){return function(n){return P(e(n),t(n))}},optionClass:function(e,t){return function(n){return P(e(n),t(n))}},addToOptions:function(e,t){return e.concat(t)},filterStrict:function(e,t){return e||t}})}}),z=function(){return(0,d.A)((function e(t,n,i){var r=this;(0,h.A)(this,e),this.view=t,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:function(){return r.measureInfo()},write:function(e){return r.placeInfo(e)},key:this},this.space=null,this.currentClass="";var o=t.state.field(n),a=o.open,s=a.options,c=a.selected,l=t.state.facet(T);this.optionContent=W(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=N(s.length,c,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",(function(e){for(var i,o=t.state.field(n).open.options,a=e.target;a&&a!=r.dom;a=a.parentNode)if("LI"==a.nodeName&&(i=/-(\d+)$/.exec(a.id))&&+i[1]<o.length)return r.applyCompletion(t,o[+i[1]]),void e.preventDefault()})),this.dom.addEventListener("focusout",(function(e){var n=t.state.field(r.stateField,!1);n&&n.tooltip&&t.state.facet(T).closeOnBlur&&e.relatedTarget!=t.contentDOM&&t.dispatch({effects:F.of(null)})})),this.showOptions(s,o.id)}),[{key:"mount",value:function(){this.updateSel()}},{key:"showOptions",value:function(e,t){var n=this;this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",(function(){n.info&&n.view.requestMeasure(n.placeInfoReq)}))}},{key:"update",value:function(e){var t,n=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=i){var r=n.open,o=r.options,a=r.selected,s=r.disabled;i.open&&i.open.options==o||(this.range=N(o.length,a,e.state.facet(T).maxRenderedOptions),this.showOptions(o,n.id)),this.updateSel(),s!=(null===(t=i.open)||void 0===t?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}},{key:"updateTooltipClass",value:function(e){var t=this.tooltipClass(e);if(t!=this.currentClass){var n,i=(0,f.A)(this.currentClass.split(" "));try{for(i.s();!(n=i.n()).done;){var r=n.value;r&&this.dom.classList.remove(r)}}catch(c){i.e(c)}finally{i.f()}var o,a=(0,f.A)(t.split(" "));try{for(a.s();!(o=a.n()).done;){var s=o.value;s&&this.dom.classList.add(s)}}catch(c){a.e(c)}finally{a.f()}this.currentClass=t}}},{key:"positioned",value:function(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}},{key:"updateSel",value:function(){var e=this,t=this.view.state.field(this.stateField),n=t.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=N(n.options.length,n.selected,this.view.state.facet(T).maxRenderedOptions),this.showOptions(n.options,t.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();var i=n.options[n.selected].completion,r=i.info;if(!r)return;var o="string"==typeof r?document.createTextNode(r):r(i);if(!o)return;"then"in o?o.then((function(n){n&&e.view.state.field(e.stateField,!1)==t&&e.addInfoPane(n,i)})).catch((function(t){return(0,m.c_)(e.view.state,t,"completion info")})):this.addInfoPane(o,i)}}},{key:"addInfoPane",value:function(e,t){this.destroyInfo();var n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",null!=e.nodeType)n.appendChild(e),this.infoDestroy=null;else{var i=e.dom,r=e.destroy;n.appendChild(i),this.infoDestroy=r||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}},{key:"updateSelectedOption",value:function(e){for(var t=null,n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)"LI"==n.nodeName&&n.id?i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected"):i--;return t&&B(this.list,t),t}},{key:"measureInfo",value:function(){var e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;var t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),r=this.space;if(!r){var o=this.dom.ownerDocument.defaultView||window;r={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(r.bottom,t.bottom)-10||i.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(T).positionInfo(this.view,t,i,n,r,this.dom)}},{key:"placeInfo",value:function(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}},{key:"createListBox",value:function(e,t,n){var i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));for(var r=null,o=n.from;o<n.to;o++){var a=e[o],s=a.completion,c=a.match,l=s.section;if(l){var u="string"==typeof l?l:l.name;if(u!=r&&(o>n.from||0==n.from))if(r=u,"string"!=typeof l&&l.header)i.appendChild(l.header(l));else i.appendChild(document.createElement("completion-section")).textContent=u}var h=i.appendChild(document.createElement("li"));h.id=t+"-"+o,h.setAttribute("role","option");var d=this.optionClass(s);d&&(h.className=d);var p,m=(0,f.A)(this.optionContent);try{for(m.s();!(p=m.n()).done;){var v=(0,p.value)(s,this.view.state,this.view,c);v&&h.appendChild(v)}}catch(g){m.e(g)}finally{m.f()}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}},{key:"destroyInfo",value:function(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}},{key:"destroy",value:function(){this.destroyInfo()}}])}(),$=function(){function e(t,n,i,r,o,a){(0,h.A)(this,e),this.options=t,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=o,this.disabled=a}return(0,d.A)(e,[{key:"setSelected",value:function(t,n){return t==this.selected||t>=this.options.length?this:new e(this.options,V(n,t),this.tooltip,this.timestamp,t,this.disabled)}},{key:"map",value:function(t){return new e(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}],[{key:"build",value:function(t,n,i,r,o){var a=Z(t,n);if(!a.length)return r&&t.some((function(e){return 1==e.state}))?new e(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;var s=n.facet(T).selectOnOpen?0:-1;if(r&&r.selected!=s&&-1!=r.selected)for(var c=r.options[r.selected].completion,l=0;l<a.length;l++)if(a[l].completion==c){s=l;break}return new e(a,V(i,s),{pos:t.reduce((function(e,t){return t.hasResult()?Math.min(e,t.from):e}),1e8),create:oe,above:o.aboveCursor},r?r.timestamp:Date.now(),s,!1)}}])}(),_=function(){function e(t,n,i){(0,h.A)(this,e),this.active=t,this.id=n,this.open=i}return(0,d.A)(e,[{key:"update",value:function(t){var n=this,i=t.state,r=i.facet(T),o=(r.override||i.languageDataAt("autocomplete",C(i)).map(O)).map((function(e){return(n.active.find((function(t){return t.source==e}))||new Y(e,n.active.some((function(e){return 0!=e.state}))?1:0)).update(t,r)}));o.length==this.active.length&&o.every((function(e,t){return e==n.active[t]}))&&(o=this.active);var a=this.open;a&&t.docChanged&&(a=a.map(t.changes)),t.selection||o.some((function(e){return e.hasResult()&&t.changes.touchesRange(e.from,e.to)}))||!H(o,this.active)?a=$.build(o,i,this.id,a,r):a&&a.disabled&&!o.some((function(e){return 1==e.state}))&&(a=null),!a&&o.every((function(e){return 1!=e.state}))&&o.some((function(e){return e.hasResult()}))&&(o=o.map((function(e){return e.hasResult()?new Y(e.source,0):e})));var s,c=(0,f.A)(t.effects);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.is(ne)&&(a=a&&a.setSelected(l.value,this.id))}}catch(u){c.e(u)}finally{c.f()}return o==this.active&&a==this.open?this:new e(o,this.id,a)}},{key:"tooltip",get:function(){return this.open?this.open.tooltip:null}},{key:"attrs",get:function(){return this.open?this.open.attrs:this.active.length?K:J}}],[{key:"start",value:function(){return new e(Q,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}}])}(),K={"aria-autocomplete":"list"},J={},Q=[],Y=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;(0,h.A)(this,e),this.source=t,this.state=n,this.explicitPos=i}return(0,d.A)(e,[{key:"hasResult",value:function(){return!1}},{key:"update",value:function(t,n){var i=X(t,n),r=this;(8&i||16&i&&this.touches(t))&&(r=new e(r.source,0)),4&i&&0==r.state&&(r=new e(this.source,1)),r=r.updateFor(t,i);var o,a=(0,f.A)(t.effects);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.is(E))r=new e(r.source,1,s.value?C(t.state):-1);else if(s.is(F))r=new e(r.source,0);else if(s.is(te)){var c,l=(0,f.A)(s.value);try{for(l.s();!(c=l.n()).done;){var u=c.value;u.source==r.source&&(r=u)}}catch(h){l.e(h)}finally{l.f()}}}}catch(h){a.e(h)}finally{a.f()}return r}},{key:"updateFor",value:function(e,t){return this.map(e.changes)}},{key:"map",value:function(t){return t.empty||this.explicitPos<0?this:new e(this.source,this.state,t.mapPos(this.explicitPos))}},{key:"touches",value:function(e){return e.changes.touchesRange(C(e.state))}}])}(),G=function(e){function t(e,n,i,r,o){var a;return(0,h.A)(this,t),(a=(0,s.A)(this,t,[e,2,n])).result=i,a.from=r,a.to=o,a}return(0,c.A)(t,e),(0,d.A)(t,[{key:"hasResult",value:function(){return!0}},{key:"updateFor",value:function(e,n){var i;if(!(3&n))return this.map(e.changes);var r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));var o=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),s=C(e.state);if((this.explicitPos<0?s<=o:s<this.from)||s>a||!r||2&n&&C(e.startState)==this.from)return new Y(this.source,4&n?1:0);var c=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return ee(r.validFor,e.state,o,a)?new t(this.source,c,r,o,a):r.update&&(r=r.update(r,o,a,new b(e.state,s,c>=0)))?new t(this.source,c,r,r.from,null!==(i=r.to)&&void 0!==i?i:C(e.state)):new Y(this.source,1,c)}},{key:"map",value:function(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new t(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Y(this.source,0)}},{key:"touches",value:function(e){return e.changes.touchesRange(this.from,this.to)}}])}(Y),te=p.Pe.define({map:function(e,t){return e.map((function(e){return e.map(t)}))}}),ne=p.Pe.define(),oe=j(ie=p.sU.define({create:function(){return _.start()},update:function(e,t){return e.update(t)},provide:function(e){return[m.DK.from(e,(function(e){return e.tooltip})),m.Lz.contentAttributes.from(e,(function(e){return e.attrs}))]}}),re),se=function(e){var t=e.state.field(ie,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(T).interactionDelay)&&re(e,t.open.options[t.open.selected])},ce=function(e){return!!e.state.field(ie,!1)&&(e.dispatch({effects:E.of(!0)}),!0)},le=function(e){var t=e.state.field(ie,!1);return!(!t||!t.active.some((function(e){return 0!=e.state})))&&(e.dispatch({effects:F.of(null)}),!0)},ue=(0,d.A)((function e(t,n){(0,h.A)(this,e),this.active=t,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0})),fe=m.Z9.fromClass(function(){return(0,d.A)((function e(t){(0,h.A)(this,e),this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;var n,i=(0,f.A)(t.state.field(ie).active);try{for(i.s();!(n=i.n()).done;){var r=n.value;1==r.state&&this.startQuery(r)}}catch(o){i.e(o)}finally{i.f()}}),[{key:"update",value:function(e){var t=this,n=e.state.field(ie),i=e.state.facet(T);if(e.selectionSet||e.docChanged||e.startState.field(ie)!=n){for(var r=e.transactions.some((function(e){var t=X(e,i);return 8&t||(e.selection||e.docChanged)&&!(3&t)})),o=0;o<this.running.length;o++){var a=this.running[o];if(r||a.context.abortOnDocChange&&e.docChanged||a.updates.length+e.transactions.length>50&&Date.now()-a.time>1e3){var s,c=(0,f.A)(a.context.abortListeners);try{for(c.s();!(s=c.n()).done;){var u=s.value;try{u()}catch(y){(0,m.c_)(this.view.state,y)}}}catch(b){c.e(b)}finally{c.f()}a.context.abortListeners=null,this.running.splice(o--,1)}else{var h;(h=a.updates).push.apply(h,(0,l.A)(e.transactions))}}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some((function(e){return e.effects.some((function(e){return e.is(E)}))}))&&(this.pendingStart=!0);var d=this.pendingStart?50:i.activateOnTypingDelay;if(this.debounceUpdate=n.active.some((function(e){return 1==e.state&&!t.running.some((function(t){return t.active.source==e.source}))}))?setTimeout((function(){return t.startUpdate()}),d):-1,0!=this.composing){var p,v=(0,f.A)(e.transactions);try{for(v.s();!(p=v.n()).done;){var g=p.value;g.isUserEvent("input.type")?this.composing=2:2==this.composing&&g.selection&&(this.composing=3)}}catch(b){v.e(b)}finally{v.f()}}}}},{key:"startUpdate",value:function(){var e=this;this.debounceUpdate=-1,this.pendingStart=!1;var t,n=this.view.state.field(ie),i=(0,f.A)(n.active);try{var r=function(){var n=t.value;1!=n.state||e.running.some((function(e){return e.active.source==n.source}))||e.startQuery(n)};for(i.s();!(t=i.n()).done;)r()}catch(o){i.e(o)}finally{i.f()}}},{key:"startQuery",value:function(e){var t=this,n=this.view.state,i=C(n),r=new b(n,i,e.explicitPos==i,this.view),o=new ue(e,r);this.running.push(o),Promise.resolve(e.source(r)).then((function(e){o.context.aborted||(o.done=e||null,t.scheduleAccept())}),(function(e){t.view.dispatch({effects:F.of(null)}),(0,m.c_)(t.view.state,e)}))}},{key:"scheduleAccept",value:function(){var e=this;this.running.every((function(e){return void 0!==e.done}))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((function(){return e.accept()}),this.view.state.facet(T).updateSyncTime))}},{key:"accept",value:function(){var e,t=this;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;for(var n=[],i=this.view.state.facet(T),r=function(r){var a=t.running[r];if(void 0===a.done)return o=r,0;if(t.running.splice(r--,1),a.done){var s,c=new G(a.active.source,a.active.explicitPos,a.done,a.done.from,null!==(e=a.done.to)&&void 0!==e?e:C(a.updates.length?a.updates[0].startState:t.view.state)),l=(0,f.A)(a.updates);try{for(l.s();!(s=l.n()).done;){var u=s.value;c=c.update(u,i)}}catch(g){l.e(g)}finally{l.f()}if(c.hasResult())return n.push(c),o=r,0}var h=t.view.state.field(ie).active.find((function(e){return e.source==a.active.source}));if(h&&1==h.state)if(null==a.done){var d,p=new Y(a.active.source,0),m=(0,f.A)(a.updates);try{for(m.s();!(d=m.n()).done;){var v=d.value;p=p.update(v,i)}}catch(g){m.e(g)}finally{m.f()}1!=p.state&&n.push(p)}else t.startQuery(h);o=r},o=0;o<this.running.length;o++)r(o);n.length&&this.view.dispatch({effects:te.of(n)})}}])}(),{eventHandlers:{blur:function(e){var t=this,n=this.view.state.field(ie,!1);if(n&&n.tooltip&&this.view.state.facet(T).closeOnBlur){var i=n.open&&(0,m.Eg)(this.view,n.open.tooltip);i&&i.dom.contains(e.relatedTarget)||setTimeout((function(){return t.view.dispatch({effects:F.of(null)})}),10)}},compositionstart:function(){this.composing=1},compositionend:function(){var e=this;3==this.composing&&setTimeout((function(){return e.view.dispatch({effects:E.of(!1)})}),20),this.composing=0}}}),he="object"==("undefined"==typeof navigator?"undefined":(0,a.A)(navigator))&&/Win/.test(navigator.platform),de=p.Nb.highest(m.Lz.domEventHandlers({keydown:function(e,t){var n=t.state.field(ie,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||e.key.length>1||e.ctrlKey&&(!he||!e.altKey)||e.metaKey)return!1;var i=n.open.options[n.open.selected],r=n.active.find((function(e){return e.source==i.source})),o=i.completion.commitCharacters||r.result.commitCharacters;return o&&o.indexOf(e.key)>-1&&re(t,i),!1}})),pe=m.Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"".concat(400,"px"),boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"".concat(30,"px")},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"".concat(30,"px")},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),me=null,ve=m.NZ.widget({widget:new(function(e){function t(){return(0,h.A)(this,t),(0,s.A)(this,t,arguments)}return(0,c.A)(t,e),(0,d.A)(t,[{key:"toDOM",value:function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}},{key:"ignoreEvent",value:function(){return!1}}])}(m.xO))}),ge=m.NZ.mark({class:"cm-snippetField"}),ye=function(){function e(t,n){(0,h.A)(this,e),this.ranges=t,this.active=n,this.deco=m.NZ.set(t.map((function(e){return(e.from==e.to?ve:ge).range(e.from,e.to)})))}return(0,d.A)(e,[{key:"map",value:function(t){var n,i=[],r=(0,f.A)(this.ranges);try{for(r.s();!(n=r.n()).done;){var o=n.value.map(t);if(!o)return null;i.push(o)}}catch(a){r.e(a)}finally{r.f()}return new e(i,this.active)}},{key:"selectionInsideField",value:function(e){var t=this;return e.ranges.every((function(e){return t.ranges.some((function(n){return n.field==t.active&&n.from<=e.from&&n.to>=e.to}))}))}}])}(),be=p.Pe.define({map:function(e,t){return e&&e.map(t)}}),xe=p.Pe.define(),we=p.sU.define({create:function(){return null},update:function(e,t){var n,i=(0,f.A)(t.effects);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.is(be))return r.value;if(r.is(xe)&&e)return new ye(e.ranges,r.value)}}catch(o){i.e(o)}finally{i.f()}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:function(e){return m.Lz.decorations.from(e,(function(e){return e?e.deco:m.NZ.none}))}}),Se=function(e){var t=e.state,n=e.dispatch;return!!t.field(we,!1)&&(n(t.update({effects:be.of(null)})),!0)},Me=[{key:"Tab",run:Ce(1),shift:Ce(-1)},{key:"Escape",run:Se}],Le=p.sj.define({combine:function(e){return e.length?e[0]:Me}}),Ie=p.Nb.highest(m.w4.compute([Le],(function(e){return e.facet(Le)}))),Oe=m.Lz.domEventHandlers({mousedown:function(e,t){var n,i=t.state.field(we,!1);if(!i||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var r=i.ranges.find((function(e){return e.from<=n&&e.to>=n}));return!(!r||r.field==i.active)&&(t.dispatch({selection:ke(i.ranges,r.field),effects:be.of(i.ranges.some((function(e){return e.field>r.field}))?new ye(i.ranges,r.field):null),scrollIntoView:!0}),!0)}}),De=null,qe={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},We=p.Pe.define({map:function(e,t){var n=t.mapPos(e,-1,p.iR.TrackAfter);return null==n?void 0:n}}),Ne=new(function(e){function t(){return(0,h.A)(this,t),(0,s.A)(this,t,arguments)}return(0,c.A)(t,e),(0,d.A)(t)}(p.FB)),Ne.startSide=1,Ne.endSide=-1,ze=p.sU.define({create:function(){return p.om.empty},update:function(e,t){if(e=e.map(t.changes),t.selection){var n=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:function(e){return e>=n.from&&e<=n.to}})}var i,r=(0,f.A)(t.effects);try{for(r.s();!(i=r.n()).done;){var o=i.value;o.is(We)&&(e=e.update({add:[Ne.range(o.value,o.value+1)]}))}}catch(a){r.e(a)}finally{r.f()}return e}}),je="()[]{}<>","object"==("undefined"==typeof navigator?"undefined":(0,a.A)(navigator))&&/Android\b/.test(navigator.userAgent),Ze=null,et=[{key:"Ctrl-Space",run:ce},{key:"Escape",run:le},{key:"ArrowDown",run:ae(!0)},{key:"ArrowUp",run:ae(!1)},{key:"PageDown",run:ae(!0,"page")},{key:"PageUp",run:ae(!1,"page")},{key:"Enter",run:se}],tt=p.Nb.highest(m.w4.computeN([T],(function(e){return e.facet(T).defaultKeymap?[et]:[]}))),nt=new WeakMap,o(),e.next=185;break;case 182:e.prev=182,e.t2=e.catch(0),o(e.t2);case 185:case"end":return e.stop()}}),e,null,[[0,182]])})));return function(t,n){return e.apply(this,arguments)}}())},12764:function(e,t,n){n.d(t,{n:function(){return l}});n(79243),n(66385),n(13448),n(36016),n(64646),n(7760),n(29276);var i=["and","as","block","endblock","by","cycle","debug","else","elif","extends","filter","endfilter","firstof","do","for","endfor","if","endif","ifchanged","endifchanged","ifequal","endifequal","ifnotequal","set","raw","endraw","endifnotequal","in","include","load","not","now","or","parsed","regroup","reversed","spaceless","call","endcall","macro","endmacro","endspaceless","ssi","templatetag","openblock","closeblock","openvariable","closevariable","without","context","openbrace","closebrace","opencomment","closecomment","widthratio","url","with","endwith","get_current_language","trans","endtrans","noop","blocktrans","endblocktrans","get_available_languages","get_current_language_bidi","pluralize","autoescape","endautoescape"],r=/^[+\-*&%=<>!?|~^]/,o=/^[:\[\(\{]/,a=["true","false"],s=/^(\d[+\-\*\/])?\d+(\.\d+)?/;function c(e,t){var n=e.peek();if(t.incomment)return e.skipTo("#}")?(e.eatWhile(/\#|}/),t.incomment=!1):e.skipToEnd(),"comment";if(t.intag){if(t.operator){if(t.operator=!1,e.match(a))return"atom";if(e.match(s))return"number"}if(t.sign){if(t.sign=!1,e.match(a))return"atom";if(e.match(s))return"number"}if(t.instring)return n==t.instring&&(t.instring=!1),e.next(),"string";if("'"==n||'"'==n)return t.instring=n,e.next(),"string";if(t.inbraces>0&&")"==n)e.next(),t.inbraces--;else if("("==n)e.next(),t.inbraces++;else if(t.inbrackets>0&&"]"==n)e.next(),t.inbrackets--;else if("["==n)e.next(),t.inbrackets++;else{if(!t.lineTag&&(e.match(t.intag+"}")||e.eat("-")&&e.match(t.intag+"}")))return t.intag=!1,"tag";if(e.match(r))return t.operator=!0,"operator";if(e.match(o))t.sign=!0;else{if(1==e.column()&&t.lineTag&&e.match(i))return"keyword";if(e.eat(" ")||e.sol()){if(e.match(i))return"keyword";if(e.match(a))return"atom";if(e.match(s))return"number";e.sol()&&e.next()}else e.next()}}return"variable"}if(e.eat("{")){if(e.eat("#"))return t.incomment=!0,e.skipTo("#}")?(e.eatWhile(/\#|}/),t.incomment=!1):e.skipToEnd(),"comment";if(n=e.eat(/\{|%/))return t.intag=n,t.inbraces=0,t.inbrackets=0,"{"==n&&(t.intag="}"),e.eat("-"),"tag"}else if(e.eat("#")){if("#"==e.peek())return e.skipToEnd(),"comment";if(!e.eol())return t.intag=!0,t.lineTag=!0,t.inbraces=0,t.inbrackets=0,"tag"}e.next()}i=new RegExp("(("+i.join(")|(")+"))\\b"),a=new RegExp("(("+a.join(")|(")+"))\\b");var l={name:"jinja2",startState:function(){return{tokenize:c,inbrackets:0,inbraces:0}},token:function(e,t){var n=t.tokenize(e,t);return e.eol()&&t.lineTag&&!t.instring&&0==t.inbraces&&0==t.inbrackets&&(t.intag=!1,t.lineTag=!1),n},languageData:{commentTokens:{block:{open:"{#",close:"#}",line:"##"}}}}},68297:function(e,t,n){n.d(t,{o:function(){return r}});n(79243),n(66385),n(13448),n(36016),n(64646),n(98185),n(7760),n(29276);var i=new RegExp("\\b(("+["true","false","on","off","yes","no"].join(")|(")+"))$","i"),r={name:"yaml",token:function(e,t){var n=e.peek(),r=t.escaped;if(t.escaped=!1,"#"==n&&(0==e.pos||/\s/.test(e.string.charAt(e.pos-1))))return e.skipToEnd(),"comment";if(e.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(t.literal&&e.indentation()>t.keyCol)return e.skipToEnd(),"string";if(t.literal&&(t.literal=!1),e.sol()){if(t.keyCol=0,t.pair=!1,t.pairStart=!1,e.match("---"))return"def";if(e.match("..."))return"def";if(e.match(/^\s*-\s+/))return"meta"}if(e.match(/^(\{|\}|\[|\])/))return"{"==n?t.inlinePairs++:"}"==n?t.inlinePairs--:"["==n?t.inlineList++:t.inlineList--,"meta";if(t.inlineList>0&&!r&&","==n)return e.next(),"meta";if(t.inlinePairs>0&&!r&&","==n)return t.keyCol=0,t.pair=!1,t.pairStart=!1,e.next(),"meta";if(t.pairStart){if(e.match(/^\s*(\||\>)\s*/))return t.literal=!0,"meta";if(e.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable";if(0==t.inlinePairs&&e.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(t.inlinePairs>0&&e.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(e.match(i))return"keyword"}return!t.pair&&e.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(t.pair=!0,t.keyCol=e.indentation(),"atom"):t.pair&&e.match(/^:\s*/)?(t.pairStart=!0,"meta"):(t.pairStart=!1,t.escaped="\\"==n,e.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},languageData:{commentTokens:{line:"#"}}}},42661:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(i,o){var a,s,c,l,u,f,h,d,p,m,v,g,y,b,x,w,k,A,C,S,M,L,I,O,E,F,D,R,T,P,q,W,N,z,j,B,U,Z,$,_,H,K,J,V,Q,X,Y,G,ee,te,ne,ie,re,oe,ae,se,ce,le,ue,fe,he,de,pe,me,ve,ge,ye,be,xe,we,ke,Ae,Ce,Se,Me,Le,Ie;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Me=function(e,t){var n=t.from,i=t.to,r=e.state.doc.lineAt(n),o=e.state.doc.lineAt(i).to,a=Math.max(r.from,n-Ce),s=Math.min(o,i+Ce),c=e.state.sliceDoc(a,s);if(a!=r.from)for(var l=0;l<Ce;l++)if(!Se.test(c[l+1])&&Se.test(c[l])){c=c.slice(l);break}if(s!=o)for(var u=c.length-1;u>c.length-Ce;u--)if(!Se.test(c[u-1])&&Se.test(c[u])){c=c.slice(0,u);break}return d.Lz.announce.of("".concat(e.state.phrase("current match"),". ").concat(c," ").concat(e.state.phrase("on line")," ").concat(r.number,"."))},Ae=function(e,t){return e.state.phrase(t)},ye=function(e){var t=ge(e);t&&t==e.root.activeElement&&t.select()},ge=function(e){var t=(0,d.ld)(e,me);return t&&t.dom.querySelector("[main-field]")},ve=function(e,t){var n,i,r,o,a,s=e.selection.main,c=s.empty||s.to>s.from+100?"":e.sliceDoc(s.from,s.to);if(t&&!c)return t;var l=e.facet($);return new _({search:(null!==(n=null==t?void 0:t.literal)&&void 0!==n?n:l.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:null!==(i=null==t?void 0:t.caseSensitive)&&void 0!==i?i:l.caseSensitive,literal:null!==(r=null==t?void 0:t.literal)&&void 0!==r?r:l.literal,regexp:null!==(o=null==t?void 0:t.regexp)&&void 0!==o?o:l.regexp,wholeWord:null!==(a=null==t?void 0:t.wholeWord)&&void 0!==a?a:l.wholeWord})},me=function(e){return e.state.facet($).createPanel(e)},ce=function(e){return function(t){var n=t.state.field(ie,!1);return n&&n.query.spec.valid?e(t,n):be(t)}},G=function(e){return function(t,n,i){return!i[0].length||(e(X(i.input,i.index))!=p.Je.Word||e(Y(i.input,i.index))!=p.Je.Word)&&(e(Y(i.input,i.index+i[0].length))!=p.Je.Word||e(X(i.input,i.index+i[0].length))!=p.Je.Word)}},Y=function(e,t){return e.slice(t,(0,p.zK)(e,t))},X=function(e,t){return e.slice((0,p.zK)(e,t,!1),t)},Q=function(e,t,n,i){return new w(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?G(t.charCategorizer(t.selection.main.head)):void 0},n,i)},J=function(e,t){return function(n,i,r,o){return(o>n||o+r.length<i)&&(o=Math.max(0,n-2),r=e.sliceString(o,Math.min(e.length,i+2))),!(t(X(r,n-o))==p.Je.Word&&t(Y(r,n-o))==p.Je.Word||t(Y(r,i-o))==p.Je.Word&&t(X(r,i-o))==p.Je.Word)}},K=function(e,t,n,i){return new y(t.doc,e.unquoted,n,i,e.caseSensitive?void 0:function(e){return e.toLowerCase()},e.wholeWord?J(t.doc,t.charCategorizer(t.selection.main.head)):void 0)},U=function(e,t){for(var n,i=e.selection,r=i.main,o=i.ranges,a=e.wordAt(r.head),s=a&&a.from==r.from&&a.to==r.to,c=function(n,i){if(i.next(),!i.done){if(n&&o.some((function(e){return e.from==i.value.from})))return l=n,u=i,0;if(s){var r=e.wordAt(i.value.from);if(!r||r.from!=i.value.from||r.to!=i.value.to)return l=n,u=i,0}return{v:i.value}}if(n)return{v:null};i=new y(e.doc,t,0,Math.max(0,o[o.length-1].from-1)),l=n=!0,u=i},l=!1,u=new y(e.doc,t,o[o.length-1].to);;)if(0!==(n=c(l,u))&&n)return n.v},N=function(e,t,n,i){return e(t.sliceDoc(n,n+1))==p.Je.Word&&e(t.sliceDoc(i-1,i))==p.Je.Word},W=function(e,t,n,i){return!(0!=n&&e(t.sliceDoc(n-1,n))==p.Je.Word||i!=t.doc.length&&e(t.sliceDoc(i,i+1))==p.Je.Word)},T=function(e){var t=[j,z];return e&&t.push(R.of(e)),t},L=function(e){var t=String(e.state.doc.lineAt(e.state.selection.main.head).number),n=(0,m.A)("input",{class:"cm-textfield",name:"line",value:t});function i(){var t=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(t){var i=e.state,r=i.doc.lineAt(i.selection.main.head),o=(0,u.A)(t,5),a=o[1],s=o[2],c=o[3],l=o[4],f=c?+c.slice(1):0,h=s?+s:r.number;if(s&&l){var m=h/100;a&&(m=m*("-"==a?-1:1)+r.number/i.doc.lines),h=Math.round(i.doc.lines*m)}else s&&a&&(h=h*("-"==a?-1:1)+r.number);var v=i.doc.line(Math.max(1,Math.min(i.doc.lines,h))),g=p.OF.cursor(v.from+Math.max(0,Math.min(f,v.length)));e.dispatch({effects:[I.of(!1),d.Lz.scrollIntoView(g.from,{y:"center"})],selection:g}),e.focus()}}return{dom:(0,m.A)("form",{class:"cm-gotoLine",onkeydown:function(t){27==t.keyCode?(t.preventDefault(),e.dispatch({effects:I.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),i())},onsubmit:function(e){e.preventDefault(),i()}},(0,m.A)("label",e.state.phrase("Go to line"),": ",n)," ",(0,m.A)("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}},M=function(e,t){if(t>=e.length)return t;for(var n,i=e.lineAt(t);t<i.to&&(n=i.text.charCodeAt(t-i.from))>=56320&&n<57344;)t++;return t},S=function(e){try{return new RegExp(e,x),!0}catch(t){return!1}},n.d(t,{Eo:function(){return we},gN:function(){return T}}),a=n(41981),s=n(62193),c=n(2816),l=n(64782),u=n(658),f=n(71008),h=n(35806),n(42942),n(48062),n(67336),n(81027),n(34456),n(95737),n(97741),n(89655),n(18193),n(97099),n(32179),n(39790),n(66385),n(13448),n(36016),n(64646),n(98185),n(7760),n(99019),n(29276),n(58750),n(43037),n(20529),n(15129),n(253),n(16891),n(4525),n(96858),d=n(11626),p=n(71070),m=n(20714),!(v=i([d])).then){e.next=71;break}return e.next=67,v;case 67:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=72;break;case 71:e.t0=v;case 72:d=e.t0[0],g="function"==typeof String.prototype.normalize?function(e){return e.normalize("NFKD")}:function(e){return e},y=function(){return(0,h.A)((function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;(0,f.A)(this,e),this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(i,r),this.bufferStart=i,this.normalize=o?function(e){return o(g(e))}:g,this.query=this.normalize(n)}),[{key:"peek",value:function(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return(0,p.vS)(this.buffer,this.bufferPos)}},{key:"next",value:function(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}},{key:"nextOverlapping",value:function(){for(;;){var e=this.peek();if(e<0)return this.done=!0,this;var t=(0,p.MK)(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=(0,p.Fh)(e);for(var i=this.normalize(t),r=0,o=n;;r++){var a=i.charCodeAt(r),s=this.match(a,o,this.bufferPos+this.bufferStart);if(r==i.length-1){if(s)return this.value=s,this;break}o==n&&r<t.length&&t.charCodeAt(r)==a&&o++}}}},{key:"match",value:function(e,t,n){for(var i=null,r=0;r<this.matches.length;r+=2){var o=this.matches[r],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[r+1],to:n}:(this.matches[r]++,a=!0)),a||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?i={from:t,to:n}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}])}(),"undefined"!=typeof Symbol&&(y.prototype[Symbol.iterator]=function(){return this}),b={from:-1,to:-1,match:/.*/.exec("")},x="gm"+(null==/x/.unicode?"":"u"),w=function(){return(0,h.A)((function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.length;if((0,f.A)(this,e),this.text=t,this.to=o,this.curLine="",this.done=!1,this.value=b,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new C(t,n,i,r,o);this.re=new RegExp(n,x+((null==i?void 0:i.ignoreCase)?"i":"")),this.test=null==i?void 0:i.test,this.iter=t.iter();var a=t.lineAt(r);this.curLineStart=a.from,this.matchPos=M(t,r),this.getLine(this.curLineStart)}),[{key:"getLine",value:function(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}},{key:"nextLine",value:function(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}},{key:"next",value:function(){for(var e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;var t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){var n=this.curLineStart+t.index,i=n+t[0].length;if(this.matchPos=M(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}])}(),k=new WeakMap,A=function(){function e(t,n){(0,f.A)(this,e),this.from=t,this.text=n}return(0,h.A)(e,[{key:"to",get:function(){return this.from+this.text.length}}],[{key:"get",value:function(t,n,i){var r=k.get(t);if(!r||r.from>=i||r.to<=n){var o=new e(n,t.sliceString(n,i));return k.set(t,o),o}if(r.from==n&&r.to==i)return r;var a=r.text,s=r.from;return s>n&&(a=t.sliceString(n,s)+a,s=n),r.to<i&&(a+=t.sliceString(r.to,i)),k.set(t,new e(s,a)),new e(n,a.slice(n-s,i-s))}}])}(),C=function(){return(0,h.A)((function e(t,n,i,r,o){(0,f.A)(this,e),this.text=t,this.to=o,this.done=!1,this.value=b,this.matchPos=M(t,r),this.re=new RegExp(n,x+((null==i?void 0:i.ignoreCase)?"i":"")),this.test=null==i?void 0:i.test,this.flat=A.get(t,r,this.chunkEnd(r+5e3))}),[{key:"chunkEnd",value:function(e){return e>=this.to?this.to:this.text.lineAt(e).to}},{key:"next",value:function(){for(;;){var e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){var n=this.flat.from+t.index,i=n+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this.matchPos=M(this.text,i+(n==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=A.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}])}(),"undefined"!=typeof Symbol&&(w.prototype[Symbol.iterator]=C.prototype[Symbol.iterator]=function(){return this}),I=p.Pe.define(),O=p.sU.define({create:function(){return!0},update:function(e,t){var n,i=(0,l.A)(t.effects);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.is(I)&&(e=r.value)}}catch(o){i.e(o)}finally{i.f()}return e},provide:function(e){return d.S7.from(e,(function(e){return e?L:null}))}}),E=function(e){var t=(0,d.ld)(e,L);if(!t){var n=[I.of(!0)];null==e.state.field(O,!1)&&n.push(p.Pe.appendConfig.of([O,F])),e.dispatch({effects:n}),t=(0,d.ld)(e,L)}return t&&t.dom.querySelector("input").select(),!0},F=d.Lz.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),D={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},R=p.sj.define({combine:function(e){return(0,p.QR)(e,D,{highlightWordAroundCursor:function(e,t){return e||t},minSelectionLength:Math.min,maxMatches:Math.min})}}),P=d.NZ.mark({class:"cm-selectionMatch"}),q=d.NZ.mark({class:"cm-selectionMatch cm-selectionMatch-main"}),z=d.Z9.fromClass(function(){return(0,h.A)((function e(t){(0,f.A)(this,e),this.decorations=this.getDeco(t)}),[{key:"update",value:function(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}},{key:"getDeco",value:function(e){var t=e.state.facet(R),n=e.state,i=n.selection;if(i.ranges.length>1)return d.NZ.none;var r,o=i.main,a=null;if(o.empty){if(!t.highlightWordAroundCursor)return d.NZ.none;var s=n.wordAt(o.head);if(!s)return d.NZ.none;a=n.charCategorizer(o.head),r=n.sliceDoc(s.from,s.to)}else{var c=o.to-o.from;if(c<t.minSelectionLength||c>200)return d.NZ.none;if(t.wholeWords){if(r=n.sliceDoc(o.from,o.to),a=n.charCategorizer(o.head),!W(a,n,o.from,o.to)||!N(a,n,o.from,o.to))return d.NZ.none}else if(!(r=n.sliceDoc(o.from,o.to)))return d.NZ.none}var u,f=[],h=(0,l.A)(e.visibleRanges);try{for(h.s();!(u=h.n()).done;)for(var p=u.value,m=new y(n.doc,r,p.from,p.to);!m.next().done;){var v=m.value,g=v.from,b=v.to;if((!a||W(a,n,g,b))&&(o.empty&&g<=o.from&&b>=o.to?f.push(q.range(g,b)):(g>=o.to||b<=o.from)&&f.push(P.range(g,b)),f.length>t.maxMatches))return d.NZ.none}}catch(x){h.e(x)}finally{h.f()}return d.NZ.set(f)}}])}(),{decorations:function(e){return e.decorations}}),j=d.Lz.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),B=function(e){var t=e.state,n=e.dispatch,i=t.selection,r=p.OF.create(i.ranges.map((function(e){return t.wordAt(e.head)||p.OF.cursor(e.head)})),i.mainIndex);return!r.eq(i)&&(n(t.update({selection:r})),!0)},Z=function(e){var t=e.state,n=e.dispatch,i=t.selection.ranges;if(i.some((function(e){return e.from===e.to})))return B({state:t,dispatch:n});var r=t.sliceDoc(i[0].from,i[0].to);if(t.selection.ranges.some((function(e){return t.sliceDoc(e.from,e.to)!=r})))return!1;var o=U(t,r);return!!o&&(n(t.update({selection:t.selection.addRange(p.OF.range(o.from,o.to),!1),effects:d.Lz.scrollIntoView(o.to)})),!0)},$=p.sj.define({combine:function(e){return(0,p.QR)(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:function(e){return new ke(e)},scrollToMatch:function(e){return d.Lz.scrollIntoView(e)}})}}),_=function(){return(0,h.A)((function e(t){(0,f.A)(this,e),this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||S(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}),[{key:"unquote",value:function(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(function(e,t){return"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"}))}},{key:"eq",value:function(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}},{key:"create",value:function(){return this.regexp?new ee(this):new V(this)}},{key:"getCursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=e.doc?e:p.$t.create({doc:e});return null==n&&(n=i.doc.length),this.regexp?Q(this,i,t,n):K(this,i,t,n)}}])}(),V=function(e){function t(e){return(0,f.A)(this,t),(0,s.A)(this,t,[e])}return(0,c.A)(t,e),(0,h.A)(t,[{key:"nextMatch",value:function(e,t,n){var i=K(this.spec,e,n,e.doc.length).nextOverlapping();return i.done&&(i=K(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}},{key:"prevMatchInRange",value:function(e,t,n){for(var i=n;;){for(var r=Math.max(t,i-1e4-this.spec.unquoted.length),o=K(this.spec,e,r,i),a=null;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(r==t)return null;i-=1e4}}},{key:"prevMatch",value:function(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}},{key:"getReplacement",value:function(e){return this.spec.unquote(this.spec.replace)}},{key:"matchAll",value:function(e,t){for(var n=K(this.spec,e,0,e.doc.length),i=[];!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}},{key:"highlight",value:function(e,t,n,i){for(var r=K(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));!r.next().done;)i(r.value.from,r.value.to)}}])}(H=(0,h.A)((function e(t){(0,f.A)(this,e),this.spec=t}))),ee=function(e){function t(){return(0,f.A)(this,t),(0,s.A)(this,t,arguments)}return(0,c.A)(t,e),(0,h.A)(t,[{key:"nextMatch",value:function(e,t,n){var i=Q(this.spec,e,n,e.doc.length).next();return i.done&&(i=Q(this.spec,e,0,t).next()),i.done?null:i.value}},{key:"prevMatchInRange",value:function(e,t,n){for(var i=1;;i++){for(var r=Math.max(t,n-1e4*i),o=Q(this.spec,e,r,n),a=null;!o.next().done;)a=o.value;if(a&&(r==t||a.from>r+10))return a;if(r==t)return null}}},{key:"prevMatch",value:function(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}},{key:"getReplacement",value:function(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(function(t,n){return"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t}))}},{key:"matchAll",value:function(e,t){for(var n=Q(this.spec,e,0,e.doc.length),i=[];!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}},{key:"highlight",value:function(e,t,n,i){for(var r=Q(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));!r.next().done;)i(r.value.from,r.value.to)}}])}(H),te=p.Pe.define(),ne=p.Pe.define(),ie=p.sU.define({create:function(e){return new re(ve(e).create(),null)},update:function(e,t){var n,i=(0,l.A)(t.effects);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.is(te)?e=new re(r.value.create(),e.panel):r.is(ne)&&(e=new re(e.query,r.value?me:null))}}catch(o){i.e(o)}finally{i.f()}return e},provide:function(e){return d.S7.from(e,(function(e){return e.panel}))}}),re=(0,h.A)((function e(t,n){(0,f.A)(this,e),this.query=t,this.panel=n})),oe=d.NZ.mark({class:"cm-searchMatch"}),ae=d.NZ.mark({class:"cm-searchMatch cm-searchMatch-selected"}),se=d.Z9.fromClass(function(){return(0,h.A)((function e(t){(0,f.A)(this,e),this.view=t,this.decorations=this.highlight(t.state.field(ie))}),[{key:"update",value:function(e){var t=e.state.field(ie);(t!=e.startState.field(ie)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}},{key:"highlight",value:function(e){var t=e.query;if(!e.panel||!t.spec.valid)return d.NZ.none;for(var n=this.view,i=new p.vB,r=0,o=n.visibleRanges,a=o.length;r<a;r++){for(var s=o[r],c=s.from,l=s.to;r<a-1&&l>o[r+1].from-500;)l=o[++r].to;t.highlight(n.state,c,l,(function(e,t){var r=n.state.selection.ranges.some((function(n){return n.from==e&&n.to==t}));i.add(e,t,r?ae:oe)}))}return i.finish()}}])}(),{decorations:function(e){return e.decorations}}),le=ce((function(e,t){var n=t.query,i=e.state.selection.main.to,r=n.nextMatch(e.state,i,i);if(!r)return!1;var o=p.OF.single(r.from,r.to),a=e.state.facet($);return e.dispatch({selection:o,effects:[Me(e,r),a.scrollToMatch(o.main,e)],userEvent:"select.search"}),ye(e),!0})),ue=ce((function(e,t){var n=t.query,i=e.state,r=i.selection.main.from,o=n.prevMatch(i,r,r);if(!o)return!1;var a=p.OF.single(o.from,o.to),s=e.state.facet($);return e.dispatch({selection:a,effects:[Me(e,o),s.scrollToMatch(a.main,e)],userEvent:"select.search"}),ye(e),!0})),fe=ce((function(e,t){var n=t.query.matchAll(e.state,1e3);return!(!n||!n.length)&&(e.dispatch({selection:p.OF.create(n.map((function(e){return p.OF.range(e.from,e.to)}))),userEvent:"select.search.matches"}),!0)})),he=function(e){var t=e.state,n=e.dispatch,i=t.selection;if(i.ranges.length>1||i.main.empty)return!1;for(var r=i.main,o=r.from,a=r.to,s=[],c=0,l=new y(t.doc,t.sliceDoc(o,a));!l.next().done;){if(s.length>1e3)return!1;l.value.from==o&&(c=s.length),s.push(p.OF.range(l.value.from,l.value.to))}return n(t.update({selection:p.OF.create(s,c),userEvent:"select.search.matches"})),!0},de=ce((function(e,t){var n=t.query,i=e.state,r=i.selection.main,o=r.from,a=r.to;if(i.readOnly)return!1;var s=n.nextMatch(i,o,o);if(!s)return!1;var c,l,u=[],f=[];if(s.from==o&&s.to==a&&(l=i.toText(n.getReplacement(s)),u.push({from:s.from,to:s.to,insert:l}),s=n.nextMatch(i,s.from,s.to),f.push(d.Lz.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(o).number)+"."))),s){var h=0==u.length||u[0].from>=s.to?0:s.to-s.from-l.length;c=p.OF.single(s.from-h,s.to-h),f.push(Me(e,s)),f.push(i.facet($).scrollToMatch(c.main,e))}return e.dispatch({changes:u,selection:c,effects:f,userEvent:"input.replace"}),!0})),pe=ce((function(e,t){var n=t.query;if(e.state.readOnly)return!1;var i=n.matchAll(e.state,1e9).map((function(e){return{from:e.from,to:e.to,insert:n.getReplacement(e)}}));if(!i.length)return!1;var r=e.state.phrase("replaced $ matches",i.length)+".";return e.dispatch({changes:i,effects:d.Lz.announce.of(r),userEvent:"input.replace.all"}),!0})),we=[{key:"Mod-f",run:be=function(e){var t=e.state.field(ie,!1);if(t&&t.panel){var n=ge(e);if(n&&n!=e.root.activeElement){var i=ve(e.state,t.query.spec);i.valid&&e.dispatch({effects:te.of(i)}),n.focus(),n.select()}}else e.dispatch({effects:[ne.of(!0),t?te.of(ve(e.state,t.query.spec)):p.Pe.appendConfig.of(Ie)]});return!0},scope:"editor search-panel"},{key:"F3",run:le,shift:ue,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:le,shift:ue,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:xe=function(e){var t=e.state.field(ie,!1);if(!t||!t.panel)return!1;var n=(0,d.ld)(e,me);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:ne.of(!1)}),!0},scope:"editor search-panel"},{key:"Mod-Shift-l",run:he},{key:"Mod-Alt-g",run:E},{key:"Mod-d",run:Z,preventDefault:!0}],ke=function(){return(0,h.A)((function e(t){var n=this;(0,f.A)(this,e),this.view=t;var i=this.query=t.state.field(ie).query.spec;function r(e,t,n){return(0,m.A)("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=(0,m.A)("input",{value:i.search,placeholder:Ae(t,"Find"),"aria-label":Ae(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=(0,m.A)("input",{value:i.replace,placeholder:Ae(t,"Replace"),"aria-label":Ae(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=(0,m.A)("input",{type:"checkbox",name:"case",form:"",checked:i.caseSensitive,onchange:this.commit}),this.reField=(0,m.A)("input",{type:"checkbox",name:"re",form:"",checked:i.regexp,onchange:this.commit}),this.wordField=(0,m.A)("input",{type:"checkbox",name:"word",form:"",checked:i.wholeWord,onchange:this.commit}),this.dom=(0,m.A)("div",{onkeydown:function(e){return n.keydown(e)},class:"cm-search"},[this.searchField,r("next",(function(){return le(t)}),[Ae(t,"next")]),r("prev",(function(){return ue(t)}),[Ae(t,"previous")]),r("select",(function(){return fe(t)}),[Ae(t,"all")]),(0,m.A)("label",null,[this.caseField,Ae(t,"match case")]),(0,m.A)("label",null,[this.reField,Ae(t,"regexp")]),(0,m.A)("label",null,[this.wordField,Ae(t,"by word")])].concat((0,a.A)(t.state.readOnly?[]:[(0,m.A)("br"),this.replaceField,r("replace",(function(){return de(t)}),[Ae(t,"replace")]),r("replaceAll",(function(){return pe(t)}),[Ae(t,"replace all")])]),[(0,m.A)("button",{name:"close",onclick:function(){return xe(t)},"aria-label":Ae(t,"close"),type:"button"},["×"])]))}),[{key:"commit",value:function(){var e=new _({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:te.of(e)}))}},{key:"keydown",value:function(e){(0,d.TS)(this.view,e,"search-panel")?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?ue:le)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),de(this.view))}},{key:"update",value:function(e){var t,n=(0,l.A)(e.transactions);try{for(n.s();!(t=n.n()).done;){var i,r=t.value,o=(0,l.A)(r.effects);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.is(te)&&!a.value.eq(this.query)&&this.setQuery(a.value)}}catch(s){o.e(s)}finally{o.f()}}}catch(s){n.e(s)}finally{n.f()}}},{key:"setQuery",value:function(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}},{key:"mount",value:function(){this.searchField.select()}},{key:"pos",get:function(){return 80}},{key:"top",get:function(){return this.view.state.facet($).top}}])}(),Ce=30,Se=/[\s\.,:;?!]/,Le=d.Lz.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Ie=[ie,p.Nb.low(se),Le],o(),e.next=126;break;case 123:e.prev=123,e.t2=e.catch(0),o(e.t2);case 126:case"end":return e.stop()}}),e,null,[[0,123]])})));return function(t,n){return e.apply(this,arguments)}}())},20714:function(e,t,n){n.d(t,{A:function(){return r}});var i=n(91001);n(71499);function r(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==(0,i.A)(n)&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var a=n[r];"string"==typeof a?e.setAttribute(r,a):null!=a&&(e[r]=a)}t++}for(;t<arguments.length;t++)o(e,arguments[t]);return e}function o(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)o(e,t[n])}}}}]);
//# sourceMappingURL=82706.IuE4NlB10fw.js.map