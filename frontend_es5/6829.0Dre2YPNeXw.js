"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[6829],{68009:function(t,e,s){s.d(e,{A:function(){return a}});var i=s(91001);s(97741),s(10507),s(39790),s(7760),s(253),s(54846),s(16891),s(66555);function a(t){if(!t||"object"!=(0,i.A)(t))return t;if("[object Date]"==Object.prototype.toString.call(t))return new Date(t.getTime());if(Array.isArray(t))return t.map(a);var e={};return Object.keys(t).forEach((function(s){e[s]=a(t[s])})),e}},52389:function(t,e,s){var i,a,o,n,l,r,c,u,d,_=s(33994),f=s(658),p=s(22858),h=s(64782),b=s(64599),v=s(35806),x=s(71008),m=s(62193),y=s(2816),k=s(27927),g=(s(81027),s(13025),s(95737),s(79243),s(97741),s(89655),s(33231),s(50693),s(26098),s(10507),s(39790),s(66457),s(74268),s(24545),s(51855),s(82130),s(31743),s(22328),s(4959),s(62435),s(99019),s(253),s(2075),s(54846),s(16891),s(66555),s(96858),s(72606),s(50289)),w=s(29818),A=s(94100),z=s(34897),S=s(19244),j=(s(28664),s(54108)),C=s(4826),D=s(6121),T=s(20712),q=s(55321),E=function(){return s.e(94564).then(s.bind(s,94564))},L=function(){return s.e(55705).then(s.bind(s,55705))},O=s(84976),I={no_state:0,entity_no_longer_recorded:1,entity_not_recorded:1,unsupported_state_class:2,units_changed:3};(0,k.A)([(0,w.EM)("developer-tools-statistics")],(function(t,e){var s,k=function(e){function s(){var e;(0,x.A)(this,s);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=(0,m.A)(this,s,[].concat(a)),t(e),e}return(0,y.A)(s,e),(0,v.A)(s)}(e);return{F:k,d:[{kind:"field",decorators:[(0,w.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,w.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,w.wk)()],key:"_data",value:function(){return[]}},{kind:"field",key:"_disabledEntities",value:function(){return new Set}},{kind:"field",key:"_deletedStatistics",value:function(){return new Set}},{kind:"method",key:"firstUpdated",value:function(){this._validateStatistics()}},{kind:"field",key:"_displayData",value:function(){return(0,A.A)((function(t,e){return t.map((function(t){var s;return Object.assign(Object.assign({},t),{},{displayName:t.state?(0,S.u)(t.state):t.name||t.statistic_id,issues_string:null===(s=t.issues)||void 0===s?void 0:s.map((function(t){return e("ui.panel.developer-tools.tabs.statistics.issues.".concat(t.type),t.data)||t.type})).join(" ")})}))}))}},{kind:"field",key:"_columns",value:function(){var t=this;return(0,A.A)((function(e){return{displayName:{title:e("ui.panel.developer-tools.tabs.statistics.data_table.name"),main:!0,sortable:!0,filterable:!0,flex:2},statistic_id:{title:e("ui.panel.developer-tools.tabs.statistics.data_table.statistic_id"),sortable:!0,filterable:!0,hidden:t.narrow},statistics_unit_of_measurement:{title:e("ui.panel.developer-tools.tabs.statistics.data_table.statistics_unit"),sortable:!0,filterable:!0,forceLTR:!0},source:{title:e("ui.panel.developer-tools.tabs.statistics.data_table.source"),sortable:!0,filterable:!0},issues_string:{title:e("ui.panel.developer-tools.tabs.statistics.data_table.issue"),sortable:!0,filterable:!0,direction:"asc",flex:2,template:function(t){var s;return(0,g.qy)(i||(i=(0,b.A)(["",""])),null!==(s=t.issues_string)&&void 0!==s?s:e("ui.panel.developer-tools.tabs.statistics.no_issue"))}},fix:{title:"",label:t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.fix"),template:function(s){return(0,g.qy)(a||(a=(0,b.A)(["",""])),s.issues?(0,g.qy)(o||(o=(0,b.A)(['<mwc-button @click="','" .data="','"> '," </mwc-button>"])),t._fixIssue,s.issues,e("ui.panel.developer-tools.tabs.statistics.fix_issue.fix")):"â€”")},minWidth:"113px",maxWidth:"113px",showNarrow:!0},actions:{title:"",label:e("ui.panel.developer-tools.tabs.statistics.adjust_sum"),type:"icon-button",showNarrow:!0,template:function(s){return s.has_sum?(0,g.qy)(n||(n=(0,b.A)([' <ha-icon-button .label="','" .path="','" .statistic="','" @click="','"></ha-icon-button> '])),e("ui.panel.developer-tools.tabs.statistics.adjust_sum"),"M22,13V22H2V19L22,13M21.68,7.06L16.86,4.46L17.7,7.24L7.58,10.24C6.63,8.95 4.82,8.67 3.53,9.62C2.24,10.57 1.96,12.38 2.91,13.67C3.85,14.97 5.67,15.24 6.96,14.29C7.67,13.78 8.1,12.97 8.14,12.09L18.26,9.09L19.1,11.87L21.68,7.06Z",s,t._showStatisticsAdjustSumDialog):""}}}}))}},{kind:"method",key:"render",value:function(){return(0,g.qy)(l||(l=(0,b.A)([' <ha-data-table .hass="','" .columns="','" .data="','" .noDataText="','" .narrow="','" id="statistic_id" clickable @row-click="','"></ha-data-table> '])),this.hass,this._columns(this.hass.localize),this._displayData(this._data,this.hass.localize),this.hass.localize("ui.panel.developer-tools.tabs.statistics.data_table.no_statistics"),this.narrow,this._rowClicked)}},{kind:"method",key:"_showStatisticsAdjustSumDialog",value:function(t){var e,s;t.stopPropagation(),e=this,s={statistic:t.currentTarget.statistic},(0,z.r)(e,"show-dialog",{dialogTag:"dialog-statistics-adjust-sum",dialogImport:E,dialogParams:s})}},{kind:"method",key:"_rowClicked",value:function(t){var e=t.detail.id;e in this.hass.states&&(0,z.r)(this,"hass-more-info",{entityId:e})}},{kind:"method",key:"hassSubscribe",value:function(){var t=this;return[(0,j.Bz)(this.hass.connection,(function(e){var s,i=new Set,a=(0,h.A)(e);try{for(a.s();!(s=a.n()).done;){var o=s.value;o.disabled_by&&i.add(o.entity_id)}}catch(n){a.e(n)}finally{a.f()}i!==t._disabledEntities&&(t._disabledEntities=i,t._validateStatistics())}))]}},{kind:"method",key:"_validateStatistics",value:(s=(0,p.A)((0,_.A)().mark((function t(){var e,s,i,a,o,n=this;return(0,_.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,C.p3)(this.hass),(0,C.Ph)(this.hass)]);case 2:e=t.sent,s=(0,f.A)(e,2),i=s[0],a=s[1],o=new Set,this._data=i.filter((function(t){return!n._disabledEntities.has(t.statistic_id)&&!n._deletedStatistics.has(t.statistic_id)})).map((function(t){return o.add(t.statistic_id),Object.assign(Object.assign({},t),{},{state:n.hass.states[t.statistic_id],issues:a[t.statistic_id]})})),Object.keys(a).forEach((function(t){o.has(t)||n._disabledEntities.has(t)||n._deletedStatistics.has(t)||n._data.push({statistic_id:t,statistics_unit_of_measurement:"",source:"",state:n.hass.states[t],issues:a[t],has_mean:!1,has_sum:!1,unit_class:null})}));case 9:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{kind:"field",key:"_fixIssue",value:function(){var t=this;return function(e){var s,i,a,o,n,l=e.currentTarget.data.sort((function(t,e){var s,i;return(null!==(s=I[t.type])&&void 0!==s?s:99)-(null!==(i=I[e.type])&&void 0!==i?i:99)}))[0];switch(l.type){case"no_state":(0,D.showConfirmationDialog)(t,{title:t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.no_state.title"),text:(0,g.qy)(r||(r=(0,b.A)(["","<br><br>",""])),t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.no_state.info_text_1"),t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.no_state.info_text_2",{statistic_id:l.data.statistic_id})),confirmText:t.hass.localize("ui.common.delete"),destructive:!0,confirm:(n=(0,p.A)((0,_.A)().mark((function e(){return(0,_.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.$3)(t.hass,[l.data.statistic_id]);case 2:t._deletedStatistics.add(l.data.statistic_id),t._validateStatistics();case 4:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})});break;case"entity_not_recorded":(0,D.showAlertDialog)(t,{title:t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.entity_not_recorded.title"),text:(0,g.qy)(c||(c=(0,b.A)(["","<br><br>",'<br><br> <a href="','" target="_blank" rel="noreferrer noopener"> ',"</a>"])),t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.entity_not_recorded.info_text_1"),t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.entity_not_recorded.info_text_2"),(0,O.o)(t.hass,"/integrations/recorder/#configure-filter"),t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.entity_not_recorded.info_text_3_link"))});break;case"entity_no_longer_recorded":(0,D.showConfirmationDialog)(t,{title:t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.entity_no_longer_recorded.title"),text:(0,g.qy)(u||(u=(0,b.A)([""," ",' <a href="','" target="_blank" rel="noreferrer noopener"> ',"</a><br><br> ",""])),t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.entity_no_longer_recorded.info_text_1"),t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.entity_no_longer_recorded.info_text_2"),(0,O.o)(t.hass,"/integrations/recorder/#configure-filter"),t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.entity_no_longer_recorded.info_text_3_link"),t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.entity_no_longer_recorded.info_text_4")),confirmText:t.hass.localize("ui.common.delete"),destructive:!0,confirm:(o=(0,p.A)((0,_.A)().mark((function e(){return(0,_.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.$3)(t.hass,[l.data.statistic_id]);case 2:t._deletedStatistics.add(l.data.statistic_id),t._validateStatistics();case 4:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})});break;case"unsupported_state_class":(0,D.showConfirmationDialog)(t,{title:t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.unsupported_state_class.title"),text:(0,g.qy)(d||(d=(0,b.A)(["","<br><br> "," <ul> <li> "," </li> <li> ",' <a href="https://developers.home-assistant.io/docs/core/entity/sensor/#long-term-statistics" target="_blank" rel="noreferrer noopener"> ',"</a> </li> <li> "," </li> </ul> ",""])),t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.unsupported_state_class.info_text_1",{state_class:l.data.state_class}),t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.unsupported_state_class.info_text_2"),t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.unsupported_state_class.info_text_3"),t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.unsupported_state_class.info_text_4"),t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.unsupported_state_class.info_text_4_link"),t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.unsupported_state_class.info_text_5"),t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.unsupported_state_class.info_text_6",{statistic_id:l.data.statistic_id})),confirmText:t.hass.localize("ui.common.delete"),destructive:!0,confirm:(a=(0,p.A)((0,_.A)().mark((function e(){return(0,_.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.$3)(t.hass,[l.data.statistic_id]);case 2:t._deletedStatistics.add(l.data.statistic_id),t._validateStatistics();case 4:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})});break;case"units_changed":s=t,i={issue:l,fixedCallback:function(){t._validateStatistics()}},(0,z.r)(s,"show-dialog",{dialogTag:"dialog-statistics-fix-units-changed",dialogImport:L,dialogParams:i});break;default:(0,D.showAlertDialog)(t,{title:t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.no_support.title"),text:t.hass.localize("ui.panel.developer-tools.tabs.statistics.fix_issue.no_support.info_text_1")})}}}},{kind:"get",static:!0,key:"styles",value:function(){return q.RF}}]}}),(0,T.E)(g.WF))}}]);
//# sourceMappingURL=6829.0Dre2YPNeXw.js.map