"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[17696,36185],{98267:function(t,e,n){n.d(e,{z:function(){return r}});var i=n(91001),r=(n(29193),n(39790),n(7760),function(t){if(void 0!==t){if("object"!==(0,i.A)(t)){if("string"==typeof t||isNaN(t)){var e=(null==t?void 0:t.toString().split(":"))||[];if(1===e.length)return{seconds:Number(e[0])};if(e.length>3)return;var n=Number(e[2])||0,r=Math.floor(n);return{hours:Number(e[0])||0,minutes:Number(e[1])||0,seconds:r,milliseconds:Math.floor(1e3*(n-r))}}return{seconds:t}}if(!("days"in t))return t;var o=t.days,a=t.minutes,c=t.seconds,u=t.milliseconds,s=t.hours||0;return{hours:s=(s||0)+24*(o||0),minutes:a,seconds:c,milliseconds:u}}})},93493:function(t,e,n){var i=n(22858).A,r=n(33994).A;n.a(t,function(){var t=i(r().mark((function t(i,o){var a,c,u,s,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.d(e,{a:function(){return l}}),a=n(13265),c=n(81027),!(u=i([a])).then){t.next=13;break}return t.next=9,u;case 9:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=14;break;case 13:t.t0=u;case 14:a=t.t0[0],s=function(t){return t<10?"0".concat(t):t},l=function(t,e){var n=e.days||0,i=e.hours||0,r=e.minutes||0,o=e.seconds||0,a=e.milliseconds||0;return n>0?"".concat(Intl.NumberFormat(t.language,{style:"unit",unit:"day",unitDisplay:"long"}).format(n)," ").concat(i,":").concat(s(r),":").concat(s(o)):i>0?"".concat(i,":").concat(s(r),":").concat(s(o)):r>0?"".concat(r,":").concat(s(o)):o>0?Intl.NumberFormat(t.language,{style:"unit",unit:"second",unitDisplay:"long"}).format(o):a>0?Intl.NumberFormat(t.language,{style:"unit",unit:"millisecond",unitDisplay:"long"}).format(a):null},o(),t.next=23;break;case 20:t.prev=20,t.t2=t.catch(0),o(t.t2);case 23:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e,n){return t.apply(this,arguments)}}())},51853:function(t,e,n){n.d(e,{A:function(){return r}});n(81027);var i=function(t){return t<10?"0".concat(t):t};function r(t){var e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=Math.floor(t%3600%60);return e>0?"".concat(e,":").concat(i(n),":").concat(i(r)):n>0?"".concat(n,":").concat(i(r)):r>0?""+r:null}},77881:function(t,e,n){n.d(e,{e:function(){return i}});var i=function(t){return"latitude"in t.attributes&&"longitude"in t.attributes}},67843:function(t,e,n){var i=n(22858).A,r=n(33994).A;n.a(t,function(){var t=i(r().mark((function t(i,o){var a,c,u,s,l,d,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.d(e,{c:function(){return s},q:function(){return l}}),a=n(13265),c=n(94100),!(u=i([a])).then){t.next=12;break}return t.next=8,u;case 8:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=13;break;case 12:t.t0=u;case 13:a=t.t0[0],s=function(t,e){return d(t).format(e)},l=function(t,e){return f(t).format(e)},d=(0,c.A)((function(t){return new Intl.ListFormat(t.language,{style:"long",type:"conjunction"})})),f=(0,c.A)((function(t){return new Intl.ListFormat(t.language,{style:"long",type:"disjunction"})})),o(),t.next=24;break;case 21:t.prev=21,t.t2=t.catch(0),o(t.t2);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})));return function(e,n){return t.apply(this,arguments)}}())},94624:function(t,e,n){n.d(e,{_:function(){return o}});var i=n(64782),r=(n(79243),n(89655),n(72735),n(36016),n(43037),n(66419)),o=function(t,e){if(!(e instanceof r.C5))return{warnings:[e.message],errors:void 0};var n,o=[],a=[],c=(0,i.A)(e.failures());try{for(c.s();!(n=c.n()).done;){var u=n.value;if(void 0===u.value)o.push(t.localize("ui.errors.config.key_missing",{key:u.path.join(".")}));else if("never"===u.type)a.push(t.localize("ui.errors.config.key_not_expected",{key:u.path.join(".")}));else{if("union"===u.type)continue;"enums"===u.type?a.push(t.localize("ui.errors.config.key_wrong_type",{key:u.path.join("."),type_correct:u.message.replace("Expected ","").split(", ")[0],type_wrong:JSON.stringify(u.value)})):a.push(t.localize("ui.errors.config.key_wrong_type",{key:u.path.join("."),type_correct:u.refinement||u.type,type_wrong:JSON.stringify(u.value)}))}}}catch(e){c.e(e)}finally{c.f()}return{warnings:a,errors:o}}},72992:function(t,e,n){n.d(e,{V:function(){return N}});var i,r,o,a,c,u=n(658),s=n(33994),l=n(22858),d=n(64599),f=n(35806),v=n(71008),p=n(62193),y=n(2816),m=n(27927),h=n(35890),_=(n(81027),n(88557),n(82386),n(97741),n(33231),n(26098),n(16891),n(68816)),b=(n(67056),n(50289)),g=n(29818),k=n(34897),A=n(26885),z=n(31338),w=(n(77312),"NO_AUTOMATION"),x="UNKNOWN_AUTOMATION",N=(0,m.A)(null,(function(t,e){var n,m=function(e){function n(e,i,r){var o;return(0,v.A)(this,n),o=(0,p.A)(this,n),t(o),o._localizeDeviceAutomation=e,o._fetchDeviceAutomations=i,o._createNoAutomation=r,o}return(0,y.A)(n,e),(0,f.A)(n)}(e);return{F:m,d:[{kind:"field",decorators:[(0,g.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,g.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,g.MZ)()],key:"deviceId",value:void 0},{kind:"field",decorators:[(0,g.MZ)({type:Object})],key:"value",value:void 0},{kind:"field",decorators:[(0,g.wk)()],key:"_automations",value:function(){return[]}},{kind:"field",decorators:[(0,g.wk)()],key:"_renderEmpty",value:function(){return!1}},{kind:"field",decorators:[(0,g.wk)(),(0,_.Fg)({context:A.ih,subscribe:!0})],key:"_entityReg",value:void 0},{kind:"get",key:"NO_AUTOMATION_TEXT",value:function(){return this.hass.localize("ui.panel.config.devices.automation.actions.no_actions")}},{kind:"get",key:"UNKNOWN_AUTOMATION_TEXT",value:function(){return this.hass.localize("ui.panel.config.devices.automation.actions.unknown_action")}},{kind:"field",key:"_localizeDeviceAutomation",value:void 0},{kind:"field",key:"_fetchDeviceAutomations",value:void 0},{kind:"field",key:"_createNoAutomation",value:void 0},{kind:"get",key:"_value",value:function(){var t=this;if(!this.value)return"";if(!this._automations.length)return w;var e=this._automations.findIndex((function(e){return(0,z.Po)(t._entityReg,e,t.value)}));return-1===e?x:"".concat(this._automations[e].device_id,"_").concat(e)}},{kind:"method",key:"render",value:function(){var t=this;if(this._renderEmpty)return b.s6;var e=this._value;return(0,b.qy)(i||(i=(0,d.A)([' <ha-select .label="','" .value="','" @selected="','" .disabled="','"> '," "," "," </ha-select> "])),this.label,e,this._automationChanged,0===this._automations.length,e===w?(0,b.qy)(r||(r=(0,d.A)(['<mwc-list-item .value="','"> '," </mwc-list-item>"])),w,this.NO_AUTOMATION_TEXT):"",e===x?(0,b.qy)(o||(o=(0,d.A)(['<mwc-list-item .value="','"> '," </mwc-list-item>"])),x,this.UNKNOWN_AUTOMATION_TEXT):"",this._automations.map((function(e,n){return(0,b.qy)(a||(a=(0,d.A)([' <mwc-list-item .value="','"> '," </mwc-list-item> "])),"".concat(e.device_id,"_").concat(n),t._localizeDeviceAutomation(t.hass,t._entityReg,e))})))}},{kind:"method",key:"updated",value:function(t){(0,h.A)(m,"updated",this,3)([t]),t.has("deviceId")&&this._updateDeviceInfo()}},{kind:"method",key:"_updateDeviceInfo",value:(n=(0,l.A)((0,s.A)().mark((function t(){return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.deviceId){t.next=6;break}return t.next=3,this._fetchDeviceAutomations(this.hass,this.deviceId);case 3:t.t0=t.sent.sort(z.RK),t.next=7;break;case 6:t.t0=[];case 7:return this._automations=t.t0,this.value&&this.value.device_id===this.deviceId||this._setValue(this._automations.length?this._automations[0]:this._createNoAutomation(this.deviceId)),this._renderEmpty=!0,t.next=12,this.updateComplete;case 12:this._renderEmpty=!1;case 13:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"_automationChanged",value:function(t){var e=t.target.value;if(e&&![x,w].includes(e)){var n=e.split("_"),i=(0,u.A)(n,2),r=i[0],o=i[1],a=this._automations[o];a.device_id===r&&this._setValue(a)}}},{kind:"method",key:"_setValue",value:function(t){if(!this.value||!(0,z.Po)(this._entityReg,t,this.value)){var e=Object.assign({},t);delete e.metadata,(0,k.r)(this,"value-changed",{value:e})}}},{kind:"get",static:!0,key:"styles",value:function(){return(0,b.AH)(c||(c=(0,d.A)(["ha-select{display:block}"])))}}]}}),b.WF)},36185:function(t,e,n){var i,r,o,a,c,u,s,l,d,f=n(14842),v=n(658),p=n(64599),y=n(33994),m=n(64782),h=n(22858),_=n(35806),b=n(71008),g=n(62193),k=n(2816),A=n(27927),z=n(35890),w=(n(81027),n(95737),n(97741),n(50693),n(26098),n(99471),n(39790),n(66457),n(99019),n(253),n(54846),n(16891),n(66555),n(96858),n(50289)),x=n(29818),N=n(85920),O=n(34897),q=(n(13292),n(9421),{boolean:function(){return n.e(96292).then(n.bind(n,96292))},constant:function(){return n.e(44354).then(n.bind(n,44354))},float:function(){return n.e(80866).then(n.bind(n,80866))},grid:function(){return n.e(21306).then(n.bind(n,21306))},expandable:function(){return n.e(82178).then(n.bind(n,82178))},integer:function(){return n.e(65622).then(n.bind(n,43241))},multi_select:function(){return n.e(26964).then(n.bind(n,26964))},positive_time_period_dict:function(){return n.e(24280).then(n.bind(n,24280))},select:function(){return n.e(22038).then(n.bind(n,22038))},string:function(){return n.e(38819).then(n.bind(n,38819))}}),E=function(t,e){return t?!e.name||e.flatten?t:t[e.name]:null};(0,A.A)([(0,x.EM)("ha-form")],(function(t,e){var n,A=function(e){function n(){var e;(0,b.A)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=(0,g.A)(this,n,[].concat(r)),t(e),e}return(0,k.A)(n,e),(0,_.A)(n)}(e);return{F:A,d:[{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"data",value:void 0},{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"schema",value:void 0},{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"error",value:void 0},{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"warning",value:void 0},{kind:"field",decorators:[(0,x.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"computeError",value:void 0},{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"computeWarning",value:void 0},{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"computeLabel",value:void 0},{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"computeHelper",value:void 0},{kind:"method",key:"getFormProperties",value:function(){return{}}},{kind:"method",key:"focus",value:(n=(0,h.A)((0,y.A)().mark((function t(){var e,n,i,r;return(0,y.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.updateComplete;case 2:if(e=this.renderRoot.querySelector(".root")){t.next=5;break}return t.abrupt("return");case 5:n=(0,m.A)(e.children),t.prev=6,n.s();case 8:if((i=n.n()).done){t.next=18;break}if("HA-ALERT"===(r=i.value).tagName){t.next=16;break}if(!(r instanceof w.mN)){t.next=14;break}return t.next=14,r.updateComplete;case 14:return r.focus(),t.abrupt("break",18);case 16:t.next=8;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(6),n.e(t.t0);case 23:return t.prev=23,n.f(),t.finish(23);case 26:case"end":return t.stop()}}),t,this,[[6,20,23,26]])}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"willUpdate",value:function(t){t.has("schema")&&this.schema&&this.schema.forEach((function(t){var e;"selector"in t||null===(e=q[t.type])||void 0===e||e.call(q)}))}},{kind:"method",key:"render",value:function(){var t=this;return(0,w.qy)(i||(i=(0,p.A)([' <div class="root" part="root"> '," "," </div> "])),this.error&&this.error.base?(0,w.qy)(r||(r=(0,p.A)([' <ha-alert alert-type="error"> '," </ha-alert> "])),this._computeError(this.error.base,this.schema)):"",this.schema.map((function(e){var n,i=function(t,e){return t&&e.name?t[e.name]:null}(t.error,e),r=function(t,e){return t&&e.name?t[e.name]:null}(t.warning,e);return(0,w.qy)(o||(o=(0,p.A)([" "," "," "])),i?(0,w.qy)(a||(a=(0,p.A)([' <ha-alert own-margin alert-type="error"> '," </ha-alert> "])),t._computeError(i,e)):r?(0,w.qy)(c||(c=(0,p.A)([' <ha-alert own-margin alert-type="warning"> '," </ha-alert> "])),t._computeWarning(r,e)):"","selector"in e?(0,w.qy)(u||(u=(0,p.A)(['<ha-selector .schema="','" .hass="','" .name="','" .selector="','" .value="','" .label="','" .disabled="','" .placeholder="','" .helper="','" .required="','" .context="','"></ha-selector>'])),e,t.hass,e.name,e.selector,E(t.data,e),t._computeLabel(e,t.data),e.disabled||t.disabled||!1,e.required?"":e.default,t._computeHelper(e),e.required||!1,t._generateContext(e)):(0,N._)(t.fieldElementName(e.type),Object.assign({schema:e,data:E(t.data,e),label:t._computeLabel(e,t.data),helper:t._computeHelper(e),disabled:t.disabled||e.disabled||!1,hass:t.hass,localize:null===(n=t.hass)||void 0===n?void 0:n.localize,computeLabel:t.computeLabel,computeHelper:t.computeHelper,context:t._generateContext(e)},t.getFormProperties())))})))}},{kind:"method",key:"fieldElementName",value:function(t){return"ha-form-".concat(t)}},{kind:"method",key:"_generateContext",value:function(t){if(t.context){for(var e={},n=0,i=Object.entries(t.context);n<i.length;n++){var r=(0,v.A)(i[n],2),o=r[0],a=r[1];e[o]=this.data[a]}return e}}},{kind:"method",key:"createRenderRoot",value:function(){var t=(0,z.A)(A,"createRenderRoot",this,3)([]);return this.addValueChangedListener(t),t}},{kind:"method",key:"addValueChangedListener",value:function(t){var e=this;t.addEventListener("value-changed",(function(t){t.stopPropagation();var n=t.target.schema;if(t.target!==e){var i=!n.name||"flatten"in n&&n.flatten?t.detail.value:(0,f.A)({},n.name,t.detail.value);e.data=Object.assign(Object.assign({},e.data),i),(0,O.r)(e,"value-changed",{value:e.data})}}))}},{kind:"method",key:"_computeLabel",value:function(t,e){return this.computeLabel?this.computeLabel(t,e):t?t.name:""}},{kind:"method",key:"_computeHelper",value:function(t){return this.computeHelper?this.computeHelper(t):""}},{kind:"method",key:"_computeError",value:function(t,e){var n=this;return Array.isArray(t)?(0,w.qy)(s||(s=(0,p.A)(["<ul> "," </ul>"])),t.map((function(t){return(0,w.qy)(l||(l=(0,p.A)(["<li> "," </li>"])),n.computeError?n.computeError(t,e):t)}))):this.computeError?this.computeError(t,e):t}},{kind:"method",key:"_computeWarning",value:function(t,e){return this.computeWarning?this.computeWarning(t,e):t}},{kind:"get",static:!0,key:"styles",value:function(){return(0,w.AH)(d||(d=(0,p.A)([".root>*{display:block}.root>:not([own-margin]):not(:last-child){margin-bottom:24px}ha-alert[own-margin]{margin-bottom:4px}"])))}}]}}),w.WF)},3593:function(t,e,n){var i=n(22858).A,r=n(33994).A;n.a(t,function(){var t=i(r().mark((function t(i,o){var a,c,u,s,l,d,f,v,p,y,m,h,_,b,g,k,A,z,w,x,N,O,q,E,I,S,T,M,W,C,D,j,Z,L,R,U,F;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.d(e,{g:function(){return L},p:function(){return U}}),a=n(64782),c=n(4978),u=n(81027),s=n(82386),l=n(95737),d=n(97741),f=n(89655),v=n(72735),p=n(29193),y=n(39790),m=n(22871),h=n(36016),_=n(7760),b=n(8206),g=n(36604),k=n(29276),A=n(92765),z=n(16891),w=n(96858),x=n(21863),N=n(93493),O=n(41924),q=n(51853),E=n(29596),I=n(19244),S=n(31338),T=n(67843),!(M=i([N,O,E,T])).then){t.next=55;break}return t.next=51,M;case 51:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=56;break;case 55:t.t0=M;case 56:W=t.t0,N=W[0],O=W[1],E=W[2],T=W[3],C="ui.panel.config.automation.editor.triggers.type",D="ui.panel.config.automation.editor.conditions.type",j=function(t,e){return"number"==typeof e?(0,q.A)(e):"string"==typeof e?e:(0,N.a)(t,e)},Z=function(t,e,n){var i=t.split(":");if(i.length<2||i.length>3)return t;try{var r=new Date("1970-01-01T"+t);return 2===i.length||0===Number(i[2])?(0,O.fU)(r,e,n):(0,O.ie)(r,e,n)}catch(o){return t}},L=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{return R(t,e,n,i)}catch(o){console.error(o);var r="Error in describing trigger";return o.message&&(r+=": "+o.message),r}},R=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.alias&&!i)return t.alias;if("event"===t.platform&&t.event_type){var r=[];if(Array.isArray(t.event_type)){var o,c=(0,a.A)(t.event_type.values());try{for(c.s();!(o=c.n()).done;){var u=o.value;r.push(u)}}catch(Dt){c.e(Dt)}finally{c.f()}}else r.push(t.event_type);var s=(0,T.q)(e.locale,r);return e.localize("".concat(C,".event.description.full"),{eventTypes:s})}if("homeassistant"===t.platform&&t.event)return e.localize("start"===t.event?"".concat(C,".homeassistant.description.started"):"".concat(C,".homeassistant.description.shutdown"));if("numeric_state"===t.platform&&t.entity_id){var l=[],d=e.states,f=Array.isArray(t.entity_id)?e.states[t.entity_id[0]]:e.states[t.entity_id];if(Array.isArray(t.entity_id)){var v,p=(0,a.A)(t.entity_id.values());try{for(p.s();!(v=p.n()).done;){var y=v.value;d[y]&&l.push((0,I.u)(d[y])||y)}}catch(Dt){p.e(Dt)}finally{p.f()}}else t.entity_id&&l.push(d[t.entity_id]?(0,I.u)(d[t.entity_id]):t.entity_id);var m=t.attribute?(0,E.computeAttributeNameDisplay)(e.localize,f,e.entities,t.attribute):void 0,h=t.for?j(e.locale,t.for):void 0;if(void 0!==t.above&&void 0!==t.below)return e.localize("".concat(C,".numeric_state.description.above-below"),{attribute:m,entity:(0,T.q)(e.locale,l),numberOfEntities:l.length,above:t.above,below:t.below,duration:h});if(void 0!==t.above)return e.localize("".concat(C,".numeric_state.description.above"),{attribute:m,entity:(0,T.q)(e.locale,l),numberOfEntities:l.length,above:t.above,duration:h});if(void 0!==t.below)return e.localize("".concat(C,".numeric_state.description.below"),{attribute:m,entity:(0,T.q)(e.locale,l),numberOfEntities:l.length,below:t.below,duration:h})}if("state"===t.platform){var _=[],b=e.states,g="";if(t.attribute){var k=Array.isArray(t.entity_id)?e.states[t.entity_id[0]]:e.states[t.entity_id];g=(0,E.computeAttributeNameDisplay)(e.localize,k,e.entities,t.attribute)}var A=(0,x.e)(t.entity_id);if(A){var z,w=(0,a.A)(A);try{for(w.s();!(z=w.n()).done;){var N=z.value;b[N]&&_.push((0,I.u)(b[N])||N)}}catch(Dt){w.e(Dt)}finally{w.f()}}var O=e.states[A[0]],M="other",W="";if(void 0!==t.from){var D=[];if(null===t.from)t.attribute||(M="null");else{D=(0,x.e)(t.from);var L,R=[],U=(0,a.A)(D);try{for(U.s();!(L=U.n()).done;){var F=L.value;R.push(t.attribute?e.formatEntityAttributeValue(O,t.attribute,F).toString():e.formatEntityState(O,F))}}catch(Dt){U.e(Dt)}finally{U.f()}0!==R.length&&(W=(0,T.q)(e.locale,R),M="fromUsed")}}var H="other",V="";if(void 0!==t.to){var P=[];if(null===t.to)t.attribute||(H="null");else{P=(0,x.e)(t.to);var J,K=[],X=(0,a.A)(P);try{for(X.s();!(J=X.n()).done;){var B=J.value;K.push(t.attribute?e.formatEntityAttributeValue(O,t.attribute,B).toString():e.formatEntityState(O,B).toString())}}catch(Dt){X.e(Dt)}finally{X.f()}0!==K.length&&(V=(0,T.q)(e.locale,K),H="toUsed")}}t.attribute||void 0!==t.from||void 0!==t.to||(H="special");var Y,$="";if(t.for)$=null!==(Y=j(e.locale,t.for))&&void 0!==Y?Y:"";return e.localize("".concat(C,".state.description.full"),{hasAttribute:""!==g?"true":"false",attribute:g,hasEntity:0!==_.length?"true":"false",entity:(0,T.q)(e.locale,_),fromChoice:M,fromString:W,toChoice:H,toString:V,hasDuration:""!==$?"true":"false",duration:$})}if("sun"===t.platform&&t.event){var G="";return t.offset&&(G="number"==typeof t.offset?(0,q.A)(t.offset):"string"==typeof t.offset?t.offset:JSON.stringify(t.offset)),e.localize("sunset"===t.event?"".concat(C,".sun.description.sets"):"".concat(C,".sun.description.rises"),{hasDuration:""!==G?"true":"false",duration:G})}if("tag"===t.platform)return e.localize("".concat(C,".tag.description.full"));if("time"===t.platform&&t.at){var Q=(0,x.e)(t.at).map((function(t){return"string"!=typeof t?t:t.includes(".")?"entity ".concat(e.states[t]?(0,I.u)(e.states[t]):t):Z(t,e.locale,e.config)}));return e.localize("".concat(C,".time.description.full"),{time:(0,T.q)(e.locale,Q)})}if("time_pattern"===t.platform){if(!t.seconds&&!t.minutes&&!t.hours)return e.localize("".concat(C,".time_pattern.description.initial"));var tt=[],et="other",nt="other",it="other",rt=0,ot=0,at=0;if(void 0!==t.seconds){var ct="*"===t.seconds,ut="string"==typeof t.seconds&&t.seconds.startsWith("/");rt=ct?0:"number"==typeof t.seconds?t.seconds:ut?parseInt(t.seconds.substring(1)):parseInt(t.seconds),(isNaN(rt)||rt>59||rt<0||ut&&0===rt)&&tt.push("seconds"),et=ct||ut&&1===rt?"every":ut?"every_interval":"on_the_xth"}if(void 0!==t.minutes){var st="*"===t.minutes,lt="string"==typeof t.minutes&&t.minutes.startsWith("/");ot=st?0:"number"==typeof t.minutes?t.minutes:lt?parseInt(t.minutes.substring(1)):parseInt(t.minutes),(isNaN(ot)||ot>59||ot<0||lt&&0===ot)&&tt.push("minutes"),nt=st||lt&&1===ot?"every":lt?"every_interval":void 0!==t.seconds?"has_seconds":"on_the_xth"}else void 0!==t.seconds&&(void 0!==t.hours?(ot=0,nt="has_seconds"):nt="every");if(void 0!==t.hours){var dt="*"===t.hours,ft="string"==typeof t.hours&&t.hours.startsWith("/");at=dt?0:"number"==typeof t.hours?t.hours:ft?parseInt(t.hours.substring(1)):parseInt(t.hours),(isNaN(at)||at>23||at<0||ft&&0===at)&&tt.push("hours"),it=dt||ft&&1===at?"every":ft?"every_interval":void 0!==t.seconds||void 0!==t.minutes?"has_seconds_or_minutes":"on_the_xth"}else it="every";return 0!==tt.length?e.localize("".concat(C,".time_pattern.description.invalid"),{parts:(0,T.c)(e.locale,tt.map((function(t){return e.localize("".concat(C,".time_pattern.").concat(t))})))}):e.localize("".concat(C,".time_pattern.description.full"),{secondsChoice:et,minutesChoice:nt,hoursChoice:it,seconds:rt,minutes:ot,hours:at,secondsWithOrdinal:e.localize("".concat(C,".time_pattern.description.ordinal"),{part:rt}),minutesWithOrdinal:e.localize("".concat(C,".time_pattern.description.ordinal"),{part:ot}),hoursWithOrdinal:e.localize("".concat(C,".time_pattern.description.ordinal"),{part:at})})}if("zone"===t.platform&&t.entity_id&&t.zone){var vt=[],pt=[],yt=e.states;if(Array.isArray(t.entity_id)){var mt,ht=(0,a.A)(t.entity_id.values());try{for(ht.s();!(mt=ht.n()).done;){var _t=mt.value;yt[_t]&&vt.push((0,I.u)(yt[_t])||_t)}}catch(Dt){ht.e(Dt)}finally{ht.f()}}else vt.push(yt[t.entity_id]?(0,I.u)(yt[t.entity_id]):t.entity_id);if(Array.isArray(t.zone)){var bt,gt=(0,a.A)(t.zone.values());try{for(gt.s();!(bt=gt.n()).done;){var kt=bt.value;yt[kt]&&pt.push((0,I.u)(yt[kt])||kt)}}catch(Dt){gt.e(Dt)}finally{gt.f()}}else pt.push(yt[t.zone]?(0,I.u)(yt[t.zone]):t.zone);return e.localize("".concat(C,".zone.description.full"),{entity:(0,T.q)(e.locale,vt),event:t.event.toString(),zone:(0,T.q)(e.locale,pt),numberOfZones:pt.length})}if("geo_location"===t.platform&&t.source&&t.zone){var At=[],zt=[],wt=e.states;if(Array.isArray(t.source)){var xt,Nt=(0,a.A)(t.source.values());try{for(Nt.s();!(xt=Nt.n()).done;){var Ot=xt.value;At.push(Ot)}}catch(Dt){Nt.e(Dt)}finally{Nt.f()}}else At.push(t.source);if(Array.isArray(t.zone)){var qt,Et=(0,a.A)(t.zone.values());try{for(Et.s();!(qt=Et.n()).done;){var It=qt.value;wt[It]&&zt.push((0,I.u)(wt[It])||It)}}catch(Dt){Et.e(Dt)}finally{Et.f()}}else zt.push(wt[t.zone]?(0,I.u)(wt[t.zone]):t.zone);return e.localize("".concat(C,".geo_location.description.full"),{source:(0,T.q)(e.locale,At),event:t.event.toString(),zone:(0,T.q)(e.locale,zt),numberOfZones:zt.length})}if("mqtt"===t.platform)return e.localize("".concat(C,".mqtt.description.full"));if("template"===t.platform){var St,Tt="";if(t.for)Tt=null!==(St=j(e.locale,t.for))&&void 0!==St?St:"";return e.localize("".concat(C,".template.description.full"),{hasDuration:""!==Tt?"true":"false",duration:Tt})}if("webhook"===t.platform)return e.localize("".concat(C,".webhook.description.full"));if("conversation"===t.platform)return t.command?e.localize("".concat(C,".conversation.description.full"),{sentence:(0,T.q)(e.locale,(0,x.e)(t.command).map((function(t){return"'".concat(t,"'")})))}):e.localize("".concat(C,".conversation.description.empty"));if("persistent_notification"===t.platform)return e.localize("".concat(C,".persistent_notification.description.full"));if("device"===t.platform&&t.device_id){var Mt=t,Wt=(0,S.nx)(e,n,Mt);if(Wt)return Wt;var Ct=e.states[Mt.entity_id];return"".concat(Ct?(0,I.u)(Ct):Mt.entity_id," ").concat(Mt.type)}return e.localize("ui.panel.config.automation.editor.triggers.type.".concat(t.platform,".label"))||e.localize("ui.panel.config.automation.editor.triggers.unknown_trigger")},U=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{return F(t,e,n,i)}catch(o){console.error(o);var r="Error in describing condition";return o.message&&(r+=": "+o.message),r}},F=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.alias&&!i)return t.alias;if(!t.condition)for(var r=0,o=["and","or","not"];r<o.length;r++){var c=o[r];c in t&&((0,x.e)(t[c])&&(t={condition:c,conditions:t[c]}))}if("or"===t.condition){var u=(0,x.e)(t.conditions);if(!u||0===u.length)return e.localize("".concat(D,".or.description.no_conditions"));var s=u.length;return e.localize("".concat(D,".or.description.full"),{count:s})}if("and"===t.condition){var l=(0,x.e)(t.conditions);if(!l||0===l.length)return e.localize("".concat(D,".and.description.no_conditions"));var d=l.length;return e.localize("".concat(D,".and.description.full"),{count:d})}if("not"===t.condition){var f=(0,x.e)(t.conditions);return f&&0!==f.length?1===f.length?e.localize("".concat(D,".not.description.one_condition")):e.localize("".concat(D,".not.description.full"),{count:f.length}):e.localize("".concat(D,".not.description.no_conditions"))}if("state"===t.condition){if(!t.entity_id)return e.localize("".concat(D,".state.description.no_entity"));var v="";if(t.attribute){var p=Array.isArray(t.entity_id)?e.states[t.entity_id[0]]:e.states[t.entity_id];v=(0,E.computeAttributeNameDisplay)(e.localize,p,e.entities,t.attribute)}var y=[];if(Array.isArray(t.entity_id)){var m,h=(0,a.A)(t.entity_id.values());try{for(h.s();!(m=h.n()).done;){var _=m.value;e.states[_]&&y.push((0,I.u)(e.states[_])||_)}}catch(ct){h.e(ct)}finally{h.f()}}else t.entity_id&&y.push(e.states[t.entity_id]?(0,I.u)(e.states[t.entity_id]):t.entity_id);var b=[],g=e.states[Array.isArray(t.entity_id)?t.entity_id[0]:t.entity_id];if(Array.isArray(t.state)){var k,A=(0,a.A)(t.state.values());try{for(A.s();!(k=A.n()).done;){var z=k.value;b.push(t.attribute?e.formatEntityAttributeValue(g,t.attribute,z).toString():e.formatEntityState(g,z))}}catch(ct){A.e(ct)}finally{A.f()}}else""!==t.state&&b.push(t.attribute?e.formatEntityAttributeValue(g,t.attribute,t.state).toString():e.formatEntityState(g,t.state.toString()));var w="";return t.for&&(w=j(e.locale,t.for)||""),e.localize("".concat(D,".state.description.full"),{hasAttribute:""!==v?"true":"false",attribute:v,numberOfEntities:y.length,entities:"any"===t.match?(0,T.q)(e.locale,y):(0,T.c)(e.locale,y),numberOfStates:b.length,states:(0,T.q)(e.locale,b),hasDuration:""!==w?"true":"false",duration:w})}if("numeric_state"===t.condition&&t.entity_id){var N=e.states[t.entity_id],O=N?(0,I.u)(N):t.entity_id,M=t.attribute?(0,E.computeAttributeNameDisplay)(e.localize,N,e.entities,t.attribute):void 0;if(void 0!==t.above&&void 0!==t.below)return e.localize("".concat(D,".numeric_state.description.above-below"),{attribute:M,entity:O,above:t.above,below:t.below});if(void 0!==t.above)return e.localize("".concat(D,".numeric_state.description.above"),{attribute:M,entity:O,above:t.above});if(void 0!==t.below)return e.localize("".concat(D,".numeric_state.description.below"),{attribute:M,entity:O,below:t.below})}if("time"===t.condition){var W=(0,x.e)(t.weekday),C=W&&W.length>0&&W.length<7;if(t.before||t.after||C){var L="string"!=typeof t.before?t.before:t.before.includes(".")?"entity ".concat(e.states[t.before]?(0,I.u)(e.states[t.before]):t.before):Z(t.before,e.locale,e.config),R="string"!=typeof t.after?t.after:t.after.includes(".")?"entity ".concat(e.states[t.after]?(0,I.u)(e.states[t.after]):t.after):Z(t.after,e.locale,e.config),U=[];C&&(U=W.map((function(t){return e.localize("ui.panel.config.automation.editor.conditions.type.time.weekdays.".concat(t))})));var F="";return void 0!==R&&void 0!==L?F="after_before":void 0!==R?F="after":void 0!==L&&(F="before"),e.localize("".concat(D,".time.description.full"),{hasTime:F,hasTimeAndDay:(R||L)&&C?"true":"false",hasDay:C?"true":"false",time_before:L,time_after:R,day:(0,T.q)(e.locale,U)})}}if("sun"===t.condition&&(t.before||t.after)){var H,V,P="";t.after&&t.after_offset&&(P="number"==typeof t.after_offset?(0,q.A)(t.after_offset):"string"==typeof t.after_offset?t.after_offset:JSON.stringify(t.after_offset));var J="";return t.before&&t.before_offset&&(J="number"==typeof t.before_offset?(0,q.A)(t.before_offset):"string"==typeof t.before_offset?t.before_offset:JSON.stringify(t.before_offset)),e.localize("".concat(D,".sun.description.full"),{afterChoice:null!==(H=t.after)&&void 0!==H?H:"other",afterOffsetChoice:""!==P?"offset":"other",afterOffset:P,beforeChoice:null!==(V=t.before)&&void 0!==V?V:"other",beforeOffsetChoice:""!==J?"offset":"other",beforeOffset:J})}if("zone"===t.condition&&t.entity_id&&t.zone){var K=[],X=[],B=e.states;if(Array.isArray(t.entity_id)){var Y,$=(0,a.A)(t.entity_id.values());try{for($.s();!(Y=$.n()).done;){var G=Y.value;B[G]&&K.push((0,I.u)(B[G])||G)}}catch(ct){$.e(ct)}finally{$.f()}}else K.push(B[t.entity_id]?(0,I.u)(B[t.entity_id]):t.entity_id);if(Array.isArray(t.zone)){var Q,tt=(0,a.A)(t.zone.values());try{for(tt.s();!(Q=tt.n()).done;){var et=Q.value;B[et]&&X.push((0,I.u)(B[et])||et)}}catch(ct){tt.e(ct)}finally{tt.f()}}else X.push(B[t.zone]?(0,I.u)(B[t.zone]):t.zone);var nt=(0,T.q)(e.locale,K),it=(0,T.q)(e.locale,X);return e.localize("".concat(D,".zone.description.full"),{entity:nt,numberOfEntities:K.length,zone:it,numberOfZones:X.length})}if("device"===t.condition&&t.device_id){var rt=t,ot=(0,S.I3)(e,n,rt);if(ot)return ot;var at=e.states[rt.entity_id];return"".concat(at?(0,I.u)(at):rt.entity_id," ").concat(rt.type)}return"template"===t.condition?e.localize("".concat(D,".template.description.full")):"trigger"===t.condition&&null!=t.id?e.localize("".concat(D,".trigger.description.full"),{id:(0,T.q)(e.locale,(0,x.e)(t.id).map((function(t){return t.toString()})))}):e.localize("ui.panel.config.automation.editor.conditions.type.".concat(t.condition,".label"))||e.localize("ui.panel.config.automation.editor.conditions.unknown_condition")},o(),t.next=75;break;case 72:t.prev=72,t.t2=t.catch(0),o(t.t2);case 75:case"end":return t.stop()}}),t,null,[[0,72]])})));return function(e,n){return t.apply(this,arguments)}}())},62342:function(t,e,n){n.d(e,{$:function(){return i}});n(26098);var i=function(t,e){return t.callWS(Object.assign({type:"validate_config"},e))}},31338:function(t,e,n){n.d(e,{I$:function(){return l},I3:function(){return h},PV:function(){return m},Po:function(){return v},RK:function(){return k},TB:function(){return d},TH:function(){return g},T_:function(){return b},am:function(){return a},jR:function(){return s},ng:function(){return c},nx:function(){return _},o9:function(){return u}});var i=n(91001),r=(n(81027),n(82386),n(50693),n(21631),n(36604),n(19244)),o=n(54108),a=function(t,e){return t.callWS({type:"device_automation/action/list",device_id:e})},c=function(t,e){return t.callWS({type:"device_automation/condition/list",device_id:e})},u=function(t,e){return t.callWS({type:"device_automation/trigger/list",device_id:e})},s=function(t,e){return t.callWS({type:"device_automation/action/capabilities",action:e})},l=function(t,e){return t.callWS({type:"device_automation/condition/capabilities",condition:e})},d=function(t,e){return t.callWS({type:"device_automation/trigger/capabilities",trigger:e})},f=["device_id","domain","entity_id","type","subtype","event","condition","platform"],v=function(t,e,n){if((0,i.A)(e)!==(0,i.A)(n))return!1;for(var r in e){var o,a;if(f.includes(r))if("entity_id"!==r||(null===(o=e[r])||void 0===o?void 0:o.includes("."))===(null===(a=n[r])||void 0===a?void 0:a.includes("."))){if(!Object.is(e[r],n[r]))return!1}else if(!p(t,e[r],n[r]))return!1}for(var c in n){var u,s;if(f.includes(c))if("entity_id"!==c||(null===(u=e[c])||void 0===u?void 0:u.includes("."))===(null===(s=n[c])||void 0===s?void 0:s.includes("."))){if(!Object.is(e[c],n[c]))return!1}else if(!p(t,e[c],n[c]))return!1}return!0},p=function(t,e,n){return!(!e||!n)&&(e.includes(".")&&(e=(0,o.Ox)(t)[e].id),n.includes(".")&&(n=(0,o.Ox)(t)[n].id),e===n)},y=function(t,e,n){if(!n)return"<"+t.localize("ui.panel.config.automation.editor.unknown_entity")+">";if(n.includes(".")){var i=t.states[n];return i?(0,r.u)(i):n}var a=(0,o.P9)(e)[n];return a?(0,o.jh)(t,a)||n:"<"+t.localize("ui.panel.config.automation.editor.unknown_entity")+">"},m=function(t,e,n){return t.localize("component.".concat(n.domain,".device_automation.action_type.").concat(n.type),{entity_name:y(t,e,n.entity_id),subtype:n.subtype?t.localize("component.".concat(n.domain,".device_automation.action_subtype.").concat(n.subtype))||n.subtype:""})||(n.subtype?'"'.concat(n.subtype,'" ').concat(n.type):n.type)},h=function(t,e,n){return t.localize("component.".concat(n.domain,".device_automation.condition_type.").concat(n.type),{entity_name:y(t,e,n.entity_id),subtype:n.subtype?t.localize("component.".concat(n.domain,".device_automation.condition_subtype.").concat(n.subtype))||n.subtype:""})||(n.subtype?'"'.concat(n.subtype,'" ').concat(n.type):n.type)},_=function(t,e,n){return t.localize("component.".concat(n.domain,".device_automation.trigger_type.").concat(n.type),{entity_name:y(t,e,n.entity_id),subtype:n.subtype?t.localize("component.".concat(n.domain,".device_automation.trigger_subtype.").concat(n.subtype))||n.subtype:""})||(n.subtype?'"'.concat(n.subtype,'" ').concat(n.type):n.type)},b=function(t,e){return function(n){return t.localize("component.".concat(e.domain,".device_automation.extra_fields.").concat(n.name))||n.name}},g=function(t,e){return function(n){return t.localize("component.".concat(e.domain,".device_automation.extra_fields_descriptions.").concat(n.name))}},k=function(t,e){var n,i,r,o;return null===(n=t.metadata)||void 0===n||!n.secondary||null!==(i=e.metadata)&&void 0!==i&&i.secondary?null!==(r=t.metadata)&&void 0!==r&&r.secondary||null===(o=e.metadata)||void 0===o||!o.secondary?0:-1:1}},36615:function(t,e,n){n.d(e,{g:function(){return a},u:function(){return r}});n(95737),n(39790),n(66457),n(99019),n(96858);var i=n(34897),r="__paste__",o=function(){return Promise.all([n.e(94366),n.e(62677)]).then(n.bind(n,62677))},a=function(t,e){(0,i.r)(t,"show-dialog",{dialogTag:"add-automation-element-dialog",dialogImport:o,dialogParams:e})}},62460:function(t,e,n){n.d(e,{V:function(){return r},b:function(){return o}});var i=n(66419),r=(0,i.Ik)({platform:(0,i.Yj)(),id:(0,i.lq)((0,i.Yj)()),enabled:(0,i.lq)((0,i.zM)())}),o=(0,i.Ik)({days:(0,i.lq)((0,i.ai)()),hours:(0,i.lq)((0,i.ai)()),minutes:(0,i.lq)((0,i.ai)()),seconds:(0,i.lq)((0,i.ai)())})}}]);
//# sourceMappingURL=17696.nQEuI-z6nw4.js.map