"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[29263],{29263:function(s,t,e){var i=e(22858).A,n=e(33994).A;e.a(s,function(){var s=i(n().mark((function s(i,r){var o,a,l,c,u,h,d,_,p,g,v,f,b,k,m,w,y,A,z,x,L,C,j,M,D,q,R,V,H,Z;return n().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,e.r(t),o=e(33994),a=e(22858),l=e(64599),c=e(35806),u=e(71008),h=e(62193),d=e(2816),_=e(27927),p=e(81027),g=e(82386),v=e(10507),f=e(9241),e(72606),b=e(46072),k=e(50289),m=e(29818),w=e(34897),y=e(29180),A=e(97247),z=e(55321),!(x=i([b])).then){s.next=34;break}return s.next=30,x;case 30:s.t1=s.sent,s.t0=(0,s.t1)(),s.next=35;break;case 34:s.t0=x;case 35:b=s.t0[0],Z="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",(0,_.A)([(0,m.EM)("dialog-zwave_js-rebuild-network-routes")],(function(s,t){var e,i=function(t){function e(){var t;(0,u.A)(this,e);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return t=(0,h.A)(this,e,[].concat(n)),s(t),t}return(0,d.A)(e,t),(0,c.A)(e)}(t);return{F:i,d:[{kind:"field",decorators:[(0,m.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,m.wk)()],key:"entry_id",value:void 0},{kind:"field",decorators:[(0,m.wk)()],key:"_status",value:void 0},{kind:"field",decorators:[(0,m.wk)()],key:"_progress_total",value:function(){return 0}},{kind:"field",decorators:[(0,m.wk)()],key:"_progress_finished",value:function(){return 0}},{kind:"field",decorators:[(0,m.wk)()],key:"_progress_in_progress",value:function(){return 0}},{kind:"field",key:"_subscribed",value:void 0},{kind:"method",key:"showDialog",value:function(s){this._progress_total=0,this.entry_id=s.entry_id,this._fetchData()}},{kind:"method",key:"closeDialog",value:function(){this.entry_id=void 0,this._status=void 0,this._progress_total=0,this._unsubscribe(),(0,w.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"render",value:function(){return this.entry_id?(0,k.qy)(L||(L=(0,l.A)([' <ha-dialog open @closed="','" .heading="','"> '," "," "," "," "," "," </ha-dialog> "])),this.closeDialog,(0,y.l)(this.hass,this.hass.localize("ui.panel.config.zwave_js.rebuild_network_routes.title")),this._status?"":(0,k.qy)(C||(C=(0,l.A)([' <div class="flex-container"> <ha-svg-icon .path="','" class="introduction"></ha-svg-icon> <div class="status"> <p> '," </p> </div> </div> <p> <em> ",' </em> </p> <mwc-button slot="primaryAction" @click="','"> '," </mwc-button> "])),"M19,8C19.56,8 20,8.43 20,9A1,1 0 0,1 19,10C18.43,10 18,9.55 18,9C18,8.43 18.43,8 19,8M2,2V11C2,13.96 4.19,16.5 7.14,16.91C7.76,19.92 10.42,22 13.5,22A6.5,6.5 0 0,0 20,15.5V11.81C21.16,11.39 22,10.29 22,9A3,3 0 0,0 19,6A3,3 0 0,0 16,9C16,10.29 16.84,11.4 18,11.81V15.41C18,17.91 16,19.91 13.5,19.91C11.5,19.91 9.82,18.7 9.22,16.9C12,16.3 14,13.8 14,11V2H10V5H12V11A4,4 0 0,1 8,15A4,4 0 0,1 4,11V5H6V2H2Z",this.hass.localize("ui.panel.config.zwave_js.rebuild_network_routes.introduction"),this.hass.localize("ui.panel.config.zwave_js.rebuild_network_routes.traffic_warning"),this._startRebuildingRoutes,this.hass.localize("ui.panel.config.zwave_js.rebuild_network_routes.start_rebuilding_routes")),"started"===this._status?(0,k.qy)(j||(j=(0,l.A)([' <div class="status"> <p> <b> '," </b> </p> <p> "," </p> </div> ",' <mwc-button slot="secondaryAction" @click="','"> ',' </mwc-button> <mwc-button slot="primaryAction" @click="','"> '," </mwc-button> "])),this.hass.localize("ui.panel.config.zwave_js.rebuild_network_routes.in_progress"),this.hass.localize("ui.panel.config.zwave_js.rebuild_network_routes.run_in_background"),this._progress_total?"":(0,k.qy)(M||(M=(0,l.A)([" <mwc-linear-progress indeterminate> </mwc-linear-progress> "]))),this._stopRebuildingRoutes,this.hass.localize("ui.panel.config.zwave_js.rebuild_network_routes.stop_rebuilding_routes"),this.closeDialog,this.hass.localize("ui.common.close")):"","failed"===this._status?(0,k.qy)(D||(D=(0,l.A)([' <div class="flex-container"> <ha-svg-icon .path="','" class="failed"></ha-svg-icon> <div class="status"> <p> ',' </p> </div> </div> <mwc-button slot="primaryAction" @click="','"> '," </mwc-button> "])),Z,this.hass.localize("ui.panel.config.zwave_js.rebuild_network_routes.rebuilding_routes_failed"),this.closeDialog,this.hass.localize("ui.common.close")):"","finished"===this._status?(0,k.qy)(q||(q=(0,l.A)([' <div class="flex-container"> <ha-svg-icon .path="','" class="success"></ha-svg-icon> <div class="status"> <p> ',' </p> </div> </div> <mwc-button slot="primaryAction" @click="','"> '," </mwc-button> "])),"M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z",this.hass.localize("ui.panel.config.zwave_js.rebuild_network_routes.rebuilding_routes_complete"),this.closeDialog,this.hass.localize("ui.common.close")):"","cancelled"===this._status?(0,k.qy)(R||(R=(0,l.A)([' <div class="flex-container"> <ha-svg-icon .path="','" class="failed"></ha-svg-icon> <div class="status"> <p> ',' </p> </div> </div> <mwc-button slot="primaryAction" @click="','"> '," </mwc-button> "])),Z,this.hass.localize("ui.panel.config.zwave_js.rebuild_network_routes.rebuilding_routes_cancelled"),this.closeDialog,this.hass.localize("ui.common.close")):"",this._progress_total&&"finished"!==this._status?(0,k.qy)(V||(V=(0,l.A)([' <mwc-linear-progress determinate .progress="','" .buffer="','"> </mwc-linear-progress> '])),this._progress_finished,this._progress_in_progress):""):k.s6}},{kind:"method",key:"_fetchData",value:(e=(0,a.A)((0,o.A)().mark((function s(){return(0,o.A)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(this.hass){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,(0,A.Is)(this.hass,{entry_id:this.entry_id});case 4:s.sent.controller.is_rebuilding_routes&&(this._status="started",this._subscribed=(0,A.S0)(this.hass,this.entry_id,this._handleMessage.bind(this)));case 6:case"end":return s.stop()}}),s,this)}))),function(){return e.apply(this,arguments)})},{kind:"method",key:"_startRebuildingRoutes",value:function(){this.hass&&((0,A.Lx)(this.hass,this.entry_id),this._status="started",this._subscribed=(0,A.S0)(this.hass,this.entry_id,this._handleMessage.bind(this)))}},{kind:"method",key:"_stopRebuildingRoutes",value:function(){this.hass&&((0,A.Tx)(this.hass,this.entry_id),this._unsubscribe(),this._status="cancelled")}},{kind:"method",key:"_handleMessage",value:function(s){if("rebuild routes progress"===s.event){for(var t=0,e=0,i=0,n=Object.values(s.rebuild_routes_status);i<n.length;i++){var r=n[i];"pending"===r&&e++,["skipped","failed","done"].includes(r)&&t++}this._progress_total=Object.keys(s.rebuild_routes_status).length,this._progress_finished=t/this._progress_total,this._progress_in_progress=e/this._progress_total}"rebuild routes done"===s.event&&(this._unsubscribe(),this._status="finished")}},{kind:"method",key:"_unsubscribe",value:function(){this._subscribed&&(this._subscribed.then((function(s){return s()})),this._subscribed=void 0)}},{kind:"get",static:!0,key:"styles",value:function(){return[z.nA,(0,k.AH)(H||(H=(0,l.A)([".success{color:var(--success-color)}.failed{color:var(--error-color)}.flex-container{display:flex;align-items:center}ha-svg-icon{width:68px;height:48px}ha-svg-icon.introduction{color:var(--primary-color)}.flex-container ha-svg-icon{margin-right:20px;margin-inline-end:20px;margin-inline-start:initial}mwc-linear-progress{margin-top:8px}"])))]}}]}}),k.WF),r(),s.next=46;break;case 43:s.prev=43,s.t2=s.catch(0),r(s.t2);case 46:case"end":return s.stop()}}),s,null,[[0,43]])})));return function(t,e){return s.apply(this,arguments)}}())}}]);
//# sourceMappingURL=29263.8qsZuksBqLo.js.map