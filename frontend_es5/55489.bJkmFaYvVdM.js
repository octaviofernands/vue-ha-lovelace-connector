"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[55489],{99449:function(e,t,r){var a,n,i,o,s,c,d=r(64599),h=r(35806),l=r(71008),u=r(62193),v=r(2816),f=r(27927),g=(r(81027),r(50289)),p=r(29818),k=r(55321);r(88400),(0,f.A)([(0,p.EM)("ha-timeline")],(function(e,t){var r=function(t){function r(){var t;(0,l.A)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t=(0,u.A)(this,r,[].concat(n)),e(t),t}return(0,v.A)(r,t),(0,h.A)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,p.MZ)({type:Boolean,reflect:!0})],key:"label",value:function(){return!1}},{kind:"field",decorators:[(0,p.MZ)({type:Boolean,reflect:!0})],key:"raised",value:function(){return!1}},{kind:"field",decorators:[(0,p.MZ)({reflect:!0,type:Boolean})],key:"notEnabled",value:function(){return!1}},{kind:"field",decorators:[(0,p.MZ)({type:Boolean})],key:"lastItem",value:function(){return!1}},{kind:"field",decorators:[(0,p.MZ)({type:String})],key:"icon",value:void 0},{kind:"field",decorators:[(0,p.MZ)({attribute:!1})],key:"moreItems",value:void 0},{kind:"field",decorators:[(0,p.wk)()],key:"_showMore",value:function(){return!1}},{kind:"method",key:"render",value:function(){return(0,g.qy)(a||(a=(0,d.A)([' <div class="timeline-start"> '," ",' </div> <div class="content"> <slot></slot> '," </div> "])),this.label?"":(0,g.qy)(n||(n=(0,d.A)([' <ha-svg-icon .path="','"></ha-svg-icon> '])),this.icon||"M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"),this.lastItem?"":(0,g.qy)(i||(i=(0,d.A)(['<div class="line"></div>']))),this.moreItems?(0,g.qy)(o||(o=(0,d.A)([" <div> "," </div> "])),this._showMore||1===this.moreItems.length?this.moreItems:(0,g.qy)(s||(s=(0,d.A)([' <button class="link" @click="','"> Show '," more items </button> "])),this._handleShowMore,this.moreItems.length)):"")}},{kind:"method",key:"_handleShowMore",value:function(){this._showMore=!0}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,g.AH)(c||(c=(0,d.A)([":host{display:flex;flex-direction:row}:host(:not([lastItem])){min-height:50px}:host([label]){margin-top:-8px;font-style:italic;color:var(--timeline-label-color,var(--secondary-text-color))}.timeline-start{display:flex;flex-direction:column;align-items:center;margin-right:8px;margin-inline-end:8px;margin-inline-start:initial;width:24px}:host([notEnabled]) ha-svg-icon{opacity:.5}ha-svg-icon{color:var(--timeline-ball-color,var(--timeline-color,var(--secondary-text-color)));border-radius:50%}:host([raised]) ha-svg-icon{transform:scale(1.3)}.line{flex:1;width:2px;background-color:var(--timeline-line-color,var(--timeline-color,var(--secondary-text-color)));margin:4px 0}.content{margin-top:2px}:host(:not([lastItem])) .content{padding-bottom:16px}:host([label]) .content{margin-top:0;padding-top:6px}"]))),k.og]}}]}}),g.WF)},95998:function(e,t,r){var a,n=r(64599),i=r(35806),o=r(71008),s=r(62193),c=r(2816),d=r(27927),h=(r(81027),r(14137),r(51431)),l=r(50289),u=r(29818);r(31979),r(4169),(0,d.A)([(0,u.EM)("ha-trace-blueprint-config")],(function(e,t){var r=function(t){function r(){var t;(0,o.A)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t=(0,s.A)(this,r,[].concat(n)),e(t),t}return(0,c.A)(r,t),(0,i.A)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,u.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,u.MZ)({attribute:!1})],key:"trace",value:void 0},{kind:"method",key:"render",value:function(){return(0,l.qy)(a||(a=(0,n.A)([' <ha-code-editor .value="','" readOnly="readOnly" dir="ltr"></ha-code-editor> '])),(0,h.dump)(this.trace.blueprint_inputs||"").trimRight())}}]}}),l.WF)},30308:function(e,t,r){var a,n,i=r(64599),o=r(35806),s=r(71008),c=r(62193),d=r(2816),h=r(27927),l=(r(81027),r(14137),r(51431)),u=r(50289),v=r(29818);r(31979),r(4169),(0,h.A)([(0,v.EM)("ha-trace-config")],(function(e,t){var r=function(t){function r(){var t;(0,s.A)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t=(0,c.A)(this,r,[].concat(n)),e(t),t}return(0,d.A)(r,t),(0,o.A)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,v.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,v.MZ)({attribute:!1})],key:"trace",value:void 0},{kind:"method",key:"render",value:function(){return(0,u.qy)(a||(a=(0,i.A)([' <ha-code-editor .value="','" readOnly="readOnly" dir="ltr"></ha-code-editor> '])),(0,l.dump)(this.trace.config).trimRight())}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,u.AH)(n||(n=(0,i.A)([""])))]}}]}}),u.WF)},48467:function(e,t,r){var a=r(22858).A,n=r(33994).A;r.a(e,function(){var e=a(n().mark((function e(t,a){var i,o,s,c,d,h,l,u,v,f,g,p,k,m;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=r(64599),o=r(35806),s=r(71008),c=r(62193),d=r(2816),h=r(27927),l=r(81027),u=r(50289),v=r(29818),r(49444),f=r(61558),!(g=t([f])).then){e.next=21;break}return e.next=17,g;case 17:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=22;break;case 21:e.t0=g;case 22:f=e.t0[0],(0,h.A)([(0,v.EM)("ha-trace-logbook")],(function(e,t){var r=function(t){function r(){var t;(0,s.A)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t=(0,c.A)(this,r,[].concat(n)),e(t),t}return(0,d.A)(r,t),(0,o.A)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,v.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,v.MZ)({type:Boolean,reflect:!0})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,v.MZ)({attribute:!1})],key:"trace",value:void 0},{kind:"field",decorators:[(0,v.MZ)({attribute:!1})],key:"logbookEntries",value:void 0},{kind:"method",key:"render",value:function(){return this.logbookEntries.length?(0,u.qy)(p||(p=(0,i.A)([' <ha-logbook-renderer relative-time .hass="','" .entries="','" .narrow="','"></ha-logbook-renderer> <hat-logbook-note .domain="','"></hat-logbook-note> '])),this.hass,this.logbookEntries,this.narrow,this.trace.domain):(0,u.qy)(k||(k=(0,i.A)(['<div class="padded-box"> No Logbook entries found for this step. </div>'])))}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,u.AH)(m||(m=(0,i.A)([".padded-box{padding:16px}"])))]}}]}}),u.WF),a(),e.next=30;break;case 27:e.prev=27,e.t2=e.catch(0),a(e.t2);case 30:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(t,r){return e.apply(this,arguments)}}())},49326:function(e,t,r){var a=r(22858).A,n=r(33994).A;r.a(e,function(){var e=a(n().mark((function e(t,a){var i,o,s,c,d,h,l,u,v,f,g,p,k,m,y,b,A,_,x,M,H,L,w,V,q,E,I,Z,C,N,R,P,F,z,T,S,W,D,O,B,j,J,U,K,$,G,Q,X,Y;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=r(64782),o=r(50281),s=r(64599),c=r(35806),d=r(71008),h=r(62193),l=r(2816),u=r(27927),v=r(81027),f=r(88557),g=r(39805),p=r(79243),k=r(97741),m=r(89655),y=r(18193),b=r(10507),A=r(14137),_=r(16891),x=r(51431),M=r(50289),H=r(29818),L=r(85323),w=r(8581),r(31979),r(4169),r(49444),V=r(38545),q=r(61558),E=r(39302),!(I=t([w,q])).then){e.next=48;break}return e.next=44,I;case 44:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=49;break;case 48:e.t0=I;case 49:Z=e.t0,w=Z[0],q=Z[1],C=["path","timestamp","result","error","changed_variables"],Y=["step_config","changed_variables","logbook"],(0,u.A)([(0,H.EM)("ha-trace-path-details")],(function(e,t){var r=function(t){function r(){var t;(0,d.A)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t=(0,h.A)(this,r,[].concat(n)),e(t),t}return(0,l.A)(r,t),(0,c.A)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,H.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,H.MZ)({type:Boolean,reflect:!0})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,H.MZ)({attribute:!1})],key:"trace",value:void 0},{kind:"field",decorators:[(0,H.MZ)({attribute:!1})],key:"logbookEntries",value:void 0},{kind:"field",decorators:[(0,H.MZ)({attribute:!1})],key:"selected",value:void 0},{kind:"field",decorators:[(0,H.MZ)({attribute:!1})],key:"renderedNodes",value:function(){return{}}},{kind:"field",decorators:[(0,H.MZ)({attribute:!1})],key:"trackedNodes",value:void 0},{kind:"field",decorators:[(0,H.wk)()],key:"_view",value:function(){return"step_config"}},{kind:"method",key:"render",value:function(){var e=this;return(0,M.qy)(N||(N=(0,s.A)([' <div class="padded-box trace-info"> ',' </div> <div class="tabs top"> '," </div> "," "])),this._renderSelectedTraceInfo(),Y.map((function(t){return(0,M.qy)(R||(R=(0,s.A)([' <button .view="','" class="','" @click="','"> '," </button> "])),t,(0,L.H)({active:e._view===t}),e._showTab,e.hass.localize("ui.panel.config.automation.trace.tabs.".concat(t)))})),"step_config"===this._view?this._renderSelectedConfig():"changed_variables"===this._view?this._renderChangedVars():this._renderLogbook())}},{kind:"method",key:"_renderSelectedTraceInfo",value:function(){var e,t=this,r=this.trace.trace;if(null===(e=this.selected)||void 0===e||!e.path)return this.hass.localize("ui.panel.config.automation.trace.path.choose");var a=this.selected.path.split("/");if("default"===a[a.length-1]){var n,i=r[a.slice(0,a.length-1).join("/")];if(i&&"default"===(null===(n=i[0])||void 0===n||null===(n=n.result)||void 0===n?void 0:n.choice))return this.hass.localize("ui.panel.config.automation.trace.path.default_action_executed")}if(!(this.selected.path in r))return this.hass.localize("ui.panel.config.automation.trace.path.no_further_execution");for(var c=[],d=!1,h=function(){var e=u[l];if(d){if(e in t.renderedNodes)return 0}else{if(e!==t.selected.path)return 1;d=!0}var a=r[e];c.push(a.map((function(r,n){var i=r,c=(i.path,i.timestamp),d=i.result,h=i.error,l=(i.changed_variables,(0,o.A)(i,C));return!1===(null==d?void 0:d.enabled)?(0,M.qy)(P||(P=(0,s.A)(["",""])),t.hass.localize("ui.panel.config.automation.trace.path.disabled_step")):(0,M.qy)(F||(F=(0,s.A)([" "," "," "," <br> "," "," "," "])),e===t.selected.path?"":(0,M.qy)(z||(z=(0,s.A)(["<h2> "," </h2>"])),e.substring(t.selected.path.length+1)),1===a.length?M.s6:(0,M.qy)(T||(T=(0,s.A)(["<h3> "," </h3>"])),t.hass.localize("ui.panel.config.automation.trace.path.iteration",{number:n+1})),t.hass.localize("ui.panel.config.automation.trace.path.executed",{time:(0,w.yg)(new Date(c),t.hass.locale,t.hass.config)}),h?(0,M.qy)(S||(S=(0,s.A)(['<div class="error"> '," </div>"])),t.hass.localize("ui.panel.config.automation.trace.path.error",{error:h})):M.s6,d?(0,M.qy)(W||(W=(0,s.A)([""," <pre>","</pre>"])),t.hass.localize("ui.panel.config.automation.trace.path.result"),(0,x.dump)(d)):M.s6,0===Object.keys(l).length?M.s6:(0,M.qy)(D||(D=(0,s.A)(["<pre>","</pre>"])),(0,x.dump)(l)))})))},l=0,u=Object.keys(this.trace.trace);l<u.length&&0!==h();l++);return c}},{kind:"method",key:"_renderSelectedConfig",value:function(){var e;if(null===(e=this.selected)||void 0===e||!e.path)return M.s6;var t=(0,V.Ci)(this.trace.config,this.selected.path);return t?(0,M.qy)(O||(O=(0,s.A)(['<ha-code-editor .value="','" readOnly="readOnly" dir="ltr"></ha-code-editor>'])),(0,x.dump)(t).trimEnd()):this.hass.localize("ui.panel.config.automation.trace.path.unable_to_find_config")}},{kind:"method",key:"_renderChangedVars",value:function(){var e=this,t=this.trace.trace[this.selected.path];return void 0===t?(0,M.qy)(B||(B=(0,s.A)(['<div class="padded-box"> '," </div>"])),this.hass.localize("ui.panel.config.automation.trace.path.step_not_executed")):(0,M.qy)(j||(j=(0,s.A)([' <div class="padded-box"> '," </div> "])),t.map((function(r,a){return(0,M.qy)(J||(J=(0,s.A)([" "," "," "])),t.length>1?(0,M.qy)(U||(U=(0,s.A)(["<p> "," </p>"])),e.hass.localize("ui.panel.config.automation.trace.path.iteration",{number:a+1})):"",0===Object.keys(r.changed_variables||{}).length?e.hass.localize("ui.panel.config.automation.trace.path.no_variables_changed"):(0,M.qy)(K||(K=(0,s.A)(["<pre>","</pre>"])),(0,x.dump)(r.changed_variables).trimEnd()))})))}},{kind:"method",key:"_renderLogbook",value:function(){var e,t=this.trace.trace,r=t[this.selected.path],a=Object.keys(this.trackedNodes),n=a.indexOf(this.selected.path);if(-1===n)return(0,M.qy)($||($=(0,s.A)(['<div class="padded-box"> '," </div>"])),this.hass.localize("ui.panel.config.automation.trace.path.step_not_executed"));if(n===a.length-1){var o=new Date(r[0].timestamp),c=this.logbookEntries.findIndex((function(e){return new Date(1e3*e.when)>=o}));e=-1===c?[]:this.logbookEntries.slice(c)}else{var d=t[a[n+1]],h=new Date(r[0].timestamp),l=new Date(d[0].timestamp);e=[];var u,v=(0,i.A)(this.logbookEntries||[]);try{for(v.s();!(u=v.n()).done;){var f=u.value,g=new Date(1e3*f.when);if(g>=h){if(!(g<l))break;e.push(f)}}}catch(p){v.e(p)}finally{v.f()}}return e.length?(0,M.qy)(G||(G=(0,s.A)([' <ha-logbook-renderer relative-time .hass="','" .entries="','" .narrow="','"></ha-logbook-renderer> <hat-logbook-note .domain="','"></hat-logbook-note> '])),this.hass,e,this.narrow,this.trace.domain):(0,M.qy)(Q||(Q=(0,s.A)(['<div class="padded-box"> '," </div>"])),this.hass.localize("ui.panel.config.automation.trace.path.no_logbook_entries"))}},{kind:"method",key:"_showTab",value:function(e){this._view=e.target.view}},{kind:"get",static:!0,key:"styles",value:function(){return[E.h,(0,M.AH)(X||(X=(0,s.A)([".padded-box{margin:16px}:host(:not([narrow])) .trace-info{min-height:250px}pre{margin:0}.error{color:var(--error-color)}"])))]}}]}}),M.WF),a(),e.next=61;break;case 58:e.prev=58,e.t2=e.catch(0),a(e.t2);case 61:case"end":return e.stop()}}),e,null,[[0,58]])})));return function(t,r){return e.apply(this,arguments)}}())},1877:function(e,t,r){var a=r(22858).A,n=r(33994).A;r.a(e,function(){var e=a(n().mark((function e(t,a){var i,o,s,c,d,h,l,u,v,f,g,p,k;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=r(64599),o=r(35806),s=r(71008),c=r(62193),d=r(2816),h=r(27927),l=r(81027),u=r(50289),v=r(29818),r(49444),f=r(40521),!(g=t([f])).then){e.next=21;break}return e.next=17,g;case 17:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=22;break;case 21:e.t0=g;case 22:f=e.t0[0],(0,h.A)([(0,v.EM)("ha-trace-timeline")],(function(e,t){var r=function(t){function r(){var t;(0,s.A)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t=(0,c.A)(this,r,[].concat(n)),e(t),t}return(0,d.A)(r,t),(0,o.A)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,v.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,v.MZ)({attribute:!1})],key:"trace",value:void 0},{kind:"field",decorators:[(0,v.MZ)({attribute:!1})],key:"logbookEntries",value:void 0},{kind:"field",decorators:[(0,v.MZ)({attribute:!1})],key:"selected",value:void 0},{kind:"method",key:"render",value:function(){return(0,u.qy)(p||(p=(0,i.A)([' <hat-trace-timeline .hass="','" .trace="','" .logbookEntries="','" .selectedPath="','" allowPick> </hat-trace-timeline> <hat-logbook-note .domain="','"></hat-logbook-note> '])),this.hass,this.trace,this.logbookEntries,this.selected.path,this.trace.domain)}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,u.AH)(k||(k=(0,i.A)([":host{display:block;padding:16px}"])))]}}]}}),u.WF),a(),e.next=30;break;case 27:e.prev=27,e.t2=e.catch(0),a(e.t2);case 30:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(t,r){return e.apply(this,arguments)}}())},49444:function(e,t,r){var a,n,i=r(64599),o=r(35806),s=r(71008),c=r(62193),d=r(2816),h=r(27927),l=(r(81027),r(50289)),u=r(29818);(0,h.A)([(0,u.EM)("hat-logbook-note")],(function(e,t){var r=function(t){function r(){var t;(0,s.A)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t=(0,c.A)(this,r,[].concat(n)),e(t),t}return(0,d.A)(r,t),(0,o.A)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,u.MZ)()],key:"domain",value:function(){return"automation"}},{kind:"method",key:"render",value:function(){return(0,l.qy)(a||(a=(0,i.A)([" Not all shown logbook entries might be related to this ",". "])),this.domain)}},{kind:"field",static:!0,key:"styles",value:function(){return(0,l.AH)(n||(n=(0,i.A)([":host{display:block;text-align:center;font-style:italic;padding:16px;margin-top:8px}"])))}}]}}),l.WF)},58610:function(e,t,r){var a,n,i,o,s,c,d,h,l,u,v,f,g,p,k,m,y,b,A,_,x,M,H,L,w,V,q,E,I,Z,C,N,R,P,F,z,T,S,W=r(64782),D=r(64599),O=r(35806),B=r(71008),j=r(62193),J=r(2816),U=r(27927),K=r(35890),$=(r(81027),r(44124),r(82386),r(39805),r(97741),r(33231),r(10507),r(39790),r(36604),r(64498),r(253),r(94438),r(16891),r(4525),r(50289)),G=r(29818),Q=r(21863),X=r(34897),Y=r(55979),ee=(r(4169),r(9871),r(89655),r(54846),r(66555),r(85323)),te=10,re=30,ae=((0,U.A)([(0,G.EM)("hat-graph-branch")],(function(e,t){var r=function(t){function r(){var t;(0,B.A)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t=(0,j.A)(this,r,[].concat(n)),e(t),t}return(0,J.A)(r,t),(0,O.A)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,G.MZ)({type:Boolean,reflect:!0})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,G.MZ)({type:Boolean})],key:"selected",value:function(){return!1}},{kind:"field",decorators:[(0,G.MZ)({type:Boolean})],key:"start",value:function(){return!1}},{kind:"field",decorators:[(0,G.MZ)({type:Boolean})],key:"short",value:function(){return!1}},{kind:"field",decorators:[(0,G.wk)()],key:"_branches",value:function(){return[]}},{kind:"field",key:"_totalWidth",value:function(){return 0}},{kind:"field",key:"_maxHeight",value:function(){return 0}},{kind:"method",key:"_updateBranches",value:function(e){var t=0,r=[],a=[];e.target.assignedElements().forEach((function(e){var n=e.clientWidth,i=e.clientHeight;a.push({x:n/2+t,height:i,start:e.hasAttribute("graphStart"),end:e.hasAttribute("graphEnd"),track:e.hasAttribute("track")}),t+=n,r.push(i)})),this._totalWidth=t,this._maxHeight=Math.max.apply(Math,r),this._branches=a.sort((function(e,t){return e.track&&!t.track?1:e.track&&t.track?0:-1}))}},{kind:"method",key:"render",value:function(){var e=this;return(0,$.qy)(a||(a=(0,D.A)([' <slot name="head"></slot> ',' <div id="branches"> <svg id="lines" width="','" height="','"> ',' </svg> <slot @slotchange="','"></slot> </div> '," "])),this.start?"":(0,$.JW)(n||(n=(0,D.A)([' <svg id="top" width="','"> '," </svg> "])),this._totalWidth,this._branches.map((function(t){return t.start?"":(0,$.JW)(i||(i=(0,D.A)([' <path class="','" d="\n                      M '," 0\n                      L "," ",'\n                      "/> '])),(0,ee.H)({track:t.track}),e._totalWidth/2,t.x,20)}))),this._totalWidth,this._maxHeight,this._branches.map((function(t){return t.end?"":(0,$.JW)(o||(o=(0,D.A)([' <path class="','" d="\n                        M '," ","\n                        v ",'\n                        "/> '])),(0,ee.H)({track:t.track}),t.x,t.height,e._maxHeight-t.height)})),this._updateBranches,this.short?"":(0,$.JW)(s||(s=(0,D.A)([' <svg id="bottom" width="','"> '," </svg> "])),this._totalWidth,this._branches.map((function(t){return t.end?"":(0,$.JW)(c||(c=(0,D.A)([' <path class="','" d="\n                      M '," 0\n                      V ","\n                      L "," ",'\n                      "/> '])),(0,ee.H)({track:t.track}),t.x,te,e._totalWidth/2,30)}))))}},{kind:"get",static:!0,key:"styles",value:function(){return(0,$.AH)(d||(d=(0,D.A)([":host{position:relative;display:flex;flex-direction:column;align-items:center}:host(:focus){outline:0}#branches{position:relative;display:flex;flex-direction:row;align-items:start}::slotted(*){z-index:1}::slotted([slot=head]){margin-bottom:calc(var(--hat-graph-branch-height)/ -2)}#lines{position:absolute}#top{height:var(--hat-graph-branch-height)}#bottom{height:calc(var(--hat-graph-branch-height) + var(--hat-graph-spacing))}path{stroke:var(--stroke-clr);stroke-width:2;fill:none}path.track{stroke:var(--track-clr)}:host([disabled]) path{stroke:var(--disabled-clr)}"])))}}]}}),$.WF),r(29193),r(36016),r(98185),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),ne=((0,U.A)([(0,G.EM)("hat-graph-node")],(function(e,t){var r=function(t){function r(){var t;(0,B.A)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t=(0,j.A)(this,r,[].concat(n)),e(t),t}return(0,J.A)(r,t),(0,O.A)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,G.MZ)()],key:"iconPath",value:void 0},{kind:"field",decorators:[(0,G.MZ)({type:Boolean,reflect:!0})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,G.MZ)({type:Boolean})],key:"error",value:function(){return!1}},{kind:"field",decorators:[(0,G.MZ)({reflect:!0,type:Boolean})],key:"notEnabled",value:function(){return!1}},{kind:"field",decorators:[(0,G.MZ)({reflect:!0,type:Boolean})],key:"graphStart",value:function(){return!1}},{kind:"field",decorators:[(0,G.MZ)({type:Boolean,attribute:"nofocus"})],key:"noFocus",value:function(){return!1}},{kind:"field",decorators:[(0,G.MZ)({reflect:!0,type:Number})],key:"badge",value:void 0},{kind:"method",key:"updated",value:function(e){e.has("noFocus")&&(this.hasAttribute("tabindex")||this.noFocus?void 0!==e.get("noFocus")&&this.noFocus&&this.removeAttribute("tabindex"):this.setAttribute("tabindex","0"))}},{kind:"method",key:"render",value:function(){var e=re+(this.graphStart?2:11);return(0,$.qy)(h||(h=(0,D.A)([' <svg class="','" width="','px" height="','px" viewBox="-'," -"," "," ",'"> ',' <g class="node"> <circle cx="0" cy="0" r="','"/> '," ",' <g style="pointer-events:none" transform="translate(-12 -12)"> '," </g> </g> </svg> "])),ae?"safari":"",40,e,Math.ceil(20),this.graphStart?Math.ceil(e/2):Math.ceil(25),40,e,this.graphStart?$.s6:(0,$.JW)(l||(l=(0,D.A)([' <path class="connector" d="\n              M 0 ','\n              L 0 0\n            " line-caps="round"/> '])),-25),15,this.error?(0,$.JW)(u||(u=(0,D.A)([' <g class="error"> <circle cx="-12" cy="','" r="8"></circle> <path transform="translate(-18 -21) scale(.5)" class="exclamation" d="','/"> </path></g> '])),-15,"M10 3H14V14H10V3M10 21V17H14V21H10Z"):$.s6,this.badge?(0,$.JW)(v||(v=(0,D.A)([' <g class="number"> <circle cx="12" cy="','" r="8"></circle> <text x="12" y="','" text-anchor="middle" alignment-baseline="middle">',"</text> </g> "])),-15,-15,this.badge>9?"9+":this.badge):$.s6,this.iconPath?(0,$.JW)(f||(f=(0,D.A)(['<path class="icon" d="','/"></path>'])),this.iconPath):(0,$.JW)(g||(g=(0,D.A)(['<foreignObject><span class="icon"><slot name="icon"></slot></span></foreignObject>']))))}},{kind:"get",static:!0,key:"styles",value:function(){return(0,$.AH)(p||(p=(0,D.A)([":host{display:flex;flex-direction:column;min-width:calc(var(--hat-graph-node-size) + var(--hat-graph-spacing));height:calc(var(--hat-graph-node-size) + var(--hat-graph-spacing) + 1px)}:host([graphStart]){height:calc(var(--hat-graph-node-size) + 2px)}:host([track]){--stroke-clr:var(--track-clr);--icon-clr:var(--default-icon-clr)}:host([active]) circle{--stroke-clr:var(--active-clr);--icon-clr:var(--default-icon-clr)}:host(:focus){outline:0}:host(:hover) circle{--stroke-clr:var(--hover-clr);--icon-clr:var(--default-icon-clr)}:host([notEnabled]) circle{--stroke-clr:var(--disabled-clr)}:host([notEnabled][active]) circle{--stroke-clr:var(--disabled-active-clr)}:host([notEnabled]:hover) circle{--stroke-clr:var(--disabled-hover-clr)}svg:not(.safari){width:100%;height:100%}circle,path.connector{stroke:var(--stroke-clr);stroke-width:2;fill:none}circle{fill:var(--background-clr);stroke:var(--circle-clr,var(--stroke-clr))}.error circle{fill:var(--error-color);stroke:none;stroke-width:0}.error .exclamation{fill:var(--text-primary-color)}.number circle{fill:var(--track-clr);stroke:none;stroke-width:0}.number text{font-size:10px;fill:var(--text-primary-color)}path.icon{fill:var(--icon-clr)}foreignObject{width:24px;height:24px}.icon{color:var(--icon-clr)}"])))}}]}}),$.WF),(0,U.A)([(0,G.EM)("hat-graph-spacer")],(function(e,t){var r=function(t){function r(){var t;(0,B.A)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t=(0,j.A)(this,r,[].concat(n)),e(t),t}return(0,J.A)(r,t),(0,O.A)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,G.MZ)({reflect:!0,type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"method",key:"render",value:function(){return(0,$.qy)(k||(k=(0,D.A)([' <svg viewBox="-'," 0 10 ",'"> <path d="\n              M 0 ','\n              V 0\n            " line-caps="round"/> } </svg> '])),5,41,41)}},{kind:"get",static:!0,key:"styles",value:function(){return(0,$.AH)(m||(m=(0,D.A)([":host{display:flex;flex-direction:column;align-items:center}svg{width:var(--hat-graph-spacing);height:calc(var(--hat-graph-spacing) + var(--hat-graph-node-size) + 1px)}:host([track]){--stroke-clr:var(--track-clr)}:host-context([disabled]){--stroke-clr:var(--disabled-clr)}path{stroke:var(--stroke-clr);stroke-width:2;fill:none}"])))}}]}}),$.WF),r(61070));(0,U.A)([(0,G.EM)("hat-script-graph")],(function(e,t){var r=function(t){function r(){var t;(0,B.A)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t=(0,j.A)(this,r,[].concat(n)),e(t),t}return(0,J.A)(r,t),(0,O.A)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,G.MZ)({attribute:!1})],key:"trace",value:void 0},{kind:"field",decorators:[(0,G.MZ)({attribute:!1})],key:"selected",value:void 0},{kind:"field",key:"hass",value:void 0},{kind:"field",key:"renderedNodes",value:function(){return{}}},{kind:"field",key:"trackedNodes",value:function(){return{}}},{kind:"method",key:"selectNode",value:function(e,t){var r=this;return function(){(0,X.r)(r,"graph-node-selected",{config:e,path:t})}}},{kind:"method",key:"render_trigger",value:function(e,t){var r,a="trigger/".concat(t),n=this.trace&&a in this.trace.trace;return this.renderedNodes[a]={config:e,path:a},n&&(this.trackedNodes[a]=this.renderedNodes[a]),(0,$.qy)(y||(y=(0,D.A)([' <hat-graph-node graphStart ?track="','" @focus="','" ?active="','" .iconPath="','" .notEnabled="','" .error="','" tabindex="','"></hat-graph-node> '])),n,this.selectNode(e,a),this.selected===a,"M21 13H14.4L19.1 17.7L17.7 19.1L13 14.4V21H11V14.3L6.3 19L4.9 17.6L9.4 13H3V11H9.6L4.9 6.3L6.3 4.9L11 9.6V3H13V9.4L17.6 4.8L19 6.3L14.3 11H21V13Z",!1===e.enabled,null===(r=this.trace.trace[a])||void 0===r?void 0:r.some((function(e){return e.error})),n?"0":"-1")}},{kind:"method",key:"render_condition",value:function(e,t){var r="condition/".concat(t);return this.renderedNodes[r]={config:e,path:r},this.trace&&r in this.trace.trace&&(this.trackedNodes[r]=this.renderedNodes[r]),this.render_condition_node(e,r)}},{kind:"field",key:"typeRenderers",value:function(){return{condition:this.render_condition_node,and:this.render_condition_node,or:this.render_condition_node,not:this.render_condition_node,service:this.render_service_node,wait_template:this.render_wait_node,wait_for_trigger:this.render_wait_node,repeat:this.render_repeat_node,choose:this.render_choose_node,if:this.render_if_node,sequence:this.render_sequence_node,parallel:this.render_parallel_node,other:this.render_other_node}}},{kind:"method",key:"render_action_node",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=Object.keys(this.typeRenderers).find((function(t){return t in e}))||"other";return this.renderedNodes[t]={config:e,path:t},this.trace&&t in this.trace.trace&&(this.trackedNodes[t]=this.renderedNodes[t]),this.typeRenderers[n].bind(this)(e,t,r,a)}},{kind:"method",key:"render_choose_node",value:function(e,t){var r,a,n,i=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=this.trace.trace[t],d=c?c.map((function(e){return void 0===e.result||"default"===e.result.choice?"default":e.result.choice})):[],h=d.includes("default");return(0,$.qy)(b||(b=(0,D.A)([' <hat-graph-branch tabindex="','" @focus="','" ?track="','" ?active="','" .notEnabled="','"> <hat-graph-node .graphStart="','" .iconPath="','" ?track="','" ?active="','" .notEnabled="','" .error="','" slot="head" nofocus></hat-graph-node> ',' <div ?track="','"> <hat-graph-spacer ?track="','"></hat-graph-spacer> '," </div> </hat-graph-branch> "])),void 0===c?"-1":"0",this.selectNode(e,t),void 0!==c,this.selected===t,s||!1===e.enabled,o,"M11,5H8L12,1L16,5H13V9.43C12.25,9.89 11.58,10.46 11,11.12V5M22,11L18,7V10C14.39,9.85 11.31,12.57 11,16.17C9.44,16.72 8.62,18.44 9.17,20C9.72,21.56 11.44,22.38 13,21.83C14.56,21.27 15.38,19.56 14.83,18C14.53,17.14 13.85,16.47 13,16.17C13.47,12.17 17.47,11.97 17.95,11.97V14.97L22,11M10.63,11.59C9.3,10.57 7.67,10 6,10V7L2,11L6,15V12C7.34,12.03 8.63,12.5 9.64,13.4C9.89,12.76 10.22,12.15 10.63,11.59Z",void 0!==c,this.selected===t,s||!1===e.enabled,null===(r=this.trace.trace[t])||void 0===r?void 0:r.some((function(e){return e.error})),e.choose?null===(a=(0,Q.e)(e.choose))||void 0===a?void 0:a.map((function(r,a){var n="".concat(t,"/choose/").concat(a),o=d.includes(a);return i.renderedNodes[n]={config:e,path:n},o&&(i.trackedNodes[n]=i.renderedNodes[n]),(0,$.qy)(A||(A=(0,D.A)([' <div class="graph-container" ?track="','"> <hat-graph-node .iconPath="','" @focus="','" ?track="','" ?active="','" .notEnabled="','"></hat-graph-node> '," </div> "])),o,!c||o?"M19,19H5V5H15V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V11H19M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z":"M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z",i.selectNode(e,n),o,i.selected===n,s||!1===e.enabled,null!==r.sequence?(0,Q.e)(r.sequence).map((function(t,r){return i.render_action_node(t,"".concat(n,"/sequence/").concat(r),!1,s||!1===e.enabled)})):"")})):"",h,h,null!==e.default?null===(n=(0,Q.e)(e.default))||void 0===n?void 0:n.map((function(r,a){return i.render_action_node(r,"".concat(t,"/default/").concat(a),!1,s||!1===e.enabled)})):"")}},{kind:"method",key:"render_if_node",value:function(e,t){var r,a,n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=this.trace.trace[t],c=!1,d=!1,h=(0,W.A)(s||[]);try{for(h.s();!(a=h.n()).done;){var l,u,v=a.value;if(c||"then"!==(null===(l=v.result)||void 0===l?void 0:l.choice)||(c=!0),(d||"else"!==(null===(u=v.result)||void 0===u?void 0:u.choice))&&v.result||(d=!0),d&&c)break}}catch(f){h.e(f)}finally{h.f()}return(0,$.qy)(_||(_=(0,D.A)([' <hat-graph-branch tabindex="','" @focus="','" ?track="','" ?active="','" .notEnabled="','"> <hat-graph-node .graphStart="','" .iconPath="','" ?track="','" ?active="','" .notEnabled="','" slot="head" nofocus></hat-graph-node> ',' <div class="graph-container" ?track="','"> <hat-graph-node .iconPath="','" ?track="','" ?active="','" .notEnabled="','" nofocus></hat-graph-node> '," </div> </hat-graph-branch> "])),void 0===s?"-1":"0",this.selectNode(e,t),void 0!==s,this.selected===t,o||!1===e.enabled,i,"M14,4L16.29,6.29L13.41,9.17L14.83,10.59L17.71,7.71L20,10V4M10,4H4V10L6.29,7.71L11,12.41V20H13V11.59L7.71,6.29",void 0!==s,this.selected===t,o||!1===e.enabled,e.else?(0,$.qy)(x||(x=(0,D.A)(['<div class="graph-container" ?track="','"> <hat-graph-node .iconPath="','" ?track="','" ?active="','" .notEnabled="','" nofocus></hat-graph-node>'," </div>"])),d,"M19.59,7L12,14.59L6.41,9H11V7H3V15H5V10.41L12,17.41L21,8.41",d,this.selected===t,o||!1===e.enabled,(0,Q.e)(e.else).map((function(r,a){return n.render_action_node(r,"".concat(t,"/else/").concat(a),!1,o||!1===e.enabled)}))):(0,$.qy)(M||(M=(0,D.A)(['<hat-graph-spacer ?track="','"></hat-graph-spacer>'])),d),c,"M20,5.41L18.59,4L7,15.59V9H5V19H15V17H8.41",c,this.selected===t,o||!1===e.enabled,(0,Q.e)(null!==(r=e.then)&&void 0!==r?r:[]).map((function(r,a){return n.render_action_node(r,"".concat(t,"/then/").concat(a),!1,o||!1===e.enabled)})))}},{kind:"method",key:"render_condition_node",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this.trace.trace[t],i=!1,o=!1,s=!1;if(n){var c,d=(0,W.A)(n);try{for(d.s();!(c=d.n()).done;){var h=c.value;if(h.result&&(i=!0,h.result.result?o=!0:s=!0),o&&s)break}}catch(l){d.e(l)}finally{d.f()}}return(0,$.qy)(H||(H=(0,D.A)([' <hat-graph-branch @focus="','" ?track="','" ?active="','" .notEnabled="','" tabindex="','" short> <hat-graph-node .graphStart="','" slot="head" ?track="','" ?active="','" .notEnabled="','" .iconPath="','" nofocus></hat-graph-node> <div style="','" graphStart graphEnd></div> <div ?track="','"></div> <hat-graph-node .iconPath="','" nofocus ?track="','" ?active="','" .notEnabled="','"></hat-graph-node> </hat-graph-branch> '])),this.selectNode(e,t),i,this.selected===t,a||!1===e.enabled,void 0===n?"-1":"0",r,i,this.selected===t,a||!1===e.enabled,"M4 2A2 2 0 0 0 2 4V12H4V8H6V12H8V4A2 2 0 0 0 6 2H4M4 4H6V6H4M22 15.5V14A2 2 0 0 0 20 12H16V22H20A2 2 0 0 0 22 20V18.5A1.54 1.54 0 0 0 20.5 17A1.54 1.54 0 0 0 22 15.5M20 20H18V18H20V20M20 16H18V14H20M5.79 21.61L4.21 20.39L18.21 2.39L19.79 3.61Z","width: ".concat(40,"px;"),o,"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",s,this.selected===t,a||!1===e.enabled)}},{kind:"method",key:"render_repeat_node",value:function(e,t){var r,a=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.trace.trace[t],s=null===(r=this.trace)||void 0===r||null===(r=r.trace["".concat(t,"/repeat/sequence/0")])||void 0===r?void 0:r.length;return(0,$.qy)(L||(L=(0,D.A)([' <hat-graph-branch tabindex="','" @focus="','" ?track="','" ?active="','" .notEnabled="','"> <hat-graph-node .graphStart="','" .iconPath="','" ?track="','" ?active="','" .notEnabled="','" slot="head" nofocus></hat-graph-node> <hat-graph-node .iconPath="','" ?track="','" ?active="','" .notEnabled="','" nofocus .badge="','"></hat-graph-node> <div ?track="','"> '," </div> </hat-graph-branch> "])),void 0===o?"-1":"0",this.selectNode(e,t),t in this.trace.trace,this.selected===t,i||!1===e.enabled,n,"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",t in this.trace.trace,this.selected===t,i||!1===e.enabled,"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z",s>1,this.selected===t,i||!1===e.enabled,s>1?s:void 0,o,(0,Q.e)(e.repeat.sequence).map((function(r,n){return a.render_action_node(r,"".concat(t,"/repeat/sequence/").concat(n),!1,i||!1===e.enabled)})))}},{kind:"method",key:"render_service_node",value:function(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,$.qy)(w||(w=(0,D.A)([' <hat-graph-node .graphStart="','" .iconPath="','" @focus="','" ?track="','" ?active="','" .notEnabled="','" .error="','" tabindex="','"> '," </hat-graph-node> "])),a,e.action?void 0:"M12,5A2,2 0 0,1 14,7C14,7.24 13.96,7.47 13.88,7.69C17.95,8.5 21,11.91 21,16H3C3,11.91 6.05,8.5 10.12,7.69C10.04,7.47 10,7.24 10,7A2,2 0 0,1 12,5M22,19H2V17H22V19Z",this.selectNode(e,t),t in this.trace.trace,this.selected===t,n||!1===e.enabled,null===(r=this.trace.trace[t])||void 0===r?void 0:r.some((function(e){return e.error})),this.trace&&t in this.trace.trace?"0":"-1",e.action?(0,$.qy)(V||(V=(0,D.A)(['<ha-service-icon slot="icon" .hass="','" .service="','"></ha-service-icon>'])),this.hass,e.action):$.s6)}},{kind:"method",key:"render_wait_node",value:function(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,$.qy)(q||(q=(0,D.A)([' <hat-graph-node .graphStart="','" .iconPath="','" @focus="','" ?track="','" ?active="','" .notEnabled="','" .error="','" tabindex="','"></hat-graph-node> '])),a,"M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z",this.selectNode(e,t),t in this.trace.trace,this.selected===t,n||!1===e.enabled,null===(r=this.trace.trace[t])||void 0===r?void 0:r.some((function(e){return e.error})),this.trace&&t in this.trace.trace?"0":"-1")}},{kind:"method",key:"render_sequence_node",value:function(e,t){var r=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.trace.trace[t];return(0,$.qy)(E||(E=(0,D.A)([' <hat-graph-branch tabindex="','" @focus="','" ?track="','" ?active="','" .notEnabled="','"> <div class="graph-container" ?track="','"> <hat-graph-node .graphStart="','" .iconPath="','" ?track="','" ?active="','" .notEnabled="','" slot="head" nofocus></hat-graph-node> '," </div> </hat-graph-branch> "])),void 0===i?"-1":"0",this.selectNode(e,t),t in this.trace.trace,this.selected===t,n||!1===e.enabled,t in this.trace.trace,a,"M7,13V11H21V13H7M7,19V17H21V19H7M7,7V5H21V7H7M3,8V5H2V4H4V8H3M2,17V16H5V20H2V19H4V18.5H3V17.5H4V17H2M4.25,10A0.75,0.75 0 0,1 5,10.75C5,10.95 4.92,11.14 4.79,11.27L3.12,13H5V14H2V13.08L4,11H2V10H4.25Z",t in this.trace.trace,this.selected===t,n||!1===e.enabled,(0,Q.e)(e.sequence).map((function(a,i){return r.render_action_node(a,"".concat(t,"/sequence/").concat(i),!1,n||!1===e.enabled)})))}},{kind:"method",key:"render_parallel_node",value:function(e,t){var r=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.trace.trace[t];return(0,$.qy)(I||(I=(0,D.A)([' <hat-graph-branch tabindex="','" @focus="','" ?track="','" ?active="','" .notEnabled="','"> <hat-graph-node .graphStart="','" .iconPath="','" ?track="','" ?active="','" .notEnabled="','" slot="head" nofocus></hat-graph-node> '," </hat-graph-branch> "])),void 0===i?"-1":"0",this.selectNode(e,t),t in this.trace.trace,this.selected===t,n||!1===e.enabled,a,"M16,4.5V7H5V9H16V11.5L19.5,8M16,12.5V15H5V17H16V19.5L19.5,16",t in this.trace.trace,this.selected===t,n||!1===e.enabled,(0,Q.e)(e.parallel).map((function(a,i){return"sequence"in a?(0,$.qy)(Z||(Z=(0,D.A)(['<div ?track="','"> '," </div>"])),t in r.trace.trace,(0,Q.e)(a.sequence).map((function(a,o){return r.render_action_node(a,"".concat(t,"/parallel/").concat(i,"/sequence/").concat(o),!1,n||!1===e.enabled)}))):r.render_action_node(a,"".concat(t,"/parallel/").concat(i,"/sequence/0"),!1,n||!1===e.enabled)})))}},{kind:"method",key:"render_other_node",value:function(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,$.qy)(C||(C=(0,D.A)([' <hat-graph-node .graphStart="','" .iconPath="','" @focus="','" ?track="','" ?active="','" .error="','" .notEnabled="','"></hat-graph-node> '])),a,ne.O$[(0,Y.pq)(e)]||"M15,4V6H18V18H15V20H20V4M4,4V20H9V18H6V6H9V4H4Z",this.selectNode(e,t),t in this.trace.trace,this.selected===t,null===(r=this.trace.trace[t])||void 0===r?void 0:r.some((function(e){return e.error})),n||!1===e.enabled)}},{kind:"method",key:"render",value:function(){var e=this,t=Object.keys(this.trackedNodes),r="trigger"in this.trace.config?(0,Q.e)(this.trace.config.trigger).map((function(t,r){return e.render_trigger(t,r)})):void 0;try{var a;return(0,$.qy)(N||(N=(0,D.A)([' <div class="parent graph-container"> '," "," "," ",' </div> <div class="actions"> <ha-icon-button .disabled="','" @click="','" .path="','"></ha-icon-button> <ha-icon-button .disabled="','" @click="','" .path="','"></ha-icon-button> </div> '])),r?(0,$.qy)(R||(R=(0,D.A)(['<hat-graph-branch start .short="','"> '," </hat-graph-branch>"])),r.length<2,r):"","condition"in this.trace.config?(0,$.qy)(P||(P=(0,D.A)(["",""])),null===(a=(0,Q.e)(this.trace.config.condition))||void 0===a?void 0:a.map((function(t,r){return e.render_condition(t,r)}))):"","action"in this.trace.config?(0,$.qy)(F||(F=(0,D.A)(["",""])),(0,Q.e)(this.trace.config.action).map((function(t,r){return e.render_action_node(t,"action/".concat(r))}))):"","sequence"in this.trace.config?(0,$.qy)(z||(z=(0,D.A)(["",""])),(0,Q.e)(this.trace.config.sequence).map((function(t,r){return e.render_action_node(t,"sequence/".concat(r),0===r)}))):"",0===t.length||t[0]===this.selected,this._previousTrackedNode,"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",0===t.length||t[t.length-1]===this.selected,this._nextTrackedNode,"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z")}catch(n){return(0,$.qy)(T||(T=(0,D.A)([' <div class="error"> Error rendering graph. Please download trace and share with the developers. </div> '])))}}},{kind:"method",key:"willUpdate",value:function(e){(0,K.A)(r,"willUpdate",this,3)([e]),e.has("trace")&&(this.renderedNodes={},this.trackedNodes={})}},{kind:"method",key:"updated",value:function(e){if((0,K.A)(r,"updated",this,3)([e]),e.has("trace")){if(!this.selected||!(this.selected in this.trackedNodes)){var t=this.trackedNodes[Object.keys(this.trackedNodes)[0]];t&&(0,X.r)(this,"graph-node-selected",t)}if(this.trace){var a,n=Object.keys(this.trace.trace),i=Object.keys(this.renderedNodes).sort((function(e,t){return n.indexOf(e)-n.indexOf(t)})),o={},s={},c=(0,W.A)(i);try{for(c.s();!(a=c.n()).done;){var d=a.value;s[d]=this.renderedNodes[d],d in this.trackedNodes&&(o[d]=this.trackedNodes[d])}}catch(h){c.e(h)}finally{c.f()}this.renderedNodes=s,this.trackedNodes=o}}}},{kind:"method",key:"_previousTrackedNode",value:function(){var e=Object.keys(this.trackedNodes),t=e.indexOf(this.selected)-1;t>=0&&(0,X.r)(this,"graph-node-selected",this.trackedNodes[e[t]])}},{kind:"method",key:"_nextTrackedNode",value:function(){var e=Object.keys(this.trackedNodes),t=e.indexOf(this.selected)+1;t<e.length&&(0,X.r)(this,"graph-node-selected",this.trackedNodes[e[t]])}},{kind:"get",static:!0,key:"styles",value:function(){return(0,$.AH)(S||(S=(0,D.A)([":host{display:flex;--stroke-clr:var(--stroke-color, var(--secondary-text-color));--active-clr:var(--active-color, var(--primary-color));--track-clr:var(--track-color, var(--accent-color));--hover-clr:var(--hover-color, var(--primary-color));--disabled-clr:var(--disabled-color, var(--disabled-text-color));--disabled-active-clr:rgba(var(--rgb-primary-color), 0.5);--disabled-hover-clr:rgba(var(--rgb-primary-color), 0.7);--default-trigger-color:3,169,244;--rgb-trigger-color:var(--trigger-color, var(--default-trigger-color));--background-clr:var(--background-color, white);--default-icon-clr:var(--icon-color, black);--icon-clr:var(--stroke-clr);--hat-graph-spacing:","px;--hat-graph-node-size:","px;--hat-graph-branch-height:","px}.graph-container{display:flex;flex-direction:column;align-items:center}.actions{display:flex;flex-direction:column}.parent{margin-left:8px;margin-top:16px}.error{padding:16px;max-width:300px}"])),te,re,20)}}]}}),$.WF)},40521:function(e,t,r){var a=r(22858).A,n=r(33994).A;r.a(e,function(){var e=a(n().mark((function e(t,a){var i,o,s,c,d,h,l,u,v,f,g,p,k,m,y,b,A,_,x,M,H,L,w,V,q,E,I,Z,C,N,R,P,F,z,T,S,W,D,O,B,j,J,U,K,$,G,Q,X,Y,ee,te,re;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=r(62193),o=r(2816),s=r(27927),c=r(35890),d=r(64599),h=r(71008),l=r(35806),u=r(42942),v=r(48062),f=r(81027),g=r(95737),p=r(89655),k=r(50693),m=r(82115),y=r(10507),b=r(39790),A=r(36016),_=r(43037),x=r(253),M=r(54846),H=r(66555),L=r(96858),w=r(68816),V=r(50289),q=r(29818),E=r(10977),I=r(8581),Z=r(30125),C=r(34897),N=r(69521),R=r(26885),P=r(55979),F=r(82198),z=r(38545),r(99449),!(T=t([I,Z,F])).then){e.next=59;break}return e.next=55,T;case 55:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=60;break;case 59:e.t0=T;case 60:S=e.t0,I=S[0],Z=S[1],F=S[2],Q="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",X="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",Y=function(e,t){return Math.abs(t.getTime()-e.getTime())>1e3},ee=function(){return(0,l.A)((function e(t,r,a){(0,h.A)(this,e),this.hass=t,this.entries=r,this.lastReportedTime=void 0,this.lastReportedTime=new Date(a.timestamp.start)}),[{key:"setLastReportedTime",value:function(e){this.lastReportedTime=e}},{key:"renderTime",value:function(e,t){this.entries.push((0,V.qy)(W||(W=(0,d.A)([" <ha-timeline label> "," later </ha-timeline> "])),(0,Z.K)(e,this.hass.locale,t,!1))),this.lastReportedTime=t}},{key:"maybeRenderTime",value:function(e){return Y(e,this.lastReportedTime)?(this.renderTime(this.lastReportedTime,e),!0):(this.lastReportedTime=e,!1)}}])}(),te=function(){return(0,l.A)((function e(t,r,a){(0,h.A)(this,e),this.entries=t,this.timeTracker=r,this.logbookEntries=a,this.curIndex=void 0,this.pendingItems=[],this.curIndex=a.length>0&&"automation"===a[0].domain?1:0}),[{key:"curItem",get:function(){return this.logbookEntries[this.curIndex]}},{key:"hasNext",get:function(){return this.curIndex<this.logbookEntries.length}},{key:"maybeRenderItem",value:function(){var e=this.curItem;this.curIndex++;var t=new Date(1e3*e.when);if(0!==this.pendingItems.length){var r=this.pendingItems[this.pendingItems.length-1][0];Y(r,t)&&(this._renderLogbookEntries(),this.timeTracker.renderTime(r,t)),this.pendingItems.push([t,e])}else this.pendingItems.push([t,e])}},{key:"flush",value:function(){this.pendingItems.length>0&&this._renderLogbookEntries()}},{key:"_renderLogbookEntries",value:function(){this.timeTracker.maybeRenderTime(this.pendingItems[0][0]);var e,t,r=[];for(e=0;e<Math.min(this.pendingItems.length,2);e++)r.push(this._renderLogbookEntryHelper(this.pendingItems[e][1]));if(e<this.pendingItems.length)for(t=[];e<this.pendingItems.length;e++)t.push(this._renderLogbookEntryHelper(this.pendingItems[e][1]));this.entries.push((0,V.qy)(D||(D=(0,d.A)([' <ha-timeline .icon="','" .moreItems="','"> '," </ha-timeline> "])),"M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",t,r)),this.timeTracker.setLastReportedTime(this.pendingItems[this.pendingItems.length-1][0]),this.pendingItems=[]}},{key:"_renderLogbookEntryHelper",value:function(e){return(0,V.qy)(O||(O=(0,d.A)([""," (",") ","<br>"])),e.name,e.entity_id,e.message||"turned ".concat(e.state))}}])}(),re=function(){return(0,l.A)((function e(t,r,a,n,i,o,s,c){(0,h.A)(this,e),this.hass=t,this.entityReg=r,this.labelReg=a,this.floorReg=n,this.entries=i,this.trace=o,this.logbookRenderer=s,this.timeTracker=c,this.curIndex=0,this.keys=void 0,this.keys=Object.keys(o.trace)}),[{key:"curItem",get:function(){return this._getItem(this.curIndex)}},{key:"hasNext",get:function(){return this.curIndex<this.keys.length}},{key:"renderItem",value:function(){this.curIndex=this._renderItem(this.curIndex)}},{key:"_getItem",value:function(e){return this.trace.trace[this.keys[e]]}},{key:"_renderItem",value:function(e,t,r){var a=this,n=this._getItem(e);if(r){var i=0;return n.forEach((function(r){i=a._renderIteration(e,r,t)})),i}return this._renderIteration(e,n[0],t)}},{key:"_renderIteration",value:function(e,t,r){if((0,z.AB)(t.path))return this._handleTrigger(e,t);for(var a=new Date(t.timestamp);this.logbookRenderer.hasNext&&new Date(1e3*this.logbookRenderer.curItem.when)<a;)this.logbookRenderer.maybeRenderItem();this.logbookRenderer.flush(),this.timeTracker.maybeRenderTime(a);var n,i=t.path;try{n=(0,z.Ci)(this.trace.config,i)}catch(c){return this._renderEntry(i,this.hass.localize("ui.panel.config.automation.trace.messages.path_error",{path:i})),e+1}var o=i.split("/");if(!(2===o.length)&&!r)return this._renderEntry(i,i.replace(/\//g," ")),e+1;if(r||(r=(0,P.pq)(n)),"choose"===r)return this._handleChoose(e);if("repeat"===r)return this._handleRepeat(e);if("if"===r)return this._handleIf(e);if("sequence"===r)return this._handleSequence(e);if("parallel"===r)return this._handleParallel(e);this._renderEntry(i,(0,F.u)(this.hass,this.entityReg,this.labelReg,this.floorReg,n,r),void 0,!1===n.enabled);for(var s=e+1;s<this.keys.length&&this.keys[s].split("/").length!==o.length;s++);return s}},{key:"_handleTrigger",value:function(e,t){var r,a;return this._renderEntry(t.path,this.hass.localize("ui.panel.config.automation.trace.messages.triggered_by",{triggeredBy:null!==(r=t.changed_variables.trigger)&&void 0!==r&&r.alias?"alias":"other",alias:null===(a=t.changed_variables.trigger)||void 0===a?void 0:a.alias,triggeredPath:"trigger"===t.path?"manual":"trigger",trigger:this.trace.trigger,time:(0,I.yg)(new Date(t.timestamp),this.hass.locale,this.hass.config)}),X),e+1}},{key:"_handleChoose",value:function(e){var t,r,a=this.keys[e],n=a.split("/").length,i=this._getItem(e)[0],o="default"===(null===(t=i.result)||void 0===t?void 0:t.choice),s=this._getDataFromPath(this.keys[e]),c=!1===s.enabled,d=s.alias||this.hass.localize("ui.panel.config.automation.trace.messages.choose");if(o)this._renderEntry(a,this.hass.localize("ui.panel.config.automation.trace.messages.default_action_executed",{name:d}),void 0,c);else if(i.result){var h="default"!==i.result.choice?i.result.choice+1:void 0,l=this._getDataFromPath("".concat(this.keys[e],"/choose/").concat(i.result.choice)),u=l?"".concat(l.alias||this.hass.localize("ui.panel.config.automation.trace.messages.option_executed",{option:h})):this.hass.localize("ui.panel.config.automation.trace.messages.error",{error:i.error});this._renderEntry(a,"".concat(d,": ").concat(u),void 0,c)}else this._renderEntry(a,this.hass.localize("ui.panel.config.automation.trace.messages.no_action_executed",{name:d}),void 0,c);for(r=e+1;r<this.keys.length;r++){var v=this.keys[r].split("/");if(v.length<=n)return r;if(o&&"default"===v[n+1]||!o&&"sequence"===v[n+3])break}for(;r<this.keys.length;){var f=this.keys[r];if(f.split("/").length<=n)return r;r=this._renderItem(r,(0,P.pq)(this._getDataFromPath(f)))}return r}},{key:"_handleRepeat",value:function(e){var t,r=this.keys[e],a=r.split("/").length,n=this._getDataFromPath(this.keys[e]),i=!1===n.enabled,o=n.alias||(0,F.u)(this.hass,this.entityReg,this.labelReg,this.floorReg,n);for(this._renderEntry(r,o,void 0,i),t=e+1;t<this.keys.length;t++){var s=this.keys[t];if(s.split("/").length<=a)return t;t=this._renderItem(t,(0,P.pq)(this._getDataFromPath(s)),!0)}return t}},{key:"_handleIf",value:function(e){var t,r,a=this.keys[e],n=a.split("/").length,i=this._getItem(e)[0],o=this._getDataFromPath(this.keys[e]),s=!1===o.enabled,c=o.alias||this.hass.localize("ui.panel.config.automation.trace.messages.if");if(null!==(t=i.result)&&void 0!==t&&t.choice){var d=this._getDataFromPath("".concat(this.keys[e],"/").concat(i.result.choice,"/")),h=d?d.alias||this.hass.localize("ui.panel.config.automation.trace.messages.action_executed",{action:i.result.choice}):this.hass.localize("ui.panel.config.automation.trace.messages.error",{error:i.error});this._renderEntry(a,"".concat(c,": ").concat(h),void 0,s)}else this._renderEntry(a,this.hass.localize("ui.panel.config.automation.trace.messages.no_action_executed",{name:c}),void 0,s);for(r=e+1;r<this.keys.length;r++){var l=this.keys[r],u=this.keys[r].split("/");if(u.length<=n)return r;"condition"===u[n+1]||u.length<n+2||(r=this._renderItem(r,(0,P.pq)(this._getDataFromPath(l))))}return r}},{key:"_handleSequence",value:function(e){var t,r=this.keys[e],a=this._getDataFromPath(this.keys[e]);for(this._renderEntry(r,a.alias||(0,F.u)(this.hass,this.entityReg,this.labelReg,this.floorReg,a,"sequence"),void 0,!1===a.enabled),t=e+1;t<this.keys.length;t++){var n=this.keys[t];this._renderItem(t,(0,P.pq)(this._getDataFromPath(n)))}return t}},{key:"_handleParallel",value:function(e){var t,r=this.keys[e],a=r.split("/").length,n=this._getDataFromPath(this.keys[e]),i=!1===n.enabled,o=n.alias||this.hass.localize("ui.panel.config.automation.trace.messages.execute_in_parallel");for(this._renderEntry(r,o,void 0,i),t=e+1;t<this.keys.length;t++){var s=this.keys[t];if(s.split("/").length<=a)return t;t=this._renderItem(t,(0,P.pq)(this._getDataFromPath(s)))}return t}},{key:"_renderEntry",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.entries.push((0,V.qy)(B||(B=(0,d.A)([' <ha-timeline .icon="','" data-path="','" .notEnabled="','"> ',""," </ha-timeline> "])),r,e,a,t,a?(0,V.qy)(j||(j=(0,d.A)(['<span class="disabled"> ',"</span>"])),this.hass.localize("ui.panel.config.automation.trace.messages.disabled")):""))}},{key:"_getDataFromPath",value:function(e){return(0,z.Ci)(this.trace.config,e)}}])}(),(0,s.A)([(0,q.EM)("hat-trace-timeline")],(function(e,t){var r=function(t){function r(){var t;(0,h.A)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return t=(0,i.A)(this,r,[].concat(n)),e(t),t}return(0,o.A)(r,t),(0,l.A)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,q.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,q.MZ)({attribute:!1})],key:"trace",value:void 0},{kind:"field",decorators:[(0,q.MZ)({attribute:!1})],key:"logbookEntries",value:void 0},{kind:"field",decorators:[(0,q.MZ)({attribute:!1})],key:"selectedPath",value:void 0},{kind:"field",decorators:[(0,q.MZ)({type:Boolean})],key:"allowPick",value:function(){return!1}},{kind:"field",decorators:[(0,q.wk)(),(0,w.Fg)({context:R.ih,subscribe:!0})],key:"_entityReg",value:void 0},{kind:"field",decorators:[(0,q.wk)(),(0,w.Fg)({context:R.HD,subscribe:!0})],key:"_labelReg",value:void 0},{kind:"field",decorators:[(0,q.wk)(),(0,w.Fg)({context:R.rf,subscribe:!0})],key:"_floorReg",value:void 0},{kind:"method",key:"render",value:function(){var e=this;if(!this.trace)return V.s6;for(var t=[],r=new ee(this.hass,t,this.trace),a=new te(t,r,this.logbookEntries||[]),n=new re(this.hass,this._entityReg,this._labelReg,this._floorReg,t,this.trace,a,r);n.hasNext;)n.renderItem();for(;a.hasNext;)a.maybeRenderItem();a.flush();var i,o=function(){return(0,I.yg)(new Date(e.trace.timestamp.finish),e.hass.locale,e.hass.config)},s=function(){return((new Date(e.trace.timestamp.finish).getTime()-new Date(e.trace.timestamp.start).getTime())/1e3).toFixed(2)};if("running"===this.trace.state)i={description:this.hass.localize("ui.panel.config.automation.trace.messages.still_running"),icon:"M13,2.03V2.05L13,4.05C17.39,4.59 20.5,8.58 19.96,12.97C19.5,16.61 16.64,19.5 13,19.93V21.93C18.5,21.38 22.5,16.5 21.95,11C21.5,6.25 17.73,2.5 13,2.03M11,2.06C9.05,2.25 7.19,3 5.67,4.26L7.1,5.74C8.22,4.84 9.57,4.26 11,4.06V2.06M4.26,5.67C3,7.19 2.25,9.04 2.05,11H4.05C4.24,9.58 4.8,8.23 5.69,7.1L4.26,5.67M2.06,13C2.26,14.96 3.03,16.81 4.27,18.33L5.69,16.9C4.81,15.77 4.24,14.42 4.06,13H2.06M7.1,18.37L5.67,19.74C7.18,21 9.04,21.79 11,22V20C9.58,19.82 8.23,19.25 7.1,18.37M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z"};else if("debugged"===this.trace.state)i={description:this.hass.localize("ui.panel.config.automation.trace.messages.debugged"),icon:"M13,2.03V2.05L13,4.05C17.39,4.59 20.5,8.58 19.96,12.97C19.5,16.61 16.64,19.5 13,19.93V21.93C18.5,21.38 22.5,16.5 21.95,11C21.5,6.25 17.73,2.5 13,2.03M11,2.06C9.05,2.25 7.19,3 5.67,4.26L7.1,5.74C8.22,4.84 9.57,4.26 11,4.06V2.06M4.26,5.67C3,7.19 2.25,9.04 2.05,11H4.05C4.24,9.58 4.8,8.23 5.69,7.1L4.26,5.67M2.06,13C2.26,14.96 3.03,16.81 4.27,18.33L5.69,16.9C4.81,15.77 4.24,14.42 4.06,13H2.06M7.1,18.37L5.67,19.74C7.18,21 9.04,21.79 11,22V20C9.58,19.82 8.23,19.25 7.1,18.37M16.82,15.19L12.71,11.08C13.12,10.04 12.89,8.82 12.03,7.97C11.13,7.06 9.78,6.88 8.69,7.38L10.63,9.32L9.28,10.68L7.29,8.73C6.75,9.82 7,11.17 7.88,12.08C8.74,12.94 9.96,13.16 11,12.76L15.11,16.86C15.29,17.05 15.56,17.05 15.74,16.86L16.78,15.83C17,15.65 17,15.33 16.82,15.19Z"};else if("finished"===this.trace.script_execution)i={description:this.hass.localize("ui.panel.config.automation.trace.messages.finished",{time:o(),executiontime:s()}),icon:X};else if("aborted"===this.trace.script_execution)i={description:this.hass.localize("ui.panel.config.automation.trace.messages.aborted",{time:o(),executiontime:s()}),icon:Q};else if("cancelled"===this.trace.script_execution)i={description:this.hass.localize("ui.panel.config.automation.trace.messages.cancelled",{time:o(),executiontime:s()}),icon:Q};else{var c,h,l=!1;switch(this.trace.script_execution){case"failed_conditions":c="stopped_failed_conditions";break;case"failed_single":c="stopped_failed_single";break;case"failed_max_runs":c="stopped_failed_max_runs";break;case"error":l=!0,c="stopped_error",h=(0,V.qy)(J||(J=(0,d.A)(["<br><br>",""])),this.trace.error);break;default:l=!0,c="stopped_unknown_reason"}i={description:(0,V.qy)(U||(U=(0,d.A)([""," ",""])),this.hass.localize("ui.panel.config.automation.trace.messages.".concat(c),{reason:this.trace.script_execution,time:o(),executiontime:s()}),h||""),icon:Q,className:l?"error":void 0}}return t.push((0,V.qy)(K||(K=(0,d.A)([' <ha-timeline lastItem .icon="','" class="','"> '," </ha-timeline> "])),i.icon,(0,E.J)(i.className),i.description)),(0,V.qy)($||($=(0,d.A)(["",""])),t)}},{kind:"method",key:"updated",value:function(e){var t=this;if((0,c.A)(r,"updated",this,3)([e]),this.allowPick&&e.has("trace")&&this.trace&&this.selectedPath&&!(this.selectedPath in this.trace.trace)){var a=this.shadowRoot.querySelector("ha-timeline[data-path]");a&&((0,C.r)(this,"value-changed",{value:a.dataset.path}),this.selectedPath=a.dataset.path)}(e.has("trace")||e.has("selectedPath"))&&this.shadowRoot.querySelectorAll("ha-timeline[data-path]").forEach((function(e){if((0,N.j)(e,"selected",t.selectedPath===e.dataset.path),t.allowPick&&0!==e.tabIndex){e.tabIndex=0;var r=function(){t.selectedPath=e.dataset.path,(0,C.r)(t,"value-changed",{value:e.dataset.path})};e.addEventListener("click",r),e.addEventListener("keydown",(function(e){"Enter"!==e.key&&" "!==e.key||r()})),e.addEventListener("mouseover",(function(){e.raised=!0})),e.addEventListener("mouseout",(function(){e.raised=!1}))}}))}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,V.AH)(G||(G=(0,d.A)(["ha-timeline[lastItem].condition{--timeline-ball-color:var(--error-color)}ha-timeline[data-path]{cursor:pointer}ha-timeline[selected]{--timeline-ball-color:var(--primary-color)}ha-timeline:focus{outline:0;--timeline-ball-color:var(--accent-color)}.error{--timeline-ball-color:var(--error-color);color:var(--error-color)}"])))]}}]}}),V.WF),a(),e.next=83;break;case 80:e.prev=80,e.t2=e.catch(0),a(e.t2);case 83:case"end":return e.stop()}}),e,null,[[0,80]])})));return function(t,r){return e.apply(this,arguments)}}())},39302:function(e,t,r){r.d(t,{h:function(){return i}});var a,n=r(64599),i=(0,r(50289).AH)(a||(a=(0,n.A)([".tabs{background-color:var(--primary-background-color);border-top:1px solid var(--divider-color);border-bottom:1px solid var(--divider-color);display:flex;padding-left:4px;padding-inline-start:4px;padding-inline-end:initial}.tabs.top{border-top:none}.tabs>*{padding:2px 16px;cursor:pointer;position:relative;bottom:-1px;border:none;border-bottom:2px solid transparent;user-select:none;background:0 0;color:var(--primary-text-color);outline:0;transition:background 15ms linear}.tabs>.active{border-bottom-color:var(--primary-color)}.tabs>:focus,.tabs>:hover{background:var(--secondary-background-color)}"])))},38583:function(e,t,r){var a=r(38971).end,n=r(34465);e.exports=n("trimEnd")?function(){return a(this)}:"".trimEnd},14137:function(e,t,r){r(75666);var a=r(41765),n=r(38583);a({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==n},{trimEnd:n})},75666:function(e,t,r){var a=r(41765),n=r(38583);a({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==n},{trimRight:n})}}]);
//# sourceMappingURL=55489.bJkmFaYvVdM.js.map