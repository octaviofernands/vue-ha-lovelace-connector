"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[45559],{15625:function(e,t,i){i.d(t,{S_:function(){return r},Xd:function(){return l},lZ:function(){return c}});i(82386),i(95737),i(10507),i(39790),i(74268),i(24545),i(51855),i(82130),i(31743),i(22328),i(4959),i(62435),i(99019),i(253),i(54846),i(66555),i(96858);var n=["zone","persistent_notification"],a=function(e,t){var i,n,a,s,o,r,l,c;if("call-service"===t.action&&(null!==(i=t.target)&&void 0!==i&&i.entity_id||null!==(n=t.service_data)&&void 0!==n&&n.entity_id||null!==(a=t.data)&&void 0!==a&&a.entity_id)){var d=null!==(s=null!==(o=null===(r=t.service_data)||void 0===r?void 0:r.entity_id)&&void 0!==o?o:null===(l=t.data)||void 0===l?void 0:l.entity_id)&&void 0!==s?s:null===(c=t.target)||void 0===c?void 0:c.entity_id;Array.isArray(d)||(d=[d]);for(var u=0,h=d;u<h.length;u++){var v=h[u];e.add(v)}}},s=function(e,t){"string"!=typeof t?(t.entity&&e.add(t.entity),t.camera_image&&e.add(t.camera_image),t.tap_action&&a(e,t.tap_action),t.hold_action&&a(e,t.hold_action)):e.add(t)},o=function(e,t){t.entity&&s(e,t.entity),t.entities&&Array.isArray(t.entities)&&t.entities.forEach((function(t){return s(e,t)})),t.card&&o(e,t.card),t.cards&&Array.isArray(t.cards)&&t.cards.forEach((function(t){return o(e,t)})),t.elements&&Array.isArray(t.elements)&&t.elements.forEach((function(t){return o(e,t)})),t.badges&&Array.isArray(t.badges)&&t.badges.forEach((function(t){return s(e,t)}))},r=function(e){var t=new Set;return e.views.forEach((function(e){return o(t,e)})),t},l=function(e,t){for(var i=new Set,a=0,s=Object.keys(e.states);a<s.length;a++){var o=s[a];t.has(o)||n.includes(o.split(".",1)[0])||i.add(o)}return i},c=function(e,t){var i=r(t);return l(e,i)}},4790:function(e,t,i){var n=i(22858).A,a=i(33994).A;i.a(e,function(){var e=n(a().mark((function e(t,n){var s,o,r,l,c,d,u,h,v,f,y,g,_,k,b,p,m,A,w,E;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=i(64599),o=i(35806),r=i(71008),l=i(62193),c=i(2816),d=i(27927),u=i(81027),h=i(50693),v=i(50289),f=i(29818),y=i(94100),g=i(34897),i(28664),i(12675),_=i(13740),!(k=t([_])).then){e.next=26;break}return e.next=22,k;case 22:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=27;break;case 26:e.t0=k;case 27:_=e.t0[0],(0,d.A)([(0,f.EM)("hui-entity-picker-table")],(function(e,t){var i=function(t){function i(){var t;(0,r.A)(this,i);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t=(0,l.A)(this,i,[].concat(a)),e(t),t}return(0,c.A)(i,t),(0,o.A)(i)}(t);return{F:i,d:[{kind:"field",decorators:[(0,f.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,f.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,f.MZ)({type:Boolean,attribute:"no-label-float"})],key:"noLabelFloat",value:function(){return!1}},{kind:"field",decorators:[(0,f.MZ)({type:Array})],key:"entities",value:void 0},{kind:"method",key:"render",value:function(){return(0,v.qy)(b||(b=(0,s.A)([' <ha-data-table .hass="','" selectable .id="','" .columns="','" .data="','" .searchLabel="','" .noLabelFloat="','" .noDataText="','" @selection-changed="','"></ha-data-table> '])),this.hass,"entity_id",this._columns(this.narrow),this.entities,this.hass.localize("ui.panel.lovelace.unused_entities.search"),this.noLabelFloat,this.hass.localize("ui.panel.lovelace.unused_entities.no_data"),this._handleSelectionChanged)}},{kind:"field",key:"_columns",value:function(){var e=this;return(0,y.A)((function(t){var i={icon:{title:"",label:e.hass.localize("ui.panel.lovelace.unused_entities.state_icon"),type:"icon",template:function(t){return(0,v.qy)(p||(p=(0,s.A)([' <state-badge @click="','" .hass="','" .stateObj="','"></state-badge> '])),e._handleEntityClicked,e.hass,t.stateObj)}},name:{title:e.hass.localize("ui.panel.lovelace.unused_entities.entity"),sortable:!0,filterable:!0,flex:2,main:!0,direction:"asc",template:function(i){return(0,v.qy)(m||(m=(0,s.A)([' <div @click="','" style="cursor:pointer"> '," "," </div> "])),e._handleEntityClicked,i.name,t?(0,v.qy)(A||(A=(0,s.A)([' <div class="secondary">',"</div> "])),i.entity_id):"")}}};return i.entity_id={title:e.hass.localize("ui.panel.lovelace.unused_entities.entity_id"),sortable:!0,filterable:!0,hidden:t},i.domain={title:e.hass.localize("ui.panel.lovelace.unused_entities.domain"),sortable:!0,filterable:!0,hidden:t},i.last_changed={title:e.hass.localize("ui.panel.lovelace.unused_entities.last_changed"),type:"numeric",sortable:!0,hidden:t,template:function(t){return(0,v.qy)(w||(w=(0,s.A)([' <ha-relative-time .hass="','" .datetime="','" capitalize></ha-relative-time> '])),e.hass,t.last_changed)}},i}))}},{kind:"method",key:"_handleSelectionChanged",value:function(e){var t=e.detail.value;(0,g.r)(this,"selected-changed",{selectedEntities:t})}},{kind:"method",key:"_handleEntityClicked",value:function(e){var t=e.target.closest(".mdc-data-table__row").rowId;(0,g.r)(this,"hass-more-info",{entityId:t})}},{kind:"get",static:!0,key:"styles",value:function(){return(0,v.AH)(E||(E=(0,s.A)(["ha-data-table{--data-table-border-width:0;height:100%}"])))}}]}}),v.WF),n(),e.next=35;break;case 32:e.prev=32,e.t2=e.catch(0),n(e.t2);case 35:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(t,i){return e.apply(this,arguments)}}())},84048:function(e,t,i){i.d(t,{Q:function(){return s}});i(95737),i(39790),i(66457),i(99019),i(96858);var n=i(34897),a=function(){return Promise.all([i.e(84514),i.e(5504),i.e(31271),i.e(26566),i.e(80675)]).then(i.bind(i,80675))},s=function(e,t){(0,n.r)(e,"show-dialog",{dialogTag:"hui-dialog-suggest-card",dialogImport:a,dialogParams:t})}},45111:function(e,t,i){i.d(t,{X:function(){return a}});i(95737),i(39790),i(66457),i(99019),i(96858);var n=i(34897),a=function(e,t){(0,n.r)(e,"show-dialog",{dialogTag:"hui-dialog-select-view",dialogImport:function(){return i.e(53779).then(i.bind(i,53779))},dialogParams:t})}},45559:function(e,t,i){var n=i(22858).A,a=i(33994).A;i.a(e,function(){var e=n(a().mark((function e(n,s){var o,r,l,c,d,u,h,v,f,y,g,_,k,b,p,m,A,w,E,x,C,z,M,Z,H,q,S,V;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i.r(t),i.d(t,{HuiUnusedEntities:function(){return V}}),o=i(41981),r=i(64599),l=i(35806),c=i(71008),d=i(62193),u=i(2816),h=i(27927),v=i(35890),f=i(81027),y=i(97741),g=i(33231),_=i(16891),k=i(50289),b=i(29818),p=i(85323),m=i(213),A=i(19244),i(74808),i(88400),w=i(15625),E=i(4790),x=i(84048),C=i(45111),z=i(45657),!(M=n([E])).then){e.next=39;break}return e.next=35,M;case 35:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=40;break;case 39:e.t0=M;case 40:E=e.t0[0],V=(0,h.A)([(0,b.EM)("hui-unused-entities")],(function(e,t){var i=function(t){function i(){var t;(0,c.A)(this,i);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t=(0,d.A)(this,i,[].concat(a)),e(t),t}return(0,u.A)(i,t),(0,l.A)(i)}(t);return{F:i,d:[{kind:"field",decorators:[(0,b.MZ)({attribute:!1})],key:"lovelace",value:void 0},{kind:"field",decorators:[(0,b.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,b.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,b.wk)()],key:"_unusedEntities",value:function(){return[]}},{kind:"field",decorators:[(0,b.wk)()],key:"_selectedEntities",value:function(){return[]}},{kind:"get",key:"_config",value:function(){return this.lovelace.config}},{kind:"method",key:"updated",value:function(e){(0,v.A)(i,"updated",this,3)([e]),e.has("lovelace")&&this._getUnusedEntities()}},{kind:"method",key:"render",value:function(){var e=this;return this.hass&&this.lovelace?"storage"===this.lovelace.mode&&!1===this.lovelace.editMode?k.s6:(0,k.qy)(Z||(Z=(0,r.A)([' <div class="container"> ',' <hui-entity-picker-table .hass="','" .narrow="','" .entities="','" @selected-changed="','"></hui-entity-picker-table> </div> <div class="fab ','"> <ha-fab .label="','" extended @click="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> </ha-fab> </div> '])),this.narrow?"":(0,k.qy)(H||(H=(0,r.A)([' <ha-card header="','"> <div class="card-content"> '," "," </div> </ha-card> "])),this.hass.localize("ui.panel.lovelace.unused_entities.title"),this.hass.localize("ui.panel.lovelace.unused_entities.available_entities"),"storage"===this.lovelace.mode?(0,k.qy)(q||(q=(0,r.A)([" <br>"," "])),this.hass.localize("ui.panel.lovelace.unused_entities.select_to_add")):""),this.hass,this.narrow,this._unusedEntities.map((function(t){var i=e.hass.states[t];return{icon:"",entity_id:t,stateObj:i,name:i?(0,A.u)(i):"Unavailable",domain:(0,m.m)(t),last_changed:null==i?void 0:i.last_changed}})),this._handleSelectedChanged,(0,p.H)({selected:this._selectedEntities.length}),this.hass.localize("ui.panel.lovelace.editor.edit_card.add"),this._addToLovelaceView,"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"):k.s6}},{kind:"method",key:"_getUnusedEntities",value:function(){if(this.hass&&this.lovelace){this._selectedEntities=[];var e=(0,w.lZ)(this.hass,this._config);this._unusedEntities=(0,o.A)(e).sort()}}},{kind:"method",key:"_handleSelectedChanged",value:function(e){this._selectedEntities=e.detail.selectedEntities}},{kind:"method",key:"_addToLovelaceView",value:function(){var e=this,t=(0,z.Bi)(this.hass.states,this._selectedEntities,{}),i=(0,z.ZI)(this._selectedEntities,{});1!==this.lovelace.config.views.length?(0,C.X)(this,{lovelaceConfig:this.lovelace.config,allowDashboardChange:!1,viewSelectedCallback:function(n,a,s){(0,x.Q)(e,{lovelaceConfig:e.lovelace.config,saveConfig:e.lovelace.saveConfig,path:[s],entities:e._selectedEntities,cardConfig:t,sectionConfig:i})}}):(0,x.Q)(this,{lovelaceConfig:this.lovelace.config,saveConfig:this.lovelace.saveConfig,path:[0],entities:this._selectedEntities,cardConfig:t,sectionConfig:i})}},{kind:"get",static:!0,key:"styles",value:function(){return(0,k.AH)(S||(S=(0,r.A)([":host{background:var(--lovelace-background);overflow:hidden}.container{display:flex;flex-direction:column;height:100%}ha-card{--ha-card-box-shadow:none;--ha-card-border-radius:0}hui-entity-picker-table{flex-grow:1}.fab{position:sticky;float:var(--float-end);right:calc(16px + env(safe-area-inset-right));bottom:calc(16px + env(safe-area-inset-bottom));inset-inline-end:calc(16px + env(safe-area-inset-right));inset-inline-start:initial;z-index:1}ha-fab{position:relative;bottom:calc(-80px - env(safe-area-inset-bottom));transition:bottom .3s}.fab.selected ha-fab{bottom:0}"])))}}]}}),k.WF),s(),e.next=49;break;case 46:e.prev=46,e.t2=e.catch(0),s(e.t2);case 49:case"end":return e.stop()}}),e,null,[[0,46]])})));return function(t,i){return e.apply(this,arguments)}}())}}]);
//# sourceMappingURL=45559.REn0rsjodaI.js.map