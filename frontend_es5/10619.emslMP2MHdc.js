"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[10619],{63516:function(i,t,n){n.d(t,{s:function(){return e}});var e=function(i){return!(!i.detail.selected||"property"!==i.detail.source)&&(i.currentTarget.selected=!1,!0)}},10619:function(i,t,n){var e,a,r,s,o,l,d,c,h,u,g,p,m,f,_,v,k,y,w,b,x,A,z,P,M,B,F,I=n(64599),q=n(41981),C=n(658),L=n(33994),O=n(22858),j=n(35806),H=n(71008),V=n(62193),D=n(2816),R=n(27927),S=n(35890),$=(n(81027),n(13025),n(82386),n(95737),n(97741),n(89655),n(33231),n(50693),n(26098),n(99471),n(10507),n(39790),n(36016),n(36604),n(20529),n(92765),n(253),n(2075),n(54846),n(16891),n(66555),n(96858),n(72606),n(63893),n(94366)),W=n(50289),Z=n(29818),E=n(10977),Q=n(55165),T=n(94100),N=n(33922),U=n(34897),J=n(44721),G=n(16312),K=n(2682),X=n(29180),Y=(n(40462),n(72829),n(98041)),ii=n(46092),ti=n(19611),ni=n(30581),ei=n(6121),ai=n(55321),ri=n(28884),si=n(63516),oi=n(51842),li=n(30116),di=n(43389),ci=n(85323),hi=((0,R.A)([(0,Z.EM)("ha-integration-list-item")],(function(i,t){var n=function(t){function n(){var t;(0,H.A)(this,n);for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=(0,V.A)(this,n,[].concat(a)),i(t),t}return(0,D.A)(n,t),(0,j.A)(n)}(t);return{F:n,d:[{kind:"field",key:"hass",value:void 0},{kind:"field",decorators:[(0,Z.MZ)({attribute:!1})],key:"integration",value:void 0},{kind:"field",decorators:[(0,Z.MZ)({type:String,reflect:!0})],key:"graphic",value:function(){return"medium"}},{kind:"field",decorators:[(0,Z.MZ)({type:Boolean})],key:"hasMeta",value:function(){return!0}},{kind:"field",decorators:[(0,Z.MZ)({type:Boolean})],key:"brand",value:function(){return!1}},{kind:"method",key:"renderSingleLine",value:function(){return this.integration?(0,W.qy)(e||(e=(0,I.A)([""," ",""])),this.integration.name||(0,ii.p$)(this.hass.localize,this.integration.domain),this.integration.is_helper?" (helper)":""):W.s6}},{kind:"method",key:"renderGraphic",value:function(){var i;if(!this.integration)return W.s6;var t={multi:this.multipleGraphics};return(0,W.qy)(a||(a=(0,I.A)([' <span class="mdc-deprecated-list-item__graphic material-icons ','"> <img alt="" loading="lazy" src="','" crossorigin="anonymous" referrerpolicy="no-referrer"> </span>'])),(0,ci.H)(t),(0,oi.MR)({domain:this.integration.domain,type:"icon",useFallback:!0,darkOptimized:null===(i=this.hass.themes)||void 0===i?void 0:i.darkMode,brand:this.brand}))}},{kind:"method",key:"renderMeta",value:function(){return this.integration?(0,W.qy)(r||(r=(0,I.A)(['<span class="mdc-deprecated-list-item__meta material-icons"> '," "," "," </span>"])),this.integration.cloud?(0,W.qy)(s||(s=(0,I.A)(['<span><ha-svg-icon .path="','"></ha-svg-icon><simple-tooltip animation-delay="0" position="left">',"</simple-tooltip></span>"])),"M6.5 20Q4.22 20 2.61 18.43 1 16.85 1 14.58 1 12.63 2.17 11.1 3.35 9.57 5.25 9.15 5.88 6.85 7.75 5.43 9.63 4 12 4 14.93 4 16.96 6.04 19 8.07 19 11 20.73 11.2 21.86 12.5 23 13.78 23 15.5 23 17.38 21.69 18.69 20.38 20 18.5 20M6.5 18H18.5Q19.55 18 20.27 17.27 21 16.55 21 15.5 21 14.45 20.27 13.73 19.55 13 18.5 13H17V11Q17 8.93 15.54 7.46 14.08 6 12 6 9.93 6 8.46 7.46 7 8.93 7 11H6.5Q5.05 11 4.03 12.03 3 13.05 3 14.5 3 15.95 4.03 17 5.05 18 6.5 18M12 12Z",this.hass.localize("ui.panel.config.integrations.config_entry.depends_on_cloud")):"",this.integration.is_built_in?"":(0,W.qy)(o||(o=(0,I.A)(['<span><ha-svg-icon .path="','"></ha-svg-icon><simple-tooltip animation-delay="0" position="left">',"</simple-tooltip></span>"])),"M2,10.96C1.5,10.68 1.35,10.07 1.63,9.59L3.13,7C3.24,6.8 3.41,6.66 3.6,6.58L11.43,2.18C11.59,2.06 11.79,2 12,2C12.21,2 12.41,2.06 12.57,2.18L20.47,6.62C20.66,6.72 20.82,6.88 20.91,7.08L22.36,9.6C22.64,10.08 22.47,10.69 22,10.96L21,11.54V16.5C21,16.88 20.79,17.21 20.47,17.38L12.57,21.82C12.41,21.94 12.21,22 12,22C11.79,22 11.59,21.94 11.43,21.82L3.53,17.38C3.21,17.21 3,16.88 3,16.5V10.96C2.7,11.13 2.32,11.14 2,10.96M12,4.15V4.15L12,10.85V10.85L17.96,7.5L12,4.15M5,15.91L11,19.29V12.58L5,9.21V15.91M19,15.91V12.69L14,15.59C13.67,15.77 13.3,15.76 13,15.6V19.29L19,15.91M13.85,13.36L20.13,9.73L19.55,8.72L13.27,12.35L13.85,13.36Z",this.hass.localize("ui.panel.config.integrations.config_entry.custom_integration")),this.integration.config_flow||this.integration.integrations||this.integration.iot_standards?(0,W.qy)(d||(d=(0,I.A)(["<ha-icon-next></ha-icon-next>"]))):(0,W.qy)(l||(l=(0,I.A)(['<span><simple-tooltip animation-delay="0" position="left">','</simple-tooltip><ha-svg-icon .path="','" class="open-in-new"></ha-svg-icon></span>'])),this.hass.localize("ui.panel.config.integrations.config_entry.yaml_only"),"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z")):W.s6}},{kind:"get",static:!0,key:"styles",value:function(){return[di.R,(0,W.AH)(c||(c=(0,I.A)([":host{--mdc-list-side-padding:24px;--mdc-list-item-graphic-size:40px}:host([graphic=avatar]:not([twoLine])),:host([graphic=icon]:not([twoLine])){height:48px}span.material-icons:first-of-type{margin-inline-start:0px!important;margin-inline-end:var(--mdc-list-item-graphic-margin,16px)!important;direction:var(--direction)}span.material-icons:last-of-type{margin-inline-start:auto!important;margin-inline-end:0px!important;direction:var(--direction)}img{width:40px;height:40px}.mdc-deprecated-list-item__meta{width:auto;white-space:nowrap}.mdc-deprecated-list-item__meta>*{margin-right:8px;margin-inline-end:8px;margin-inline-start:initial}.mdc-deprecated-list-item__meta>:last-child{margin-right:0px;margin-inline-end:0px;margin-inline-start:initial}ha-icon-next{margin-right:8px;margin-inline-end:8px;margin-inline-start:initial}.open-in-new{--mdc-icon-size:22px;padding:1px}"])))]}}]}}),li.J),n(49029)),ui={zigbee:"zha",zwave:"zwave_js"},gi=((0,R.A)([(0,Z.EM)("ha-domain-integrations")],(function(i,t){var n,e,a=function(t){function n(){var t;(0,H.A)(this,n);for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=(0,V.A)(this,n,[].concat(a)),i(t),t}return(0,D.A)(n,t),(0,j.A)(n)}(t);return{F:a,d:[{kind:"field",key:"hass",value:void 0},{kind:"field",decorators:[(0,Z.MZ)()],key:"domain",value:void 0},{kind:"field",decorators:[(0,Z.MZ)({attribute:!1})],key:"integration",value:void 0},{kind:"field",decorators:[(0,Z.MZ)({attribute:!1})],key:"flowsInProgress",value:void 0},{kind:"method",key:"render",value:function(){var i,t,n,e,a,r,s=this;return(0,W.qy)(h||(h=(0,I.A)(["<mwc-list> "," "," "," "," "," </mwc-list> "])),null!==(i=this.flowsInProgress)&&void 0!==i&&i.length?(0,W.qy)(u||(u=(0,I.A)(["<h3> "," </h3> ",' <li divider role="separator"></li> ',""])),this.hass.localize("ui.panel.config.integrations.discovered"),this.flowsInProgress.map((function(i){var t;return(0,W.qy)(g||(g=(0,I.A)(['<mwc-list-item graphic="medium" .flow="','" @request-selected="','" hasMeta> <img alt="" slot="graphic" loading="lazy" src="','" crossorigin="anonymous" referrerpolicy="no-referrer"> <span>','</span> <ha-icon-next slot="meta"></ha-icon-next> </mwc-list-item>'])),i,s._flowInProgressPicked,(0,oi.MR)({domain:i.handler,type:"icon",useFallback:!0,darkOptimized:null===(t=s.hass.themes)||void 0===t?void 0:t.darkMode}),(0,Y.m7)(s.hass.localize,i))})),this.integration&&"integrations"in this.integration&&this.integration.integrations?(0,W.qy)(p||(p=(0,I.A)(["<h3> "," </h3>"])),this.hass.localize("ui.panel.config.integrations.available_integrations")):""):"",null!==(t=this.integration)&&void 0!==t&&t.iot_standards?this.integration.iot_standards.filter((function(i){return J.x.includes(ui[i]||i)})).map((function(i){var t,n=ui[i]||i;return(0,W.qy)(m||(m=(0,I.A)(['<mwc-list-item graphic="medium" .domain="','" @request-selected="','" hasMeta> <img slot="graphic" loading="lazy" alt="" src="','" crossorigin="anonymous" referrerpolicy="no-referrer"> <span>','</span> <ha-icon-next slot="meta"></ha-icon-next> </mwc-list-item>'])),n,s._standardPicked,(0,oi.MR)({domain:n,type:"icon",useFallback:!0,darkOptimized:null===(t=s.hass.themes)||void 0===t?void 0:t.darkMode}),s.hass.localize("ui.panel.config.integrations.add_".concat(n,"_device")))})):"",this.integration&&"integrations"in this.integration&&this.integration.integrations?Object.entries(this.integration.integrations).sort((function(i,t){return i[1].config_flow&&!t[1].config_flow?-1:t[1].config_flow&&!i[1].config_flow?0:(0,K.S)(i[1].name||(0,ii.p$)(s.hass.localize,i[0]),t[1].name||(0,ii.p$)(s.hass.localize,t[0]),s.hass.locale.language)})).map((function(i){var t,n=(0,C.A)(i,2),e=n[0],a=n[1];return(0,W.qy)(f||(f=(0,I.A)(['<ha-integration-list-item .hass="','" .domain="','" .integration="','" @request-selected="','"> </ha-integration-list-item>'])),s.hass,e,Object.assign(Object.assign({},a),{},{domain:e,name:a.name||(0,ii.p$)(s.hass.localize,e),is_built_in:!1!==a.is_built_in,cloud:null===(t=a.iot_class)||void 0===t?void 0:t.startsWith("cloud_")}),s._integrationPicked)})):"",J.x.includes(this.domain)?(0,W.qy)(_||(_=(0,I.A)(['<mwc-list-item graphic="medium" .domain="','" @request-selected="','" hasMeta> <img slot="graphic" loading="lazy" alt="" src="','" crossorigin="anonymous" referrerpolicy="no-referrer"> <span>','</span> <ha-icon-next slot="meta"></ha-icon-next> </mwc-list-item>'])),this.domain,this._standardPicked,(0,oi.MR)({domain:this.domain,type:"icon",useFallback:!0,darkOptimized:null===(n=this.hass.themes)||void 0===n?void 0:n.darkMode}),this.hass.localize("ui.panel.config.integrations.add_".concat(this.domain,"_device"))):"",this.integration&&"config_flow"in this.integration&&this.integration.config_flow?(0,W.qy)(v||(v=(0,I.A)(["",""])),null!==(e=this.flowsInProgress)&&void 0!==e&&e.length?(0,W.qy)(k||(k=(0,I.A)(['<mwc-list-item .domain="','" @request-selected="','" .integration="','" hasMeta> ',' <ha-icon-next slot="meta"></ha-icon-next> </mwc-list-item>'])),this.domain,this._integrationPicked,Object.assign(Object.assign({},this.integration),{},{domain:this.domain,name:this.integration.name||(0,ii.p$)(this.hass.localize,this.domain),is_built_in:!1!==this.integration.is_built_in,cloud:null===(a=this.integration.iot_class)||void 0===a?void 0:a.startsWith("cloud_")}),this.hass.localize("ui.panel.config.integrations.new_flow",{integration:this.integration.name||(0,ii.p$)(this.hass.localize,this.domain)})):(0,W.qy)(y||(y=(0,I.A)(['<ha-integration-list-item .hass="','" .domain="','" .integration="','" @request-selected="','"> </ha-integration-list-item>'])),this.hass,this.domain,Object.assign(Object.assign({},this.integration),{},{domain:this.domain,name:this.integration.name||(0,ii.p$)(this.hass.localize,this.domain),is_built_in:!1!==this.integration.is_built_in,cloud:null===(r=this.integration.iot_class)||void 0===r?void 0:r.startsWith("cloud_")}),this._integrationPicked)):"")}},{kind:"method",key:"_integrationPicked",value:(e=(0,O.A)((0,L.A)().mark((function i(t){var n,e,a,r,s,o;return(0,L.A)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if((0,si.s)(t)){i.next=2;break}return i.abrupt("return");case 2:if(a=t.currentTarget.domain,!["cloud","google_assistant","alexa"].includes(a)||!(0,N.x)(this.hass,"cloud")){i.next=7;break}return(0,U.r)(this,"close-dialog"),(0,G.o)("/config/cloud"),i.abrupt("return");case 7:if(!(r=t.currentTarget.integration).supported_by){i.next=11;break}return(0,U.r)(this,"supported-by",{integration:r}),i.abrupt("return");case 11:if(!r.iot_standards){i.next=14;break}return(0,U.r)(this,"select-brand",{brand:r.domain}),i.abrupt("return");case 14:if((a!==this.domain||(!("integration_type"in this.integration)||this.integration.config_flow)&&("integration_type"in this.integration||this.integration.integrations&&a in this.integration.integrations))&&("integration_type"in this.integration||null!==(n=this.integration.integrations)&&void 0!==n&&null!==(n=n[a])&&void 0!==n&&n.config_flow)){i.next=20;break}return i.next=17,(0,ii.QC)(this.hass,a);case 17:return s=i.sent,(0,hi.n)(this,{manifest:s}),i.abrupt("return");case 20:return o=this.getRootNode(),i.t0=ni.W,i.t1=o instanceof ShadowRoot?o.host:this,i.t2=a,i.t3=null===(e=this.hass.userData)||void 0===e?void 0:e.showAdvanced,i.next=27,(0,ii.QC)(this.hass,a);case 27:i.t4=i.sent,i.t5={startFlowHandler:i.t2,showAdvanced:i.t3,manifest:i.t4},(0,i.t0)(i.t1,i.t5),(0,U.r)(this,"close-dialog");case 31:case"end":return i.stop()}}),i,this)}))),function(i){return e.apply(this,arguments)})},{kind:"method",key:"_flowInProgressPicked",value:(n=(0,O.A)((0,L.A)().mark((function i(t){var n,e,a;return(0,L.A)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if((0,si.s)(t)){i.next=2;break}return i.abrupt("return");case 2:return e=t.currentTarget.flow,a=this.getRootNode(),i.t0=ni.W,i.t1=a instanceof ShadowRoot?a.host:this,i.t2=e.flow_id,i.t3=null===(n=this.hass.userData)||void 0===n?void 0:n.showAdvanced,i.next=10,(0,ii.QC)(this.hass,e.handler);case 10:i.t4=i.sent,i.t5={continueFlowId:i.t2,showAdvanced:i.t3,manifest:i.t4},(0,i.t0)(i.t1,i.t5),(0,U.r)(this,"close-dialog");case 14:case"end":return i.stop()}}),i,this)}))),function(i){return n.apply(this,arguments)})},{kind:"method",key:"_standardPicked",value:function(i){if((0,si.s)(i)){var t=i.currentTarget.domain,n=this.getRootNode();(0,U.r)(this,"close-dialog"),(0,J.P)(n instanceof ShadowRoot?n.host:this,this.hass,t,{brand:this.domain})}}},{kind:"field",static:!0,key:"styles",value:function(){return[ai.RF,(0,W.AH)(w||(w=(0,I.A)([":host{display:block;--mdc-list-item-graphic-size:40px;--mdc-list-side-padding:24px}h3{margin:8px 24px 0;color:var(--secondary-text-color);font-size:14px;font-weight:500}h3:first-of-type{margin-top:0}img{width:40px;height:40px}li[divider]{margin-top:8px}"])))]}}]}}),W.WF),n(31265)),pi=n(57115),mi=n(54629);(0,R.A)([(0,Z.EM)("dialog-add-integration")],(function(i,t){var n,e,a,r,s,o,l=function(t){function n(){var t;(0,H.A)(this,n);for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=(0,V.A)(this,n,[].concat(a)),i(t),t}return(0,D.A)(n,t),(0,j.A)(n)}(t);return{F:l,d:[{kind:"field",key:"hass",value:void 0},{kind:"field",decorators:[(0,Z.wk)()],key:"_integrations",value:void 0},{kind:"field",decorators:[(0,Z.wk)()],key:"_helpers",value:void 0},{kind:"field",decorators:[(0,Z.wk)()],key:"_initialFilter",value:void 0},{kind:"field",decorators:[(0,Z.wk)()],key:"_filter",value:void 0},{kind:"field",decorators:[(0,Z.wk)()],key:"_pickedBrand",value:void 0},{kind:"field",decorators:[(0,Z.wk)()],key:"_prevPickedBrand",value:void 0},{kind:"field",decorators:[(0,Z.wk)()],key:"_flowsInProgress",value:void 0},{kind:"field",decorators:[(0,Z.wk)()],key:"_open",value:function(){return!1}},{kind:"field",decorators:[(0,Z.wk)()],key:"_narrow",value:function(){return!1}},{kind:"field",key:"_width",value:void 0},{kind:"field",key:"_height",value:void 0},{kind:"method",key:"showDialog",value:(o=(0,O.A)((0,L.A)().mark((function i(t){var n,e,a;return(0,L.A)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=this._load(),this._open=!0,this._pickedBrand=null==t?void 0:t.brand,this._initialFilter=null==t?void 0:t.initialFilter,this._narrow=matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches,null!=t&&t.domain&&this._createFlow(t.domain),null==t||!t.brand){i.next=11;break}return i.next=9,n;case 9:(a=null===(e=this._integrations)||void 0===e?void 0:e[t.brand])&&"integrations"in a&&a.integrations&&this._fetchFlowsInProgress(Object.keys(a.integrations));case 11:case"end":return i.stop()}}),i,this)}))),function(i){return o.apply(this,arguments)})},{kind:"method",key:"closeDialog",value:function(){this._open=!1,this._integrations=void 0,this._helpers=void 0,this._pickedBrand=void 0,this._prevPickedBrand=void 0,this._flowsInProgress=void 0,this._filter=void 0,this._width=void 0,this._height=void 0,(0,U.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"willUpdate",value:function(i){if((0,S.A)(l,"willUpdate",this,3)([i]),this.hasUpdated||(0,ri.i)(),void 0===this._filter&&void 0!==this._initialFilter&&(this._filter=this._initialFilter),void 0!==this._initialFilter&&""===this._filter)this._initialFilter=void 0,this._filter=void 0,this._width=void 0,this._height=void 0;else if(this.hasUpdated&&i.has("_filter")&&!i.has("_open")&&(!this._width||!this._height)){var t,n=null===(t=this.shadowRoot.querySelector("mwc-list"))||void 0===t?void 0:t.getBoundingClientRect();this._width=null==n?void 0:n.width,this._height=null==n?void 0:n.height}}},{kind:"field",key:"_filterIntegrations",value:function(){var i=this;return(0,T.A)((function(t,n,e,a,r){var s=J.x.filter((function(i){return e.includes(i)})).map((function(i){return{name:a("ui.panel.config.integrations.add_".concat(i,"_device")),domain:i,config_flow:!0,is_built_in:!0,is_add:!0}})).sort((function(t,n){return(0,K.S)(t.name,n.name,i.hass.locale.language)})),o=[],l=[];if(Object.entries(t).forEach((function(t){var n=(0,C.A)(t,2),e=n[0],s=n[1];if("integration_type"in s&&(s.config_flow||s.iot_standards||s.supported_by)){var d,c=s.supported_by?(0,ti.s)(i._integrations,s.supported_by):s;if(!c)return;o.push({domain:e,name:s.name||(0,ii.p$)(a,e),config_flow:c.config_flow,iot_standards:c.iot_standards,supported_by:s.supported_by,is_built_in:!1!==c.is_built_in,cloud:null===(d=c.iot_class)||void 0===d?void 0:d.startsWith("cloud_"),single_config_entry:s.single_config_entry})}else if("integration_type"in s||!("iot_standards"in s)&&!("integrations"in s)){if(r&&"integration_type"in s){var h;l.push({domain:e,name:s.name||(0,ii.p$)(a,e),config_flow:s.config_flow,is_built_in:!1!==s.is_built_in,cloud:null===(h=s.iot_class)||void 0===h?void 0:h.startsWith("cloud_")})}}else o.push({domain:e,name:s.name||(0,ii.p$)(a,e),iot_standards:s.iot_standards,integrations:s.integrations?Object.entries(s.integrations).map((function(i){var t=(0,C.A)(i,2),n=t[0];return t[1].name||(0,ii.p$)(a,n)})):void 0,domains:s.integrations?Object.keys(s.integrations):void 0,is_built_in:!1!==s.is_built_in})})),r){var d={keys:[{name:"name",weight:5},{name:"domain",weight:5},{name:"integrations",weight:2},"supported_by","iot_standards"],isCaseSensitive:!1,minMatchCharLength:Math.min(r.length,2),threshold:.2,getFn:mi.i},c=Object.entries(n).map((function(i){var t,n=(0,C.A)(i,2),e=n[0],r=n[1];return{domain:e,name:r.name||(0,ii.p$)(a,e),config_flow:r.config_flow,is_helper:!0,is_built_in:!1!==r.is_built_in,cloud:null===(t=r.iot_class)||void 0===t?void 0:t.startsWith("cloud_")}})),h=(0,pi.s)(r);return[].concat((0,q.A)(new $.A(o,d).search(h).map((function(i){return i.item}))),(0,q.A)(new $.A(l,d).search(h).map((function(i){return i.item}))),(0,q.A)(new $.A(c,d).search(h).map((function(i){return i.item}))))}return[].concat((0,q.A)(s),(0,q.A)(o.sort((function(t,n){return(0,K.S)(t.name||"",n.name||"",i.hass.locale.language)}))))}))}},{kind:"method",key:"_getIntegrations",value:function(){return this._filterIntegrations(this._integrations,this._helpers,this.hass.config.components,this.hass.localize,this._filter)}},{kind:"method",key:"render",value:function(){var i;if(!this._open)return W.s6;var t=this._integrations?this._getIntegrations():void 0,n=this._pickedBrand?(null===(i=this._integrations)||void 0===i?void 0:i[this._pickedBrand])||(0,ti.s)(this._integrations,this._pickedBrand):void 0;return(0,W.qy)(b||(b=(0,I.A)(['<ha-dialog open @closed="','" scrimClickAction escapeKeyAction hideActions .heading="','"> '," </ha-dialog>"])),this.closeDialog,(0,X.l)(this.hass,this.hass.localize("ui.panel.config.integrations.new")),!this._pickedBrand||this._integrations&&!n?this._renderAll(t):(0,W.qy)(x||(x=(0,I.A)(['<div slot="heading"> <ha-icon-button-prev @click="','"></ha-icon-button-prev> <h2 class="mdc-dialog__title"> '," </h2> </div> ",""])),this._prevClicked,this._calculateBrandHeading(n),this._renderIntegration(n)))}},{kind:"method",key:"_calculateBrandHeading",value:function(i){var t,n;return null==i||!i.iot_standards||"integrations"in i||null!==(t=this._flowsInProgress)&&void 0!==t&&t.length?!i||null!=i&&i.iot_standards||"integrations"in i||null===(n=this._flowsInProgress)||void 0===n||!n.length?this.hass.localize("ui.panel.config.integrations.what_to_add"):this.hass.localize("ui.panel.config.integrations.confirm_add_discovered"):this.hass.localize("ui.panel.config.integrations.what_device_type")}},{kind:"method",key:"_renderIntegration",value:function(i){return(0,W.qy)(A||(A=(0,I.A)(['<ha-domain-integrations .hass="','" .domain="','" .integration="','" .flowsInProgress="','" style="','" @close-dialog="','" @supported-by="','" @select-brand="','"></ha-domain-integrations>'])),this.hass,this._pickedBrand,i,this._flowsInProgress,(0,Q.W)({minWidth:"".concat(this._width,"px"),minHeight:"581px"}),this.closeDialog,this._handleSupportedByEvent,this._handleSelectBrandEvent)}},{kind:"method",key:"_handleSelectBrandEvent",value:function(i){this._prevPickedBrand=this._pickedBrand,this._pickedBrand=i.detail.brand}},{kind:"method",key:"_handleSupportedByEvent",value:function(i){this._supportedBy(i.detail.integration)}},{kind:"method",key:"_supportedBy",value:function(i){var t=this,n=(0,ti.s)(this._integrations,i.supported_by);(0,ei.showConfirmationDialog)(this,{text:this.hass.localize("ui.panel.config.integrations.config_flow.supported_brand_flow",{supported_brand:i.name||(0,ii.p$)(this.hass.localize,i.domain),flow_domain_name:(null==n?void 0:n.name)||(0,ii.p$)(this.hass.localize,i.supported_by)}),confirm:function(){t.closeDialog(),J.x.includes(i.supported_by)?(0,J.P)(t,t.hass,i.supported_by):n?t._handleIntegrationPicked({domain:i.supported_by,name:n.name||(0,ii.p$)(t.hass.localize,i.supported_by),config_flow:n.config_flow,iot_standards:n.iot_standards}):(0,ei.showAlertDialog)(t,{text:"Integration not found",warning:!0})}})}},{kind:"method",key:"_renderAll",value:function(i){return(0,W.qy)(z||(z=(0,I.A)(['<search-input .hass="','" dialogInitialFocus="','" .filter="','" @value-changed="','" .label="','" @keypress="','"></search-input> '," "])),this.hass,(0,E.J)(this._narrow?void 0:""),this._filter,this._filterChanged,this.hass.localize("ui.panel.config.integrations.search_brand"),this._maybeSubmit,i?(0,W.qy)(P||(P=(0,I.A)(['<mwc-list dialogInitialFocus="','"> <lit-virtualizer scroller class="ha-scrollbar" style="','" @click="','" .items="','" .keyFunction="','" .renderItem="','"> </lit-virtualizer> </mwc-list>'])),(0,E.J)(this._narrow?"":void 0),(0,Q.W)({width:"".concat(this._width,"px"),height:this._narrow?"calc(100vh - 184px)":"500px"}),this._integrationPicked,i,this._keyFunction,this._renderRow):(0,W.qy)(M||(M=(0,I.A)(['<div class="flex center"> <ha-circular-progress indeterminate></ha-circular-progress> </div>']))))}},{kind:"field",key:"_keyFunction",value:function(){return function(i){return i.domain}}},{kind:"field",key:"_renderRow",value:function(){var i=this;return function(t){return t?(0,W.qy)(B||(B=(0,I.A)([' <ha-integration-list-item brand .hass="','" .integration="','"> </ha-integration-list-item> '])),i.hass,t):W.s6}}},{kind:"method",key:"_load",value:(s=(0,O.A)((0,L.A)().mark((function i(){var t,n,e;return(0,L.A)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,ti.O)(this.hass);case 2:t=i.sent,i.t0=(0,L.A)().keys(t.custom.integration);case 4:if((i.t1=i.t0()).done){i.next=11;break}if(n=i.t1.value,Object.prototype.hasOwnProperty.call(t.custom.integration,n)){i.next=8;break}return i.abrupt("continue",4);case 8:t.custom.integration[n].is_built_in=!1,i.next=4;break;case 11:this._integrations=Object.assign(Object.assign({},t.core.integration),t.custom.integration),i.t2=(0,L.A)().keys(t.custom.helper);case 13:if((i.t3=i.t2()).done){i.next=20;break}if(e=i.t3.value,Object.prototype.hasOwnProperty.call(t.custom.helper,e)){i.next=17;break}return i.abrupt("continue",13);case 17:t.custom.helper[e].is_built_in=!1,i.next=13;break;case 20:this._helpers=Object.assign(Object.assign({},t.core.helper),t.custom.helper),this.hass.loadBackendTranslation("title",t.core.translated_name,!0);case 22:case"end":return i.stop()}}),i,this)}))),function(){return s.apply(this,arguments)})},{kind:"method",key:"_filterChanged",value:(r=(0,O.A)((0,L.A)().mark((function i(t){return(0,L.A)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:this._filter=t.detail.value;case 1:case"end":return i.stop()}}),i,this)}))),function(i){return r.apply(this,arguments)})},{kind:"method",key:"_integrationPicked",value:function(i){var t=i.target.closest("ha-integration-list-item");t&&this._handleIntegrationPicked(t.integration)}},{kind:"method",key:"_handleIntegrationPicked",value:(a=(0,O.A)((0,L.A)().mark((function i(t){var n,e;return(0,L.A)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!t.supported_by){i.next=3;break}return this._supportedBy(t),i.abrupt("return");case 3:if(!t.is_add){i.next=7;break}return(0,J.P)(this,this.hass,t.domain),this.closeDialog(),i.abrupt("return");case 7:if(!t.is_helper){i.next=11;break}return this.closeDialog(),(0,G.o)("/config/helpers/add?domain=".concat(t.domain)),i.abrupt("return");case 11:if(!t.integrations){i.next=17;break}return n=t.domains||[],"apple"===t.domain&&(n=n.filter((function(i){return"homekit_controller"!==i}))),this._fetchFlowsInProgress(n),this._pickedBrand=t.domain,i.abrupt("return");case 17:if(!J.x.includes(t.domain)||!(0,N.x)(this.hass,t.domain)){i.next=20;break}return this._pickedBrand=t.domain,i.abrupt("return");case 20:if(!t.iot_standards){i.next=23;break}return this._pickedBrand=t.domain,i.abrupt("return");case 23:if(!t.single_config_entry){i.next=31;break}return i.next=26,(0,gi.VN)(this.hass,{domain:t.domain});case 26:if(!(i.sent.length>0)){i.next=31;break}return this.closeDialog(),(0,ei.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.integrations.config_flow.single_config_entry_title"),text:this.hass.localize("ui.panel.config.integrations.config_flow.single_config_entry",{integration_name:t.name})}),i.abrupt("return");case 31:if(!t.config_flow){i.next=34;break}return this._createFlow(t.domain),i.abrupt("return");case 34:if("cloud"!==t.domain||!(0,N.x)(this.hass,"cloud")){i.next=38;break}return this.closeDialog(),(0,G.o)("/config/cloud"),i.abrupt("return");case 38:if(!["google_assistant","alexa"].includes(t.domain)||!(0,N.x)(this.hass,"cloud")){i.next=42;break}return this.closeDialog(),(0,G.o)("/config/voice-assistants/assistants"),i.abrupt("return");case 42:return i.next=44,(0,ii.QC)(this.hass,t.domain);case 44:e=i.sent,(0,hi.n)(this,{manifest:e});case 46:case"end":return i.stop()}}),i,this)}))),function(i){return a.apply(this,arguments)})},{kind:"method",key:"_createFlow",value:(e=(0,O.A)((0,L.A)().mark((function i(t){var n,e,a;return(0,L.A)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this._fetchFlowsInProgress([t]);case 2:if(null==(e=i.sent)||!e.length){i.next=6;break}return this._pickedBrand=t,i.abrupt("return");case 6:return i.next=8,(0,ii.QC)(this.hass,t);case 8:a=i.sent,this.closeDialog(),(0,ni.W)(this,{startFlowHandler:t,showAdvanced:null===(n=this.hass.userData)||void 0===n?void 0:n.showAdvanced,manifest:a});case 11:case"end":return i.stop()}}),i,this)}))),function(i){return e.apply(this,arguments)})},{kind:"method",key:"_fetchFlowsInProgress",value:(n=(0,O.A)((0,L.A)().mark((function i(t){var n;return(0,L.A)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,Y.t2)(this.hass.connection);case 2:return(n=i.sent.filter((function(i){return t.includes(i.handler)||"alternative_domain"in i.context&&t.includes(i.context.alternative_domain)}))).length&&(this._flowsInProgress=n),i.abrupt("return",n);case 5:case"end":return i.stop()}}),i,this)}))),function(i){return n.apply(this,arguments)})},{kind:"method",key:"_maybeSubmit",value:function(i){if("Enter"===i.key){var t=this._getIntegrations();t.length>0&&this._handleIntegrationPicked(t[0])}}},{kind:"method",key:"_prevClicked",value:function(){this._pickedBrand=this._prevPickedBrand,this._prevPickedBrand||(this._flowsInProgress=void 0),this._prevPickedBrand=void 0}},{kind:"field",static:!0,key:"styles",value:function(){return[ai.dp,ai.nA,(0,W.AH)(F||(F=(0,I.A)(["@media all and (min-width:550px){ha-dialog{--mdc-dialog-min-width:500px}}ha-dialog{--dialog-content-padding:0}search-input{display:block;margin:16px 16px 0}.divider{border-bottom-color:var(--divider-color)}h2{padding-inline-end:66px;direction:var(--direction)}p{text-align:center;padding:16px;margin:0}p>a{color:var(--primary-color)}.flex.center{display:flex;justify-content:center;align-items:center}ha-circular-progress{margin:24px 0}mwc-list{position:relative}lit-virtualizer{contain:size layout!important}ha-integration-list-item{width:100%}ha-icon-button-prev{color:var(--secondary-text-color);position:absolute;left:16px;top:14px;inset-inline-end:initial;inset-inline-start:16px;direction:var(--direction)}.mdc-dialog__title{margin:0;margin-bottom:8px;margin-left:48px;margin-inline-start:48px;margin-inline-end:initial;padding:24px 24px 0 24px;color:var(--mdc-dialog-heading-ink-color,rgba(0,0,0,.87));font-size:var(--mdc-typography-headline6-font-size, 1.25rem);line-height:var(--mdc-typography-headline6-line-height, 2rem);font-weight:var(--mdc-typography-headline6-font-weight,500);letter-spacing:var(\n          --mdc-typography-headline6-letter-spacing,\n          .0125em\n        );text-decoration:var(--mdc-typography-headline6-text-decoration,inherit);text-transform:var(--mdc-typography-headline6-text-transform,inherit)}"])))]}}]}}),W.WF)},54629:function(i,t,n){n.d(t,{i:function(){return r}});n(97741),n(16891);var e=n(94366),a=n(57115),r=function(i,t){var n,r=e.A.config.getFn(i,t);return Array.isArray(r)?r.map((function(i){return(0,a.s)(null!=i?i:"")})):(0,a.s)(null!==(n=r)&&void 0!==n?n:"")}}}]);
//# sourceMappingURL=10619.emslMP2MHdc.js.map