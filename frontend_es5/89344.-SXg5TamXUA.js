"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[89344],{89344:function(e,t,i){i.r(t);var s,a,n,o=i(41981),r=i(64599),l=i(33994),d=i(22858),c=i(35806),h=i(71008),u=i(62193),g=i(2816),p=i(27927),f=(i(81027),i(13025),i(82386),i(79243),i(97741),i(50693),i(39790),i(9241),i(36604),i(253),i(2075),i(16891),i(4525),i(72606),i(63893),i(50289)),v=i(29818),_=i(10977),m=i(94100),k=i(34897),x=i(19244),y=(i(35619),i(72829),i(47572)),A=i(55321);i(28019),(0,p.A)([(0,v.EM)("dialog-expose-entity")],(function(e,t){var i,p=function(t){function i(){var t;(0,h.A)(this,i);for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return t=(0,u.A)(this,i,[].concat(a)),e(t),t}return(0,g.A)(i,t),(0,c.A)(i)}(t);return{F:p,d:[{kind:"field",decorators:[(0,v.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,v.wk)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,v.wk)()],key:"_filter",value:void 0},{kind:"field",decorators:[(0,v.wk)()],key:"_selected",value:function(){return[]}},{kind:"method",key:"showDialog",value:(i=(0,d.A)((0,l.A)().mark((function e(t){return(0,l.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._params=t;case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{kind:"method",key:"closeDialog",value:function(){this._params=void 0,this._selected=[],this._filter=void 0,(0,k.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"render",value:function(){if(!this._params)return f.s6;var e=this.hass.localize("ui.panel.config.voice_assistants.expose.expose_dialog.header"),t=this._filterEntities(this._params.exposedEntities,this._filter);return(0,f.qy)(s||(s=(0,r.A)([' <ha-dialog open @closed="','" .heading="','"> <ha-dialog-header slot="heading" show-border> <h2 class="header" slot="title"> ',' <span class="subtitle"> ',' </span> </h2> <ha-icon-button .label="','" .path="','" dialogAction="close" slot="navigationIcon"></ha-icon-button> <search-input .hass="','" .filter="','" @value-changed="','"></search-input> </ha-dialog-header> <mwc-list multi> <lit-virtualizer scroller class="ha-scrollbar" @click="','" .items="','" .renderItem="','"> </lit-virtualizer> </mwc-list> <mwc-button slot="primaryAction" @click="','" .disabled="','"> '," </mwc-button> </ha-dialog> "])),this.closeDialog,e,e,this.hass.localize("ui.panel.config.voice_assistants.expose.expose_dialog.expose_to",{assistants:this._params.filterAssistants.map((function(e){return y.aK[e].name})).join(", ")}),this.hass.localize("ui.dialogs.generic.close"),"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",this.hass,this._filter,this._filterChanged,this._itemClicked,t,this._renderItem,this._expose,0===this._selected.length,this.hass.localize("ui.panel.config.voice_assistants.expose.expose_dialog.expose_entities",{count:this._selected.length}))}},{kind:"field",key:"_handleSelected",value:function(){var e=this;return function(t){var i=t.target.value;if(t.detail.selected){if(e._selected.includes(i))return;e._selected=[].concat((0,o.A)(e._selected),[i])}else e._selected=e._selected.filter((function(e){return e!==i}))}}},{kind:"method",key:"_itemClicked",value:function(e){var t=e.target.closest("ha-check-list-item");t.selected=!t.selected}},{kind:"method",key:"_filterChanged",value:function(e){this._filter=e.detail.value}},{kind:"field",key:"_filterEntities",value:function(){var e=this;return(0,m.A)((function(t,i){var s=null==i?void 0:i.toLowerCase();return Object.values(e.hass.states).filter((function(i){var a;return e._params.filterAssistants.some((function(e){var s;return!(null!==(s=t[i.entity_id])&&void 0!==s&&s[e])}))&&(!s||i.entity_id.toLowerCase().includes(s)||(null===(a=(0,x.u)(i))||void 0===a?void 0:a.toLowerCase().includes(s)))}))}))}},{kind:"field",key:"_renderItem",value:function(){var e=this;return function(t){return(0,f.qy)(a||(a=(0,r.A)([' <ha-check-list-item graphic="icon" twoLine .value="','" .selected="','" @request-selected="','"> <ha-state-icon title="','" slot="graphic" .hass="','" .stateObj="','"></ha-state-icon> ',' <span slot="secondary">',"</span> </ha-check-list-item> "])),t.entity_id,e._selected.includes(t.entity_id),e._handleSelected,(0,_.J)(null==t?void 0:t.state),e.hass,t,(0,x.u)(t),t.entity_id)}}},{kind:"method",key:"_expose",value:function(){this._params.exposeEntities(this._selected),this.closeDialog()}},{kind:"get",static:!0,key:"styles",value:function(){return[A.RF,(0,f.AH)(n||(n=(0,r.A)(["ha-dialog{--dialog-content-padding:0;--mdc-dialog-min-width:500px;--mdc-dialog-max-width:600px}mwc-list{position:relative}lit-virtualizer{height:500px}search-input{width:100%;display:block;box-sizing:border-box;--text-field-suffix-padding-left:8px}.header{margin:0;pointer-events:auto;-webkit-font-smoothing:antialiased;font-weight:inherit;font-size:inherit;box-sizing:border-box;display:flex;flex-direction:column;margin:-4px 0}.subtitle{color:var(--secondary-text-color);font-size:1rem;line-height:normal}lit-virtualizer{width:100%;contain:size layout!important}ha-check-list-item{width:100%;height:72px}ha-check-list-item ha-state-icon{margin-left:24px;margin-inline-start:24px;margin-inline-end:initial}@media all and (max-height:800px){lit-virtualizer{height:334px}}@media all and (max-height:600px){lit-virtualizer{height:238px}}@media all and (max-width:500px),all and (max-height:500px){ha-dialog{--mdc-dialog-min-width:calc(\n              100vw - env(safe-area-inset-right) - env(safe-area-inset-left)\n            );--mdc-dialog-max-width:calc(\n              100vw - env(safe-area-inset-right) - env(safe-area-inset-left)\n            );--mdc-dialog-min-height:100%;--mdc-dialog-max-height:100%;--vertical-align-dialog:flex-end;--ha-dialog-border-radius:0px}lit-virtualizer{height:calc(100vh - 198px)}search-input{--text-field-suffix-padding-left:unset}ha-check-list-item ha-state-icon{margin-left:8px;margin-inline-start:8px;margin-inline-end:initial}}"])))]}}]}}),f.WF)},28019:function(e,t,i){var s,a,n,o,r,l,d,c,h,u=i(64599),g=i(41981),p=i(33994),f=i(22858),v=i(35806),_=i(71008),m=i(62193),k=i(2816),x=i(27927),y=(i(81027),i(13025),i(39805),i(97741),i(97099),i(50693),i(10507),i(39790),i(79641),i(253),i(2075),i(16891),i(4525),i(50289)),A=i(29818),w=i(94100),b=i(33922),z=i(34897),q=i(92389),I=(i(6482),i(24640),i(60203),i(86181)),L=i(86127),E=i(54108),C=i(53368),M=i(47572),S=i(20712),F=i(55321),O=i(51842),Z=i(84976);(0,x.A)([(0,A.EM)("entity-voice-settings")],(function(e,t){var i,x,S,j,H,U=function(t){function i(){var t;(0,_.A)(this,i);for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return t=(0,m.A)(this,i,[].concat(a)),e(t),t}return(0,k.A)(i,t),(0,v.A)(i)}(t);return{F:U,d:[{kind:"field",decorators:[(0,A.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,A.MZ)()],key:"entityId",value:void 0},{kind:"field",decorators:[(0,A.MZ)({attribute:!1})],key:"exposed",value:void 0},{kind:"field",decorators:[(0,A.MZ)({attribute:!1})],key:"entry",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_cloudStatus",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_aliases",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_googleEntity",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_unsupported",value:function(){return{}}},{kind:"method",key:"willUpdate",value:function(e){var t=this;(0,b.x)(this.hass,"cloud")&&(e.has("entityId")&&this.entityId&&this._fetchEntities(),this.hasUpdated||(0,L.eN)(this.hass).then((function(e){t._cloudStatus=e})))}},{kind:"method",key:"_fetchEntities",value:(H=(0,f.A)((0,p.A)().mark((function e(){var t;return(0,p.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,C.kz)(this.hass,this.entityId);case 3:t=e.sent,this._googleEntity=t,this.requestUpdate("_googleEntity"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),"not_supported"===e.t0.code&&(this._unsupported["cloud.google_assistant"]=!0,this.requestUpdate("_unsupported"));case 11:return e.prev=11,e.next=14,(0,I.Gk)(this.hass,this.entityId);case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),"not_supported"===e.t1.code&&(this._unsupported["cloud.alexa"]=!0,this.requestUpdate("_unsupported"));case 19:case"end":return e.stop()}}),e,this,[[0,8],[11,16]])}))),function(){return H.apply(this,arguments)})},{kind:"field",key:"_getEntityFilterFuncs",value:function(){return(0,w.A)((function(e,t){return{google:(0,q._)(e.include_domains,e.include_entities,e.exclude_domains,e.exclude_entities),alexa:(0,q._)(t.include_domains,t.include_entities,t.exclude_domains,t.exclude_entities)}}))}},{kind:"method",key:"render",value:function(){var e,t,i,h=this,p=!0===(null===(e=this._cloudStatus)||void 0===e?void 0:e.logged_in)&&!0===this._cloudStatus.prefs.google_enabled,f=!0===(null===(t=this._cloudStatus)||void 0===t?void 0:t.logged_in)&&!0===this._cloudStatus.prefs.alexa_enabled,v=(0,g.A)(Object.keys(M.aK)),_=(0,g.A)(v),m=f&&!(0,q.e)(this._cloudStatus.alexa_entities),k=p&&!(0,q.e)(this._cloudStatus.google_entities);p?k&&_.splice(_.indexOf("cloud.google_assistant"),1):(v.splice(v.indexOf("cloud.google_assistant"),1),_.splice(v.indexOf("cloud.google_assistant"),1)),f?m&&_.splice(_.indexOf("cloud.alexa"),1):(v.splice(v.indexOf("cloud.alexa"),1),_.splice(_.indexOf("cloud.alexa"),1));var x,A=_.some((function(e){return h.exposed[e]}));(m||k)&&(x=this._getEntityFilterFuncs(this._cloudStatus.google_entities,this._cloudStatus.alexa_entities));var w=m&&x.alexa(this.entityId),b=k&&x.google(this.entityId),z=A||w||b;return(0,y.qy)(s||(s=(0,u.A)([' <ha-settings-row> <h3 slot="heading"> ',' </h3> <ha-switch @change="','" .assistants="','" .checked="','"></ha-switch> </ha-settings-row> ',' <h3 class="header"> ',' </h3> <p class="description"> '," </p> "," "])),this.hass.localize("ui.dialogs.voice-settings.expose_header"),this._toggleAll,_,z,z?v.map((function(e){var t,i,s=!h._unsupported[e],l=m&&"cloud.alexa"===e?w:k&&"cloud.google_assistant"===e?b:h.exposed[e],d=m&&"cloud.alexa"===e||k&&"cloud.google_assistant"===e,c="cloud.google_assistant"===e&&!k&&s&&(null===(t=h._googleEntity)||void 0===t?void 0:t.might_2fa);return(0,y.qy)(a||(a=(0,u.A)([' <ha-settings-row .threeLine="','"> <img alt="" src="','" crossorigin="anonymous" referrerpolicy="no-referrer" slot="prefix"> <span slot="heading">',"</span> "," "," ",' <ha-switch .assistant="','" @change="','" .disabled="','" .checked="','"></ha-switch> </ha-settings-row> '])),!s&&d,(0,O.MR)({domain:M.aK[e].domain,type:"icon",darkOptimized:null===(i=h.hass.themes)||void 0===i?void 0:i.darkMode}),M.aK[e].name,s?y.s6:(0,y.qy)(n||(n=(0,u.A)(['<div slot="description" class="unsupported"> <ha-svg-icon .path="','"></ha-svg-icon> '," </div>"])),"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",h.hass.localize("ui.dialogs.voice-settings.unsupported")),d?(0,y.qy)(o||(o=(0,u.A)([' <div slot="description"> '," </div> "])),h.hass.localize("ui.dialogs.voice-settings.manual_config")):y.s6,c?(0,y.qy)(r||(r=(0,u.A)([' <ha-formfield slot="description" .label="','"> <ha-checkbox .checked="','" @change="','"></ha-checkbox> </ha-formfield> '])),h.hass.localize("ui.dialogs.voice-settings.ask_pin"),!h._googleEntity.disable_2fa,h._2faChanged):y.s6,e,h._toggleAssistant,d||!l&&!s,l)})):y.s6,this.hass.localize("ui.dialogs.voice-settings.aliases_header"),this.hass.localize("ui.dialogs.voice-settings.aliases_description"),this.entry?(0,y.qy)(c||(c=(0,u.A)(['<ha-aliases-editor .hass="','" .aliases="','" @value-changed="','" @blur="','"></ha-aliases-editor>'])),this.hass,null!==(i=this._aliases)&&void 0!==i?i:this.entry.aliases,this._aliasesChanged,this._saveAliases):(0,y.qy)(l||(l=(0,u.A)(['<ha-alert alert-type="warning"> '," </ha-alert>"])),this.hass.localize("ui.dialogs.voice-settings.aliases_no_unique_id",{faq_link:(0,y.qy)(d||(d=(0,u.A)(['<a href="','" target="_blank" rel="noreferrer">',"</a>"])),(0,Z.o)(this.hass,"/faq/unique_id"),this.hass.localize("ui.dialogs.entity_registry.faq"))})))}},{kind:"method",key:"_aliasesChanged",value:function(e){this._aliases=e.detail.value}},{kind:"method",key:"_2faChanged",value:(j=(0,f.A)((0,p.A)().mark((function e(t){return(0,p.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,L.p1)(this.hass,this.entityId,!t.target.checked);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t.target.checked=!t.target.checked;case 8:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e){return j.apply(this,arguments)})},{kind:"method",key:"_saveAliases",value:(S=(0,f.A)((0,p.A)().mark((function e(){var t;return(0,p.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._aliases){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,E.G_)(this.hass,this.entityId,{aliases:this._aliases.map((function(e){return e.trim()})).filter((function(e){return e}))});case 4:t=e.sent,(0,z.r)(this,"entity-entry-updated",t.entity_entry);case 6:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{kind:"method",key:"_toggleAssistant",value:(x=(0,f.A)((0,p.A)().mark((function e(t){var i;return(0,p.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,M.ij)(this.hass,[t.target.assistant],[this.entityId],t.target.checked),!this.entry){e.next=6;break}return e.next=4,(0,E.v)(this.hass,this.entityId);case 4:i=e.sent,(0,z.r)(this,"entity-entry-updated",i);case 6:(0,z.r)(this,"exposed-entities-changed");case 7:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{kind:"method",key:"_toggleAll",value:(i=(0,f.A)((0,p.A)().mark((function e(t){var i,s,a,n=this;return(0,p.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.target.checked,s=i?t.target.assistants.filter((function(e){return!n._unsupported[e]})):t.target.assistants,(0,M.ij)(this.hass,s,[this.entityId],t.target.checked),!this.entry){e.next=8;break}return e.next=6,(0,E.v)(this.hass,this.entityId);case 6:a=e.sent,(0,z.r)(this,"entity-entry-updated",a);case 8:(0,z.r)(this,"exposed-entities-changed");case 9:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[F.RF,(0,y.AH)(h||(h=(0,u.A)([":host{display:block;margin:32px;margin-top:0;--settings-row-prefix-display:contents;--settings-row-content-display:contents}ha-settings-row{padding:0}img{height:32px;width:32px;margin-right:16px;margin-inline-end:16px;margin-inline-start:initial}ha-aliases-editor{display:block}ha-alert{display:block;margin-top:16px}ha-formfield{margin-left:-8px;margin-inline-start:-8px;margin-inline-end:initial}ha-checkbox{--mdc-checkbox-state-layer-size:40px}.unsupported{display:flex;align-items:center}.unsupported ha-svg-icon{color:var(--error-color);--mdc-icon-size:16px;margin-right:4px;margin-inline-end:4px;margin-inline-start:initial}.header{margin-top:8px;margin-bottom:4px}.description{color:var(--secondary-text-color);font-size:14px;line-height:20px;margin-top:0;margin-bottom:16px}"])))]}}]}}),(0,S.E)(y.WF))}}]);
//# sourceMappingURL=89344.-SXg5TamXUA.js.map