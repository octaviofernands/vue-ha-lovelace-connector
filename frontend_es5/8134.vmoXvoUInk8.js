"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[8134],{46999:function(e,t,n){n.d(t,{Vy:function(){return a},fI:function(){return o}});var i=n(45253),r=["#44739e","#984ea3","#00d2d5","#ff7f00","#af8d00","#7f80cd","#b3e900","#c42e60","#a65628","#f781bf","#8dd3c7","#bebada","#fb8072","#80b1d3","#fdb462","#fccde5","#bc80bd","#ffed6f","#c4eaff","#cf8c00","#1b9e77","#d95f02","#e7298a","#e6ab02","#a6761d","#0097ff","#00d067","#f43600","#4ba93b","#5779bb","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function a(e){return r[e%r.length]}function o(e,t){var n=t.getPropertyValue("--graph-color-".concat(e+1))||a(e);return(0,i.RQ)(n)}},73207:function(e,t,n){n.d(t,{c:function(){return h}});n(95737),n(33822),n(39790),n(99019),n(96858);var i=n(46999),r=n(45253),a=n(92164),o=n(213),s=n(95239),c=n(9883),d=n(61352),l={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};var u=0,_=new Map;function h(e,t,n){return function(e,t,n){var i;if(!n||e===c.Hh)return(0,d.a)("--history-unavailable-color",t);if(e===c.HV)return(0,d.a)("--history-unknown-color",t);var u=(0,s.mg)(n,e);if(u){var _=(0,d.a)(u,t);if(_){var h=(0,o.m)(n.entity_id),f=null===(i=l[h])||void 0===i?void 0:i[e];return f?(0,r.zm)((0,a.T)((0,r.Nc)((0,r.xp)(_)),f)):_}}}(e,t,n)||function(e,t){if(_.has(e))return _.get(e);var n=(0,i.fI)(u,t);return u++,_.set(e,n),n}(e,t)}},78573:function(e,t,n){n.d(t,{cj:function(){return _},dG:function(){return y},rc:function(){return b},gd:function(){return f},a$:function(){return p},$O:function(){return m},gM:function(){return g}});var i=n(33994),r=n(22858),a=(n(39790),n(66457),n(36016),n(7760),n(43037),n(92765),n(94872)),o=n(213),s=n(65459),c=n(49281),d=function(e,t){return function(e){switch(e){case"de":case"lb":return!0;default:return!1}}(t)?(0,c.Z)(e):e.toLocaleLowerCase(t)},l=n(9883),u="ui.components.logbook.messages",_=["counter","proximity","sensor","zone"],h={"numeric state of":"triggered_by_numeric_state_of","state of":"triggered_by_state_of",event:"triggered_by_event",time:"triggered_by_time","time pattern":"triggered_by_time_pattern","Home Assistant stopping":"triggered_by_homeassistant_stopping","Home Assistant starting":"triggered_by_homeassistant_starting"},f=function(){var e=(0,r.A)((0,i.A)().mark((function e(t,n,r){return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v(t,n,void 0,void 0,r));case 1:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),v=function(e,t,n,i,r,a){if((i||a)&&(!i||0===i.length)&&(!a||0===a.length))return Promise.resolve([]);var o={type:"logbook/get_events",start_time:t};return n&&(o.end_time=n),null!=i&&i.length&&(o.entity_ids=i),null!=a&&a.length&&(o.device_ids=a),r&&(o.context_id=r),e.callWS(o)},g=function(e,t,n,i,r,a){if((r||a)&&(!r||0===r.length)&&(!a||0===a.length))return Promise.reject("No entities or devices");var o={type:"logbook/event_stream",start_time:n,end_time:i};return null!=r&&r.length&&(o.entity_ids=r),null!=a&&a.length&&(o.device_ids=a),e.connection.subscribeMessage((function(e){return t(e)}),o)},y=function(e,t){return{entity_id:e.entity_id,state:t,attributes:{device_class:null==e?void 0:e.attributes.device_class,source_type:null==e?void 0:e.attributes.source_type,has_date:null==e?void 0:e.attributes.has_date,has_time:null==e?void 0:e.attributes.has_time,entity_picture_local:a.oL.has((0,o.m)(e.entity_id))||null==e?void 0:e.attributes.entity_picture_local,entity_picture:a.oL.has((0,o.m)(e.entity_id))||null==e?void 0:e.attributes.entity_picture}}},m=function(e,t){for(var n in h)if(t.startsWith(n))return t.replace(n,"".concat(e("ui.components.logbook.".concat(h[n]))));return t},p=function(e,t,n,i,r){switch(r){case"device_tracker":case"person":return"not_home"===n?t("".concat(u,".was_away")):"home"===n?t("".concat(u,".was_at_home")):t("".concat(u,".was_at_state"),{state:n});case"sun":return t("".concat(u,"above_horizon"===n?".rose":".set"));case"binary_sensor":var o=n===a.Or,s=n===a.qg,c=i.attributes.device_class;switch(c){case"battery":if(o)return t("".concat(u,".was_low"));if(s)return t("".concat(u,".was_normal"));break;case"connectivity":if(o)return t("".concat(u,".was_connected"));if(s)return t("".concat(u,".was_disconnected"));break;case"door":case"garage_door":case"opening":case"window":if(o)return t("".concat(u,".was_opened"));if(s)return t("".concat(u,".was_closed"));break;case"lock":if(o)return t("".concat(u,".was_unlocked"));if(s)return t("".concat(u,".was_locked"));break;case"plug":if(o)return t("".concat(u,".was_plugged_in"));if(s)return t("".concat(u,".was_unplugged"));break;case"presence":if(o)return t("".concat(u,".was_at_home"));if(s)return t("".concat(u,".was_away"));break;case"safety":if(o)return t("".concat(u,".was_unsafe"));if(s)return t("".concat(u,".was_safe"));break;case"cold":case"gas":case"heat":case"moisture":case"motion":case"occupancy":case"power":case"problem":case"smoke":case"sound":case"vibration":if(o)return t("".concat(u,".detected_device_class"),{device_class:d(t("component.binary_sensor.entity_component.".concat(c,".name")),e.language)});if(s)return t("".concat(u,".cleared_device_class"),{device_class:d(t("component.binary_sensor.entity_component.".concat(c,".name")),e.language)});break;case"tamper":if(o)return t("".concat(u,".detected_tampering"));if(s)return t("".concat(u,".cleared_tampering"))}break;case"cover":switch(n){case"open":return t("".concat(u,".was_opened"));case"opening":return t("".concat(u,".is_opening"));case"closing":return t("".concat(u,".is_closing"));case"closed":return t("".concat(u,".was_closed"))}break;case"event":return t("".concat(u,".detected_event_no_type"));case"lock":switch(n){case"unlocked":return t("".concat(u,".was_unlocked"));case"locking":return t("".concat(u,".is_locking"));case"unlocking":return t("".concat(u,".is_unlocking"));case"opening":return t("".concat(u,".is_opening"));case"open":return t("".concat(u,".is_opened"));case"locked":return t("".concat(u,".was_locked"));case"jammed":return t("".concat(u,".is_jammed"))}}return n===a.Or?t("".concat(u,".turned_on")):n===a.qg?t("".concat(u,".turned_off")):n===l.HV?t("".concat(u,".became_unknown")):n===l.Hh?t("".concat(u,".became_unavailable")):e.localize("".concat(u,".changed_to_state"),{state:i?e.formatEntityState(i,n):n})},b=function(e){return"sensor"!==(0,s.t)(e)||void 0===e.attributes.unit_of_measurement&&void 0===e.attributes.state_class}},38545:function(e,t,n){n.d(t,{Ci:function(){return o},AB:function(){return s},E4:function(){return i},gq:function(){return a},d1:function(){return r}});n(71499),n(44124),n(53165),n(29193),n(10507),n(39790),n(253),n(94438);var i=function(e,t,n,i){return e.callWS({type:"trace/get",domain:t,item_id:n,run_id:i})},r=function(e,t,n){return e.callWS({type:"trace/list",domain:t,item_id:n})},a=function(e,t,n){return e.callWS({type:"trace/contexts",domain:t,item_id:n})},o=function(e,t){for(var n=t.split("/").reverse(),i=e;n.length;){var r=n.pop(),a=Number(r);if(isNaN(a)){var o=i[r];if(!o&&"sequence"===r)continue;i=o}else if(Array.isArray(i))i=i[a];else if(0!==a)throw new Error("If config is not an array, can only return index 0")}return i},s=function(e){return"trigger"===e||(t="trigger/",e.substring(0,t.length)===t);var t}},61558:function(e,t,n){var i=n(22858).A,r=n(33994).A;n.a(e,function(){var e=i(r().mark((function e(t,i){var a,o,s,c,d,l,u,_,h,f,v,g,y,m,p,b,k,x,w,A,z,M,q,C,I,E,S,L,P,W,Z,H,N,T,B,j,O,D,U,$,F,V,G,R,Q,Y,J,K,X,ee,te,ne,ie,re,ae,oe,se,ce,de,le,ue,_e,he;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=n(64599),o=n(35806),s=n(71008),c=n(62193),d=n(2816),l=n(27927),u=n(81027),_=n(82386),h=n(39805),f=n(95737),v=n(79243),g=n(97741),y=n(89655),m=n(97099),p=n(50693),b=n(39790),k=n(36016),x=n(55228),w=n(36604),A=n(43037),z=n(16891),M=n(96858),q=n(50289),C=n(29818),I=n(85323),E=n(55165),S=n(33922),L=n(57289),P=n(41924),W=n(37456),Z=n(34897),H=n(213),N=n(16312),T=n(73207),n(12675),n(32885),n(46163),B=n(13740),j=n(78573),O=n(55321),D=n(28884),U=n(51842),$=n(46092),!(F=t([L,P,B])).then){e.next=68;break}return e.next=64,F;case 64:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=69;break;case 68:e.t0=F;case 69:V=e.t0,L=V[0],P=V[1],B=V[2],ue=["script","automation"],_e=function(e){return e.context_event_type||e.context_state||e.context_message},he=function(e,t){return t?e.replace(t," "):e},(0,l.A)([(0,C.EM)("ha-logbook-renderer")],(function(e,t){var n=function(t){function n(){var t;(0,s.A)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=(0,c.A)(this,n,[].concat(r)),e(t),t}return(0,d.A)(n,t),(0,o.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,C.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,C.MZ)({attribute:!1})],key:"userIdToName",value:function(){return{}}},{kind:"field",decorators:[(0,C.MZ)({attribute:!1})],key:"traceContexts",value:function(){return{}}},{kind:"field",decorators:[(0,C.MZ)({attribute:!1})],key:"entries",value:function(){return[]}},{kind:"field",decorators:[(0,C.MZ)({type:Boolean,attribute:"narrow"})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,C.MZ)({type:Boolean,attribute:"virtualize",reflect:!0})],key:"virtualize",value:function(){return!1}},{kind:"field",decorators:[(0,C.MZ)({type:Boolean,attribute:"show-indicator"})],key:"showIndicator",value:function(){return!1}},{kind:"field",decorators:[(0,C.MZ)({type:Boolean,attribute:"no-icon"})],key:"noIcon",value:function(){return!1}},{kind:"field",decorators:[(0,C.MZ)({type:Boolean,attribute:"no-name"})],key:"noName",value:function(){return!1}},{kind:"field",decorators:[(0,C.MZ)({type:Boolean,attribute:"relative-time"})],key:"relativeTime",value:function(){return!1}},{kind:"field",decorators:[(0,W.a)(".container")],key:"_savedScrollPos",value:void 0},{kind:"method",key:"willUpdate",value:function(e){(!this.hasUpdated&&this.virtualize||e.has("virtualize")&&this.virtualize)&&(this.hass.loadBackendTranslation("services"),this.hass.loadBackendTranslation("title"),(0,D.i)())}},{kind:"method",key:"shouldUpdate",value:function(e){var t=e.get("hass"),n=void 0===t||t.locale!==this.hass.locale;return e.has("entries")||e.has("traceContexts")||n}},{kind:"method",key:"render",value:function(){var e,t=this;return null!==(e=this.entries)&&void 0!==e&&e.length?(0,q.qy)(R||(R=(0,a.A)([' <div class="container ha-scrollbar ','" @scroll="','"> '," </div> "])),(0,I.H)({narrow:this.narrow,"no-name":this.noName,"no-icon":this.noIcon}),this._saveScrollPos,this.virtualize?(0,q.qy)(Q||(Q=(0,a.A)(['<lit-virtualizer @visibilityChanged="','" scroller class="ha-scrollbar" .items="','" .renderItem="','"> </lit-virtualizer>'])),this._visibilityChanged,this.entries,this._renderLogbookItem):this.entries.map((function(e,n){return t._renderLogbookItem(e,n)}))):(0,q.qy)(G||(G=(0,a.A)([' <div class="container no-entries"> '," </div> "])),this.hass.localize("ui.components.logbook.entries_not_found"))}},{kind:"field",key:"_renderLogbookItem",value:function(){var e=this;return function(t,n){var i;if(!t||void 0===n)return q.s6;var r=e.entries[n-1],o=[],s=t.entity_id?e.hass.states[t.entity_id]:void 0,c=s?(0,j.dG)(s,t.state):void 0,d=t.entity_id?(0,H.m)(t.entity_id):t.domain,l=c||t.icon||t.state||!d||!(0,S.x)(e.hass,d)?void 0:(0,U.MR)({domain:d,type:"icon",useFallback:!0,darkOptimized:null===(i=e.hass.themes)||void 0===i?void 0:i.darkMode}),u=ue.includes(t.domain)&&t.context_id in e.traceContexts?e.traceContexts[t.context_id]:void 0,_=void 0!==u;return(0,q.qy)(Y||(Y=(0,a.A)([' <div class="entry-container ','" .traceLink="','" @click="','"> ',' <div class="entry ','"> <div class="icon-message"> '," ",' <div class="message-relative_time"> <div class="message"> '," "," ",' </div> <div class="secondary"> <span>','</span> - <ha-relative-time .hass="','" .datetime="','" capitalize></ha-relative-time> '," "," </div> </div> </div> "," </div> </div> "])),(0,I.H)({clickable:_}),u?"/config/".concat(u.domain,"/trace/").concat(u.item_id,"?run_id=").concat(u.run_id):void 0,e._handleClick,0===n||null!=t&&t.when&&null!=r&&r.when&&new Date(1e3*t.when).toDateString()!==new Date(1e3*r.when).toDateString()?(0,q.qy)(J||(J=(0,a.A)([' <h4 class="date"> '," </h4> "])),(0,L.Yq)(new Date(1e3*t.when),e.hass.locale,e.hass.config)):q.s6,(0,I.H)({"no-entity":!t.entity_id}),e.noIcon?"":(0,q.qy)(K||(K=(0,a.A)([' <state-badge .hass="','" .overrideIcon="','" .overrideImage="','" .stateObj="','" .stateColor="','"></state-badge> '])),e.hass,t.icon,l,t.icon?void 0:c,!1),e.showIndicator?e._renderIndicator(t):"",e.noName?"":e._renderEntity(t.entity_id,t.name,_),e._renderMessage(t,o,d,c,_),e._renderContextMessage(t,o,_),(0,P.ie)(new Date(1e3*t.when),e.hass.locale,e.hass.config),e.hass,1e3*t.when,t.context_user_id?(0,q.qy)(X||(X=(0,a.A)(["",""])),e._renderUser(t)):"",_?"- ".concat(e.hass.localize("ui.components.logbook.show_trace")):"",_?(0,q.qy)(ee||(ee=(0,a.A)(["<ha-icon-next></ha-icon-next>"]))):"")}}},{kind:"method",decorators:[(0,C.Ls)({passive:!0})],key:"_saveScrollPos",value:function(e){this._savedScrollPos=e.target.scrollTop}},{kind:"method",decorators:[(0,C.Ls)({passive:!0})],key:"_visibilityChanged",value:function(e){(0,Z.r)(this,"hass-logbook-live",{enable:0===e.first})}},{kind:"method",key:"_renderIndicator",value:function(e){var t=this.hass.states[e.entity_id],n=getComputedStyle(this),i={backgroundColor:void 0!==e.state?(0,T.c)(e.state,n,t):void 0};return(0,q.qy)(te||(te=(0,a.A)([' <div class="indicator" style="','"></div> '])),(0,E.W)(i))}},{kind:"method",key:"_renderMessage",value:function(e,t,n,i,r){if(e.entity_id&&e.state)return i?(0,j.a$)(this.hass,this.hass.localize,e.state,i,n):e.state;var a=_e(e),o=e.message;if(ue.includes(n)&&e.source){if(a)return"";o=(0,j.$O)(this.hass.localize,e.source)}return o?this._formatMessageWithPossibleEntity(a?he(o,e.context_entity_id):o,t,void 0,r):""}},{kind:"method",key:"_renderUser",value:function(e){var t=e.context_user_id&&this.userIdToName[e.context_user_id];return t?"- ".concat(t):""}},{kind:"method",key:"_renderUnseenContextSourceEntity",value:function(e,t,n){return!e.context_entity_id||t.includes(e.context_entity_id)?"":(0,q.qy)(ne||(ne=(0,a.A)([" (",")"])),this._renderEntity(e.context_entity_id,e.context_entity_id_name,n))}},{kind:"method",key:"_renderContextMessage",value:function(e,t,n){if(e.context_state){var i=e.context_entity_id&&e.context_entity_id in this.hass.states?(0,j.dG)(this.hass.states[e.context_entity_id],e.context_state):void 0;return(0,q.qy)(ie||(ie=(0,a.A)([""," "," ",""])),this.hass.localize("ui.components.logbook.triggered_by_state_of"),this._renderEntity(e.context_entity_id,e.context_entity_id_name,n),i?(0,j.a$)(this.hass,this.hass.localize,e.context_state,i,(0,H.m)(e.context_entity_id)):e.context_state)}var r;if("call_service"===e.context_event_type)return(0,q.qy)(re||(re=(0,a.A)([""," ",""])),this.hass.localize("ui.components.logbook.triggered_by_service"),e.context_domain&&e.context_service?"".concat((0,$.p$)(this.hass.localize,e.context_domain),":\n      ").concat(this.hass.localize("component.".concat(e.context_domain,".services.").concat(e.context_service,".name"))||(null===(r=this.hass.services[e.context_domain])||void 0===r||null===(r=r[e.context_service])||void 0===r?void 0:r.name)||e.context_service):"");if(!e.context_message||t.includes(e.context_entity_id))return"";if("automation_triggered"===e.context_event_type||"script_started"===e.context_event_type){var o=e.context_source?e.context_source:e.context_message.replace("triggered by ",""),s=(0,j.$O)(this.hass.localize,o);return(0,q.qy)(ae||(ae=(0,a.A)([""," "," ",""])),this.hass.localize("automation_triggered"===e.context_event_type?"ui.components.logbook.triggered_by_automation":"ui.components.logbook.triggered_by_script"),this._renderEntity(e.context_entity_id,e.context_entity_id_name,n),e.context_message?this._formatMessageWithPossibleEntity(s,t,void 0,n):"")}return(0,q.qy)(oe||(oe=(0,a.A)([" "," "," "," ",""])),this.hass.localize("ui.components.logbook.triggered_by"),e.context_name,this._formatMessageWithPossibleEntity(e.context_message,t,e.context_entity_id,n),this._renderUnseenContextSourceEntity(e,t,n))}},{kind:"method",key:"_renderEntity",value:function(e,t,n){var i=e&&e in this.hass.states,r=t||i&&this.hass.states[e].attributes.friendly_name||e;return i?n?r:(0,q.qy)(se||(se=(0,a.A)(['<button class="link" @click="','" .entityId="','"> '," </button>"])),this._entityClicked,e,r):r}},{kind:"method",key:"_formatMessageWithPossibleEntity",value:function(e,t,n,i){if(-1!==e.indexOf("."))for(var r=e.split(" "),o=0,s=r.length;o<s;o++)if(r[o]in this.hass.states){var c=r[o];if(t.includes(c))return"";t.push(c);var d=r.splice(o);return d.shift(),(0,q.qy)(ce||(ce=(0,a.A)([""," "," ",""])),r.join(" "),this._renderEntity(c,this.hass.states[c].attributes.friendly_name,i),d.join(" "))}if(n&&n in this.hass.states){var l=this.hass.states[n].attributes.friendly_name;if(l&&e.endsWith(l))return t.includes(n)?"":(t.push(n),e=e.substring(0,e.length-l.length),(0,q.qy)(de||(de=(0,a.A)([""," ",""])),e,this._renderEntity(n,l,i)))}return e}},{kind:"method",key:"_entityClicked",value:function(e){var t=e.currentTarget.entityId;t&&(e.preventDefault(),e.stopPropagation(),(0,Z.r)(this,"hass-more-info",{entityId:t}))}},{kind:"method",key:"_handleClick",value:function(e){e.currentTarget.traceLink&&((0,N.o)(e.currentTarget.traceLink),(0,Z.r)(this,"closed"))}},{kind:"get",static:!0,key:"styles",value:function(){return[O.RF,O.dp,O.og,(0,q.AH)(le||(le=(0,a.A)([":host([virtualize]){display:block;height:100%}.entry-container{width:100%}.entry{position:relative;display:flex;width:100%;line-height:2em;padding:8px 16px;box-sizing:border-box;border-top:1px solid var(--divider-color);justify-content:space-between;align-items:center}.indicator{background-color:var(--disabled-color);height:8px;width:8px;border-radius:4px;flex-shrink:0;margin-right:12px;margin-inline-start:initial;margin-inline-end:12px;direction:var(--direction)}ha-icon-next{color:var(--secondary-text-color)}.clickable{cursor:pointer}:not(.clickable) .entry.no-entity,:not(.clickable) .no-name .entry{cursor:default}.entry:hover{background-color:rgba(var(--rgb-primary-text-color),.04)}.narrow:not(.no-icon) .time{margin-left:32px;margin-inline-start:32px;margin-inline-end:initial;direction:var(--direction)}.message-relative_time{display:flex;flex-direction:column}.secondary{font-size:12px;line-height:1.7}.secondary a{color:var(--secondary-text-color)}.date{margin:8px 0;padding:0 16px}.icon-message{display:flex;align-items:center}.no-entries{text-align:center;color:var(--secondary-text-color)}state-badge{margin-right:16px;margin-inline-start:initial;flex-shrink:0;color:var(--state-icon-color);margin-inline-end:16px;direction:var(--direction)}.message{color:var(--primary-text-color)}.no-name .message:first-letter{text-transform:capitalize}a{color:var(--primary-color);text-decoration:none}button.link{color:var(--paper-item-icon-color);text-decoration:none}.container{max-height:var(--logbook-max-height)}.container,lit-virtualizer{height:100%}lit-virtualizer{contain:size layout!important}.narrow .entry{line-height:1.5}.narrow .icon-message state-badge{margin-left:0;margin-inline-start:0;margin-right:8px;margin-inline-end:8px;direction:var(--direction)}"])))]}}]}}),q.WF),i(),e.next=83;break;case 80:e.prev=80,e.t2=e.catch(0),i(e.t2);case 83:case"end":return e.stop()}}),e,null,[[0,80]])})));return function(t,n){return e.apply(this,arguments)}}())}}]);
//# sourceMappingURL=8134.vmoXvoUInk8.js.map