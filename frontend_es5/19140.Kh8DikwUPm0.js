"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[19140,57540],{42681:function(e,t,n){var i=n(22858).A,a=n(33994).A;n.a(e,function(){var e=i(a().mark((function e(i,r){var o,s,u,c,l,h,d,f,g,v,m,_,p,y,k,x,b,A,w,z,M,E,F,H,N;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.r(t),o=n(64599),s=n(35806),u=n(71008),c=n(62193),l=n(2816),h=n(27927),d=n(81027),f=n(97741),g=n(16891),n(7986),v=n(50289),m=n(29818),_=n(55165),n(13082),p=n(43106),n(88400),y=n(47076),k=n(4826),x=n(20712),b=n(57540),A=n(7934),!(w=i([p,y,b])).then){e.next=34;break}return e.next=30,w;case 30:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=35;break;case 34:e.t0=w;case 35:z=e.t0,p=z[0],y=z[1],b=z[2],N={maximumFractionDigits:0},(0,h.A)([(0,m.EM)("hui-energy-solar-consumed-gauge-card")],(function(e,t){var n=function(t){function n(){var t;(0,u.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,c.A)(this,n,[].concat(a)),e(t),t}return(0,l.A)(n,t),(0,s.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,m.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,m.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,m.wk)()],key:"_data",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:function(){return["_config"]}},{kind:"method",key:"hassSubscribe",value:function(){var e,t=this;return[(0,y.tb)(this.hass,{key:null===(e=this._config)||void 0===e?void 0:e.collection_key}).subscribe((function(e){t._data=e}))]}},{kind:"method",key:"getCardSize",value:function(){return 4}},{kind:"method",key:"setConfig",value:function(e){this._config=e}},{kind:"method",key:"shouldUpdate",value:function(e){return(0,A.xP)(this,e)||e.size>1||!e.has("hass")}},{kind:"method",key:"render",value:function(){if(!this._config||!this.hass)return v.s6;if(!this._data)return(0,v.qy)(M||(M=(0,o.A)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.loading"));var e=this._data.prefs,t=(0,y.E$)(e);if(!t.solar)return v.s6;var n,i=(0,k.gF)(this._data.stats,t.solar.map((function(e){return e.stat_energy_from})))||0,a=(0,k.gF)(this._data.stats,t.grid[0].flow_to.map((function(e){return e.stat_energy_to})));null!==a&&i&&(n=Math.max(0,i-a)/i*100);return(0,v.qy)(E||(E=(0,o.A)([" <ha-card> "," </ha-card> "])),void 0!==n?(0,v.qy)(F||(F=(0,o.A)([' <ha-svg-icon id="info" .path="','"></ha-svg-icon> <simple-tooltip animation-delay="0" for="info" position="left"> <span> '," <br><br> ",' </span> </simple-tooltip> <ha-gauge min="0" max="100" .value="','" label="%" .formatOptions="','" .locale="','" style="','"></ha-gauge> <div class="name"> '," </div> "])),"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",this.hass.localize("ui.panel.lovelace.cards.energy.solar_consumed_gauge.card_indicates_solar_energy_used"),this.hass.localize("ui.panel.lovelace.cards.energy.solar_consumed_gauge.card_indicates_solar_energy_used_charge_home_bat"),n,N,this.hass.locale,(0,_.W)({"--gauge-color":this._computeSeverity(n)}),this.hass.localize("ui.panel.lovelace.cards.energy.solar_consumed_gauge.self_consumed_solar_energy")):0===i?this.hass.localize("ui.panel.lovelace.cards.energy.solar_consumed_gauge.not_produced_solar_energy"):this.hass.localize("ui.panel.lovelace.cards.energy.solar_consumed_gauge.self_consumed_solar_could_not_calc"))}},{kind:"method",key:"_computeSeverity",value:function(e){return e>75?b.severityMap.green:e<50?b.severityMap.yellow:b.severityMap.normal}},{kind:"get",static:!0,key:"styles",value:function(){return(0,v.AH)(H||(H=(0,o.A)(["ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-gauge{width:100%;max-width:250px;direction:ltr}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:15px;margin-top:8px}ha-svg-icon{position:absolute;right:4px;inset-inline-end:4px;inset-inline-start:initial;top:4px;color:var(--secondary-text-color)}simple-tooltip>span{font-size:12px;line-height:12px}simple-tooltip{width:80%;max-width:250px;top:8px!important}"])))}}]}}),(0,x.E)(v.WF)),r(),e.next=48;break;case 45:e.prev=45,e.t2=e.catch(0),r(e.t2);case 48:case"end":return e.stop()}}),e,null,[[0,45]])})));return function(t,n){return e.apply(this,arguments)}}())},57540:function(e,t,n){var i=n(22858).A,a=n(33994).A;n.a(e,function(){var e=i(a().mark((function e(i,r){var o,s,u,c,l,h,d,f,g,v,m,_,p,y,k,x,b,A,w,z,M,E,F,H,N,C,S,q,D,j,L,O,T,W,U,Z,I,P,Q,V,X,Y,$,B,J,R,G,K,ee,te,ne,ie;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.r(t),n.d(t,{DEFAULT_MAX:function(){return ne},DEFAULT_MIN:function(){return te},severityMap:function(){return ie}}),o=n(64782),s=n(41981),u=n(64599),c=n(33994),l=n(22858),h=n(35806),d=n(71008),f=n(62193),g=n(2816),v=n(27927),m=n(35890),_=n(71499),p=n(81027),y=n(95737),k=n(97741),x=n(33231),b=n(50693),A=n(29193),w=n(26098),z=n(10507),M=n(39790),E=n(66457),F=n(99019),H=n(16891),N=n(96858),C=n(50289),S=n(29818),q=n(10977),D=n(85323),j=n(55165),L=n(38962),O=n(19244),T=n(26175),W=n(57636),n(13082),U=n(43106),Z=n(9883),I=n(25319),P=n(18102),Q=n(63582),V=n(562),X=n(7934),Y=n(46645),!($=i([W,U])).then){e.next=68;break}return e.next=64,$;case 64:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=69;break;case 68:e.t0=$;case 69:B=e.t0,W=B[0],U=B[1],te=0,ne=100,ie={red:"var(--error-color)",green:"var(--success-color)",yellow:"var(--warning-color)",normal:"var(--info-color)"},(0,v.A)([(0,S.EM)("hui-gauge-card")],(function(e,t){var i,a=function(t){function n(){var t;(0,d.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,f.A)(this,n,[].concat(a)),e(t),t}return(0,g.A)(n,t),(0,h.A)(n)}(t);return{F:a,d:[{kind:"method",static:!0,key:"getConfigElement",value:(i=(0,l.A)((0,c.A)().mark((function e(){return(0,c.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(59149).then(n.bind(n,59149));case 2:return e.abrupt("return",document.createElement("hui-gauge-card-editor"));case 3:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{kind:"method",static:!0,key:"getStubConfig",value:function(e,t,n){return{type:"gauge",entity:(0,P.B)(e,1,t,n,["counter","input_number","number","sensor"],(function(e){return!isNaN(Number(e.state))}))[0]||""}}},{kind:"field",decorators:[(0,S.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,S.wk)()],key:"_config",value:void 0},{kind:"method",key:"getCardSize",value:function(){return 4}},{kind:"method",key:"setConfig",value:function(e){if(!e.entity)throw new Error("Entity must be specified");if(!(0,T.n)(e.entity))throw new Error("Invalid entity");this._config=Object.assign({min:te,max:ne},e)}},{kind:"method",key:"render",value:function(){var e,t;if(!this._config||!this.hass)return C.s6;var n=this.hass.states[this._config.entity];if(!n)return(0,C.qy)(J||(J=(0,u.A)([" <hui-warning> "," </hui-warning> "])),(0,Y.j)(this.hass,this._config.entity));var i=Number(n.state);if(n.state===Z.Hh)return(0,C.qy)(R||(R=(0,u.A)([" <hui-warning>","</hui-warning> "])),this.hass.localize("ui.panel.lovelace.warning.entity_unavailable",{entity:this._config.entity}));if(isNaN(i))return(0,C.qy)(G||(G=(0,u.A)([" <hui-warning>","</hui-warning> "])),this.hass.localize("ui.panel.lovelace.warning.entity_non_numeric",{entity:this._config.entity}));var a=null!==(e=this._config.name)&&void 0!==e?e:(0,O.u)(n);return(0,C.qy)(K||(K=(0,u.A)([' <ha-card class="','" @action="','" .actionHandler="','" tabindex="','"> <ha-gauge .min="','" .max="','" .value="','" .formatOptions="','" .locale="','" .label="','" style="','" .needle="','" .levels="','"></ha-gauge> <div class="name" .title="','">',"</div> </ha-card> "])),(0,D.H)({action:(0,V.A)(this._config)}),this._handleAction,(0,I.T)({hasHold:(0,V.h)(this._config.hold_action),hasDoubleClick:(0,V.h)(this._config.double_tap_action)}),(0,q.J)(!this._config.tap_action||(0,V.h)(this._config.tap_action)?"0":void 0),this._config.min,this._config.max,n.state,(0,W.ZQ)(n,this.hass.entities[n.entity_id]),this.hass.locale,this._config.unit||(null===(t=this.hass)||void 0===t?void 0:t.states[this._config.entity].attributes.unit_of_measurement)||"",(0,j.W)({"--gauge-color":this._computeSeverity(i)}),this._config.needle,this._config.needle?this._severityLevels():void 0,a,a)}},{kind:"method",key:"shouldUpdate",value:function(e){return(0,X.LX)(this,e)}},{kind:"method",key:"updated",value:function(e){if((0,m.A)(a,"updated",this,3)([e]),this._config&&this.hass){var t=e.get("hass"),n=e.get("_config");t&&n&&t.themes===this.hass.themes&&n.theme===this._config.theme||(0,L.Q)(this,this.hass.themes,this._config.theme)}}},{kind:"method",key:"_computeSeverity",value:function(e){if(!this._config.needle){var t=this._config.segments;if(t){t=(0,s.A)(t).sort((function(e,t){return e.from-t.from}));for(var n=0;n<t.length;n++){var i,a=t[n];if(a&&e>=a.from&&(n+1===t.length||e<(null===(i=t[n+1])||void 0===i?void 0:i.from)))return a.color}return ie.normal}var r=this._config.severity;if(!r)return ie.normal;var u,c=Object.keys(r).map((function(e){return[e,r[e]]})),l=(0,o.A)(c);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(null==ie[h[0]]||isNaN(h[1]))return ie.normal}}catch(d){l.e(d)}finally{l.f()}return c.sort((function(e,t){return e[1]-t[1]})),e>=c[0][1]&&e<c[1][1]?ie[c[0][0]]:e>=c[1][1]&&e<c[2][1]?ie[c[1][0]]:e>=c[2][1]?ie[c[2][0]]:ie.normal}}},{kind:"method",key:"_severityLevels",value:function(){var e=this._config.segments;if(e)return e.map((function(e){return{level:null==e?void 0:e.from,stroke:null==e?void 0:e.color,label:null==e?void 0:e.label}}));var t=this._config.severity;return t?Object.keys(t).map((function(e){return{level:t[e],stroke:ie[e]}})):[{level:0,stroke:ie.normal}]}},{kind:"method",key:"_handleAction",value:function(e){(0,Q.$)(this,this.hass,this._config,e.detail.action)}},{kind:"get",static:!0,key:"styles",value:function(){return(0,C.AH)(ee||(ee=(0,u.A)(["ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-card.action{cursor:pointer}ha-card:focus{outline:0}ha-gauge{width:100%;max-width:250px}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:15px;margin-top:8px}"])))}}]}}),C.WF),r(),e.next=82;break;case 79:e.prev=79,e.t2=e.catch(0),r(e.t2);case 82:case"end":return e.stop()}}),e,null,[[0,79]])})));return function(t,n){return e.apply(this,arguments)}}())},24226:function(e,t,n){n.d(t,{z:function(){return a}});var i=n(30429);function a(e,t){var n=(0,i.a)(e),a=(0,i.a)(t),r=n.getTime()-a.getTime();return r<0?-1:r>0?1:r}},72730:function(e,t,n){n.d(t,{W:function(){return s}});n(29193);var i=n(24226),a=n(30429);function r(e,t){var n=(0,a.a)(e),i=(0,a.a)(t);return 12*(n.getFullYear()-i.getFullYear())+(n.getMonth()-i.getMonth())}var o=n(91103);function s(e,t){var n,s=(0,a.a)(e),u=(0,a.a)(t),c=(0,i.z)(s,u),l=Math.abs(r(s,u));if(l<1)n=0;else{1===s.getMonth()&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-c*l);var h=(0,i.z)(s,u)===-c;(0,o.c)((0,a.a)(e))&&1===l&&1===(0,i.z)(e,u)&&(h=!1),n=c*(l-Number(h))}return 0===n?0:n}},77301:function(e,t,n){n.d(t,{e:function(){return a}});var i=n(30429);function a(e){return 1===(0,i.a)(e).getDate()}},91103:function(e,t,n){n.d(t,{c:function(){return o}});var i=n(60132),a=n(12152),r=n(30429);function o(e){var t=(0,r.a)(e);return+(0,i.D)(t)==+(0,a.p)(t)}}}]);
//# sourceMappingURL=19140.Kh8DikwUPm0.js.map