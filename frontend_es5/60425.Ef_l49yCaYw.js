"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[60425],{92389:function(t,e,n){n.d(e,{_:function(){return a},e:function(){return s}});n(95737),n(39790),n(74268),n(24545),n(51855),n(82130),n(31743),n(22328),n(4959),n(62435),n(99019),n(96858);var i=n(213),s=function(t){return t.include_domains.length+t.include_entities.length+t.exclude_domains.length+t.exclude_entities.length===0},a=function(t,e,n,s){var a=new Set(t),o=new Set(e),r=new Set(n),u=new Set(s),c=a.size>0||o.size>0,l=r.size>0||u.size>0;return c||l?c&&!l?function(t){return o.has(t)||a.has((0,i.m)(t))}:!c&&l?function(t){return!u.has(t)&&!r.has((0,i.m)(t))}:a.size?function(t){return a.has((0,i.m)(t))?!u.has(t):o.has(t)}:r.size?function(t){return r.has((0,i.m)(t))?o.has(t):!u.has(t)}:function(t){return o.has(t)}:function(){return!0}}},86181:function(t,e,n){n.d(e,{Gk:function(){return s},Gq:function(){return i}});var i=function(t){return t.callWS({type:"cloud/alexa/entities"})},s=function(t,e){return t.callWS({type:"cloud/alexa/entities/get",entity_id:e})}},86127:function(t,e,n){n.d(e,{Gu:function(){return s},Pd:function(){return p},Sb:function(){return g},Up:function(){return f},Ut:function(){return a},cn:function(){return d},dq:function(){return c},eN:function(){return u},p1:function(){return y},p7:function(){return i},q3:function(){return r},ql:function(){return h},vO:function(){return o},yG:function(){return l}});n(26098);var i=function(t,e,n){return t.callApi("POST","cloud/login",{email:e,password:n})},s=function(t){return t.callApi("POST","cloud/logout")},a=function(t,e){return t.callApi("POST","cloud/forgot_password",{email:e})},o=function(t,e,n){return t.callApi("POST","cloud/register",{email:e,password:n})},r=function(t,e){return t.callApi("POST","cloud/resend_confirm",{email:e})},u=function(t){return t.callWS({type:"cloud/status"})},c=function(t,e){return t.callWS({type:"cloud/cloudhook/create",webhook_id:e})},l=function(t,e){return t.callWS({type:"cloud/cloudhook/delete",webhook_id:e})},d=function(t){return t.callWS({type:"cloud/remote/connect"})},h=function(t){return t.callWS({type:"cloud/remote/disconnect"})},p=function(t){return t.callWS({type:"cloud/subscription"})},f=function(t,e){return t.callWS(Object.assign({type:"cloud/update_prefs"},e))},g=function(t){return t.callWS({type:"cloud/remove_data"})},y=function(t,e,n){return t.callWS({type:"cloud/google_assistant/entities/update",entity_id:e,disable_2fa:n})}},47572:function(t,e,n){n.d(e,{Gw:function(){return a},Ow:function(){return r},YH:function(){return s},aK:function(){return i},ij:function(){return o}});var i={conversation:{domain:"assist_pipeline",name:"Assist"},"cloud.alexa":{domain:"alexa",name:"Amazon Alexa"},"cloud.google_assistant":{domain:"google_assistant",name:"Google Assistant"}},s=function(t,e,n){return t.callWS({type:"homeassistant/expose_new_entities/set",assistant:e,expose_new:n})},a=function(t,e){return t.callWS({type:"homeassistant/expose_new_entities/get",assistant:e})},o=function(t,e,n,i){return t.callWS({type:"homeassistant/expose_entity",assistants:e,entity_ids:n,should_expose:i})},r=function(t){return t.callWS({type:"homeassistant/expose_entity/list"})}},53368:function(t,e,n){n.d(e,{ig:function(){return i},kz:function(){return s}});var i=function(t){return t.callWS({type:"cloud/google_assistant/entities"})},s=function(t,e){return t.callWS({type:"cloud/google_assistant/entities/get",entity_id:e})}},60425:function(t,e,n){n.r(e);var i,s,a=n(64599),o=n(35806),r=n(71008),u=n(62193),c=n(2816),l=n(27927),d=(n(81027),n(10507),n(39790),n(253),n(54846),n(66555),n(50289)),h=n(29818),p=n(94100),f=n(47572);n(28019),(0,l.A)([(0,h.EM)("ha-more-info-view-voice-assistants")],(function(t,e){var n=function(e){function n(){var e;(0,r.A)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=(0,u.A)(this,n,[].concat(s)),t(e),e}return(0,c.A)(n,e),(0,o.A)(n)}(e);return{F:n,d:[{kind:"field",decorators:[(0,h.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,h.MZ)({attribute:!1})],key:"entry",value:void 0},{kind:"field",decorators:[(0,h.MZ)()],key:"params",value:void 0},{kind:"field",key:"_calculateExposed",value:function(){return(0,p.A)((function(t){var e={};return Object.keys(f.aK).forEach((function(n){var i;e[n]=null===(i=t.options)||void 0===i||null===(i=i[n])||void 0===i?void 0:i.should_expose})),e}))}},{kind:"method",key:"render",value:function(){return this.params?(0,d.qy)(i||(i=(0,a.A)(['<entity-voice-settings .hass="','" .entityId="','" .entry="','" .exposed="','"></entity-voice-settings>'])),this.hass,this.entry.entity_id,this.entry,this._calculateExposed(this.entry)):d.s6}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,d.AH)(s||(s=(0,a.A)([":host{display:flex;flex-direction:column}.content{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px;flex:1}"])))]}}]}}),d.WF)},28019:function(t,e,n){var i,s,a,o,r,u,c,l,d,h=n(64599),p=n(41981),f=n(33994),g=n(22858),y=n(35806),_=n(71008),v=n(62193),k=n(2816),x=n(27927),m=(n(81027),n(13025),n(39805),n(97741),n(97099),n(50693),n(10507),n(39790),n(79641),n(253),n(2075),n(16891),n(4525),n(50289)),A=n(29818),w=n(94100),b=n(33922),S=n(34897),q=n(92389),z=(n(6482),n(24640),n(60203),n(86181)),W=n(86127),O=n(54108),E=n(53368),I=n(47572),M=n(20712),F=n(55321),G=n(51842),Z=n(84976);(0,x.A)([(0,A.EM)("entity-voice-settings")],(function(t,e){var n,x,M,j,H,U=function(e){function n(){var e;(0,_.A)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=(0,v.A)(this,n,[].concat(s)),t(e),e}return(0,k.A)(n,e),(0,y.A)(n)}(e);return{F:U,d:[{kind:"field",decorators:[(0,A.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,A.MZ)()],key:"entityId",value:void 0},{kind:"field",decorators:[(0,A.MZ)({attribute:!1})],key:"exposed",value:void 0},{kind:"field",decorators:[(0,A.MZ)({attribute:!1})],key:"entry",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_cloudStatus",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_aliases",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_googleEntity",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_unsupported",value:function(){return{}}},{kind:"method",key:"willUpdate",value:function(t){var e=this;(0,b.x)(this.hass,"cloud")&&(t.has("entityId")&&this.entityId&&this._fetchEntities(),this.hasUpdated||(0,W.eN)(this.hass).then((function(t){e._cloudStatus=t})))}},{kind:"method",key:"_fetchEntities",value:(H=(0,g.A)((0,f.A)().mark((function t(){var e;return(0,f.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,E.kz)(this.hass,this.entityId);case 3:e=t.sent,this._googleEntity=e,this.requestUpdate("_googleEntity"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),"not_supported"===t.t0.code&&(this._unsupported["cloud.google_assistant"]=!0,this.requestUpdate("_unsupported"));case 11:return t.prev=11,t.next=14,(0,z.Gk)(this.hass,this.entityId);case 14:t.next=19;break;case 16:t.prev=16,t.t1=t.catch(11),"not_supported"===t.t1.code&&(this._unsupported["cloud.alexa"]=!0,this.requestUpdate("_unsupported"));case 19:case"end":return t.stop()}}),t,this,[[0,8],[11,16]])}))),function(){return H.apply(this,arguments)})},{kind:"field",key:"_getEntityFilterFuncs",value:function(){return(0,w.A)((function(t,e){return{google:(0,q._)(t.include_domains,t.include_entities,t.exclude_domains,t.exclude_entities),alexa:(0,q._)(e.include_domains,e.include_entities,e.exclude_domains,e.exclude_entities)}}))}},{kind:"method",key:"render",value:function(){var t,e,n,d=this,f=!0===(null===(t=this._cloudStatus)||void 0===t?void 0:t.logged_in)&&!0===this._cloudStatus.prefs.google_enabled,g=!0===(null===(e=this._cloudStatus)||void 0===e?void 0:e.logged_in)&&!0===this._cloudStatus.prefs.alexa_enabled,y=(0,p.A)(Object.keys(I.aK)),_=(0,p.A)(y),v=g&&!(0,q.e)(this._cloudStatus.alexa_entities),k=f&&!(0,q.e)(this._cloudStatus.google_entities);f?k&&_.splice(_.indexOf("cloud.google_assistant"),1):(y.splice(y.indexOf("cloud.google_assistant"),1),_.splice(y.indexOf("cloud.google_assistant"),1)),g?v&&_.splice(_.indexOf("cloud.alexa"),1):(y.splice(y.indexOf("cloud.alexa"),1),_.splice(_.indexOf("cloud.alexa"),1));var x,A=_.some((function(t){return d.exposed[t]}));(v||k)&&(x=this._getEntityFilterFuncs(this._cloudStatus.google_entities,this._cloudStatus.alexa_entities));var w=v&&x.alexa(this.entityId),b=k&&x.google(this.entityId),S=A||w||b;return(0,m.qy)(i||(i=(0,h.A)([' <ha-settings-row> <h3 slot="heading"> ',' </h3> <ha-switch @change="','" .assistants="','" .checked="','"></ha-switch> </ha-settings-row> ',' <h3 class="header"> ',' </h3> <p class="description"> '," </p> "," "])),this.hass.localize("ui.dialogs.voice-settings.expose_header"),this._toggleAll,_,S,S?y.map((function(t){var e,n,i=!d._unsupported[t],u=v&&"cloud.alexa"===t?w:k&&"cloud.google_assistant"===t?b:d.exposed[t],c=v&&"cloud.alexa"===t||k&&"cloud.google_assistant"===t,l="cloud.google_assistant"===t&&!k&&i&&(null===(e=d._googleEntity)||void 0===e?void 0:e.might_2fa);return(0,m.qy)(s||(s=(0,h.A)([' <ha-settings-row .threeLine="','"> <img alt="" src="','" crossorigin="anonymous" referrerpolicy="no-referrer" slot="prefix"> <span slot="heading">',"</span> "," "," ",' <ha-switch .assistant="','" @change="','" .disabled="','" .checked="','"></ha-switch> </ha-settings-row> '])),!i&&c,(0,G.MR)({domain:I.aK[t].domain,type:"icon",darkOptimized:null===(n=d.hass.themes)||void 0===n?void 0:n.darkMode}),I.aK[t].name,i?m.s6:(0,m.qy)(a||(a=(0,h.A)(['<div slot="description" class="unsupported"> <ha-svg-icon .path="','"></ha-svg-icon> '," </div>"])),"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",d.hass.localize("ui.dialogs.voice-settings.unsupported")),c?(0,m.qy)(o||(o=(0,h.A)([' <div slot="description"> '," </div> "])),d.hass.localize("ui.dialogs.voice-settings.manual_config")):m.s6,l?(0,m.qy)(r||(r=(0,h.A)([' <ha-formfield slot="description" .label="','"> <ha-checkbox .checked="','" @change="','"></ha-checkbox> </ha-formfield> '])),d.hass.localize("ui.dialogs.voice-settings.ask_pin"),!d._googleEntity.disable_2fa,d._2faChanged):m.s6,t,d._toggleAssistant,c||!u&&!i,u)})):m.s6,this.hass.localize("ui.dialogs.voice-settings.aliases_header"),this.hass.localize("ui.dialogs.voice-settings.aliases_description"),this.entry?(0,m.qy)(l||(l=(0,h.A)(['<ha-aliases-editor .hass="','" .aliases="','" @value-changed="','" @blur="','"></ha-aliases-editor>'])),this.hass,null!==(n=this._aliases)&&void 0!==n?n:this.entry.aliases,this._aliasesChanged,this._saveAliases):(0,m.qy)(u||(u=(0,h.A)(['<ha-alert alert-type="warning"> '," </ha-alert>"])),this.hass.localize("ui.dialogs.voice-settings.aliases_no_unique_id",{faq_link:(0,m.qy)(c||(c=(0,h.A)(['<a href="','" target="_blank" rel="noreferrer">',"</a>"])),(0,Z.o)(this.hass,"/faq/unique_id"),this.hass.localize("ui.dialogs.entity_registry.faq"))})))}},{kind:"method",key:"_aliasesChanged",value:function(t){this._aliases=t.detail.value}},{kind:"method",key:"_2faChanged",value:(j=(0,g.A)((0,f.A)().mark((function t(e){return(0,f.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,W.p1)(this.hass,this.entityId,!e.target.checked);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),e.target.checked=!e.target.checked;case 8:case"end":return t.stop()}}),t,this,[[0,5]])}))),function(t){return j.apply(this,arguments)})},{kind:"method",key:"_saveAliases",value:(M=(0,g.A)((0,f.A)().mark((function t(){var e;return(0,f.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._aliases){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,(0,O.G_)(this.hass,this.entityId,{aliases:this._aliases.map((function(t){return t.trim()})).filter((function(t){return t}))});case 4:e=t.sent,(0,S.r)(this,"entity-entry-updated",e.entity_entry);case 6:case"end":return t.stop()}}),t,this)}))),function(){return M.apply(this,arguments)})},{kind:"method",key:"_toggleAssistant",value:(x=(0,g.A)((0,f.A)().mark((function t(e){var n;return(0,f.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,I.ij)(this.hass,[e.target.assistant],[this.entityId],e.target.checked),!this.entry){t.next=6;break}return t.next=4,(0,O.v)(this.hass,this.entityId);case 4:n=t.sent,(0,S.r)(this,"entity-entry-updated",n);case 6:(0,S.r)(this,"exposed-entities-changed");case 7:case"end":return t.stop()}}),t,this)}))),function(t){return x.apply(this,arguments)})},{kind:"method",key:"_toggleAll",value:(n=(0,g.A)((0,f.A)().mark((function t(e){var n,i,s,a=this;return(0,f.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.target.checked,i=n?e.target.assistants.filter((function(t){return!a._unsupported[t]})):e.target.assistants,(0,I.ij)(this.hass,i,[this.entityId],e.target.checked),!this.entry){t.next=8;break}return t.next=6,(0,O.v)(this.hass,this.entityId);case 6:s=t.sent,(0,S.r)(this,"entity-entry-updated",s);case 8:(0,S.r)(this,"exposed-entities-changed");case 9:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[F.RF,(0,m.AH)(d||(d=(0,h.A)([":host{display:block;margin:32px;margin-top:0;--settings-row-prefix-display:contents;--settings-row-content-display:contents}ha-settings-row{padding:0}img{height:32px;width:32px;margin-right:16px;margin-inline-end:16px;margin-inline-start:initial}ha-aliases-editor{display:block}ha-alert{display:block;margin-top:16px}ha-formfield{margin-left:-8px;margin-inline-start:-8px;margin-inline-end:initial}ha-checkbox{--mdc-checkbox-state-layer-size:40px}.unsupported{display:flex;align-items:center}.unsupported ha-svg-icon{color:var(--error-color);--mdc-icon-size:16px;margin-right:4px;margin-inline-end:4px;margin-inline-start:initial}.header{margin-top:8px;margin-bottom:4px}.description{color:var(--secondary-text-color);font-size:14px;line-height:20px;margin-top:0;margin-bottom:16px}"])))]}}]}}),(0,M.E)(m.WF))}}]);
//# sourceMappingURL=60425.Ef_l49yCaYw.js.map