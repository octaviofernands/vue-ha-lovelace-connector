"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[78390],{61579:function(e,t,n){var i,a,r,s=n(64599),o=n(35806),u=n(71008),c=n(62193),l=n(2816),d=n(27927),h=n(35890),f=(n(81027),n(50289)),p=n(29818);n(88400),(0,d.A)([(0,p.EM)("ha-data-table-icon")],(function(e,t){var n=function(t){function n(){var t;(0,u.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,c.A)(this,n,[].concat(a)),e(t),t}return(0,l.A)(n,t),(0,o.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,p.MZ)()],key:"tooltip",value:void 0},{kind:"field",decorators:[(0,p.MZ)()],key:"path",value:void 0},{kind:"field",decorators:[(0,p.wk)()],key:"_hovered",value:function(){return!1}},{kind:"method",key:"render",value:function(){return(0,f.qy)(i||(i=(0,s.A)([" ",' <ha-svg-icon .path="','"></ha-svg-icon> '])),this._hovered?(0,f.qy)(a||(a=(0,s.A)(["<div>","</div>"])),this.tooltip):"",this.path)}},{kind:"method",key:"firstUpdated",value:function(e){var t=this;(0,h.A)(n,"firstUpdated",this,3)([e]);var i=function(){t._hovered=!0},a=function(){t._hovered=!1};this.addEventListener("mouseenter",i),this.addEventListener("focus",i),this.addEventListener("mouseleave",a),this.addEventListener("blur",a),this.addEventListener("tap",a)}},{kind:"get",static:!0,key:"styles",value:function(){return(0,f.AH)(r||(r=(0,s.A)([":host{display:inline-block;position:relative}ha-svg-icon{color:var(--secondary-text-color)}div{position:absolute;right:28px;inset-inline-end:28px;inset-inline-start:initial;z-index:1002;outline:0;font-size:10px;line-height:1;background-color:var(--simple-tooltip-background,#616161);color:var(--simple-tooltip-text-color,#fff);padding:8px;border-radius:2px}"])))}}]}}),f.WF)},78390:function(e,t,n){var i=n(22858).A,a=n(33994).A;n.a(e,function(){var e=i(a().mark((function e(i,r){var s,o,u,c,l,d,h,f,p,v,k,g,m,_,b,y,A,C,x,w,z,E,U,H,L,I,M,S,q,G,Z,O,V,F,T,W,D,j,B,P,K,N,J,Q,R;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.r(t),n.d(t,{HaConfigUsers:function(){return R}}),s=n(41981),o=n(33994),u=n(22858),c=n(658),l=n(64599),d=n(35806),h=n(71008),f=n(62193),p=n(2816),v=n(27927),k=n(35890),g=n(81027),m=n(13025),_=n(44124),b=n(97741),y=n(54774),A=n(50693),C=n(26098),x=n(39790),w=n(253),z=n(2075),E=n(94438),U=n(54846),H=n(16891),L=n(66555),I=n(50289),M=n(29818),S=n(94100),n(61579),n(74808),n(77661),n(88400),q=n(71443),G=n(6121),Z=n(35579),O=n(25473),V=n(65045),F=n(42897),T=n(96979),!(W=i([Z])).then){e.next=64;break}return e.next=60,W;case 60:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=65;break;case 64:e.t0=W;case 65:Z=e.t0[0],Q="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",R=(0,v.A)([(0,M.EM)("ha-config-users")],(function(e,t){var n,i=function(t){function n(){var t;(0,h.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,f.A)(this,n,[].concat(a)),e(t),t}return(0,p.A)(n,t),(0,d.A)(n)}(t);return{F:i,d:[{kind:"field",decorators:[(0,M.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,M.MZ)({type:Boolean})],key:"isWide",value:function(){return!1}},{kind:"field",decorators:[(0,M.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,M.MZ)({attribute:!1})],key:"route",value:void 0},{kind:"field",decorators:[(0,M.wk)()],key:"_users",value:function(){return[]}},{kind:"field",decorators:[(0,T.I)({key:"users-table-sort",state:!1,subscribe:!1})],key:"_activeSorting",value:void 0},{kind:"field",decorators:[(0,T.I)({key:"users-table-grouping",state:!1,subscribe:!1})],key:"_activeGrouping",value:void 0},{kind:"field",decorators:[(0,T.I)({key:"users-table-column-order",state:!1,subscribe:!1})],key:"_activeColumnOrder",value:void 0},{kind:"field",decorators:[(0,T.I)({key:"users-table-hidden-columns",state:!1,subscribe:!1})],key:"_activeHiddenColumns",value:void 0},{kind:"field",decorators:[(0,T.I)({storage:"sessionStorage",key:"users-table-search",state:!0,subscribe:!1})],key:"_filter",value:function(){return""}},{kind:"field",decorators:[(0,T.I)({key:"users-table-collapsed",state:!1,subscribe:!1})],key:"_activeCollapsed",value:void 0},{kind:"field",key:"_columns",value:function(){var e=this;return(0,S.A)((function(t,n){return{name:{title:n("ui.panel.config.users.picker.headers.name"),main:!0,sortable:!0,filterable:!0,direction:"asc",flex:2},username:{title:n("ui.panel.config.users.picker.headers.username"),sortable:!0,filterable:!0,direction:"asc",template:function(e){return(0,I.qy)(D||(D=(0,l.A)(["",""])),e.username||"â€”")}},group:{title:n("ui.panel.config.users.picker.headers.group"),sortable:!0,filterable:!0,groupable:!0,direction:"asc"},is_active:{title:e.hass.localize("ui.panel.config.users.picker.headers.is_active"),type:"icon",sortable:!0,filterable:!0,hidden:t,template:function(e){return e.is_active?(0,I.qy)(j||(j=(0,l.A)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),Q):""}},system_generated:{title:e.hass.localize("ui.panel.config.users.picker.headers.system"),type:"icon",sortable:!0,filterable:!0,hidden:t,template:function(e){return e.system_generated?(0,I.qy)(B||(B=(0,l.A)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),Q):""}},local_only:{title:e.hass.localize("ui.panel.config.users.picker.headers.local"),type:"icon",sortable:!0,filterable:!0,hidden:t,template:function(e){return e.local_only?(0,I.qy)(P||(P=(0,l.A)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),Q):""}},icons:{title:"",label:e.hass.localize("ui.panel.config.users.picker.headers.icon"),type:"icon",sortable:!1,filterable:!1,minWidth:"104px",hidden:!t,showNarrow:!0,template:function(t){var n=(0,q.xg)(e.hass,t,!1);return(0,I.qy)(K||(K=(0,l.A)(["",""])),n.map((function(e){var t=(0,c.A)(e,2),n=t[0],i=t[1];return(0,I.qy)(N||(N=(0,l.A)(['<ha-data-table-icon .path="','" .tooltip="','"></ha-data-table-icon>'])),n,i)})))}}}}))}},{kind:"method",key:"firstUpdated",value:function(e){(0,k.A)(i,"firstUpdated",this,3)([e]),this._fetchUsers()}},{kind:"method",key:"render",value:function(){return(0,I.qy)(J||(J=(0,l.A)([' <hass-tabs-subpage-data-table .hass="','" .narrow="','" .route="','" back-path="/config" .tabs="','" .columns="','" .data="','" .columnOrder="','" .hiddenColumns="','" @columns-changed="','" .initialGroupColumn="','" .initialCollapsedGroups="','" .initialSorting="','" @sorting-changed="','" @grouping-changed="','" @collapsed-changed="','" .filter="','" @search-changed="','" @row-click="','" hasFab clickable> <ha-fab slot="fab" .label="','" extended @click="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> </ha-fab> </hass-tabs-subpage-data-table> '])),this.hass,this.narrow,this.route,O.configSections.persons,this._columns(this.narrow,this.hass.localize),this._userData(this._users,this.hass.localize),this._activeColumnOrder,this._activeHiddenColumns,this._handleColumnsChanged,this._activeGrouping,this._activeCollapsed,this._activeSorting,this._handleSortingChanged,this._handleGroupingChanged,this._handleCollapseChanged,this._filter,this._handleSearchChange,this._editUser,this.hass.localize("ui.panel.config.users.picker.add_user"),this._addUser,"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z")}},{kind:"field",key:"_userData",value:function(){return(0,S.A)((function(e,t){return e.map((function(e){return Object.assign(Object.assign({},e),{},{name:e.name||t("ui.panel.config.users.editor.unnamed_user"),group:t("groups.".concat(e.group_ids[0]))})}))}))}},{kind:"method",key:"_fetchUsers",value:(n=(0,u.A)((0,o.A)().mark((function e(){return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,q.hU)(this.hass);case 2:this._users=e.sent,this._users.forEach((function(e){e.is_owner&&e.group_ids.unshift("owner")}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"_editUser",value:function(e){var t,n,i=this,a=e.detail.id,r=this._users.find((function(e){return e.id===a}));r&&(0,F.I)(this,{entry:r,replaceEntry:function(e){i._users=i._users.map((function(t){return t.id===e.id?e:t}))},updateEntry:(n=(0,u.A)((0,o.A)().mark((function e(t){var n;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,q.TK)(i.hass,r.id,t);case 2:n=e.sent,i._users=i._users.map((function(e){return e===r?n.user:e}));case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),removeEntry:(t=(0,u.A)((0,o.A)().mark((function e(){return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,G.showConfirmationDialog)(i,{title:i.hass.localize("ui.panel.config.users.editor.confirm_user_deletion_title",{name:r.name}),text:i.hass.localize("ui.panel.config.users.editor.confirm_user_deletion_text"),dismissText:i.hass.localize("ui.common.cancel"),confirmText:i.hass.localize("ui.common.delete"),destructive:!0});case 2:if(e.sent){e.next=4;break}return e.abrupt("return",!1);case 4:return e.prev=4,e.next=7,(0,q.hG)(i.hass,r.id);case 7:return i._users=i._users.filter((function(e){return e!==r})),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),function(){return t.apply(this,arguments)})})}},{kind:"method",key:"_addUser",value:function(){var e,t=this;(0,V.E)(this,{userAddedCallback:(e=(0,u.A)((0,o.A)().mark((function e(n){return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&(t._users=[].concat((0,s.A)(t._users),[n]));case 1:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})}},{kind:"method",key:"_handleSortingChanged",value:function(e){this._activeSorting=e.detail}},{kind:"method",key:"_handleGroupingChanged",value:function(e){this._activeGrouping=e.detail.value}},{kind:"method",key:"_handleCollapseChanged",value:function(e){this._activeCollapsed=e.detail.value}},{kind:"method",key:"_handleSearchChange",value:function(e){this._filter=e.detail.value}},{kind:"method",key:"_handleColumnsChanged",value:function(e){this._activeColumnOrder=e.detail.columnOrder,this._activeHiddenColumns=e.detail.hiddenColumns}}]}}),I.WF),r(),e.next=75;break;case 72:e.prev=72,e.t2=e.catch(0),r(e.t2);case 75:case"end":return e.stop()}}),e,null,[[0,72]])})));return function(t,n){return e.apply(this,arguments)}}())},65045:function(e,t,n){n.d(t,{E:function(){return r}});n(95737),n(39790),n(66457),n(99019),n(96858);var i=n(34897),a=function(){return n.e(38081).then(n.bind(n,38081))},r=function(e,t){(0,i.r)(e,"show-dialog",{dialogTag:"dialog-add-user",dialogImport:a,dialogParams:t})}},42897:function(e,t,n){n.d(t,{I:function(){return r}});n(95737),n(39790),n(66457),n(99019),n(96858);var i=n(34897),a=function(){return n.e(40821).then(n.bind(n,40821))},r=function(e,t){(0,i.r)(e,"show-dialog",{dialogTag:"dialog-user-detail",dialogImport:a,dialogParams:t})}}}]);
//# sourceMappingURL=78390.VWSQ2n40wVc.js.map