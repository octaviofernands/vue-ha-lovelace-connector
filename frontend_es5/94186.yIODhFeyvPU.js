"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[94186,96394],{35918:function(e,t,a){a.d(t,{SG:function(){return o},TC:function(){return i},pI:function(){return r},yL:function(){return n}});var n=function(e){return"/api/backup/download/".concat(e)},r=function(e){return e.callWS({type:"backup/info"})},i=function(e,t){return e.callWS({type:"backup/remove",slug:t})},o=function(e){return e.callWS({type:"backup/generate"})}},96394:function(e,t,a){a.r(t);var n,r,i,o,s,c,u=a(64599),l=a(35806),h=a(71008),p=a(62193),d=a(2816),f=a(27927),k=(a(81027),a(50289)),b=a(29818),v=(a(32885),a(45346),a(11804),a(55321));(0,f.A)([(0,b.EM)("hass-loading-screen")],(function(e,t){var a=function(t){function a(){var t;(0,h.A)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=(0,p.A)(this,a,[].concat(r)),e(t),t}return(0,d.A)(a,t),(0,l.A)(a)}(t);return{F:a,d:[{kind:"field",decorators:[(0,b.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,b.MZ)({type:Boolean,attribute:"no-toolbar"})],key:"noToolbar",value:function(){return!1}},{kind:"field",decorators:[(0,b.MZ)({type:Boolean})],key:"rootnav",value:function(){return!1}},{kind:"field",decorators:[(0,b.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,b.MZ)()],key:"message",value:void 0},{kind:"method",key:"render",value:function(){var e;return(0,k.qy)(n||(n=(0,u.A)([" ",' <div class="content"> <ha-circular-progress indeterminate></ha-circular-progress> '," </div> "])),this.noToolbar?"":(0,k.qy)(r||(r=(0,u.A)(['<div class="toolbar"> '," </div>"])),this.rootnav||null!==(e=history.state)&&void 0!==e&&e.root?(0,k.qy)(i||(i=(0,u.A)([' <ha-menu-button .hass="','" .narrow="','"></ha-menu-button> '])),this.hass,this.narrow):(0,k.qy)(o||(o=(0,u.A)([' <ha-icon-button-arrow-prev .hass="','" @click="','"></ha-icon-button-arrow-prev> '])),this.hass,this._handleBack)),this.message?(0,k.qy)(s||(s=(0,u.A)(['<div id="loading-text">',"</div>"])),this.message):k.s6)}},{kind:"method",key:"_handleBack",value:function(){history.back()}},{kind:"get",static:!0,key:"styles",value:function(){return[v.RF,(0,k.AH)(c||(c=(0,u.A)([":host{display:block;height:100%;background-color:var(--primary-background-color)}.toolbar{display:flex;align-items:center;font-size:20px;height:var(--header-height);padding:8px 12px;pointer-events:none;background-color:var(--app-header-background-color);font-weight:400;color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box}@media (max-width:599px){.toolbar{padding:4px}}ha-icon-button-arrow-prev,ha-menu-button{pointer-events:auto}.content{height:calc(100% - var(--header-height));display:flex;flex-direction:column;align-items:center;justify-content:center}#loading-text{max-width:350px;margin-top:16px}"])))]}}]}}),k.WF)},94186:function(e,t,a){var n=a(22858).A,r=a(33994).A;a.a(e,function(){var e=n(r().mark((function e(n,i){var o,s,c,u,l,h,p,d,f,k,b,v,g,m,y,A,w,x,_,z,B,H,M,D,V,Z,q,C,L,T,F;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a.r(t),o=a(33994),s=a(22858),c=a(64599),u=a(35806),l=a(71008),h=a(62193),p=a(2816),d=a(27927),f=a(35890),k=a(81027),b=a(97741),v=a(50693),g=a(16891),a(7986),m=a(50289),y=a(29818),A=a(94100),w=a(30125),a(32885),a(74808),a(33381),a(16850),a(88400),x=a(94526),_=a(35918),z=a(6121),a(96394),B=a(35579),H=a(30489),!(M=n([w,B])).then){e.next=43;break}return e.next=39,M;case 39:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=44;break;case 43:e.t0=M;case 44:D=e.t0,w=D[0],B=D[1],(0,d.A)([(0,y.EM)("ha-config-backup")],(function(e,t){var a,n,r,i,d=function(t){function a(){var t;(0,l.A)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=(0,h.A)(this,a,[].concat(r)),e(t),t}return(0,p.A)(a,t),(0,u.A)(a)}(t);return{F:d,d:[{kind:"field",decorators:[(0,y.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,y.MZ)({type:Boolean})],key:"isWide",value:function(){return!1}},{kind:"field",decorators:[(0,y.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,y.MZ)({attribute:!1})],key:"route",value:void 0},{kind:"field",decorators:[(0,y.wk)()],key:"_backupData",value:void 0},{kind:"field",key:"_columns",value:function(){var e=this;return(0,A.A)((function(t,a,n){return{name:{title:n("ui.panel.config.backup.name"),main:!0,sortable:!0,filterable:!0,flex:2,template:t?void 0:function(e){return(0,m.qy)(V||(V=(0,c.A)(["",' <div class="secondary">',"</div>"])),e.name,e.path)}},path:{title:n("ui.panel.config.backup.path"),hidden:!t},size:{title:n("ui.panel.config.backup.size"),filterable:!0,sortable:!0,template:function(e){return Math.ceil(10*e.size)/10+" MB"}},date:{title:n("ui.panel.config.backup.created"),direction:"desc",filterable:!0,sortable:!0,template:function(t){return(0,w.K)(new Date(t.date),e.hass.locale)}},actions:{title:"",type:"overflow-menu",showNarrow:!0,hideable:!1,moveable:!1,template:function(t){return(0,m.qy)(Z||(Z=(0,c.A)(['<ha-icon-overflow-menu .hass="','" .narrow="','" .items="','" style="color:var(--secondary-text-color)"> </ha-icon-overflow-menu>'])),e.hass,e.narrow,[{path:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",label:e.hass.localize("ui.panel.config.backup.download_backup"),action:function(){return e._downloadBackup(t)}},{path:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",label:e.hass.localize("ui.panel.config.backup.remove_backup"),action:function(){return e._removeBackup(t)}}])}}}}))}},{kind:"field",key:"_getItems",value:function(){return(0,A.A)((function(e){return e.map((function(e){return{name:e.name,slug:e.slug,date:e.date,size:e.size,path:e.path}}))}))}},{kind:"method",key:"render",value:function(){return this.hass&&void 0!==this._backupData?(0,m.qy)(C||(C=(0,c.A)([' <hass-tabs-subpage-data-table hasFab .tabs="','" .hass="','" .narrow="','" back-path="/config/system" .route="','" .columns="','" .data="','" .noDataText="','" .searchLabel="','"> <ha-fab slot="fab" ?disabled="','" .label="','" extended @click="','"> '," </ha-fab> </hass-tabs-subpage-data-table> "])),[{translationKey:"ui.panel.config.backup.caption",path:"/config/backup"}],this.hass,this.narrow,this.route,this._columns(this.narrow,this.hass.language,this.hass.localize),this._getItems(this._backupData.backups),this.hass.localize("ui.panel.config.backup.no_backups"),this.hass.localize("ui.panel.config.backup.picker.search"),this._backupData.backing_up,this._backupData.backing_up?this.hass.localize("ui.panel.config.backup.creating_backup"):this.hass.localize("ui.panel.config.backup.create_backup"),this._generateBackup,this._backupData.backing_up?(0,m.qy)(L||(L=(0,c.A)(['<ha-circular-progress slot="icon" indeterminate></ha-circular-progress>']))):(0,m.qy)(T||(T=(0,c.A)(['<ha-svg-icon slot="icon" .path="','"></ha-svg-icon>'])),"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z")):(0,m.qy)(q||(q=(0,c.A)(["<hass-loading-screen></hass-loading-screen>"])))}},{kind:"method",key:"firstUpdated",value:function(e){(0,f.A)(d,"firstUpdated",this,3)([e]),this._getBackups()}},{kind:"method",key:"_getBackups",value:(i=(0,s.A)((0,o.A)().mark((function e(){return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.pI)(this.hass);case 2:this._backupData=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"_downloadBackup",value:(r=(0,s.A)((0,o.A)().mark((function e(t){var a;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.e0)(this.hass,(0,_.yL)(t.slug));case 2:a=e.sent,(0,H.R)(a.path);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{kind:"method",key:"_generateBackup",value:(n=(0,s.A)((0,o.A)().mark((function e(){var t=this;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,z.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.backup.create.title"),text:this.hass.localize("ui.panel.config.backup.create.description"),confirmText:this.hass.localize("ui.panel.config.backup.create.confirm")});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return(0,_.SG)(this.hass).then((function(){return t._getBackups()})).catch((function(e){return(0,z.showAlertDialog)(t,{text:e.message})})),e.next=8,this._getBackups();case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"_removeBackup",value:(a=(0,s.A)((0,o.A)().mark((function e(t){return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,z.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.backup.remove.title"),text:this.hass.localize("ui.panel.config.backup.remove.description",{name:t.name}),confirmText:this.hass.localize("ui.panel.config.backup.remove.confirm")});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,(0,_.TC)(this.hass,t.slug);case 7:return e.next=9,this._getBackups();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[(0,m.AH)(F||(F=(0,c.A)(["ha-fab[disabled]{--mdc-theme-secondary:var(--disabled-text-color)!important}"])))]}}]}}),m.WF),i(),e.next=57;break;case 54:e.prev=54,e.t2=e.catch(0),i(e.t2);case 57:case"end":return e.stop()}}),e,null,[[0,54]])})));return function(t,a){return e.apply(this,arguments)}}())},30489:function(e,t,a){a.d(t,{R:function(){return n}});var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=document.createElement("a");a.target="_blank",a.href=e,a.download=t,document.body.appendChild(a),a.dispatchEvent(new MouseEvent("click")),document.body.removeChild(a)}}}]);
//# sourceMappingURL=94186.yIODhFeyvPU.js.map