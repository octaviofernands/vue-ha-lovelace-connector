"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[91416],{29136:function(e,t,n){n.d(t,{H:function(){return i},R:function(){return r}});n(26098);var r=function(e,t,n){return e.subscribeMessage((function(e){return t(e)}),Object.assign({type:"render_template"},n))},i=function(e,t,n,r,i){return e.connection.subscribeMessage(i,{type:"template/start_preview",flow_id:t,flow_type:n,user_input:r})}},91416:function(e,t,n){n.r(t),n.d(t,{HuiMarkdownCard:function(){return w}});var r,i,o,s=n(64599),a=n(33994),c=n(22858),d=n(35806),u=n(71008),h=n(62193),l=n(2816),f=n(27927),v=n(35890),_=(n(71522),n(71499),n(81027),n(95737),n(50693),n(39790),n(66457),n(99019),n(96858),n(50289)),k=n(29818),p=n(85323),m=n(34897),g=n(38962),y=(n(13082),n(45649),n(13292),n(29136)),w=(0,f.A)([(0,k.EM)("hui-markdown-card")],(function(e,t){var f,w,b,A=function(t){function n(){var t;(0,u.A)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=(0,h.A)(this,n,[].concat(i)),e(t),t}return(0,l.A)(n,t),(0,d.A)(n)}(t);return{F:A,d:[{kind:"method",static:!0,key:"getConfigElement",value:(b=(0,c.A)((0,a.A)().mark((function e(){return(0,a.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(43075).then(n.bind(n,43075));case 2:return e.abrupt("return",document.createElement("hui-markdown-card-editor"));case 3:case"end":return e.stop()}}),e)}))),function(){return b.apply(this,arguments)})},{kind:"method",static:!0,key:"getStubConfig",value:function(){return{type:"markdown",content:"The **Markdown** card allows you to write any text. You can style it **bold**, *italicized*, ~strikethrough~ etc. You can do images, links, and more.\n\nFor more information see the [Markdown Cheatsheet](https://commonmark.org/help)."}}},{kind:"field",decorators:[(0,k.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,k.MZ)({type:Boolean})],key:"preview",value:function(){return!1}},{kind:"field",decorators:[(0,k.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,k.wk)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,k.wk)()],key:"_errorLevel",value:void 0},{kind:"field",decorators:[(0,k.wk)()],key:"_templateResult",value:void 0},{kind:"field",key:"_unsubRenderTemplate",value:void 0},{kind:"method",key:"getCardSize",value:function(){return void 0===this._config?3:void 0===this._config.card_size?Math.round(this._config.content.split("\n").length/2)+(this._config.title?1:0):this._config.card_size}},{kind:"method",key:"setConfig",value:function(e){var t;if(!e.content)throw new Error("Content required");(null===(t=this._config)||void 0===t?void 0:t.content)!==e.content&&this._tryDisconnect(),this._config=e}},{kind:"method",key:"connectedCallback",value:function(){(0,v.A)(A,"connectedCallback",this,3)([]),this._tryConnect()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,v.A)(A,"disconnectedCallback",this,3)([]),this._tryDisconnect()}},{kind:"method",key:"render",value:function(){var e,t;return this._config?(0,_.qy)(r||(r=(0,s.A)([" ",' <ha-card .header="','"> <ha-markdown breaks class="','" .content="','"></ha-markdown> </ha-card> '])),this._error?(0,_.qy)(i||(i=(0,s.A)(['<ha-alert alert-type="','">',"</ha-alert>"])),(null===(e=this._errorLevel)||void 0===e?void 0:e.toLowerCase())||"error",this._error):_.s6,this._config.title,(0,p.H)({"no-header":!this._config.title}),null===(t=this._templateResult)||void 0===t?void 0:t.result):_.s6}},{kind:"method",key:"updated",value:function(e){if((0,v.A)(A,"updated",this,3)([e]),this._config&&this.hass){e.has("_config")&&this._tryConnect();var t=this._templateResult&&!1===this._config.show_empty&&0===this._templateResult.result.length;t!==this.hidden&&(this.style.display=t?"none":"block",this.toggleAttribute("hidden",t),(0,m.r)(this,"card-visibility-changed",{value:!t}));var n=e.get("hass"),r=e.get("_config");n&&r&&n.themes===this.hass.themes&&r.theme===this._config.theme||(0,g.Q)(this,this.hass.themes,this._config.theme)}}},{kind:"method",key:"_tryConnect",value:(w=(0,c.A)((0,a.A)().mark((function e(){var t=this;return(0,a.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this._unsubRenderTemplate&&this.hass&&this._config){e.next=2;break}return e.abrupt("return");case 2:return this._error=void 0,this._errorLevel=void 0,e.prev=4,this._unsubRenderTemplate=(0,y.R)(this.hass.connection,(function(e){"error"in e?"ERROR"!==e.level&&"ERROR"===t._errorLevel||(t._error=e.error,t._errorLevel=e.level):t._templateResult=e}),{template:this._config.content,entity_ids:this._config.entity_id,variables:{config:this._config,user:this.hass.user.name},strict:!0,report_errors:this.preview}),e.next=8,this._unsubRenderTemplate;case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(4),this.preview&&(this._error=e.t0.message,this._errorLevel=void 0),this._templateResult={result:this._config.content,listeners:{all:!1,domains:[],entities:[],time:!1}},this._unsubRenderTemplate=void 0;case 15:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(){return w.apply(this,arguments)})},{kind:"method",key:"_tryDisconnect",value:(f=(0,c.A)((0,a.A)().mark((function e(){return(0,a.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._unsubRenderTemplate){e.next=2;break}return e.abrupt("return");case 2:this._unsubRenderTemplate.then((function(e){return e()})).catch((function(){})),this._unsubRenderTemplate=void 0,this._error=void 0,this._errorLevel=void 0;case 6:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return(0,_.AH)(o||(o=(0,s.A)(["ha-card{height:100%}ha-alert{margin-bottom:8px}ha-markdown{padding:0 16px 16px;word-wrap:break-word}ha-markdown.no-header{padding-top:16px}"])))}}]}}),_.WF)}}]);
//# sourceMappingURL=91416.CCyXd_AEyl4.js.map