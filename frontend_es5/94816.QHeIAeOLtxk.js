"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[94816],{37456:function(t,e,i){i.d(e,{a:function(){return a}});var n=(0,i(58034).n)((function(t){history.replaceState({scrollPosition:t},"")}),300),a=function(t){return function(e){return{kind:"method",placement:"prototype",key:e.key,descriptor:{set:function(t){n(t),this["__".concat(String(e.key))]=t},get:function(){var t;return this["__".concat(String(e.key))]||(null===(t=history.state)||void 0===t?void 0:t.scrollPosition)},enumerable:!0,configurable:!0},finisher:function(i){var n=i.prototype.connectedCallback;i.prototype.connectedCallback=function(){var i=this;n.call(this);var a=this[e.key];a&&this.updateComplete.then((function(){var e=i.renderRoot.querySelector(t);e&&setTimeout((function(){e.scrollTop=a}),0)}))}}}}}},20732:function(t,e,i){i.d(e,{Z:function(){return n}});var n=function(t){var e=window.location.pathname;return t?e+"?"+t:e}},26387:function(t,e,i){var n=i(22858).A,a=i(33994).A;i.a(t,function(){var t=n(a().mark((function t(n,o){var r,s,h,c,d,l,u,k,g,p,v,f,y,m,_,w,b,x,A,C,I,D,P,L,H,S,R,U,B,M,T,q,Z,z,F,E,O,j,K;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i.r(e),i.d(e,{HaPanelLogbook:function(){return K}}),r=i(658),s=i(64599),h=i(35806),c=i(71008),d=i(62193),l=i(2816),u=i(27927),k=i(35890),g=i(95737),p=i(33231),v=i(99471),f=i(39790),y=i(36016),m=i(99019),_=i(20529),w=i(253),b=i(5186),x=i(96858),A=i(38389),C=i(74860),I=i(71011),D=i(71174),P=i(50289),L=i(29818),H=i(16312),S=i(20732),R=i(56932),U=i(94548),B=i(9043),i(4169),i(45346),i(11804),i(94110),M=i(78573),T=i(55321),q=i(88316),!(Z=n([U,B,q])).then){t.next=61;break}return t.next=57,Z;case 57:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=62;break;case 61:t.t0=Z;case 62:z=t.t0,U=z[0],B=z[1],q=z[2],K=(0,u.A)([(0,L.EM)("ha-panel-logbook")],(function(t,e){var i=function(e){function i(){var e;(0,c.A)(this,i),e=(0,d.A)(this,i),t(e);var n=new Date;n.setHours(n.getHours()-1,0,0,0);var a=new Date;return a.setHours(a.getHours()+2,0,0,0),e._time={range:[n,a]},e}return(0,l.A)(i,e),(0,h.A)(i)}(e);return{F:i,d:[{kind:"field",decorators:[(0,L.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,L.MZ)({type:Boolean,reflect:!0})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,L.wk)()],key:"_time",value:void 0},{kind:"field",decorators:[(0,L.wk)()],key:"_entityIds",value:void 0},{kind:"field",decorators:[(0,L.wk)()],key:"_showBack",value:void 0},{kind:"method",key:"_goBack",value:function(){history.back()}},{kind:"method",key:"render",value:function(){return(0,P.qy)(F||(F=(0,s.A)([" <ha-top-app-bar-fixed> ",' <div slot="title">','</div> <ha-icon-button slot="actionItems" @click="','" .path="','" .label="','"></ha-icon-button> <div class="filters"> <ha-date-range-picker .hass="','" .startDate="','" .endDate="','" @change="','"></ha-date-range-picker> <ha-entity-picker .hass="','" .value="','" .label="','" .entityFilter="','" @change="','"></ha-entity-picker> </div> <ha-logbook .hass="','" .time="','" .entityIds="','" virtualize></ha-logbook> </ha-top-app-bar-fixed> '])),this._showBack?(0,P.qy)(E||(E=(0,s.A)([' <ha-icon-button-arrow-prev slot="navigationIcon" @click="','"></ha-icon-button-arrow-prev> '])),this._goBack):(0,P.qy)(O||(O=(0,s.A)([' <ha-menu-button slot="navigationIcon" .hass="','" .narrow="','"></ha-menu-button> '])),this.hass,this.narrow),this.hass.localize("panel.logbook"),this._refreshLogbook,"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",this.hass.localize("ui.common.refresh"),this.hass,this._time.range[0],this._time.range[1],this._dateRangeChanged,this.hass,this._entityIds?this._entityIds[0]:void 0,this.hass.localize("ui.components.entity.entity-picker.entity"),M.rc,this._entityPicked,this.hass,this._time,this._entityIds)}},{kind:"method",key:"willUpdate",value:function(t){(0,k.A)(i,"willUpdate",this,3)([t]),this.hasUpdated||this._applyURLParams()}},{kind:"method",key:"firstUpdated",value:function(t){(0,k.A)(i,"firstUpdated",this,3)([t]),this.hass.loadBackendTranslation("title"),"1"===(0,R.px)().back&&history.length>1&&(this._showBack=!0,(0,H.o)((0,S.Z)((0,R.s8)("back")),{replace:!0}))}},{kind:"method",key:"connectedCallback",value:function(){(0,k.A)(i,"connectedCallback",this,3)([]),window.addEventListener("location-changed",this._locationChanged)}},{kind:"method",key:"disconnectedCallback",value:function(){(0,k.A)(i,"disconnectedCallback",this,3)([]),window.removeEventListener("location-changed",this._locationChanged)}},{kind:"field",key:"_locationChanged",value:function(){var t=this;return function(){t._applyURLParams()}}},{kind:"method",key:"_applyURLParams",value:function(){var t=new URLSearchParams(location.search);if(t.has("entity_id")){var e=t.get("entity_id");if(e){var i=e.split(",").sort();this._entityIds&&i.length===this._entityIds.length&&this._entityIds.every((function(t,e){return t===i[e]}))||(this._entityIds=i)}else this._entityIds=void 0}else this._entityIds=void 0;var n=t.get("start_date"),a=t.get("end_date");if(n||a){var o=n?new Date(n):this._time.range[0],r=a?new Date(a):this._time.range[1];o.getTime()===this._time.range[0].getTime()&&r.getTime()===this._time.range[1].getTime()||(this._time={range:[n?new Date(n):this._time.range[0],a?new Date(a):this._time.range[1]]})}}},{kind:"method",key:"_dateRangeChanged",value:function(t){var e=t.detail.startDate,i=t.detail.endDate;0===i.getHours()&&0===i.getMinutes()&&(i.setDate(i.getDate()+1),i.setMilliseconds(i.getMilliseconds()-1)),this._updatePath({start_date:e.toISOString(),end_date:i.toISOString()})}},{kind:"method",key:"_entityPicked",value:function(t){this._updatePath({entity_id:t.target.value||void 0})}},{kind:"method",key:"_updatePath",value:function(t){for(var e=(0,R.px)(),i=0,n=Object.entries(t);i<n.length;i++){var a=(0,r.A)(n[i],2),o=a[0],s=a[1];void 0===s?delete e[o]:e[o]=s}(0,H.o)("/logbook?".concat((0,R.KH)(e)),{replace:!0})}},{kind:"method",key:"_refreshLogbook",value:function(){var t;null===(t=this.shadowRoot.querySelector("ha-logbook"))||void 0===t||t.refresh()}},{kind:"get",static:!0,key:"styles",value:function(){return[T.RF,(0,P.AH)(j||(j=(0,s.A)(["ha-logbook{height:calc(100vh - 136px)}:host([narrow]) ha-logbook{height:calc(100vh - 198px)}ha-date-range-picker{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial;max-width:100%;direction:var(--direction)}:host([narrow]) ha-date-range-picker{margin-right:0;margin-inline-end:0;margin-inline-start:initial;direction:var(--direction);margin-bottom:8px}.filters{display:flex;align-items:flex-end;padding:8px 16px 0}:host([narrow]) .filters{flex-wrap:wrap}ha-entity-picker{display:inline-block;flex-grow:1;max-width:400px}:host([narrow]) ha-entity-picker{max-width:none;width:100%}"])))]}}]}}),P.WF),o(),t.next=74;break;case 71:t.prev=71,t.t2=t.catch(0),o(t.t2);case 74:case"end":return t.stop()}}),t,null,[[0,71]])})));return function(e,i){return t.apply(this,arguments)}}())}}]);
//# sourceMappingURL=94816.QHeIAeOLtxk.js.map