"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[48160],{75323:function(e,t,i){var r=i(22858).A,n=i(33994).A;i.a(e,function(){var e=r(n().mark((function e(t,r){var a,s,c,u,l,d,o,v,h,f,k,y,p,b,A,m,_,D,g,x,w,M,Z,F,q,E;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=i(41981),s=i(33994),c=i(22858),u=i(64599),l=i(35806),d=i(71008),o=i(62193),v=i(2816),h=i(27927),f=i(81027),k=i(13025),y=i(82386),p=i(97741),b=i(39790),A=i(36604),m=i(253),_=i(2075),D=i(16891),g=i(50289),x=i(29818),w=i(34897),M=i(45784),!(Z=t([M])).then){e.next=40;break}return e.next=36,Z;case 36:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=41;break;case 40:e.t0=Z;case 41:M=e.t0[0],(0,h.A)([(0,x.EM)("ha-devices-picker")],(function(e,t){var i,r,n=function(t){function i(){var t;(0,d.A)(this,i);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=(0,o.A)(this,i,[].concat(n)),e(t),t}return(0,v.A)(i,t),(0,l.A)(i)}(t);return{F:n,d:[{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,x.MZ)({type:Array})],key:"value",value:void 0},{kind:"field",decorators:[(0,x.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,x.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,x.MZ)({type:Boolean})],key:"required",value:function(){return!1}},{kind:"field",decorators:[(0,x.MZ)({type:Array,attribute:"include-domains"})],key:"includeDomains",value:void 0},{kind:"field",decorators:[(0,x.MZ)({type:Array,attribute:"exclude-domains"})],key:"excludeDomains",value:void 0},{kind:"field",decorators:[(0,x.MZ)({type:Array,attribute:"include-device-classes"})],key:"includeDeviceClasses",value:void 0},{kind:"field",decorators:[(0,x.MZ)({attribute:"picked-device-label"})],key:"pickedDeviceLabel",value:void 0},{kind:"field",decorators:[(0,x.MZ)({attribute:"pick-device-label"})],key:"pickDeviceLabel",value:void 0},{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"deviceFilter",value:void 0},{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"entityFilter",value:void 0},{kind:"method",key:"render",value:function(){var e=this;if(!this.hass)return g.s6;var t=this._currentDevices;return(0,g.qy)(F||(F=(0,u.A)([" ",' <div> <ha-device-picker allow-custom-entity .hass="','" .helper="','" .deviceFilter="','" .entityFilter="','" .includeDomains="','" .excludeDomains="','" .excludeDevices="','" .includeDeviceClasses="','" .label="','" .disabled="','" .required="','" @value-changed="','"></ha-device-picker> </div> '])),t.map((function(t){return(0,g.qy)(q||(q=(0,u.A)([' <div> <ha-device-picker allow-custom-entity .curValue="','" .hass="','" .deviceFilter="','" .entityFilter="','" .includeDomains="','" .excludeDomains="','" .includeDeviceClasses="','" .value="','" .label="','" .disabled="','" @value-changed="','"></ha-device-picker> </div> '])),t,e.hass,e.deviceFilter,e.entityFilter,e.includeDomains,e.excludeDomains,e.includeDeviceClasses,t,e.pickedDeviceLabel,e.disabled,e._deviceChanged)})),this.hass,this.helper,this.deviceFilter,this.entityFilter,this.includeDomains,this.excludeDomains,t,this.includeDeviceClasses,this.pickDeviceLabel,this.disabled,this.required&&!t.length,this._addDevice)}},{kind:"get",key:"_currentDevices",value:function(){return this.value||[]}},{kind:"method",key:"_updateDevices",value:(r=(0,c.A)((0,s.A)().mark((function e(t){return(0,s.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,w.r)(this,"value-changed",{value:t}),this.value=t;case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{kind:"method",key:"_deviceChanged",value:function(e){e.stopPropagation();var t=e.currentTarget.curValue,i=e.detail.value;i!==t&&(void 0===i?this._updateDevices(this._currentDevices.filter((function(e){return e!==t}))):this._updateDevices(this._currentDevices.map((function(e){return e===t?i:e}))))}},{kind:"method",key:"_addDevice",value:(i=(0,c.A)((0,s.A)().mark((function e(t){var i,r;return(0,s.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),i=t.detail.value,t.currentTarget.value="",i){e.next=5;break}return e.abrupt("return");case 5:if(!(r=this._currentDevices).includes(i)){e.next=8;break}return e.abrupt("return");case 8:this._updateDevices([].concat((0,a.A)(r),[i]));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{kind:"field",static:!0,key:"styles",value:function(){return(0,g.AH)(E||(E=(0,u.A)(["div{margin-top:8px}"])))}}]}}),g.WF),r(),e.next=49;break;case 46:e.prev=46,e.t2=e.catch(0),r(e.t2);case 49:case"end":return e.stop()}}),e,null,[[0,46]])})));return function(t,i){return e.apply(this,arguments)}}())},48160:function(e,t,i){var r=i(22858).A,n=i(33994).A;i.a(e,function(){var e=r(n().mark((function e(r,a){var s,c,u,l,d,o,v,h,f,k,y,p,b,A,m,_,D,g,x,w,M,Z,F,q,E,S,C,I,L,B,j;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i.r(t),i.d(t,{HaDeviceSelector:function(){return j}}),s=i(64599),c=i(35806),u=i(71008),l=i(62193),d=i(2816),o=i(27927),v=i(35890),h=i(81027),f=i(13025),k=i(39790),y=i(9241),p=i(253),b=i(2075),A=i(4525),m=i(50289),_=i(29818),D=i(94100),g=i(21863),x=i(34897),w=i(10725),M=i(74229),Z=i(31265),F=i(29829),q=i(45784),E=i(75323),!(S=r([q,E])).then){e.next=43;break}return e.next=39,S;case 39:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=44;break;case 43:e.t0=S;case 44:C=e.t0,q=C[0],E=C[1],j=(0,o.A)([(0,_.EM)("ha-selector-device")],(function(e,t){var i=function(t){function i(){var t;(0,u.A)(this,i);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=(0,l.A)(this,i,[].concat(n)),e(t),t}return(0,d.A)(i,t),(0,c.A)(i)}(t);return{F:i,d:[{kind:"field",decorators:[(0,_.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,_.MZ)({attribute:!1})],key:"selector",value:void 0},{kind:"field",decorators:[(0,_.wk)()],key:"_entitySources",value:void 0},{kind:"field",decorators:[(0,_.wk)()],key:"_configEntries",value:void 0},{kind:"field",decorators:[(0,_.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,_.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,_.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,_.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,_.MZ)({type:Boolean})],key:"required",value:function(){return!0}},{kind:"field",key:"_deviceIntegrationLookup",value:function(){return(0,D.A)(w.fk)}},{kind:"method",key:"_hasIntegration",value:function(e){var t,i;return(null===(t=e.device)||void 0===t?void 0:t.filter)&&(0,g.e)(e.device.filter).some((function(e){return e.integration}))||(null===(i=e.device)||void 0===i?void 0:i.entity)&&(0,g.e)(e.device.entity).some((function(e){return e.integration}))}},{kind:"method",key:"willUpdate",value:function(e){var t,i;e.has("selector")&&void 0!==this.value&&(null!==(t=this.selector.device)&&void 0!==t&&t.multiple&&!Array.isArray(this.value)?(this.value=[this.value],(0,x.r)(this,"value-changed",{value:this.value})):null!==(i=this.selector.device)&&void 0!==i&&i.multiple||!Array.isArray(this.value)||(this.value=this.value[0],(0,x.r)(this,"value-changed",{value:this.value})))}},{kind:"method",key:"updated",value:function(e){var t=this;(0,v.A)(i,"updated",this,3)([e]),e.has("selector")&&this._hasIntegration(this.selector)&&!this._entitySources&&(0,M.c)(this.hass).then((function(e){t._entitySources=e})),!this._configEntries&&this._hasIntegration(this.selector)&&(this._configEntries=[],(0,Z.VN)(this.hass).then((function(e){t._configEntries=e})))}},{kind:"method",key:"render",value:function(){var e,t,i;return this._hasIntegration(this.selector)&&!this._entitySources?m.s6:null!==(e=this.selector.device)&&void 0!==e&&e.multiple?(0,m.qy)(L||(L=(0,s.A)([" ",' <ha-devices-picker .hass="','" .value="','" .helper="','" .deviceFilter="','" .entityFilter="','" .disabled="','" .required="','"></ha-devices-picker> '])),this.label?(0,m.qy)(B||(B=(0,s.A)(["<label>","</label>"])),this.label):"",this.hass,this.value,this.helper,this._filterDevices,null!==(t=this.selector.device)&&void 0!==t&&t.entity?this._filterEntities:void 0,this.disabled,this.required):(0,m.qy)(I||(I=(0,s.A)([' <ha-device-picker .hass="','" .value="','" .label="','" .helper="','" .deviceFilter="','" .entityFilter="','" .disabled="','" .required="','" allow-custom-entity></ha-device-picker> '])),this.hass,this.value,this.label,this.helper,this._filterDevices,null!==(i=this.selector.device)&&void 0!==i&&i.entity?this._filterEntities:void 0,this.disabled,this.required)}},{kind:"field",key:"_filterDevices",value:function(){var e=this;return function(t){var i;if(null===(i=e.selector.device)||void 0===i||!i.filter)return!0;var r=e._entitySources?e._deviceIntegrationLookup(e._entitySources,Object.values(e.hass.entities),Object.values(e.hass.devices),e._configEntries):void 0;return(0,g.e)(e.selector.device.filter).some((function(e){return(0,F.vX)(e,t,r)}))}}},{kind:"field",key:"_filterEntities",value:function(){var e=this;return function(t){return(0,g.e)(e.selector.device.entity).some((function(i){return(0,F.Ru)(i,t,e._entitySources)}))}}}]}}),m.WF),a(),e.next=54;break;case 51:e.prev=51,e.t2=e.catch(0),a(e.t2);case 54:case"end":return e.stop()}}),e,null,[[0,51]])})));return function(t,i){return e.apply(this,arguments)}}())},74229:function(e,t,i){i.d(t,{c:function(){return c}});i(10507);var r=i(33994),n=i(22858),a=(i(81027),i(39790),i(66457),function(){var e=(0,n.A)((0,r.A)().mark((function e(t,i,n,s,c){var u,l,d,o,v,h,f,k=arguments;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=k.length,l=new Array(u>5?u-5:0),d=5;d<u;d++)l[d-5]=k[d];if(v=(o=c)[t],h=function(e){return s&&s(c,e.result)!==e.cacheKey?(o[t]=void 0,a.apply(void 0,[t,i,n,s,c].concat(l))):e.result},!v){e.next=6;break}return e.abrupt("return",v instanceof Promise?v.then(h):h(v));case 6:return f=n.apply(void 0,[c].concat(l)),o[t]=f,f.then((function(e){o[t]={result:e,cacheKey:null==s?void 0:s(c,e)},setTimeout((function(){o[t]=void 0}),i)}),(function(){o[t]=void 0})),e.abrupt("return",f);case 10:case"end":return e.stop()}}),e)})));return function(t,i,r,n,a){return e.apply(this,arguments)}}()),s=function(e){return e.callWS({type:"entity/source"})},c=function(e){return a("_entitySources",3e4,s,(function(e){return Object.keys(e.states).length}),e)}}}]);
//# sourceMappingURL=48160.uW5N-ZjwufU.js.map