"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[55858],{95753:function(r,e,t){t.d(e,{L:function(){return n},_:function(){return o}});var n=function(r){return r.callApi("GET","error_log")},o="/api/error_log"},15066:function(r,e,t){t.d(e,{GM:function(){return c},MU:function(){return u},OV:function(){return s},RE:function(){return l},Vo:function(){return d},w9:function(){return h}});var n=t(33994),o=t(22858),i=(t(82386),t(36604),t(95266)),a=t(26025),s=function(){var r=(0,o.A)((0,n.A)().mark((function r(e){return(0,n.A)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(0,i.v)(e.config.version,2021,2,4)){r.next=4;break}return r.next=3,e.callWS({type:"supervisor/api",endpoint:"/supervisor/reload",method:"post"});case 3:return r.abrupt("return");case 4:return r.next=6,e.callApi("POST","hassio/supervisor/reload");case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),c=function(){var r=(0,o.A)((0,n.A)().mark((function r(e){return(0,n.A)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(0,i.v)(e.config.version,2021,2,4)){r.next=2;break}return r.abrupt("return",e.callWS({type:"supervisor/api",endpoint:"/supervisor/info",method:"get"}));case 2:return r.t0=a.PS,r.next=5,e.callApi("GET","hassio/supervisor/info");case 5:return r.t1=r.sent,r.abrupt("return",(0,r.t0)(r.t1));case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),u=function(){var r=(0,o.A)((0,n.A)().mark((function r(e){return(0,n.A)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(0,i.v)(e.config.version,2021,2,4)){r.next=2;break}return r.abrupt("return",e.callWS({type:"supervisor/api",endpoint:"/info",method:"get"}));case 2:return r.t0=a.PS,r.next=5,e.callApi("GET","hassio/info");case 5:return r.t1=r.sent,r.abrupt("return",(0,r.t0)(r.t1));case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),l=function(){var r=(0,o.A)((0,n.A)().mark((function r(e,t){return(0,n.A)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",e.callApi("GET","hassio/".concat(t.includes("_")?"addons/".concat(t):t,"/logs")));case 1:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),d=function(r){return"/api/hassio/".concat(r.includes("_")?"addons/".concat(r):r,"/logs")},h=function(){var r=(0,o.A)((0,n.A)().mark((function r(e,t){return(0,n.A)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(0,i.v)(e.config.version,2021,2,4)){r.next=4;break}return r.next=3,e.callWS({type:"supervisor/api",endpoint:"/supervisor/options",method:"post",data:t});case 3:return r.abrupt("return");case 4:return r.next=6,e.callApi("POST","hassio/supervisor/options",t);case 6:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},55858:function(r,e,t){var n,o,i,a,s,c,u,l,d,h,f=t(33994),p=t(22858),v=t(64599),g=t(35806),k=t(71008),w=t(62193),A=t(2816),_=t(27927),y=t(35890),m=(t(81027),t(13025),t(82386),t(79243),t(97741),t(39790),t(36016),t(36604),t(43037),t(253),t(2075),t(16891),t(72606),t(67056),t(50289)),b=t(29818),x=t(33922),L=(t(13292),t(84563),t(13082),t(4169),t(77312),t(88400),t(94526)),M=t(95753),T=t(26025),H=t(15066),C=t(18409),S=t(30489),z="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z";(0,_.A)([(0,b.EM)("error-log-card")],(function(r,e){var t,_,E,R=function(e){function t(){var e;(0,k.A)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=(0,w.A)(this,t,[].concat(o)),r(e),e}return(0,A.A)(t,e),(0,g.A)(t)}(e);return{F:R,d:[{kind:"field",decorators:[(0,b.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,b.MZ)()],key:"filter",value:function(){return""}},{kind:"field",decorators:[(0,b.MZ)()],key:"header",value:void 0},{kind:"field",decorators:[(0,b.MZ)()],key:"provider",value:void 0},{kind:"field",decorators:[(0,b.MZ)({type:Boolean,attribute:!0})],key:"show",value:function(){return!1}},{kind:"field",decorators:[(0,b.wk)()],key:"_isLogLoaded",value:function(){return!1}},{kind:"field",decorators:[(0,b.wk)()],key:"_logHTML",value:void 0},{kind:"field",decorators:[(0,b.wk)()],key:"_error",value:void 0},{kind:"method",key:"render",value:function(){return(0,m.qy)(n||(n=(0,v.A)([' <div class="error-log-intro"> '," "," "," </div> "])),this._error?(0,m.qy)(o||(o=(0,v.A)(['<ha-alert alert-type="error">',"</ha-alert>"])),this._error):"",this._logHTML?(0,m.qy)(i||(i=(0,v.A)([' <ha-card outlined> <div class="header"> <h1 class="card-header"> ',' </h1> <div> <ha-icon-button .path="','" @click="','" .label="','"></ha-icon-button> <ha-icon-button .path="','" @click="','" .label="','"></ha-icon-button> </div> </div> <div class="card-content error-log">',"</div> </ha-card> "])),this.header||this.hass.localize("ui.panel.config.logs.show_full_logs"),"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",this._refresh,this.hass.localize("ui.common.refresh"),z,this._downloadFullLog,this.hass.localize("ui.panel.config.logs.download_full_log"),this._logHTML):"",this._logHTML?"":(0,m.qy)(a||(a=(0,v.A)([' <mwc-button outlined @click="','"> <ha-svg-icon .path="','"></ha-svg-icon> ',' </mwc-button> <mwc-button raised @click="','"> '," </mwc-button> "])),this._downloadFullLog,z,this.hass.localize("ui.panel.config.logs.download_full_log"),this._refreshLogs,this.hass.localize("ui.panel.config.logs.load_logs")))}},{kind:"field",key:"_debounceSearch",value:function(){var r=this;return(0,C.s)((function(){return r._isLogLoaded?r._refreshLogs():r._debounceSearch()}),150,!1)}},{kind:"method",key:"firstUpdated",value:function(r){var e;(0,y.A)(R,"firstUpdated",this,3)([r]),(null!==(e=this.hass)&&void 0!==e&&e.config.recovery_mode||this.show)&&(this.hass.loadFragmentTranslation("config"),this._refreshLogs())}},{kind:"method",key:"updated",value:function(r){(0,y.A)(R,"updated",this,3)([r]),r.has("provider")&&(this._logHTML=void 0),r.has("show")&&this.show||r.has("provider")&&this.show?this._refreshLogs():r.has("filter")&&this._debounceSearch()}},{kind:"method",key:"_refresh",value:(E=(0,p.A)((0,f.A)().mark((function r(e){var t;return(0,f.A)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(t=e.currentTarget).progress=!0,r.next=4,this._refreshLogs();case 4:t.progress=!1;case 5:case"end":return r.stop()}}),r,this)}))),function(r){return E.apply(this,arguments)})},{kind:"method",key:"_downloadFullLog",value:(_=(0,p.A)((0,f.A)().mark((function r(){var e,t,n,o;return(0,f.A)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=(new Date).toISOString().replace(/:/g,"-"),t="core"!==this.provider?(0,H.Vo)(this.provider):M._,n="core"!==this.provider?"".concat(this.provider,"_").concat(e,".log"):"home-assistant_".concat(e,".log"),r.next=5,(0,L.e0)(this.hass,t);case 5:o=r.sent,(0,S.R)(o.path,n);case 7:case"end":return r.stop()}}),r,this)}))),function(){return _.apply(this,arguments)})},{kind:"method",key:"_refreshLogs",value:(t=(0,p.A)((0,f.A)().mark((function r(){var e,t,n=this;return(0,f.A)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this._logHTML=this.hass.localize("ui.panel.config.logs.loading_log"),"core"===this.provider||!(0,x.x)(this.hass,"hassio")){r.next=21;break}return r.prev=2,r.next=5,(0,H.RE)(this.hass,this.provider);case 5:if(e=r.sent,this.filter&&(e=e.split("\n").filter((function(r){return r.toLowerCase().includes(n.filter.toLowerCase())})).join("\n")),e){r.next=10;break}return this._logHTML=this.hass.localize("ui.panel.config.logs.no_errors"),r.abrupt("return");case 10:return this._logHTML=(0,m.qy)(s||(s=(0,v.A)(['<ha-ansi-to-html .content="','"> </ha-ansi-to-html>'])),e),this._isLogLoaded=!0,r.abrupt("return");case 15:return r.prev=15,r.t0=r.catch(2),this._error=this.hass.localize("ui.panel.config.logs.failed_get_logs",{provider:this.provider,error:(0,T.VR)(r.t0)}),r.abrupt("return");case 19:r.next=24;break;case 21:return r.next=23,(0,M.L)(this.hass);case 23:e=r.sent;case 24:this._isLogLoaded=!0,t=e&&e.split("\n"),this._logHTML=t?(this.filter?t.filter((function(r){return n.filter?r.toLowerCase().includes(n.filter.toLowerCase()):r})):t).map((function(r){return r.includes("INFO")?(0,m.qy)(c||(c=(0,v.A)(['<div class="info">',"</div>"])),r):r.includes("WARNING")?(0,m.qy)(u||(u=(0,v.A)(['<div class="warning">',"</div>"])),r):r.includes("ERROR")||r.includes("FATAL")||r.includes("CRITICAL")?(0,m.qy)(l||(l=(0,v.A)(['<div class="error">',"</div>"])),r):(0,m.qy)(d||(d=(0,v.A)(["<div>","</div>"])),r)})):this.hass.localize("ui.panel.config.logs.no_errors");case 27:case"end":return r.stop()}}),r,this,[[2,15]])}))),function(){return t.apply(this,arguments)})},{kind:"field",static:!0,key:"styles",value:function(){return(0,m.AH)(h||(h=(0,v.A)([".error-log-intro{text-align:center;margin:16px}ha-card{padding-top:16px}.header{display:flex;justify-content:space-between;padding:0 16px}.card-header{color:var(--ha-card-header-color,--primary-text-color);font-family:var(--ha-card-header-font-family, inherit);font-size:var(--ha-card-header-font-size, 24px);letter-spacing:-.012em;line-height:48px;display:block;margin-block-start:0px;margin-block-end:0px;font-weight:400}ha-select{display:block;max-width:500px;width:100%}ha-icon-button{float:right}.error-log{font-family:var(--code-font-family, monospace);clear:both;text-align:left;padding-top:12px}.error-log>div{overflow:auto;overflow-wrap:break-word}.error-log>div:hover{background-color:var(--secondary-background-color)}.error{color:var(--error-color)}.warning{color:var(--warning-color)}mwc-button{direction:var(--direction)}"])))}}]}}),m.WF)},30489:function(r,e,t){t.d(e,{R:function(){return n}});var n=function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=document.createElement("a");t.target="_blank",t.href=r,t.download=e,document.body.appendChild(t),t.dispatchEvent(new MouseEvent("click")),document.body.removeChild(t)}}}]);
//# sourceMappingURL=55858.tdSCIo917V8.js.map