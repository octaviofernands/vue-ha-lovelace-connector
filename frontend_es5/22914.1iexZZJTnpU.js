"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[22914],{37456:function(e,t,n){n.d(t,{a:function(){return r}});var a=(0,n(58034).n)((function(e){history.replaceState({scrollPosition:e},"")}),300),r=function(e){return function(t){return{kind:"method",placement:"prototype",key:t.key,descriptor:{set:function(e){a(e),this["__".concat(String(t.key))]=e},get:function(){var e;return this["__".concat(String(t.key))]||(null===(e=history.state)||void 0===e?void 0:e.scrollPosition)},enumerable:!0,configurable:!0},finisher:function(n){var a=n.prototype.connectedCallback;n.prototype.connectedCallback=function(){var n=this;a.call(this);var r=this[t.key];r&&this.updateComplete.then((function(){var t=n.renderRoot.querySelector(e);t&&setTimeout((function(){t.scrollTop=r}),0)}))}}}}}},98041:function(e,t,n){n.d(t,{Al:function(){return s},KY:function(){return i},PN:function(){return d},RM:function(){return v},dG:function(){return u},jm:function(){return h},m7:function(){return b},sR:function(){return f},t1:function(){return l},t2:function(){return _},x:function(){return m},yu:function(){return p}});n(81027),n(50693),n(10507);var a=n(84280),r=n(18409),o=n(46092),i=["bluetooth","dhcp","discovery","hardware","hassio","homekit","integration_discovery","mqtt","ssdp","unignore","usb","zeroconf"],s=["reauth"],c={"HA-Frontend-Base":"".concat(location.protocol,"//").concat(location.host)},l=function(e,t,n){var a;return e.callApi("POST","config/config_entries/flow",{handler:t,show_advanced_options:Boolean(null===(a=e.userData)||void 0===a?void 0:a.showAdvanced),entry_id:n},c)},d=function(e,t){return e.callApi("GET","config/config_entries/flow/".concat(t),void 0,c)},h=function(e,t,n){return e.callApi("POST","config/config_entries/flow/".concat(t),n,c)},u=function(e,t,n){return e.callWS({type:"config_entries/ignore_flow",flow_id:t,title:n})},f=function(e,t){return e.callApi("DELETE","config/config_entries/flow/".concat(t))},p=function(e,t){return e.callApi("GET","config/config_entries/flow_handlers".concat(t?"?type=".concat(t):""))},_=function(e){return e.sendMessagePromise({type:"config_entries/flow/progress"})},g=function(e,t){return e.subscribeEvents((0,r.s)((function(){return _(e).then((function(e){return t.setState(e,!0)}))}),500,!0),"config_entry_discovered")},v=function(e){return(0,a.X)(e,"_configFlowProgress",_,g)},m=function(e,t){return v(e.connection).subscribe(t)},b=function(e,t){return t.context.title_placeholders&&0!==Object.keys(t.context.title_placeholders).length?e("component.".concat(t.handler,".config.flow_title"),t.context.title_placeholders)||("name"in t.context.title_placeholders?t.context.title_placeholders.name:(0,o.p$)(e,t.handler)):(0,o.p$)(e,t.handler)}},13494:function(e,t,n){n.d(t,{Dh:function(){return a},It:function(){return i},WV:function(){return o},g9:function(){return r}});n(81027);var a=function(e){return e.callWS({type:"diagnostics/list"})},r=function(e,t){return e.callWS({type:"diagnostics/get",domain:t})},o=function(e){return"/api/diagnostics/config_entry/".concat(e)},i=function(e,t){return"/api/diagnostics/config_entry/".concat(e,"/device/").concat(t)}},30581:function(e,t,n){n.d(t,{W:function(){return k}});var a,r,o,i,s,c,l,d,h,u=n(64599),f=n(33994),p=n(658),_=n(22858),g=(n(42942),n(48062),n(81027),n(95737),n(50693),n(39790),n(66457),n(99019),n(96858),n(50289)),v=n(98041),m=n(46092),b=n(41572),k=function(e,t){return(0,b.g)(e,t,{flowType:"config_flow",loadDevicesAndAreas:!0,createFlow:(k=(0,_.A)((0,f.A)().mark((function e(n,a){var r,o,i;return(0,f.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,v.t1)(n,a,t.entryId),n.loadFragmentTranslation("config"),n.loadBackendTranslation("config",a),n.loadBackendTranslation("selector",a),n.loadBackendTranslation("title",a)]);case 2:return r=e.sent,o=(0,p.A)(r,1),i=o[0],e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return k.apply(this,arguments)}),fetchFlow:(n=(0,_.A)((0,f.A)().mark((function e(t,n){var a;return(0,f.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.PN)(t,n);case 2:return a=e.sent,e.next=5,t.loadFragmentTranslation("config");case 5:return e.next=7,t.loadBackendTranslation("config",a.handler);case 7:return e.next=9,t.loadBackendTranslation("selector",a.handler);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),handleFlowStep:v.jm,deleteFlow:v.sR,renderAbortDescription:function(e,t){var n=e.localize("component.".concat(t.translation_domain||t.handler,".config.abort.").concat(t.reason),t.description_placeholders);return n?(0,g.qy)(a||(a=(0,u.A)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):t.reason},renderShowFormStepHeader:function(e,t){return e.localize("component.".concat(t.translation_domain||t.handler,".config.step.").concat(t.step_id,".title"),t.description_placeholders)||e.localize("component.".concat(t.handler,".title"))},renderShowFormStepDescription:function(e,t){var n=e.localize("component.".concat(t.translation_domain||t.handler,".config.step.").concat(t.step_id,".description"),t.description_placeholders);return n?(0,g.qy)(r||(r=(0,u.A)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):""},renderShowFormStepFieldLabel:function(e,t,n,a){var r;if("expandable"===n.type)return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".sections.").concat(n.name,".name"));var o=null!=a&&null!==(r=a.path)&&void 0!==r&&r[0]?"sections.".concat(a.path[0]):"";return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".").concat(o,"data.").concat(n.name))||n.name},renderShowFormStepFieldHelper:function(e,t,n,a){var r;if("expandable"===n.type)return e.localize("component.".concat(t.translation_domain||t.handler,".config.step.").concat(t.step_id,".sections.").concat(n.name,".description"));var i=null!=a&&null!==(r=a.path)&&void 0!==r&&r[0]?"sections.".concat(a.path[0],"."):"",s=e.localize("component.".concat(t.translation_domain||t.handler,".config.step.").concat(t.step_id,".").concat(i,"data_description.").concat(n.name),t.description_placeholders);return s?(0,g.qy)(o||(o=(0,u.A)(['<ha-markdown breaks .content="','"></ha-markdown>'])),s):""},renderShowFormStepFieldError:function(e,t,n){return e.localize("component.".concat(t.translation_domain||t.translation_domain||t.handler,".config.error.").concat(n),t.description_placeholders)||n},renderShowFormStepFieldLocalizeValue:function(e,t,n){return e.localize("component.".concat(t.handler,".selector.").concat(n))},renderShowFormStepSubmitButton:function(e,t){return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".submit"))||e.localize("ui.panel.config.integrations.config_flow.".concat(!1===t.last_step?"next":"submit"))},renderExternalStepHeader:function(e,t){return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".title"))||e.localize("ui.panel.config.integrations.config_flow.external_step.open_site")},renderExternalStepDescription:function(e,t){var n=e.localize("component.".concat(t.translation_domain||t.handler,".config.").concat(t.step_id,".description"),t.description_placeholders);return(0,g.qy)(i||(i=(0,u.A)([" <p> "," </p> "," "])),e.localize("ui.panel.config.integrations.config_flow.external_step.description"),n?(0,g.qy)(s||(s=(0,u.A)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):"")},renderCreateEntryDescription:function(e,t){var n=e.localize("component.".concat(t.translation_domain||t.handler,".config.create_entry.").concat(t.description||"default"),t.description_placeholders);return(0,g.qy)(c||(c=(0,u.A)([" "," <p> "," </p> "])),n?(0,g.qy)(l||(l=(0,u.A)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):"",e.localize("ui.panel.config.integrations.config_flow.created_config",{name:t.title}))},renderShowFormProgressHeader:function(e,t){return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".title"))||e.localize("component.".concat(t.handler,".title"))},renderShowFormProgressDescription:function(e,t){var n=e.localize("component.".concat(t.translation_domain||t.handler,".config.progress.").concat(t.progress_action),t.description_placeholders);return n?(0,g.qy)(d||(d=(0,u.A)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):""},renderMenuHeader:function(e,t){return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".title"))||e.localize("component.".concat(t.handler,".title"))},renderMenuDescription:function(e,t){var n=e.localize("component.".concat(t.translation_domain||t.handler,".config.step.").concat(t.step_id,".description"),t.description_placeholders);return n?(0,g.qy)(h||(h=(0,u.A)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):""},renderMenuOption:function(e,t,n){return e.localize("component.".concat(t.translation_domain||t.handler,".config.step.").concat(t.step_id,".menu_options.").concat(n),t.description_placeholders)},renderLoadingDescription:function(e,t,n,a){if("loading_flow"!==t&&"loading_step"!==t)return"";var r=(null==a?void 0:a.handler)||n;return e.localize("ui.panel.config.integrations.config_flow.loading.".concat(t),{integration:r?(0,m.p$)(e.localize,r):e.localize("ui.panel.config.integrations.config_flow.loading.fallback_title")})}});var n,k}},77980:function(e,t,n){var a,r,o,i,s,c=n(64599),l=n(35806),d=n(71008),h=n(62193),u=n(2816),f=n(27927),p=(n(81027),n(50289)),_=n(29818),g=n(37456),v=(n(45346),n(11804),n(55321));(0,f.A)([(0,_.EM)("hass-subpage")],(function(e,t){var n=function(t){function n(){var t;(0,d.A)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return t=(0,h.A)(this,n,[].concat(r)),e(t),t}return(0,u.A)(n,t),(0,l.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,_.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,_.MZ)()],key:"header",value:void 0},{kind:"field",decorators:[(0,_.MZ)({type:Boolean,attribute:"main-page"})],key:"mainPage",value:function(){return!1}},{kind:"field",decorators:[(0,_.MZ)({type:String,attribute:"back-path"})],key:"backPath",value:void 0},{kind:"field",decorators:[(0,_.MZ)({attribute:!1})],key:"backCallback",value:void 0},{kind:"field",decorators:[(0,_.MZ)({type:Boolean,reflect:!0})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,_.MZ)({type:Boolean})],key:"supervisor",value:function(){return!1}},{kind:"field",decorators:[(0,g.a)(".content")],key:"_savedScrollPos",value:void 0},{kind:"method",key:"render",value:function(){var e;return(0,p.qy)(a||(a=(0,c.A)([' <div class="toolbar"> ',' <div class="main-title"><slot name="header">','</slot></div> <slot name="toolbar-icon"></slot> </div> <div class="content ha-scrollbar" @scroll="','"> <slot></slot> </div> <div id="fab"> <slot name="fab"></slot> </div> '])),this.mainPage||null!==(e=history.state)&&void 0!==e&&e.root?(0,p.qy)(r||(r=(0,c.A)([' <ha-menu-button .hassio="','" .hass="','" .narrow="','"></ha-menu-button> '])),this.supervisor,this.hass,this.narrow):this.backPath?(0,p.qy)(o||(o=(0,c.A)([' <a href="','"> <ha-icon-button-arrow-prev .hass="','"></ha-icon-button-arrow-prev> </a> '])),this.backPath,this.hass):(0,p.qy)(i||(i=(0,c.A)([' <ha-icon-button-arrow-prev .hass="','" @click="','"></ha-icon-button-arrow-prev> '])),this.hass,this._backTapped),this.header,this._saveScrollPos)}},{kind:"method",decorators:[(0,_.Ls)({passive:!0})],key:"_saveScrollPos",value:function(e){this._savedScrollPos=e.target.scrollTop}},{kind:"method",key:"_backTapped",value:function(){this.backCallback?this.backCallback():history.back()}},{kind:"get",static:!0,key:"styles",value:function(){return[v.dp,(0,p.AH)(s||(s=(0,c.A)([":host{display:block;height:100%;background-color:var(--primary-background-color);overflow:hidden;position:relative}:host([narrow]){width:100%;position:fixed}.toolbar{display:flex;align-items:center;font-size:20px;height:var(--header-height);padding:8px 12px;background-color:var(--app-header-background-color);font-weight:400;color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box}@media (max-width:599px){.toolbar{padding:4px}}.toolbar a{color:var(--sidebar-text-color);text-decoration:none}::slotted([slot=toolbar-icon]),ha-icon-button-arrow-prev,ha-menu-button{pointer-events:auto;color:var(--sidebar-icon-color)}.main-title{margin:var(--margin-title);line-height:20px;flex-grow:1}.content{position:relative;width:100%;height:calc(100% - 1px - var(--header-height));overflow-y:auto;overflow:auto;-webkit-overflow-scrolling:touch}#fab{position:absolute;right:calc(16px + env(safe-area-inset-right));inset-inline-end:calc(16px + env(safe-area-inset-right));inset-inline-start:initial;bottom:calc(16px + env(safe-area-inset-bottom));z-index:1;display:flex;flex-wrap:wrap;justify-content:flex-end;gap:8px}:host([narrow]) #fab.tabs{bottom:calc(84px + env(safe-area-inset-bottom))}#fab[is-wide]{bottom:24px;right:24px;inset-inline-end:24px;inset-inline-start:initial}"])))]}}]}}),p.WF)},22914:function(e,t,n){n.r(t),n.d(t,{ThreadConfigPanel:function(){return ne}});var a,r,o,i,s,c,l,d,h,u,f,p,_,g,v,m,b,k,w,y,x=n(64782),A=n(33994),z=n(22858),S=n(64599),C=n(35806),M=n(71008),T=n(62193),H=n(2816),V=n(27927),q=n(35890),D=(n(81027),n(44124),n(97741),n(89655),n(33231),n(50693),n(29193),n(39790),n(9241),n(22871),n(36016),n(7760),n(43037),n(253),n(94438),n(16891),n(72606),n(50289)),E=n(29818),P=n(94100),F=n(33922),I=n(2682),B=n(56932),R=(n(26790),n(13830),n(13082),n(94526)),W=n(13494),Z=function(e){return e.callWS({type:"otbr/info"})},L=function(e,t,n){return e.callWS({type:"otbr/set_channel",extended_address:t,channel:n})},N=function(){return(0,C.A)((function e(){(0,M.A)(this,e),this.routers=void 0,this.routers={}}),[{key:"processEvent",value:function(e){return"router_discovered"===e.type?this.routers[e.key]=e.data:"router_removed"===e.type&&delete this.routers[e.key],Object.values(this.routers)}}])}(),O=function(e,t,n){return e.callWS({type:"thread/add_dataset_tlv",source:t,tlv:n})},j=n(30581),U=n(6121),G=(n(77980),n(20712)),$=n(55321),K=n(51842),X=n(30489),Y=n(84976),J=(n(95737),n(66457),n(99019),n(96858),n(34897)),Q="M3 6H21V4H3C1.9 4 1 4.9 1 6V18C1 19.1 1.9 20 3 20H7V18H3V6M13 12H9V13.78C8.39 14.33 8 15.11 8 16C8 16.89 8.39 17.67 9 18.22V20H13V18.22C13.61 17.67 14 16.88 14 16S13.61 14.33 13 13.78V12M11 17.5C10.17 17.5 9.5 16.83 9.5 16S10.17 14.5 11 14.5 12.5 15.17 12.5 16 11.83 17.5 11 17.5M22 8H16C15.5 8 15 8.5 15 9V19C15 19.5 15.5 20 16 20H22C22.5 20 23 19.5 23 19V9C23 8.5 22.5 8 22 8M21 18H17V10H21V18Z",ee="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",te="M7 1C5.9 1 5 1.9 5 3V7H7V4H17V20H7V17H5V21C5 22.1 5.9 23 7 23H17C18.1 23 19 22.1 19 21V3C19 1.9 18.1 1 17 1H7M6 9C4.3 9 3 10.3 3 12S4.3 15 6 15C7.3 15 8.4 14.2 8.8 13H11V15H13V13H15V11H8.8C8.4 9.8 7.3 9 6 9M6 11C6.6 11 7 11.4 7 12S6.6 13 6 13 5 12.6 5 12 5.4 11 6 11Z",ne=(0,V.A)([(0,E.EM)("thread-config-panel")],(function(e,t){var V,G,ne,ae,re,oe,ie,se,ce,le,de=function(t){function n(){var t;(0,M.A)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return t=(0,T.A)(this,n,[].concat(r)),e(t),t}return(0,H.A)(n,t),(0,C.A)(n)}(t);return{F:de,d:[{kind:"field",decorators:[(0,E.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,E.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,E.wk)()],key:"_configEntryId",value:function(){return null}},{kind:"field",decorators:[(0,E.wk)()],key:"_routers",value:function(){return[]}},{kind:"field",decorators:[(0,E.wk)()],key:"_datasets",value:function(){return[]}},{kind:"field",decorators:[(0,E.wk)()],key:"_otbrInfo",value:void 0},{kind:"method",key:"render",value:function(){var e,t=this,n=this._groupRoutersByNetwork(this._routers,this._datasets);return(0,D.qy)(a||(a=(0,S.A)([' <hass-subpage .narrow="','" .hass="','" header="Thread"> <ha-button-menu slot="toolbar-icon"> <ha-icon-button .path="','" slot="trigger"></ha-icon-button> <a href="','" target="_blank" @click="','"> <mwc-list-item> ',' </mwc-list-item> </a> <mwc-list-item @click="','">',"</mwc-list-item> ",' </ha-button-menu> <div class="content"> <h1>',"</h1> "," "," </div> "," </hass-subpage> "])),this.narrow,this.hass,ee,(0,W.WV)(this._configEntryId||""),this._signUrl,this.hass.localize("ui.panel.config.integrations.config_entry.download_diagnostics"),this._addTLV,this.hass.localize("ui.panel.config.thread.add_dataset_from_tlv"),this._otbrInfo?"":(0,D.qy)(r||(r=(0,S.A)(['<mwc-list-item @click="','">',"</mwc-list-item>"])),this._addOTBR,this.hass.localize("ui.panel.config.thread.add_open_thread_border_router")),this.hass.localize("ui.panel.config.thread.my_network"),n.preferred?this._renderNetwork(n.preferred):(0,D.qy)(o||(o=(0,S.A)(['<ha-card> <div class="card-content no-routers"> <h3> ',' </h3> <ha-svg-icon .path="','"></ha-svg-icon> <a href="','" target="_blank"> <mwc-button>',"</mwc-button> </a> </div> </ha-card>"])),this.hass.localize("ui.panel.config.thread.no_preferred_network"),Q,(0,Y.o)(this.hass,"/integrations/thread"),this.hass.localize("ui.panel.config.thread.more_info")),n.networks.length?(0,D.qy)(i||(i=(0,S.A)(["<h3> "," </h3> ",""])),this.hass.localize("ui.panel.config.thread.other_networks"),n.networks.map((function(e){return t._renderNetwork(e)}))):"",null!==(e=this.hass.auth.external)&&void 0!==e&&e.config.canImportThreadCredentials?(0,D.qy)(s||(s=(0,S.A)(['<ha-fab slot="fab" @click="','" extended label="Send credentials to Home Assistant"><ha-svg-icon slot="icon" .path="','"></ha-svg-icon></ha-fab>'])),this._importExternalThreadCredentials,te):D.s6)}},{kind:"method",key:"_renderNetwork",value:function(e){var t,n,a,r=this,o=this._otbrInfo&&e.dataset&&(e.dataset.preferred_extended_address&&this._otbrInfo[e.dataset.preferred_extended_address]||Object.values(this._otbrInfo).find((function(t){return t.extended_pan_id===e.dataset.extended_pan_id}))),i=(null===(t=this.hass.auth.external)||void 0===t?void 0:t.config.canTransferThreadCredentialsToKeychain)&&o;return(0,D.qy)(c||(c=(0,S.A)(['<ha-card> <div class="card-header"> ',""," </div> "," "," "," </ha-card>"])),e.name,e.dataset?(0,D.qy)(l||(l=(0,S.A)(['<div> <ha-icon-button .label="','" .otbr="','" .network="','" .path="','" @click="','"></ha-icon-button>'," </div>"])),this.hass.localize("ui.panel.config.thread.thread_network_info"),o,e,"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z",this._showDatasetInfo,e.dataset.preferred||null!==(n=e.routers)&&void 0!==n&&n.length?"":(0,D.qy)(d||(d=(0,S.A)(['<ha-icon-button .label="','" .networkDataset="','" .path="','" @click="','"></ha-icon-button>'])),this.hass.localize("ui.panel.config.thread.thread_network_delete_credentials"),e.dataset,"M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z",this._removeDataset)):"",null!==(a=e.routers)&&void 0!==a&&a.length?(0,D.qy)(h||(h=(0,S.A)(['<div class="card-content routers"> <h4> '," </h4> </div> ",""])),this.hass.localize("ui.panel.config.thread.border_routers",{count:e.routers.length}),e.routers.map((function(t){var n,a,o,i=r._otbrInfo&&r._otbrInfo[t.extended_address],s="dataset"in e&&t.border_agent_id||i;return(0,D.qy)(u||(u=(0,S.A)(['<ha-list-item class="router" twoline graphic="avatar" .hasMeta="','"> <img slot="graphic" .src="','" alt="','" crossorigin="anonymous" referrerpolicy="no-referrer" @error="','" @load="','"> ',' <span slot="secondary">',"</span> "," </ha-list-item>"])),s,(0,K.MR)({domain:t.brand,brand:!0,type:"icon",darkOptimized:null===(n=r.hass.themes)||void 0===n?void 0:n.darkMode}),t.brand,r._onImageError,r._onImageLoad,t.model_name||(null===(a=t.server)||void 0===a?void 0:a.replace(".local.",""))||"",t.server,s?(0,D.qy)(f||(f=(0,S.A)(["",' <ha-button-menu slot="meta" .network="','" .router="','" .otbr="','" @action="','"> <ha-icon-button .label="','" .path="','" slot="trigger"></ha-icon-button> '," "," </ha-button-menu>"])),e.dataset&&t.extended_address===e.dataset.preferred_extended_address?(0,D.qy)(p||(p=(0,S.A)(['<ha-svg-icon .path="','" .title="','"></ha-svg-icon>'])),te,r.hass.localize("ui.panel.config.thread.default_router")):"",e,t,i,r._handleRouterAction,r.hass.localize("ui.common.overflow_menu"),ee,e.dataset&&t.border_agent_id?(0,D.qy)(_||(_=(0,S.A)(['<ha-list-item .disabled="','"> '," </ha-list-item>"])),t.border_agent_id===e.dataset.preferred_border_agent_id,t.border_agent_id===e.dataset.preferred_border_agent_id?r.hass.localize("ui.panel.config.thread.default_router"):r.hass.localize("ui.panel.config.thread.set_default_router")):"",i?(0,D.qy)(g||(g=(0,S.A)(["<ha-list-item> ","</ha-list-item> <ha-list-item> ","</ha-list-item> ",""])),r.hass.localize("ui.panel.config.thread.reset_border_router"),r.hass.localize("ui.panel.config.thread.change_channel"),null!==(o=e.dataset)&&void 0!==o&&o.preferred?"":(0,D.qy)(v||(v=(0,S.A)(["<ha-list-item> "," </ha-list-item>"])),r.hass.localize("ui.panel.config.thread.add_to_my_network"))):""):"")}))):(0,D.qy)(m||(m=(0,S.A)(['<div class="card-content no-routers"> <ha-svg-icon .path="','"></ha-svg-icon> '," </div> "])),Q,o?(0,D.qy)(b||(b=(0,S.A)(["",' <mwc-button .otbr="','" @click="','">',"</mwc-button>"])),this.hass.localize("ui.panel.config.thread.no_routers_otbr_network"),o,this._resetBorderRouterEvent,this.hass.localize("ui.panel.config.thread.reset_border_router")):this.hass.localize("ui.panel.config.thread.no_border_routers")),e.dataset&&!e.dataset.preferred?(0,D.qy)(k||(k=(0,S.A)(['<div class="card-actions"> <mwc-button .datasetId="','" @click="','">Make preferred network</mwc-button> </div>'])),e.dataset.dataset_id,this._setPreferred):"",i?(0,D.qy)(w||(w=(0,S.A)(['<div class="card-actions"> <mwc-button .otbr="','" @click="','">Send credentials to phone</mwc-button> </div>'])),o,this._sendCredentials):"")}},{kind:"method",key:"_sendCredentials",value:function(e){var t,n,a=e.currentTarget.otbr;a&&this.hass.auth.external.fireMessage({type:"thread/store_in_platform_keychain",payload:{mac_extended_address:a.extended_address,border_agent_id:null!==(t=a.border_agent_id)&&void 0!==t?t:"",active_operational_dataset:null!==(n=a.active_dataset_tlvs)&&void 0!==n?n:""}})}},{kind:"method",key:"_showDatasetInfo",value:(le=(0,z.A)((0,A.A)().mark((function e(t){var a,r;return(0,A.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.currentTarget.network,r=t.currentTarget.otbr,o=this,i={network:a,otbrInfo:r},(0,J.r)(o,"show-dialog",{dialogTag:"ha-dialog-thread-dataset",dialogImport:function(){return n.e(53568).then(n.bind(n,53568))},dialogParams:i});case 3:case"end":return e.stop()}var o,i}),e,this)}))),function(e){return le.apply(this,arguments)})},{kind:"method",key:"_importExternalThreadCredentials",value:function(){this.hass.auth.external.fireMessage({type:"thread/import_credentials"})}},{kind:"method",key:"_onImageError",value:function(e){e.target.style.display="none"}},{kind:"method",key:"_onImageLoad",value:function(e){e.target.style.display=""}},{kind:"method",key:"hassSubscribe",value:function(){var e,t,n,a=this;return[(e=this.hass,t=function(e){a._routers=e},n=new N,e.connection.subscribeMessage((function(e){return t(n.processEvent(e))}),{type:"thread/discover_routers"}))]}},{kind:"method",key:"firstUpdated",value:function(e){(0,q.A)(de,"firstUpdated",this,3)([e]),this._refresh(),this._configEntryId=(0,B.p9)("config_entry")}},{kind:"field",key:"_groupRoutersByNetwork",value:function(){var e=this;return(0,P.A)((function(t,n){var a,r,o={},i=(0,x.A)(t);try{for(i.s();!(r=i.n()).done;){var s=r.value,c=s.extended_pan_id;c in o?o[c].routers.push(s):o[c]={name:s.network_name||"",routers:[s]}}}catch(p){i.e(p)}finally{i.f()}var l,d=(0,x.A)(n);try{for(d.s();!(l=d.n()).done;){var h,u=l.value,f=u.extended_pan_id;if(f)if(u.preferred)a={name:u.network_name,dataset:u,routers:null===(h=o[f])||void 0===h?void 0:h.routers},delete o[f];else f in o?o[f].dataset=u:o[f]={name:u.network_name,dataset:u}}}catch(p){d.e(p)}finally{d.f()}return{preferred:a,networks:Object.values(o).sort((function(t,n){return(0,I.x)(t.name,n.name,e.hass.locale.language)}))}}))}},{kind:"method",key:"_refresh",value:(ce=(0,z.A)((0,A.A)().mark((function e(){var t=this;return(0,A.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=this.hass,n.callWS({type:"thread/list_datasets"})).then((function(e){t._datasets=e.datasets})),(0,F.x)(this.hass,"otbr")){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,Z(this.hass);case 6:this._otbrInfo=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),this._otbrInfo=void 0;case 12:case"end":return e.stop()}var n}),e,this,[[3,9]])}))),function(){return ce.apply(this,arguments)})},{kind:"method",key:"_signUrl",value:(se=(0,z.A)((0,A.A)().mark((function e(t){var n,a;return(0,A.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.closest("a"),t.preventDefault(),e.next=4,(0,R.e0)(this.hass,n.getAttribute("href"));case 4:a=e.sent,(0,X.R)(a.path);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return se.apply(this,arguments)})},{kind:"method",key:"_addOTBR",value:function(){var e,t=this;(0,j.W)(this,{dialogClosedCallback:function(){t._refresh()},startFlowHandler:"otbr",showAdvanced:null===(e=this.hass.userData)||void 0===e?void 0:e.showAdvanced})}},{kind:"method",key:"_handleRouterAction",value:function(e){var t=e.currentTarget.network,n=e.currentTarget.router,a=e.currentTarget.otbr;switch(t.dataset&&n.border_agent_id?Number(e.detail.index):Number(e.detail.index)+1){case 0:this._setPreferredBorderAgent(t.dataset,n);break;case 1:this._resetBorderRouter(a);break;case 2:this._changeChannel(a);break;case 3:this._setDataset(a)}}},{kind:"method",key:"_resetBorderRouterEvent",value:function(e){var t=e.currentTarget.otbr;this._resetBorderRouter(t)}},{kind:"method",key:"_resetBorderRouter",value:(ie=(0,z.A)((0,A.A)().mark((function e(t){return(0,A.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.thread.confirm_reset_border_router"),text:this.hass.localize("ui.panel.config.thread.confirm_reset_border_router_text")});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,n=this.hass,a=t.extended_address,n.callWS({type:"otbr/create_network",extended_address:a});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),(0,U.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.thread.otbr_config_failed"),text:e.t0.message});case 13:this._refresh();case 14:case"end":return e.stop()}var n,a}),e,this,[[5,10]])}))),function(e){return ie.apply(this,arguments)})},{kind:"method",key:"_setDataset",value:(oe=(0,z.A)((0,A.A)().mark((function e(t){var n,a,r;return(0,A.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this._groupRoutersByNetwork(this._routers,this._datasets),r=null===(n=a.preferred)||void 0===n||null===(n=n.dataset)||void 0===n?void 0:n.dataset_id){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,(0,U.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.thread.confirm_set_dataset_border_router"),text:this.hass.localize("ui.panel.config.thread.confirm_set_dataset_border_router_text")});case 6:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:return e.prev=9,e.next=12,o=this.hass,i=t.extended_address,s=r,o.callWS({type:"otbr/set_network",extended_address:i,dataset_id:s});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),(0,U.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.thread.otbr_config_failed"),text:e.t0.message});case 17:this._refresh();case 18:case"end":return e.stop()}var o,i,s}),e,this,[[9,14]])}))),function(e){return oe.apply(this,arguments)})},{kind:"method",key:"_setPreferred",value:(re=(0,z.A)((0,A.A)().mark((function e(t){var n;return(0,A.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.datasetId,e.next=3,a=this.hass,r=n,a.callWS({type:"thread/set_preferred_dataset",dataset_id:r});case 3:this._refresh();case 4:case"end":return e.stop()}var a,r}),e,this)}))),function(e){return re.apply(this,arguments)})},{kind:"method",key:"_setPreferredBorderAgent",value:(ae=(0,z.A)((0,A.A)().mark((function e(t,n){return(0,A.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a=this.hass,r=t.dataset_id,o=n.border_agent_id,i=n.extended_address,a.callWS({type:"thread/set_preferred_border_agent",dataset_id:r,border_agent_id:o,extended_address:i});case 2:this._refresh();case 3:case"end":return e.stop()}var a,r,o,i}),e,this)}))),function(e,t){return ae.apply(this,arguments)})},{kind:"method",key:"_addTLV",value:(ne=(0,z.A)((0,A.A)().mark((function e(){var t;return(0,A.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.showPromptDialog)(this,{title:this.hass.localize("ui.panel.config.thread.add_dataset"),inputLabel:this.hass.localize("ui.panel.config.thread.add_dataset_label"),confirmText:this.hass.localize("ui.panel.config.thread.add_dataset_button")});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,O(this.hass,"manual",t);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),(0,U.showAlertDialog)(this,{title:"Error",text:e.t0.message||e.t0});case 13:this._refresh();case 14:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(){return ne.apply(this,arguments)})},{kind:"method",key:"_removeDataset",value:(G=(0,z.A)((0,A.A)().mark((function e(t){var n;return(0,A.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.networkDataset,e.next=3,(0,U.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.thread.confirm_delete_dataset",{name:n.network_name}),text:this.hass.localize("ui.panel.config.thread.confirm_delete_dataset_text"),destructive:!0,confirmText:this.hass.localize("ui.common.delete")});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,e.next=9,a=this.hass,r=n.dataset_id,a.callWS({type:"thread/delete_dataset",dataset_id:r});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),(0,U.showAlertDialog)(this,{title:"Error",text:e.t0.message||e.t0});case 14:this._refresh();case 15:case"end":return e.stop()}var a,r}),e,this,[[6,11]])}))),function(e){return G.apply(this,arguments)})},{kind:"method",key:"_changeChannel",value:(V=(0,z.A)((0,A.A)().mark((function e(t){var n,a,r,o;return(0,A.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.channel,e.next=3,(0,U.showPromptDialog)(this,{title:this.hass.localize("ui.panel.config.thread.change_channel"),text:this.hass.localize("ui.panel.config.thread.change_channel_text"),inputLabel:this.hass.localize("ui.panel.config.thread.change_channel_label"),confirmText:this.hass.localize("ui.panel.config.thread.change_channel"),inputType:"number",inputMin:"11",inputMax:"26",defaultValue:n?n.toString():void 0});case 3:if(a=e.sent){e.next=6;break}return e.abrupt("return");case 6:if(!((r=parseInt(a))<11||r>26)){e.next=10;break}return(0,U.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.thread.change_channel_invalid"),text:this.hass.localize("ui.panel.config.thread.change_channel_range")}),e.abrupt("return");case 10:return e.prev=10,e.next=13,L(this.hass,t.extended_address,r);case 13:o=e.sent,(0,U.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.thread.change_channel_initiated_title"),text:this.hass.localize("ui.panel.config.thread.change_channel_initiated_text",{delay:Math.floor(o.delay/60)})}),e.next=23;break;case 17:if(e.prev=17,e.t0=e.catch(10),"multiprotocol_enabled"!==e.t0.code){e.next=22;break}return(0,U.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.thread.change_channel_multiprotocol_enabled_title"),text:this.hass.localize("ui.panel.config.thread.change_channel_multiprotocol_enabled_text")}),e.abrupt("return");case 22:(0,U.showAlertDialog)(this,{title:"Error",text:e.t0.message||e.t0});case 23:this._refresh();case 24:case"end":return e.stop()}}),e,this,[[10,17]])}))),function(e){return V.apply(this,arguments)})},{kind:"field",static:!0,key:"styles",value:function(){return[$.RF,(0,D.AH)(y||(y=(0,S.A)([".content{padding:24px 8px 32px;max-width:600px;margin:0 auto;direction:ltr}ha-list-item.router{--mdc-list-item-meta-size:auto;--mdc-list-item-meta-display:flex;--mdc-list-side-padding:16px;cursor:default;overflow:visible}ha-list-item img{border-radius:0}ha-svg-icon[slot=meta]{width:24px}ha-button-menu a{text-decoration:none}.routers{padding-bottom:0}.no-routers{display:flex;flex-direction:column;align-items:center;text-align:center}.no-routers ha-svg-icon{background-color:var(--light-primary-color);color:var(--secondary-text-color);padding:16px;border-radius:50%;margin-bottom:8px}ha-card{margin-bottom:16px}h4{margin:0}.card-header{display:flex;justify-content:space-between}"])))]}}]}}),(0,G.E)(D.WF))},30489:function(e,t,n){n.d(t,{R:function(){return a}});var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.createElement("a");n.target="_blank",n.href=e,n.download=t,document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click")),document.body.removeChild(n)}}}]);
//# sourceMappingURL=22914.1iexZZJTnpU.js.map