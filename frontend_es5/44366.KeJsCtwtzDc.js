"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[44366,96394],{80804:function(e,t,n){n.d(t,{$:function(){return i},N:function(){return a}});n(13025),n(39790),n(253),n(2075),n(4525);var i=function(e){return e.some((function(e){return"rejected"===e.status}))},a=function(e){return e.filter((function(e){return"rejected"===e.status}))}},23449:function(e,t,n){var i,a,r,o,s,l,c=n(64599),u=n(35806),d=n(71008),h=n(62193),f=n(2816),p=n(27927),v=(n(81027),n(18193),n(33231),n(50693),n(50289)),g=n(29818),m=n(66066),y=n(86188),_=n(34897),b=(n(27120),n(2682));(0,p.A)([(0,g.EM)("ha-data-table-labels")],(function(e,t){var n=function(t){function n(){var t;(0,d.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,h.A)(this,n,[].concat(a)),e(t),t}return(0,f.A)(n,t),(0,u.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,g.MZ)({attribute:!1})],key:"labels",value:void 0},{kind:"method",key:"render",value:function(){var e=this,t=this.labels.sort((function(e,t){return(0,b.x)(e.name,t.name)}));return(0,v.qy)(i||(i=(0,c.A)([" <ha-chip-set> "," "," </ha-chip-set> "])),(0,m.u)(t.slice(0,2),(function(e){return e.label_id}),(function(t){return e._renderLabel(t,!0)})),t.length>2?(0,v.qy)(a||(a=(0,c.A)(['<ha-button-menu absolute role="button" tabindex="0" @click="','" @closed="','"> <ha-label slot="trigger" class="plus" dense> +'," </ha-label> "," </ha-button-menu>"])),this._handleIconOverflowMenuOpened,this._handleIconOverflowMenuClosed,t.length-2,(0,m.u)(t.slice(2),(function(e){return e.label_id}),(function(t){return(0,v.qy)(r||(r=(0,c.A)([' <ha-list-item @click="','" .item="','"> '," </ha-list-item> "])),e._labelClicked,t,e._renderLabel(t,!1))}))):v.s6)}},{kind:"method",key:"_renderLabel",value:function(e,t){var n=null!=e&&e.color?(0,y.M)(e.color):void 0;return(0,v.qy)(o||(o=(0,c.A)([' <ha-label dense role="button" tabindex="0" .item="','" @click="','" @keydown="','" style="','"> '," "," </ha-label> "])),e,t?this._labelClicked:void 0,t?this._labelClicked:void 0,n?"--color: ".concat(n):"",null!=e&&e.icon?(0,v.qy)(s||(s=(0,c.A)(['<ha-icon slot="icon" .icon="','"></ha-icon>'])),e.icon):v.s6,e.name)}},{kind:"method",key:"_labelClicked",value:function(e){if(e.stopPropagation(),"keydown"!==e.type||"Enter"===e.key||" "===e.key){var t=e.currentTarget.item;(0,_.r)(this,"label-clicked",{label:t})}}},{kind:"method",key:"_handleIconOverflowMenuOpened",value:function(e){e.stopPropagation();var t=this.closest(".mdc-data-table__row");t&&(t.style.zIndex="1")}},{kind:"method",key:"_handleIconOverflowMenuClosed",value:function(){var e=this.closest(".mdc-data-table__row");e&&(e.style.zIndex="")}},{kind:"get",static:!0,key:"styles",value:function(){return(0,v.AH)(l||(l=(0,c.A)([":host{display:block;flex-grow:1;margin-top:4px;height:22px}ha-chip-set{position:fixed;flex-wrap:nowrap}ha-label{--ha-label-background-color:var(--color, var(--grey-color));--ha-label-background-opacity:0.5}ha-button-menu{border-radius:10px}.plus{--ha-label-background-color:transparent;border:1px solid var(--divider-color)}"])))}}]}}),v.WF)},98041:function(e,t,n){n.d(t,{Al:function(){return s},KY:function(){return o},PN:function(){return u},RM:function(){return m},dG:function(){return h},jm:function(){return d},m7:function(){return _},sR:function(){return f},t1:function(){return c},t2:function(){return v},x:function(){return y},yu:function(){return p}});n(81027),n(50693),n(10507);var i=n(84280),a=n(18409),r=n(46092),o=["bluetooth","dhcp","discovery","hardware","hassio","homekit","integration_discovery","mqtt","ssdp","unignore","usb","zeroconf"],s=["reauth"],l={"HA-Frontend-Base":"".concat(location.protocol,"//").concat(location.host)},c=function(e,t,n){var i;return e.callApi("POST","config/config_entries/flow",{handler:t,show_advanced_options:Boolean(null===(i=e.userData)||void 0===i?void 0:i.showAdvanced),entry_id:n},l)},u=function(e,t){return e.callApi("GET","config/config_entries/flow/".concat(t),void 0,l)},d=function(e,t,n){return e.callApi("POST","config/config_entries/flow/".concat(t),n,l)},h=function(e,t,n){return e.callWS({type:"config_entries/ignore_flow",flow_id:t,title:n})},f=function(e,t){return e.callApi("DELETE","config/config_entries/flow/".concat(t))},p=function(e,t){return e.callApi("GET","config/config_entries/flow_handlers".concat(t?"?type=".concat(t):""))},v=function(e){return e.sendMessagePromise({type:"config_entries/flow/progress"})},g=function(e,t){return e.subscribeEvents((0,a.s)((function(){return v(e).then((function(e){return t.setState(e,!0)}))}),500,!0),"config_entry_discovered")},m=function(e){return(0,i.X)(e,"_configFlowProgress",v,g)},y=function(e,t){return m(e.connection).subscribe(t)},_=function(e,t){return t.context.title_placeholders&&0!==Object.keys(t.context.title_placeholders).length?e("component.".concat(t.handler,".config.flow_title"),t.context.title_placeholders)||("name"in t.context.title_placeholders?t.context.title_placeholders.name:(0,r.p$)(e,t.handler)):(0,r.p$)(e,t.handler)}},92119:function(e,t,n){n.d(t,{D:function(){return r},i:function(){return a}});var i=n(658),a=(n(52427),n(95737),n(99471),n(39790),n(74268),n(24545),n(51855),n(82130),n(31743),n(22328),n(4959),n(62435),n(99019),n(253),n(54846),n(66555),n(96858),function(e){var t={};return Object.entries(e).forEach((function(e){var n=(0,i.A)(e,2),a=n[0],r=n[1];t[a]={value:r.value,items:r.items instanceof Set?Array.from(r.items):r.items}})),t}),r=function(e){var t={};return Object.entries(e).forEach((function(e){var n=(0,i.A)(e,2),a=n[0],r=n[1];t[a]={value:r.value,items:Array.isArray(r.items)?new Set(r.items):r.items}})),t}},74229:function(e,t,n){n.d(t,{c:function(){return s}});n(10507);var i=n(33994),a=n(22858),r=(n(81027),n(39790),n(66457),function(){var e=(0,a.A)((0,i.A)().mark((function e(t,n,a,o,s){var l,c,u,d,h,f,p,v=arguments;return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l=v.length,c=new Array(l>5?l-5:0),u=5;u<l;u++)c[u-5]=v[u];if(h=(d=s)[t],f=function(e){return o&&o(s,e.result)!==e.cacheKey?(d[t]=void 0,r.apply(void 0,[t,n,a,o,s].concat(c))):e.result},!h){e.next=6;break}return e.abrupt("return",h instanceof Promise?h.then(f):f(h));case 6:return p=a.apply(void 0,[s].concat(c)),d[t]=p,p.then((function(e){d[t]={result:e,cacheKey:null==o?void 0:o(s,e)},setTimeout((function(){d[t]=void 0}),n)}),(function(){d[t]=void 0})),e.abrupt("return",p);case 10:case"end":return e.stop()}}),e)})));return function(t,n,i,a,r){return e.apply(this,arguments)}}()),o=function(e){return e.callWS({type:"entity/source"})},s=function(e){return r("_entitySources",3e4,o,(function(e){return Object.keys(e.states).length}),e)}},30581:function(e,t,n){n.d(t,{W:function(){return b}});var i,a,r,o,s,l,c,u,d,h=n(64599),f=n(33994),p=n(658),v=n(22858),g=(n(42942),n(48062),n(81027),n(95737),n(50693),n(39790),n(66457),n(99019),n(96858),n(50289)),m=n(98041),y=n(46092),_=n(41572),b=function(e,t){return(0,_.g)(e,t,{flowType:"config_flow",loadDevicesAndAreas:!0,createFlow:(b=(0,v.A)((0,f.A)().mark((function e(n,i){var a,r,o;return(0,f.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,m.t1)(n,i,t.entryId),n.loadFragmentTranslation("config"),n.loadBackendTranslation("config",i),n.loadBackendTranslation("selector",i),n.loadBackendTranslation("title",i)]);case 2:return a=e.sent,r=(0,p.A)(a,1),o=r[0],e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return b.apply(this,arguments)}),fetchFlow:(n=(0,v.A)((0,f.A)().mark((function e(t,n){var i;return(0,f.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.PN)(t,n);case 2:return i=e.sent,e.next=5,t.loadFragmentTranslation("config");case 5:return e.next=7,t.loadBackendTranslation("config",i.handler);case 7:return e.next=9,t.loadBackendTranslation("selector",i.handler);case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),handleFlowStep:m.jm,deleteFlow:m.sR,renderAbortDescription:function(e,t){var n=e.localize("component.".concat(t.translation_domain||t.handler,".config.abort.").concat(t.reason),t.description_placeholders);return n?(0,g.qy)(i||(i=(0,h.A)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):t.reason},renderShowFormStepHeader:function(e,t){return e.localize("component.".concat(t.translation_domain||t.handler,".config.step.").concat(t.step_id,".title"),t.description_placeholders)||e.localize("component.".concat(t.handler,".title"))},renderShowFormStepDescription:function(e,t){var n=e.localize("component.".concat(t.translation_domain||t.handler,".config.step.").concat(t.step_id,".description"),t.description_placeholders);return n?(0,g.qy)(a||(a=(0,h.A)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):""},renderShowFormStepFieldLabel:function(e,t,n,i){var a;if("expandable"===n.type)return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".sections.").concat(n.name,".name"));var r=null!=i&&null!==(a=i.path)&&void 0!==a&&a[0]?"sections.".concat(i.path[0]):"";return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".").concat(r,"data.").concat(n.name))||n.name},renderShowFormStepFieldHelper:function(e,t,n,i){var a;if("expandable"===n.type)return e.localize("component.".concat(t.translation_domain||t.handler,".config.step.").concat(t.step_id,".sections.").concat(n.name,".description"));var o=null!=i&&null!==(a=i.path)&&void 0!==a&&a[0]?"sections.".concat(i.path[0],"."):"",s=e.localize("component.".concat(t.translation_domain||t.handler,".config.step.").concat(t.step_id,".").concat(o,"data_description.").concat(n.name),t.description_placeholders);return s?(0,g.qy)(r||(r=(0,h.A)(['<ha-markdown breaks .content="','"></ha-markdown>'])),s):""},renderShowFormStepFieldError:function(e,t,n){return e.localize("component.".concat(t.translation_domain||t.translation_domain||t.handler,".config.error.").concat(n),t.description_placeholders)||n},renderShowFormStepFieldLocalizeValue:function(e,t,n){return e.localize("component.".concat(t.handler,".selector.").concat(n))},renderShowFormStepSubmitButton:function(e,t){return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".submit"))||e.localize("ui.panel.config.integrations.config_flow.".concat(!1===t.last_step?"next":"submit"))},renderExternalStepHeader:function(e,t){return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".title"))||e.localize("ui.panel.config.integrations.config_flow.external_step.open_site")},renderExternalStepDescription:function(e,t){var n=e.localize("component.".concat(t.translation_domain||t.handler,".config.").concat(t.step_id,".description"),t.description_placeholders);return(0,g.qy)(o||(o=(0,h.A)([" <p> "," </p> "," "])),e.localize("ui.panel.config.integrations.config_flow.external_step.description"),n?(0,g.qy)(s||(s=(0,h.A)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):"")},renderCreateEntryDescription:function(e,t){var n=e.localize("component.".concat(t.translation_domain||t.handler,".config.create_entry.").concat(t.description||"default"),t.description_placeholders);return(0,g.qy)(l||(l=(0,h.A)([" "," <p> "," </p> "])),n?(0,g.qy)(c||(c=(0,h.A)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):"",e.localize("ui.panel.config.integrations.config_flow.created_config",{name:t.title}))},renderShowFormProgressHeader:function(e,t){return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".title"))||e.localize("component.".concat(t.handler,".title"))},renderShowFormProgressDescription:function(e,t){var n=e.localize("component.".concat(t.translation_domain||t.handler,".config.progress.").concat(t.progress_action),t.description_placeholders);return n?(0,g.qy)(u||(u=(0,h.A)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):""},renderMenuHeader:function(e,t){return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".title"))||e.localize("component.".concat(t.handler,".title"))},renderMenuDescription:function(e,t){var n=e.localize("component.".concat(t.translation_domain||t.handler,".config.step.").concat(t.step_id,".description"),t.description_placeholders);return n?(0,g.qy)(d||(d=(0,h.A)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):""},renderMenuOption:function(e,t,n){return e.localize("component.".concat(t.translation_domain||t.handler,".config.step.").concat(t.step_id,".menu_options.").concat(n),t.description_placeholders)},renderLoadingDescription:function(e,t,n,i){if("loading_flow"!==t&&"loading_step"!==t)return"";var a=(null==i?void 0:i.handler)||n;return e.localize("ui.panel.config.integrations.config_flow.loading.".concat(t),{integration:a?(0,y.p$)(e.localize,a):e.localize("ui.panel.config.integrations.config_flow.loading.fallback_title")})}});var n,b}},51243:function(e,t,n){n.d(t,{p:function(){return a}});var i=n(34897),a=function(e,t){return(0,i.r)(e,"hass-more-info",t)}},96394:function(e,t,n){n.r(t);var i,a,r,o,s,l,c=n(64599),u=n(35806),d=n(71008),h=n(62193),f=n(2816),p=n(27927),v=(n(81027),n(50289)),g=n(29818),m=(n(32885),n(45346),n(11804),n(55321));(0,p.A)([(0,g.EM)("hass-loading-screen")],(function(e,t){var n=function(t){function n(){var t;(0,d.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,h.A)(this,n,[].concat(a)),e(t),t}return(0,f.A)(n,t),(0,u.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,g.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,g.MZ)({type:Boolean,attribute:"no-toolbar"})],key:"noToolbar",value:function(){return!1}},{kind:"field",decorators:[(0,g.MZ)({type:Boolean})],key:"rootnav",value:function(){return!1}},{kind:"field",decorators:[(0,g.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,g.MZ)()],key:"message",value:void 0},{kind:"method",key:"render",value:function(){var e;return(0,v.qy)(i||(i=(0,c.A)([" ",' <div class="content"> <ha-circular-progress indeterminate></ha-circular-progress> '," </div> "])),this.noToolbar?"":(0,v.qy)(a||(a=(0,c.A)(['<div class="toolbar"> '," </div>"])),this.rootnav||null!==(e=history.state)&&void 0!==e&&e.root?(0,v.qy)(r||(r=(0,c.A)([' <ha-menu-button .hass="','" .narrow="','"></ha-menu-button> '])),this.hass,this.narrow):(0,v.qy)(o||(o=(0,c.A)([' <ha-icon-button-arrow-prev .hass="','" @click="','"></ha-icon-button-arrow-prev> '])),this.hass,this._handleBack)),this.message?(0,v.qy)(s||(s=(0,c.A)(['<div id="loading-text">',"</div>"])),this.message):v.s6)}},{kind:"method",key:"_handleBack",value:function(){history.back()}},{kind:"get",static:!0,key:"styles",value:function(){return[m.RF,(0,v.AH)(l||(l=(0,c.A)([":host{display:block;height:100%;background-color:var(--primary-background-color)}.toolbar{display:flex;align-items:center;font-size:20px;height:var(--header-height);padding:8px 12px;pointer-events:none;background-color:var(--app-header-background-color);font-weight:400;color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box}@media (max-width:599px){.toolbar{padding:4px}}ha-icon-button-arrow-prev,ha-menu-button{pointer-events:auto}.content{height:calc(100% - var(--header-height));display:flex;flex-direction:column;align-items:center;justify-content:center}#loading-text{max-width:350px;margin-top:16px}"])))]}}]}}),v.WF)},58464:function(e,t,n){n.d(t,{j:function(){return r}});n(95737),n(39790),n(66457),n(99019),n(96858);var i=n(34897),a=function(){return n.e(57220).then(n.bind(n,57220))},r=function(e,t){(0,i.r)(e,"show-dialog",{dialogTag:"dialog-assign-category",dialogImport:a,dialogParams:t})}},44366:function(e,t,n){var i=n(22858).A,a=n(33994).A;n.a(e,function(){var e=i(a().mark((function e(i,r){var o,s,l,c,u,d,h,f,p,v,g,m,y,_,b,k,A,w,x,C,z,S,L,E,F,q,M,H,O,I,j,T,B,D,Z,P,G,R,N,V,$,W,K,U,Q,X,Y,J,ee,te,ne,ie,ae,re,oe,se,le,ce,ue,de,he,fe,pe,ve,ge,me,ye,_e,be,ke,Ae,we,xe,Ce,ze,Se,Le,Ee,Fe,qe,Me,He,Oe,Ie,je,Te,Be,De,Ze,Pe,Ge,Re,Ne,Ve,$e,We,Ke,Ue,Qe,Xe,Ye,Je,et,tt,nt,it,at,rt,ot,st,lt,ct,ut,dt;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.r(t),n.d(t,{HaConfigHelpers:function(){return dt}}),o=n(658),s=n(14842),l=n(41981),c=n(64599),u=n(33994),d=n(22858),h=n(35806),f=n(71008),p=n(62193),v=n(2816),g=n(27927),m=n(35890),y=n(64782),_=n(81027),b=n(13025),k=n(44124),A=n(82386),w=n(95737),x=n(79243),C=n(97741),z=n(89655),S=n(50693),L=n(26098),E=n(99471),F=n(10507),q=n(39790),M=n(9241),H=n(66457),O=n(29307),I=n(74268),j=n(24545),T=n(51855),B=n(82130),D=n(31743),Z=n(22328),P=n(4959),G=n(62435),R=n(36604),N=n(99019),V=n(253),$=n(5186),W=n(2075),K=n(94438),U=n(54846),Q=n(16891),X=n(4525),Y=n(66555),J=n(96858),ee=n(68816),te=n(56738),n(7986),ne=n(50289),ie=n(29818),ae=n(94100),re=n(86188),oe=n(96979),se=n(65459),le=n(16312),ce=n(56932),ue=n(80804),n(23449),n(74808),n(82619),n(56388),n(44396),n(93558),n(77104),n(33381),n(16850),n(70857),n(88400),de=n(8640),he=n(31265),fe=n(98041),pe=n(26885),ve=n(54108),ge=n(46092),me=n(21668),ye=n(30581),_e=n(22619),be=n(6121),ke=n(51243),n(96394),Ae=n(35579),we=n(20712),xe=n(55321),Ce=n(58464),ze=n(34336),Se=n(25473),n(30319),Le=n(58331),Ee=n(57273),Fe=n(72617),qe=n(92119),Me=n(74229),!(He=i([te,Ae])).then){e.next=141;break}return e.next=137,He;case 137:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=142;break;case 141:e.t0=He;case 142:Oe=e.t0,te=Oe[0],Ae=Oe[1],ot="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",st="M7,10L12,15L17,10H7Z",lt="M5.5,7A1.5,1.5 0 0,1 4,5.5A1.5,1.5 0 0,1 5.5,4A1.5,1.5 0 0,1 7,5.5A1.5,1.5 0 0,1 5.5,7M21.41,11.58L12.41,2.58C12.05,2.22 11.55,2 11,2H4C2.89,2 2,2.89 2,4V11C2,11.55 2.22,12.05 2.59,12.41L11.58,21.41C11.95,21.77 12.45,22 13,22C13.55,22 14.05,21.77 14.41,21.41L21.41,14.41C21.78,14.05 22,13.55 22,13C22,12.44 21.77,11.94 21.41,11.58Z",ct=function(e,t){var n,i={},a=(0,y.A)(e);try{for(a.s();!(n=a.n()).done;){var r=n.value;i[t(r)]=r}}catch(o){a.e(o)}finally{a.f()}return i},ut=function(e,t,n){var i,a=null===(i=e[n])||void 0===i?void 0:i.config_entry_id;return a?t[a]:void 0},dt=(0,g.A)([(0,ie.EM)("ha-config-helpers")],(function(e,t){var n,i,a,r,g,_,b,k,A=function(t){function n(){var t;(0,f.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,p.A)(this,n,[].concat(a)),e(t),t}return(0,v.A)(n,t),(0,h.A)(n)}(t);return{F:A,d:[{kind:"field",decorators:[(0,ie.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,ie.MZ)({type:Boolean})],key:"isWide",value:function(){return!1}},{kind:"field",decorators:[(0,ie.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,ie.MZ)({attribute:!1})],key:"route",value:void 0},{kind:"field",decorators:[(0,oe.I)({key:"helpers-table-sort",state:!1,subscribe:!1})],key:"_activeSorting",value:void 0},{kind:"field",decorators:[(0,oe.I)({key:"helpers-table-grouping",state:!1,subscribe:!1})],key:"_activeGrouping",value:void 0},{kind:"field",decorators:[(0,oe.I)({key:"helpers-table-collapsed",state:!1,subscribe:!1})],key:"_activeCollapsed",value:void 0},{kind:"field",decorators:[(0,oe.I)({storage:"sessionStorage",key:"helpers-table-search",state:!0,subscribe:!1})],key:"_filter",value:function(){return""}},{kind:"field",decorators:[(0,oe.I)({key:"helpers-table-column-order",state:!1,subscribe:!1})],key:"_activeColumnOrder",value:void 0},{kind:"field",decorators:[(0,oe.I)({key:"helpers-table-hidden-columns",state:!1,subscribe:!1})],key:"_activeHiddenColumns",value:void 0},{kind:"field",decorators:[(0,ie.wk)()],key:"_stateItems",value:function(){return[]}},{kind:"field",decorators:[(0,ie.wk)()],key:"_entityEntries",value:void 0},{kind:"field",decorators:[(0,ie.wk)()],key:"_configEntries",value:void 0},{kind:"field",decorators:[(0,ie.wk)()],key:"_entitySource",value:function(){return{}}},{kind:"field",decorators:[(0,ie.wk)()],key:"_selected",value:function(){return[]}},{kind:"field",decorators:[(0,ie.wk)()],key:"_activeFilters",value:void 0},{kind:"field",decorators:[(0,oe.I)({storage:"sessionStorage",key:"helpers-table-filters-full",state:!0,subscribe:!1,serializer:qe.i,deserializer:qe.D})],key:"_filters",value:function(){return{}}},{kind:"field",decorators:[(0,ie.wk)()],key:"_expandedFilter",value:void 0},{kind:"field",decorators:[(0,ie.wk)()],key:"_categories",value:void 0},{kind:"field",decorators:[(0,ie.wk)()],key:"_labels",value:void 0},{kind:"field",decorators:[(0,ie.wk)(),(0,ee.Fg)({context:pe.ih,subscribe:!0})],key:"_entityReg",value:void 0},{kind:"field",decorators:[(0,ie.wk)()],key:"_filteredStateItems",value:void 0},{kind:"field",key:"_sizeController",value:function(){return new te.P(this,{callback:function(e){var t;return null===(t=e[0])||void 0===t?void 0:t.contentRect.width}})}},{kind:"method",key:"hassSubscribe",value:function(){var e=this;return[(0,he.TC)(this.hass,function(){var t=(0,d.A)((0,u.A)().mark((function t(n){var i;return(0,u.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e._configEntries?Object.assign({},e._configEntries):{},n.forEach((function(e){null===e.type||"added"===e.type?i[e.entry.entry_id]=e.entry:"removed"===e.type?delete i[e.entry.entry_id]:"updated"===e.type&&(i[e.entry.entry_id]=e.entry)})),e._configEntries=i;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{type:["helper"]}),(0,ve.Bz)(this.hass.connection,(function(t){e._entityEntries=ct(t,(function(e){return e.entity_id}))})),(0,me.o5)(this.hass.connection,(function(t){e._labels=t})),(0,de.Ar)(this.hass.connection,"helpers",(function(t){e._categories=t}))]}},{kind:"field",key:"_columns",value:function(){var e=this;return(0,ae.A)((function(t){return{icon:{title:"",label:t("ui.panel.config.helpers.picker.headers.icon"),type:"icon",showNarrow:!0,moveable:!1,template:function(t){return t.entity?(0,ne.qy)(Ie||(Ie=(0,c.A)(['<ha-state-icon .hass="','" .stateObj="','"></ha-state-icon>'])),e.hass,t.entity):(0,ne.qy)(je||(je=(0,c.A)(['<ha-svg-icon .path="','" style="color:var(--error-color)"></ha-svg-icon>'])),t.icon)}},name:{title:t("ui.panel.config.helpers.picker.headers.name"),main:!0,sortable:!0,filterable:!0,flex:2,direction:"asc",extraTemplate:function(e){return e.label_entries.length?(0,ne.qy)(Te||(Te=(0,c.A)([' <ha-data-table-labels .labels="','"></ha-data-table-labels> '])),e.label_entries):ne.s6}},entity_id:{title:t("ui.panel.config.helpers.picker.headers.entity_id"),sortable:!0,filterable:!0},category:{title:t("ui.panel.config.helpers.picker.headers.category"),hidden:!0,groupable:!0,filterable:!0,sortable:!0},labels:{title:"",hidden:!0,filterable:!0,template:function(e){return e.label_entries.map((function(e){return e.name})).join(" ")}},localized_type:{title:t("ui.panel.config.helpers.picker.headers.type"),sortable:!0,filterable:!0,groupable:!0},editable:{title:"",label:t("ui.panel.config.helpers.picker.headers.editable"),type:"icon",showNarrow:!0,template:function(t){return(0,ne.qy)(Be||(Be=(0,c.A)([" "," "])),t.editable?"":(0,ne.qy)(De||(De=(0,c.A)([' <div tabindex="0" style="display:inline-block;position:relative"> <ha-svg-icon .path="','"></ha-svg-icon> <simple-tooltip animation-delay="0" position="left"> '," </simple-tooltip> </div> "])),"M18.66,2C18.4,2 18.16,2.09 17.97,2.28L16.13,4.13L19.88,7.88L21.72,6.03C22.11,5.64 22.11,5 21.72,4.63L19.38,2.28C19.18,2.09 18.91,2 18.66,2M3.28,4L2,5.28L8.5,11.75L4,16.25V20H7.75L12.25,15.5L18.72,22L20,20.72L13.5,14.25L9.75,10.5L3.28,4M15.06,5.19L11.03,9.22L14.78,12.97L18.81,8.94L15.06,5.19Z",e.hass.localize("ui.panel.config.entities.picker.status.unmanageable")))}},actions:{title:"",label:e.hass.localize("ui.panel.config.generic.headers.actions"),type:"overflow-menu",hideable:!1,moveable:!1,showNarrow:!0,template:function(t){return(0,ne.qy)(Ze||(Ze=(0,c.A)([' <ha-icon-overflow-menu .hass="','" narrow .items="','"> </ha-icon-overflow-menu> '])),e.hass,[{path:"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",label:e.hass.localize("ui.panel.config.automation.picker.show_settings"),action:function(){return e._openSettings(t)}},{path:lt,label:e.hass.localize("ui.panel.config.automation.picker.".concat(t.category?"edit_category":"assign_category")),action:function(){return e._editCategory(t)}}])}}}}))}},{kind:"field",key:"_getItems",value:function(){var e=this;return(0,ae.A)((function(t,n,i,a,r,o,s,c){if(null===c)return[];var u=Object.assign({},a),d=n.map((function(t){var n=ut(i,a,t.entity_id);return n&&delete u[n.entry_id],{id:t.entity_id,name:t.attributes.friendly_name||"",entity_id:t.entity_id,editable:void 0!==n||t.attributes.editable,type:n?n.domain:e._entitySource[t.entity_id]||(0,se.t)(t),configEntry:n,entity:t}})),h=Object.values(u).map((function(e){return{id:e.entry_id,entity_id:"",icon:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",name:e.title||"",editable:!0,type:e.domain,configEntry:e,entity:void 0,selectable:!1}}));return[].concat((0,l.A)(d),(0,l.A)(h)).filter((function(e){return!c||(null==c?void 0:c.includes(e.entity_id))})).map((function(e){var n,i=r.find((function(t){return t.entity_id===e.entity_id})),a=s&&(null==i?void 0:i.labels),l=null==i?void 0:i.categories.helpers;return Object.assign(Object.assign({},e),{},{localized_type:(0,ge.p$)(t,e.type)||t("ui.panel.config.helpers.types.".concat(e.type))||e.type,label_entries:(a||[]).map((function(e){return s.find((function(t){return t.label_id===e}))})),category:l?null==o||null===(n=o.find((function(e){return e.category_id===l})))||void 0===n?void 0:n.name:void 0})}))}))}},{kind:"method",key:"render",value:function(){var e,t,n,i,a,r,o=this;if(!this.hass||void 0===this._stateItems||void 0===this._entityEntries||void 0===this._configEntries)return(0,ne.qy)(Pe||(Pe=(0,c.A)(["<hass-loading-screen></hass-loading-screen>"])));var s=(0,ne.qy)(Ge||(Ge=(0,c.A)(["",' <ha-menu-item .value="','" @click="','"> <div slot="headline"> ',' </div> </ha-menu-item> <md-divider role="separator" tabindex="-1"></md-divider> <ha-menu-item @click="','"> <div slot="headline"> '," </div> </ha-menu-item>"])),null===(e=this._categories)||void 0===e?void 0:e.map((function(e){return(0,ne.qy)(Re||(Re=(0,c.A)(['<ha-menu-item .value="','" @click="','"> ',' <div slot="headline">',"</div> </ha-menu-item>"])),e.category_id,o._handleBulkCategory,e.icon?(0,ne.qy)(Ne||(Ne=(0,c.A)(['<ha-icon slot="start" .icon="','"></ha-icon>'])),e.icon):(0,ne.qy)(Ve||(Ve=(0,c.A)(['<ha-svg-icon slot="start" .path="','"></ha-svg-icon>'])),lt),e.name)})),null,this._handleBulkCategory,this.hass.localize("ui.panel.config.automation.picker.bulk_actions.no_category"),this._bulkCreateCategory,this.hass.localize("ui.panel.config.category.editor.add")),l=(0,ne.qy)($e||($e=(0,c.A)(["",'<md-divider role="separator" tabindex="-1"></md-divider> <ha-menu-item @click="','"> <div slot="headline"> '," </div> </ha-menu-item>"])),null===(t=this._labels)||void 0===t?void 0:t.map((function(e){var t=e.color?(0,re.M)(e.color):void 0,n=o._selected.every((function(t){var n;return null===(n=o.hass.entities[t])||void 0===n?void 0:n.labels.includes(e.label_id)})),i=!n&&o._selected.some((function(t){var n;return null===(n=o.hass.entities[t])||void 0===n?void 0:n.labels.includes(e.label_id)}));return(0,ne.qy)(We||(We=(0,c.A)(['<ha-menu-item .value="','" .action="','" @click="','" keep-open> <ha-checkbox slot="start" .checked="','" .indeterminate="','" reducedTouchTarget></ha-checkbox> <ha-label style="','"> '," "," </ha-label> </ha-menu-item> "])),e.label_id,n?"remove":"add",o._handleBulkLabel,n,i,t?"--color: ".concat(t):"",e.icon?(0,ne.qy)(Ke||(Ke=(0,c.A)(['<ha-icon slot="icon" .icon="','"></ha-icon>'])),e.icon):ne.s6,e.name)})),this._bulkCreateLabel,this.hass.localize("ui.panel.config.labels.add_label")),u=this._sizeController.value&&this._sizeController.value<700||!this._sizeController.value&&"docked"===this.hass.dockedSidebar,d=this._getItems(this.hass.localize,this._stateItems,this._entityEntries,this._configEntries,this._entityReg,this._categories,this._labels,this._filteredStateItems);return(0,ne.qy)(Ue||(Ue=(0,c.A)([' <hass-tabs-subpage-data-table .hass="','" .narrow="','" back-path="/config" .route="','" .tabs="','" .searchLabel="','" selectable .selected="','" @selection-changed="','" hasFilters .filters="','" .columns="','" .data="','" .initialGroupColumn="','" .initialCollapsedGroups="','" .initialSorting="','" .columnOrder="','" .hiddenColumns="','" @columns-changed="','" @sorting-changed="','" @grouping-changed="','" @collapsed-changed="','" .activeFilters="','" @clear-filter="','" @row-click="','" .filter="','" @search-changed="','" hasFab clickable .noDataText="','" class="','"> <ha-filter-floor-areas .hass="','" .type="','" .value="','" @data-table-filter-changed="','" slot="filter-pane" .expanded="','" .narrow="','" @expanded-changed="','"></ha-filter-floor-areas> <ha-filter-devices .hass="','" .type="','" .value="','" @data-table-filter-changed="','" slot="filter-pane" .expanded="','" .narrow="','" @expanded-changed="','"></ha-filter-devices> <ha-filter-labels .hass="','" .value="','" @data-table-filter-changed="','" slot="filter-pane" .expanded="','" .narrow="','" @expanded-changed="','"></ha-filter-labels> <ha-filter-categories .hass="','" scope="helpers" .value="','" @data-table-filter-changed="','" slot="filter-pane" .expanded="','" .narrow="','" @expanded-changed="','"></ha-filter-categories> '," ",' <ha-integration-overflow-menu .hass="','" slot="toolbar-icon"></ha-integration-overflow-menu> <ha-fab slot="fab" .label="','" extended @click="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> </ha-fab> </hass-tabs-subpage-data-table> '])),this.hass,this.narrow,this.route,Se.configSections.devices,this.hass.localize("ui.panel.config.helpers.picker.search",{number:d.length}),this._selected.length,this._handleSelectionChanged,Object.values(this._filters).filter((function(e){return Array.isArray(e.value)?e.value.length:e.value&&Object.values(e.value).some((function(e){return Array.isArray(e)?e.length:e}))})).length,this._columns(this.hass.localize),d,this._activeGrouping||"category",this._activeCollapsed,this._activeSorting,this._activeColumnOrder,this._activeHiddenColumns,this._handleColumnsChanged,this._handleSortingChanged,this._handleGroupingChanged,this._handleCollapseChanged,this._activeFilters,this._clearFilter,this._openEditDialog,this._filter,this._handleSearchChange,this.hass.localize("ui.panel.config.helpers.picker.no_helpers"),this.narrow?"narrow":"",this.hass,"entity",null===(n=this._filters["ha-filter-floor-areas"])||void 0===n?void 0:n.value,this._filterChanged,"ha-filter-floor-areas"===this._expandedFilter,this.narrow,this._filterExpanded,this.hass,"entity",null===(i=this._filters["ha-filter-devices"])||void 0===i?void 0:i.value,this._filterChanged,"ha-filter-devices"===this._expandedFilter,this.narrow,this._filterExpanded,this.hass,null===(a=this._filters["ha-filter-labels"])||void 0===a?void 0:a.value,this._filterChanged,"ha-filter-labels"===this._expandedFilter,this.narrow,this._filterExpanded,this.hass,null===(r=this._filters["ha-filter-categories"])||void 0===r?void 0:r.value,this._filterChanged,"ha-filter-categories"===this._expandedFilter,this.narrow,this._filterExpanded,this.narrow?ne.s6:(0,ne.qy)(Qe||(Qe=(0,c.A)(['<ha-button-menu-new slot="selection-bar"> <ha-assist-chip slot="trigger" .label="','"> <ha-svg-icon slot="trailing-icon" .path="','"></ha-svg-icon> </ha-assist-chip> '," </ha-button-menu-new> ",""])),this.hass.localize("ui.panel.config.automation.picker.bulk_actions.move_category"),st,s,u?ne.s6:(0,ne.qy)(Xe||(Xe=(0,c.A)(['<ha-button-menu-new slot="selection-bar"> <ha-assist-chip slot="trigger" .label="','"> <ha-svg-icon slot="trailing-icon" .path="','"></ha-svg-icon> </ha-assist-chip> '," </ha-button-menu-new>"])),this.hass.localize("ui.panel.config.automation.picker.bulk_actions.add_label"),st,l)),this.narrow||u?(0,ne.qy)(Ye||(Ye=(0,c.A)([' <ha-button-menu-new has-overflow slot="selection-bar"> ',' <ha-svg-icon slot="trailing-icon" .path="','"></ha-svg-icon> '," "," </ha-button-menu-new>"])),this.narrow?(0,ne.qy)(Je||(Je=(0,c.A)(['<ha-assist-chip .label="','" slot="trigger"> <ha-svg-icon slot="trailing-icon" .path="','"></ha-svg-icon> </ha-assist-chip>'])),this.hass.localize("ui.panel.config.automation.picker.bulk_action"),st):(0,ne.qy)(et||(et=(0,c.A)(['<ha-icon-button .path="','" .label="','" slot="trigger"></ha-icon-button>'])),"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z","ui.panel.config.automation.picker.bulk_action"),st,this.narrow?(0,ne.qy)(tt||(tt=(0,c.A)(['<ha-sub-menu> <ha-menu-item slot="item"> <div slot="headline"> ',' </div> <ha-svg-icon slot="end" .path="','"></ha-svg-icon> </ha-menu-item> <ha-menu slot="menu">',"</ha-menu> </ha-sub-menu>"])),this.hass.localize("ui.panel.config.automation.picker.bulk_actions.move_category"),ot,s):ne.s6,this.narrow||"docked"===this.hass.dockedSidebar?(0,ne.qy)(nt||(nt=(0,c.A)([' <ha-sub-menu> <ha-menu-item slot="item"> <div slot="headline"> ',' </div> <ha-svg-icon slot="end" .path="','"></ha-svg-icon> </ha-menu-item> <ha-menu slot="menu">',"</ha-menu> </ha-sub-menu>"])),this.hass.localize("ui.panel.config.automation.picker.bulk_actions.add_label"),ot,l):ne.s6):ne.s6,this.hass,this.hass.localize("ui.panel.config.helpers.picker.create_helper"),this._createHelper,"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z")}},{kind:"method",key:"_filterExpanded",value:function(e){e.detail.expanded?this._expandedFilter=e.target.localName:this._expandedFilter===e.target.localName&&(this._expandedFilter=void 0)}},{kind:"method",key:"_filterChanged",value:function(e){var t=e.target.localName;this._filters=Object.assign(Object.assign({},this._filters),{},(0,s.A)({},t,e.detail)),this._applyFilters()}},{kind:"method",key:"_applyFilters",value:function(){for(var e,t=this,n=Object.entries(this._filters),i=function(){var n=(0,o.A)(r[a],2),i=n[0],s=n[1];if(s.items){if(!e)return e=s.items,0;e="intersection"in e?e.intersection(s.items):new Set((0,l.A)(e).filter((function(e){return s.items.has(e)})))}if("ha-filter-labels"===i&&Array.isArray(s.value)&&s.value.length){var c=new Set;if(t._stateItems.filter((function(e){var n;return null===(n=t._entityReg.find((function(t){return t.entity_id===e.entity_id})))||void 0===n?void 0:n.labels.some((function(e){return s.value.includes(e)}))})).forEach((function(e){return c.add(e.entity_id)})),!e)return e=c,0;e="intersection"in e?e.intersection(c):new Set((0,l.A)(e).filter((function(e){return c.has(e)})))}if("ha-filter-categories"===i&&Array.isArray(s.value)&&s.value.length){var u=new Set;if(t._stateItems.filter((function(e){var n;return s.value[0]===(null===(n=t._entityReg.find((function(t){return t.entity_id===e.entity_id})))||void 0===n?void 0:n.categories.helpers)})).forEach((function(e){return u.add(e.entity_id)})),!e)return e=u,0;e="intersection"in e?e.intersection(u):new Set((0,l.A)(e).filter((function(e){return u.has(e)})))}},a=0,r=n;a<r.length;a++)i();this._filteredStateItems=e?(0,l.A)(e):void 0}},{kind:"method",key:"_clearFilter",value:function(){this._filters={},this._applyFilters()}},{kind:"method",key:"_editCategory",value:function(e){var t=this._entityReg.find((function(t){return t.entity_id===e.entity_id}));t?(0,Ce.j)(this,{scope:"helpers",entityReg:t}):(0,be.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.automation.picker.no_category_support"),text:this.hass.localize("ui.panel.config.automation.picker.no_category_entity_reg")})}},{kind:"method",key:"_handleBulkCategory",value:(k=(0,d.A)((0,u.A)().mark((function e(t){var n;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.currentTarget.value,this._bulkAddCategory(n);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{kind:"method",key:"_bulkAddCategory",value:(b=(0,d.A)((0,u.A)().mark((function e(t){var n,i,a,r=this;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],this._selected.forEach((function(e){n.push((0,ve.G_)(r.hass,e,{categories:{helpers:t}}))})),e.next=4,Promise.allSettled(n);case 4:i=e.sent,(0,ue.$)(i)&&(a=(0,ue.N)(i),(0,be.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.common.multiselect.failed",{number:a.length}),text:(0,ne.qy)(it||(it=(0,c.A)(["<pre>\n","</pre>"])),a.map((function(e){return e.reason.message||e.reason.code||e.reason})).join("\r\n"))}));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{kind:"method",key:"_handleBulkLabel",value:(_=(0,d.A)((0,u.A)().mark((function e(t){var n,i;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.currentTarget.value,i=t.currentTarget.action,this._bulkLabel(n,i);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{kind:"method",key:"_bulkLabel",value:(g=(0,d.A)((0,u.A)().mark((function e(t,n){var i,a,r,o=this;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],this._selected.forEach((function(e){i.push((0,ve.G_)(o.hass,e,{labels:"add"===n?o.hass.entities[e].labels.concat(t):o.hass.entities[e].labels.filter((function(e){return e!==t}))}))})),e.next=4,Promise.allSettled(i);case 4:a=e.sent,(0,ue.$)(a)&&(r=(0,ue.N)(a),(0,be.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.common.multiselect.failed",{number:r.length}),text:(0,ne.qy)(at||(at=(0,c.A)(["<pre>\n","</pre>"])),r.map((function(e){return e.reason.message||e.reason.code||e.reason})).join("\r\n"))}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return g.apply(this,arguments)})},{kind:"method",key:"_handleSelectionChanged",value:function(e){this._selected=e.detail.value}},{kind:"method",key:"firstUpdated",value:function(e){(0,m.A)(A,"firstUpdated",this,3)([e]),this._fetchEntitySources(),"/add"===this.route.path&&this._handleAdd()}},{kind:"method",key:"_fetchEntitySources",value:(r=(0,d.A)((0,u.A)().mark((function e(){var t,n,i,a,r,s,c,d,h,f,p,v,g,m,_,b;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,Me.c)(this.hass),(0,ge.fK)(this.hass)]);case 2:t=e.sent,n=(0,o.A)(t,2),i=n[0],a=n[1],r={},s=(0,y.A)(a);try{for(s.s();!(c=s.n()).done;)d=c.value,r[d.domain]=d}catch(u){s.e(u)}finally{s.f()}h={},f=new Set,p=0,v=Object.entries(i);case 12:if(!(p<v.length)){e.next=22;break}if(g=(0,o.A)(v[p],2),m=g[0],_=g[1],(b=_.domain)in r&&"helper"===r[b].integration_type){e.next=17;break}return e.abrupt("continue",19);case 17:h[m]=b,f.add(b);case 19:p++,e.next=12;break;case 22:f.size&&this.hass.loadBackendTranslation("title",(0,l.A)(f)),this._entitySource=h;case 24:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{kind:"method",key:"_handleAdd",value:(a=(0,d.A)((0,u.A)().mark((function e(){var t,n,i;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,ce.p9)("domain"),(0,le.o)("/config/helpers",{replace:!0}),n){e.next=4;break}return e.abrupt("return");case 4:if(!(0,Ee.z)(n)){e.next=7;break}return(0,Fe.$)(this,{domain:n}),e.abrupt("return");case 7:return e.next=9,(0,fe.yu)(this.hass,["helper"]);case 9:if(e.sent.includes(n)){e.next=19;break}return e.next=13,(0,fe.yu)(this.hass,["device","hub","service"]);case 13:if(!e.sent.includes(n)){e.next=17;break}return(0,le.o)("/config/integrations/add?domain=".concat(n),{replace:!0}),e.abrupt("return");case 17:return(0,be.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.integrations.config_flow.error"),text:this.hass.localize("ui.panel.config.integrations.config_flow.no_config_flow")}),e.abrupt("return");case 19:return e.next=21,this.hass.loadBackendTranslation("title",n,!0);case 21:return i=e.sent,e.next=24,(0,be.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.integrations.confirm_new",{integration:(0,ge.p$)(i,n)})});case 24:if(e.sent){e.next=26;break}return e.abrupt("return");case 26:return e.t0=ye.W,e.t1=this,e.t2=n,e.next=31,(0,ge.QC)(this.hass,n);case 31:e.t3=e.sent,e.t4=null===(t=this.hass.userData)||void 0===t?void 0:t.showAdvanced,e.t5={startFlowHandler:e.t2,manifest:e.t3,showAdvanced:e.t4},(0,e.t0)(e.t1,e.t5);case 35:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{kind:"method",key:"willUpdate",value:function(e){if((0,m.A)(A,"willUpdate",this,3)([e]),this._entityEntries&&this._configEntries){var t=!this._stateItems||e.has("_entityEntries")||e.has("_configEntries")||e.has("_entitySource");if(!t&&e.has("hass")){var n=e.get("hass");t=!n||n.states!==this.hass.states}if(t){var i=Object.keys(this._entitySource),a=Object.values(this.hass.states).filter((function(e){return i.includes(e.entity_id)||(0,Ee.z)((0,se.t)(e))}));this._stateItems.length===a.length&&this._stateItems.every((function(e,t){return a[t]===e}))||(this._stateItems=a)}}}},{kind:"method",key:"_openEditDialog",value:(i=(0,d.A)((0,u.A)().mark((function e(t){var n;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.detail.id).includes(".")?(0,ke.p)(this,{entityId:n}):(0,_e.Q)(this,this._configEntries[n]);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{kind:"method",key:"_openSettings",value:function(e){e.entity?(0,ke.p)(this,{entityId:e.entity_id,view:"settings"}):(0,_e.Q)(this,e.configEntry)}},{kind:"method",key:"_createHelper",value:function(){(0,Fe.$)(this,{})}},{kind:"method",key:"_bulkCreateCategory",value:(n=(0,d.A)((0,u.A)().mark((function e(){var t=this;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,ze.S)(this,{scope:"helpers",createEntry:function(){var e=(0,d.A)((0,u.A)().mark((function e(n){var i;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,de.s_)(t.hass,"helpers",n);case 2:return i=e.sent,t._bulkAddCategory(i.category_id),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"_bulkCreateLabel",value:function(){var e,t=this;(0,Le.f)(this,{createEntry:(e=(0,d.A)((0,u.A)().mark((function e(n){var i;return(0,u.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,me._9)(t.hass,n);case 2:return i=e.sent,t._bulkLabel(i.label_id,"add"),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})}},{kind:"method",key:"_handleSortingChanged",value:function(e){this._activeSorting=e.detail}},{kind:"method",key:"_handleGroupingChanged",value:function(e){this._activeGrouping=e.detail.value}},{kind:"method",key:"_handleCollapseChanged",value:function(e){this._activeCollapsed=e.detail.value}},{kind:"method",key:"_handleSearchChange",value:function(e){this._filter=e.detail.value}},{kind:"method",key:"_handleColumnsChanged",value:function(e){this._activeColumnOrder=e.detail.columnOrder,this._activeHiddenColumns=e.detail.hiddenColumns}},{kind:"get",static:!0,key:"styles",value:function(){return[xe.RF,(0,ne.AH)(rt||(rt=(0,c.A)([":host{display:block}hass-tabs-subpage-data-table{--data-table-row-height:60px}hass-tabs-subpage-data-table.narrow{--data-table-row-height:72px}ha-assist-chip{--ha-assist-chip-container-shape:10px}ha-button-menu-new ha-assist-chip{--md-assist-chip-trailing-space:8px}ha-label{--ha-label-background-color:var(--color, var(--grey-color));--ha-label-background-opacity:0.5}"])))]}}]}}),(0,we.E)(ne.WF)),r(),e.next=162;break;case 159:e.prev=159,e.t2=e.catch(0),r(e.t2);case 162:case"end":return e.stop()}}),e,null,[[0,159]])})));return function(t,n){return e.apply(this,arguments)}}())},30319:function(e,t,n){var i,a=n(64599),r=n(35806),o=n(71008),s=n(62193),l=n(2816),c=n(27927),u=(n(81027),n(50289)),d=n(29818);n(26790),n(26207),n(4169),(0,c.A)([(0,d.EM)("ha-integration-overflow-menu")],(function(e,t){var n=function(t){function n(){var t;(0,o.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,s.A)(this,n,[].concat(a)),e(t),t}return(0,l.A)(n,t),(0,r.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,d.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"method",key:"render",value:function(){return(0,u.qy)(i||(i=(0,a.A)([' <ha-button-menu activatable> <ha-icon-button slot="trigger" .label="','" .path="','"></ha-icon-button> <ha-clickable-list-item href="/config/application_credentials"> '," </ha-clickable-list-item> </ha-button-menu> "])),this.hass.localize("ui.common.menu"),"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",this.hass.localize("ui.panel.config.application_credentials.caption"))}}]}}),u.WF)},29307:function(e,t,n){var i=n(41765),a=n(18816),r=n(95689),o=n(76652),s=n(58578),l=n(73201);i({target:"Promise",stat:!0,forced:n(4908)},{allSettled:function(e){var t=this,n=o.f(t),i=n.resolve,c=n.reject,u=s((function(){var n=r(t.resolve),o=[],s=0,c=1;l(e,(function(e){var r=s++,l=!1;c++,a(n,t,e).then((function(e){l||(l=!0,o[r]={status:"fulfilled",value:e},--c||i(o))}),(function(e){l||(l=!0,o[r]={status:"rejected",reason:e},--c||i(o))}))})),--c||i(o)}));return u.error&&c(u.value),n.promise}})}}]);
//# sourceMappingURL=44366.KeJsCtwtzDc.js.map