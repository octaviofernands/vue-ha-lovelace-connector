"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[85855],{85855:function(e,t,n){var r=n(22858).A,i=n(33994).A;n.a(e,function(){var e=r(i().mark((function e(r,a){var o,s,u,c,l,d,v,f,h,k,y,p,g,_,b,A,m,w,S,x,M,D,Z,I,F;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.r(t),n.d(t,{HaTargetSelector:function(){return F}}),o=n(64599),s=n(35806),u=n(71008),c=n(62193),l=n(2816),d=n(27927),v=n(35890),f=n(81027),h=n(39790),k=n(9241),y=n(253),p=n(4525),g=n(50289),_=n(29818),b=n(94100),A=n(21863),m=n(10725),w=n(74229),S=n(29829),x=n(4736),!(M=r([x])).then){e.next=36;break}return e.next=32,M;case 32:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=37;break;case 36:e.t0=M;case 37:x=e.t0[0],F=(0,d.A)([(0,_.EM)("ha-selector-target")],(function(e,t){var n=function(t){function n(){var t;(0,u.A)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=(0,c.A)(this,n,[].concat(i)),e(t),t}return(0,l.A)(n,t),(0,s.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,_.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,_.MZ)({attribute:!1})],key:"selector",value:void 0},{kind:"field",decorators:[(0,_.MZ)({type:Object})],key:"value",value:void 0},{kind:"field",decorators:[(0,_.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,_.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,_.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,_.wk)()],key:"_entitySources",value:void 0},{kind:"field",decorators:[(0,_.wk)()],key:"_createDomains",value:void 0},{kind:"field",key:"_deviceIntegrationLookup",value:function(){return(0,b.A)(m.fk)}},{kind:"method",key:"_hasIntegration",value:function(e){var t,n;return(null===(t=e.target)||void 0===t?void 0:t.entity)&&(0,A.e)(e.target.entity).some((function(e){return e.integration}))||(null===(n=e.target)||void 0===n?void 0:n.device)&&(0,A.e)(e.target.device).some((function(e){return e.integration}))}},{kind:"method",key:"updated",value:function(e){var t=this;(0,v.A)(n,"updated",this,3)([e]),e.has("selector")&&this._hasIntegration(this.selector)&&!this._entitySources&&(0,w.c)(this.hass).then((function(e){t._entitySources=e})),e.has("selector")&&(this._createDomains=(0,S.Lo)(this.selector))}},{kind:"method",key:"render",value:function(){return this._hasIntegration(this.selector)&&!this._entitySources?g.s6:(0,g.qy)(D||(D=(0,o.A)([" ",' <ha-target-picker .hass="','" .value="','" .helper="','" .deviceFilter="','" .entityFilter="','" .disabled="','" .createDomains="','"></ha-target-picker>'])),this.label?(0,g.qy)(Z||(Z=(0,o.A)(["<label>","</label>"])),this.label):g.s6,this.hass,this.value,this.helper,this._filterDevices,this._filterEntities,this.disabled,this._createDomains)}},{kind:"field",key:"_filterEntities",value:function(){var e=this;return function(t){var n;return null===(n=e.selector.target)||void 0===n||!n.entity||(0,A.e)(e.selector.target.entity).some((function(n){return(0,S.Ru)(n,t,e._entitySources)}))}}},{kind:"field",key:"_filterDevices",value:function(){var e=this;return function(t){var n;if(null===(n=e.selector.target)||void 0===n||!n.device)return!0;var r=e._entitySources?e._deviceIntegrationLookup(e._entitySources,Object.values(e.hass.entities)):void 0;return(0,A.e)(e.selector.target.device).some((function(e){return(0,S.vX)(e,t,r)}))}}},{kind:"get",static:!0,key:"styles",value:function(){return(0,g.AH)(I||(I=(0,o.A)(["ha-target-picker{display:block}"])))}}]}}),g.WF),a(),e.next=45;break;case 42:e.prev=42,e.t2=e.catch(0),a(e.t2);case 45:case"end":return e.stop()}}),e,null,[[0,42]])})));return function(t,n){return e.apply(this,arguments)}}())},74229:function(e,t,n){n.d(t,{c:function(){return s}});n(10507);var r=n(33994),i=n(22858),a=(n(81027),n(39790),n(66457),function(){var e=(0,i.A)((0,r.A)().mark((function e(t,n,i,o,s){var u,c,l,d,v,f,h,k=arguments;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=k.length,c=new Array(u>5?u-5:0),l=5;l<u;l++)c[l-5]=k[l];if(v=(d=s)[t],f=function(e){return o&&o(s,e.result)!==e.cacheKey?(d[t]=void 0,a.apply(void 0,[t,n,i,o,s].concat(c))):e.result},!v){e.next=6;break}return e.abrupt("return",v instanceof Promise?v.then(f):f(v));case 6:return h=i.apply(void 0,[s].concat(c)),d[t]=h,h.then((function(e){d[t]={result:e,cacheKey:null==o?void 0:o(s,e)},setTimeout((function(){d[t]=void 0}),n)}),(function(){d[t]=void 0})),e.abrupt("return",h);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}()),o=function(e){return e.callWS({type:"entity/source"})},s=function(e){return a("_entitySources",3e4,o,(function(e){return Object.keys(e.states).length}),e)}}}]);
//# sourceMappingURL=85855.YG-v7rtrOHM.js.map