"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[50317],{56864:function(e,t,i){var n=i(22858).A,r=i(33994).A;i.a(e,function(){var e=n(r().mark((function e(t,n){var a,s,u,l,c,d,o,h,v,y,f,k,p,m,b,A,_,E,x,M,D,g,Z,w,F,q,C,S;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=i(41981),s=i(33994),u=i(22858),l=i(64599),c=i(35806),d=i(71008),o=i(62193),h=i(2816),v=i(27927),y=i(81027),f=i(13025),k=i(82386),p=i(97741),m=i(39790),b=i(36604),A=i(253),_=i(2075),E=i(16891),x=i(50289),M=i(29818),D=i(94100),g=i(34897),Z=i(26175),w=i(94548),!(F=t([w])).then){e.next=42;break}return e.next=38,F;case 38:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=43;break;case 42:e.t0=F;case 43:w=e.t0[0],(0,v.A)([(0,M.EM)("ha-entities-picker")],(function(e,t){var i,n,r=function(t){function i(){var t;(0,d.A)(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=(0,o.A)(this,i,[].concat(r)),e(t),t}return(0,h.A)(i,t),(0,c.A)(i)}(t);return{F:r,d:[{kind:"field",decorators:[(0,M.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,M.MZ)({type:Array})],key:"value",value:void 0},{kind:"field",decorators:[(0,M.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,M.MZ)({type:Boolean})],key:"required",value:function(){return!1}},{kind:"field",decorators:[(0,M.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,M.MZ)({type:Array,attribute:"include-domains"})],key:"includeDomains",value:void 0},{kind:"field",decorators:[(0,M.MZ)({type:Array,attribute:"exclude-domains"})],key:"excludeDomains",value:void 0},{kind:"field",decorators:[(0,M.MZ)({type:Array,attribute:"include-device-classes"})],key:"includeDeviceClasses",value:void 0},{kind:"field",decorators:[(0,M.MZ)({type:Array,attribute:"include-unit-of-measurement"})],key:"includeUnitOfMeasurement",value:void 0},{kind:"field",decorators:[(0,M.MZ)({type:Array,attribute:"include-entities"})],key:"includeEntities",value:void 0},{kind:"field",decorators:[(0,M.MZ)({type:Array,attribute:"exclude-entities"})],key:"excludeEntities",value:void 0},{kind:"field",decorators:[(0,M.MZ)({attribute:"picked-entity-label"})],key:"pickedEntityLabel",value:void 0},{kind:"field",decorators:[(0,M.MZ)({attribute:"pick-entity-label"})],key:"pickEntityLabel",value:void 0},{kind:"field",decorators:[(0,M.MZ)({attribute:!1})],key:"entityFilter",value:void 0},{kind:"field",decorators:[(0,M.MZ)({type:Array})],key:"createDomains",value:void 0},{kind:"method",key:"render",value:function(){var e=this;if(!this.hass)return x.s6;var t=this._currentEntities;return(0,x.qy)(q||(q=(0,l.A)([" ",' <div> <ha-entity-picker allow-custom-entity .hass="','" .includeDomains="','" .excludeDomains="','" .includeEntities="','" .excludeEntities="','" .includeDeviceClasses="','" .includeUnitOfMeasurement="','" .entityFilter="','" .label="','" .helper="','" .disabled="','" .createDomains="','" .required="','" @value-changed="','"></ha-entity-picker> </div> '])),t.map((function(t){return(0,x.qy)(C||(C=(0,l.A)([' <div> <ha-entity-picker allow-custom-entity .curValue="','" .hass="','" .includeDomains="','" .excludeDomains="','" .includeEntities="','" .excludeEntities="','" .includeDeviceClasses="','" .includeUnitOfMeasurement="','" .entityFilter="','" .value="','" .label="','" .disabled="','" .createDomains="','" @value-changed="','"></ha-entity-picker> </div> '])),t,e.hass,e.includeDomains,e.excludeDomains,e.includeEntities,e.excludeEntities,e.includeDeviceClasses,e.includeUnitOfMeasurement,e._getEntityFilter(e.value,e.entityFilter),t,e.pickedEntityLabel,e.disabled,e.createDomains,e._entityChanged)})),this.hass,this.includeDomains,this.excludeDomains,this.includeEntities,this.excludeEntities,this.includeDeviceClasses,this.includeUnitOfMeasurement,this._getEntityFilter(this.value,this.entityFilter),this.pickEntityLabel,this.helper,this.disabled,this.createDomains,this.required&&!t.length,this._addEntity)}},{kind:"field",key:"_getEntityFilter",value:function(){return(0,D.A)((function(e,t){return function(i){return(!e||!e.includes(i.entity_id))&&(!t||t(i))}}))}},{kind:"get",key:"_currentEntities",value:function(){return this.value||[]}},{kind:"method",key:"_updateEntities",value:(n=(0,u.A)((0,s.A)().mark((function e(t){return(0,s.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.value=t,(0,g.r)(this,"value-changed",{value:t});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{kind:"method",key:"_entityChanged",value:function(e){e.stopPropagation();var t=e.currentTarget.curValue,i=e.detail.value;if(i!==t&&(void 0===i||(0,Z.n)(i))){var n=this._currentEntities;i&&!n.includes(i)?this._updateEntities(n.map((function(e){return e===t?i:e}))):this._updateEntities(n.filter((function(e){return e!==t})))}}},{kind:"method",key:"_addEntity",value:(i=(0,u.A)((0,s.A)().mark((function e(t){var i,n;return(0,s.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),i=t.detail.value){e.next=4;break}return e.abrupt("return");case 4:if(t.currentTarget.value="",i){e.next=7;break}return e.abrupt("return");case 7:if(!(n=this._currentEntities).includes(i)){e.next=10;break}return e.abrupt("return");case 10:this._updateEntities([].concat((0,a.A)(n),[i]));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{kind:"field",static:!0,key:"styles",value:function(){return(0,x.AH)(S||(S=(0,l.A)(["div{margin-top:8px}"])))}}]}}),x.WF),n(),e.next=51;break;case 48:e.prev=48,e.t2=e.catch(0),n(e.t2);case 51:case"end":return e.stop()}}),e,null,[[0,48]])})));return function(t,i){return e.apply(this,arguments)}}())},50317:function(e,t,i){var n=i(22858).A,r=i(33994).A;i.a(e,function(){var e=n(r().mark((function e(n,a){var s,u,l,c,d,o,h,v,y,f,k,p,m,b,A,_,E,x,M,D,g,Z,w,F,q,C,S;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i.r(t),i.d(t,{HaEntitySelector:function(){return S}}),s=i(64599),u=i(35806),l=i(71008),c=i(62193),d=i(2816),o=i(27927),h=i(35890),v=i(81027),y=i(13025),f=i(39790),k=i(253),p=i(2075),m=i(4525),b=i(50289),A=i(29818),_=i(21863),E=i(34897),x=i(74229),M=i(29829),D=i(56864),g=i(94548),!(Z=n([D,g])).then){e.next=38;break}return e.next=34,Z;case 34:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=39;break;case 38:e.t0=Z;case 39:w=e.t0,D=w[0],g=w[1],S=(0,o.A)([(0,A.EM)("ha-selector-entity")],(function(e,t){var i=function(t){function i(){var t;(0,l.A)(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=(0,c.A)(this,i,[].concat(r)),e(t),t}return(0,d.A)(i,t),(0,u.A)(i)}(t);return{F:i,d:[{kind:"field",decorators:[(0,A.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,A.MZ)({attribute:!1})],key:"selector",value:void 0},{kind:"field",decorators:[(0,A.wk)()],key:"_entitySources",value:void 0},{kind:"field",decorators:[(0,A.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,A.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,A.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,A.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,A.MZ)({type:Boolean})],key:"required",value:function(){return!0}},{kind:"field",decorators:[(0,A.wk)()],key:"_createDomains",value:void 0},{kind:"method",key:"_hasIntegration",value:function(e){var t;return(null===(t=e.entity)||void 0===t?void 0:t.filter)&&(0,_.e)(e.entity.filter).some((function(e){return e.integration}))}},{kind:"method",key:"willUpdate",value:function(e){var t,i;e.has("selector")&&void 0!==this.value&&(null!==(t=this.selector.entity)&&void 0!==t&&t.multiple&&!Array.isArray(this.value)?(this.value=[this.value],(0,E.r)(this,"value-changed",{value:this.value})):null!==(i=this.selector.entity)&&void 0!==i&&i.multiple||!Array.isArray(this.value)||(this.value=this.value[0],(0,E.r)(this,"value-changed",{value:this.value})))}},{kind:"method",key:"render",value:function(){var e,t,i;return this._hasIntegration(this.selector)&&!this._entitySources?b.s6:null!==(e=this.selector.entity)&&void 0!==e&&e.multiple?(0,b.qy)(q||(q=(0,s.A)([" ",' <ha-entities-picker .hass="','" .value="','" .helper="','" .includeEntities="','" .excludeEntities="','" .entityFilter="','" .createDomains="','" .disabled="','" .required="','"></ha-entities-picker> '])),this.label?(0,b.qy)(C||(C=(0,s.A)(["<label>","</label>"])),this.label):"",this.hass,this.value,this.helper,this.selector.entity.include_entities,this.selector.entity.exclude_entities,this._filterEntities,this._createDomains,this.disabled,this.required):(0,b.qy)(F||(F=(0,s.A)(['<ha-entity-picker .hass="','" .value="','" .label="','" .helper="','" .includeEntities="','" .excludeEntities="','" .entityFilter="','" .createDomains="','" .disabled="','" .required="','" allow-custom-entity></ha-entity-picker>'])),this.hass,this.value,this.label,this.helper,null===(t=this.selector.entity)||void 0===t?void 0:t.include_entities,null===(i=this.selector.entity)||void 0===i?void 0:i.exclude_entities,this._filterEntities,this._createDomains,this.disabled,this.required)}},{kind:"method",key:"updated",value:function(e){var t=this;(0,h.A)(i,"updated",this,3)([e]),e.has("selector")&&this._hasIntegration(this.selector)&&!this._entitySources&&(0,x.c)(this.hass).then((function(e){t._entitySources=e})),e.has("selector")&&(this._createDomains=(0,M.Lo)(this.selector))}},{kind:"field",key:"_filterEntities",value:function(){var e=this;return function(t){var i;return null===(i=e.selector)||void 0===i||null===(i=i.entity)||void 0===i||!i.filter||(0,_.e)(e.selector.entity.filter).some((function(i){return(0,M.Ru)(i,t,e._entitySources)}))}}}]}}),b.WF),a(),e.next=49;break;case 46:e.prev=46,e.t2=e.catch(0),a(e.t2);case 49:case"end":return e.stop()}}),e,null,[[0,46]])})));return function(t,i){return e.apply(this,arguments)}}())},74229:function(e,t,i){i.d(t,{c:function(){return u}});i(10507);var n=i(33994),r=i(22858),a=(i(81027),i(39790),i(66457),function(){var e=(0,r.A)((0,n.A)().mark((function e(t,i,r,s,u){var l,c,d,o,h,v,y,f=arguments;return(0,n.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l=f.length,c=new Array(l>5?l-5:0),d=5;d<l;d++)c[d-5]=f[d];if(h=(o=u)[t],v=function(e){return s&&s(u,e.result)!==e.cacheKey?(o[t]=void 0,a.apply(void 0,[t,i,r,s,u].concat(c))):e.result},!h){e.next=6;break}return e.abrupt("return",h instanceof Promise?h.then(v):v(h));case 6:return y=r.apply(void 0,[u].concat(c)),o[t]=y,y.then((function(e){o[t]={result:e,cacheKey:null==s?void 0:s(u,e)},setTimeout((function(){o[t]=void 0}),i)}),(function(){o[t]=void 0})),e.abrupt("return",y);case 10:case"end":return e.stop()}}),e)})));return function(t,i,n,r,a){return e.apply(this,arguments)}}()),s=function(e){return e.callWS({type:"entity/source"})},u=function(e){return a("_entitySources",3e4,s,(function(e){return Object.keys(e.states).length}),e)}}}]);
//# sourceMappingURL=50317.x13nWe9iUMI.js.map