"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[57764],{50506:function(t,e,s){s.d(e,{G:function(){return a}});var n=s(33994),i=s(22858),a=function(t,e,s){var a,o=function(){var r=(0,i.A)((0,n.A)().mark((function i(){return(0,n.A)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e(t);case 3:return n.prev=3,a=setTimeout((function(){return o()}),s),n.finish(3);case 6:case"end":return n.stop()}}),i,null,[[0,,3,6]])})));return function(){return r.apply(this,arguments)}}();return o(),function(){return clearTimeout(a)}}},58154:function(t,e,s){s.d(e,{q:function(){return r}});var n=s(33994),i=s(22858),a=s(95266),o=s(26025),r=function(){var t=(0,i.A)((0,n.A)().mark((function t(e){return(0,n.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,a.v)(e.config.version,2021,2,4)){t.next=2;break}return t.abrupt("return",e.callWS({type:"supervisor/api",endpoint:"/resolution/info",method:"get"}));case 2:return t.t0=o.PS,t.next=5,e.callApi("GET","hassio/resolution/info");case 5:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},24954:function(t,e,s){s.d(e,{G:function(){return i}});var n=s(14842),i=(s(26098),function(t,e){var s={},i=t.connection.subscribeMessage((function(t){return"initial"===t.type?(s=t.data,void e(s)):"finish"===t.type?(i.then((function(t){return t()})),void e(void 0)):(s=Object.assign(Object.assign({},s),{},(0,n.A)({},t.domain,Object.assign(Object.assign({},s[t.domain]),{},{info:Object.assign(Object.assign({},s[t.domain].info),{},(0,n.A)({},t.key,t.success?t.data:{error:!0,value:t.error.msg}))}))),void e(s))}),{type:"system_health/info"});return i})},57764:function(t,e,s){var n=s(22858).A,i=s(33994).A;s.a(t,function(){var t=n(i().mark((function t(n,a){var o,r,c,l,u,h,d,f,p,m,y,v,_,g,k,b,A,w,S,x,z,I,q,j,O,D,E,H,T,G,N,R,U,P,L,M,C,F,W,$,B,Y,Z,J,K,Q,V,X,tt,et,st,nt,it,at,ot,rt,ct;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s.r(e),s.d(e,{UNHEALTHY_REASON_URL:function(){return ct},UNSUPPORTED_REASON_URL:function(){return rt}}),o=s(91001),r=s(64782),c=s(64599),l=s(33994),u=s(22858),h=s(35806),d=s(71008),f=s(62193),p=s(2816),m=s(27927),y=s(81027),v=s(79243),_=s(97741),g=s(89655),k=s(33231),b=s(10507),A=s(16891),s(72606),w=s(50289),S=s(29818),x=s(33922),z=s(8581),I=s(34897),q=s(32920),j=s(50506),s(13292),s(13082),s(32885),O=s(29180),s(21468),D=s(26025),E=s(58154),H=s(46092),T=s(24954),G=s(6121),N=s(55321),R=s(84976),U=s(18589),!(P=n([z])).then){t.next=56;break}return t.next=52,P;case 52:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=57;break;case 56:t.t0=P;case 57:z=t.t0[0],ot=function(t,e){return"homeassistant"===t?-1:"homeassistant"===e?1:t<e?-1:e<t?1:0},rt={},ct={privileged:"/more-info/unsupported/privileged"},(0,m.A)([(0,S.EM)("dialog-system-information")],(function(t,e){var s,n,i,a=function(e){function s(){var e;(0,d.A)(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=(0,f.A)(this,s,[].concat(i)),t(e),e}return(0,p.A)(s,e),(0,h.A)(s)}(e);return{F:a,d:[{kind:"field",decorators:[(0,S.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,S.wk)()],key:"_systemInfo",value:void 0},{kind:"field",decorators:[(0,S.wk)()],key:"_resolutionInfo",value:void 0},{kind:"field",decorators:[(0,S.wk)()],key:"_supervisorStats",value:void 0},{kind:"field",decorators:[(0,S.wk)()],key:"_coreStats",value:void 0},{kind:"field",decorators:[(0,S.wk)()],key:"_opened",value:function(){return!1}},{kind:"field",key:"_systemHealthSubscription",value:void 0},{kind:"field",key:"_hassIOSubscription",value:void 0},{kind:"method",key:"showDialog",value:function(){this._opened=!0,this.hass.loadBackendTranslation("system_health"),this._subscribe()}},{kind:"method",key:"closeDialog",value:function(){this._opened=!1,this._unsubscribe(),(0,I.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"_subscribe",value:function(){var t=this;(0,x.x)(this.hass,"system_health")&&(this._systemHealthSubscription=(0,T.G)(this.hass,(function(e){e?t._systemInfo=e:t._systemHealthSubscription=void 0}))),(0,x.x)(this.hass,"hassio")&&(this._hassIOSubscription=(0,j.G)(this.hass,(0,u.A)((0,l.A)().mark((function e(){return(0,l.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.lE)(t.hass,"supervisor");case 2:return t._supervisorStats=e.sent,e.next=5,(0,D.lE)(t.hass,"core");case 5:t._coreStats=e.sent;case 6:case"end":return e.stop()}}),e)}))),1e4),(0,E.q)(this.hass).then((function(e){t._resolutionInfo=e})))}},{kind:"method",key:"_unsubscribe",value:function(){var t,e;null===(t=this._systemHealthSubscription)||void 0===t||t.then((function(t){return t()})),this._systemHealthSubscription=void 0,null===(e=this._hassIOSubscription)||void 0===e||e.call(this),this._hassIOSubscription=void 0,this._systemInfo=void 0,this._resolutionInfo=void 0,this._coreStats=void 0,this._supervisorStats=void 0}},{kind:"method",key:"render",value:function(){if(!this._opened)return w.s6;var t=this._getSections();return(0,w.qy)(L||(L=(0,c.A)([' <ha-dialog open @closed="','" .heading="','"> <div> '," <div>","</div> ",' </div> <mwc-button slot="primaryAction" .label="','" @click="','"></mwc-button> </ha-dialog> '])),this.closeDialog,(0,O.l)(this.hass,this.hass.localize("ui.panel.config.repairs.system_information")),this._resolutionInfo?(0,w.qy)(M||(M=(0,c.A)([""," "," "])),this._resolutionInfo.unhealthy.length?(0,w.qy)(C||(C=(0,c.A)(['<ha-alert alert-type="error"> ',' <mwc-button slot="action" .label="','" @click="','"> </mwc-button></ha-alert>'])),this.hass.localize("ui.dialogs.unhealthy.title"),this.hass.localize("ui.panel.config.common.learn_more"),this._unhealthyDialog):"",this._resolutionInfo.unsupported.length?(0,w.qy)(F||(F=(0,c.A)(['<ha-alert alert-type="warning"> ',' <mwc-button slot="action" .label="','" @click="','"> </mwc-button> </ha-alert>'])),this.hass.localize("ui.dialogs.unsupported.title"),this.hass.localize("ui.panel.config.common.learn_more"),this._unsupportedDialog):""):"",t,this._coreStats||this._supervisorStats?(0,w.qy)(W||(W=(0,c.A)([" <div> "," "," </div> "])),this._coreStats?(0,w.qy)($||($=(0,c.A)([" <h3> ",' </h3> <ha-metric .heading="','" .value="','"></ha-metric> <ha-metric .heading="','" .value="','"></ha-metric> '])),this.hass.localize("ui.panel.config.system_health.core_stats"),this.hass.localize("ui.panel.config.system_health.cpu_usage"),this._coreStats.cpu_percent,this.hass.localize("ui.panel.config.system_health.ram_usage"),this._coreStats.memory_percent):"",this._supervisorStats?(0,w.qy)(B||(B=(0,c.A)([" <h3> ",' </h3> <ha-metric .heading="','" .value="','"></ha-metric> <ha-metric .heading="','" .value="','"></ha-metric> '])),this.hass.localize("ui.panel.config.system_health.supervisor_stats"),this.hass.localize("ui.panel.config.system_health.cpu_usage"),this._supervisorStats.cpu_percent,this.hass.localize("ui.panel.config.system_health.ram_usage"),this._supervisorStats.memory_percent):""):"",this.hass.localize("ui.panel.config.repairs.copy"),this._copyInfo)}},{kind:"method",key:"_unsupportedDialog",value:(i=(0,u.A)((0,l.A)().mark((function t(){var e=this;return(0,l.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,G.showAlertDialog)(this,{title:this.hass.localize("ui.dialogs.unsupported.title"),text:(0,w.qy)(Y||(Y=(0,c.A)([""," <br><br> <ul> "," </ul>"])),this.hass.localize("ui.dialogs.unsupported.description"),this._resolutionInfo.unsupported.map((function(t){return(0,w.qy)(Z||(Z=(0,c.A)([' <li> <a href="','" target="_blank" rel="noreferrer"> '," </a> </li> "])),(0,R.o)(e.hass,rt[t]||"/more-info/unsupported/".concat(t)),e.hass.localize("ui.dialogs.unsupported.reason.".concat(t))||t)})))});case 2:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"_unhealthyDialog",value:(n=(0,u.A)((0,l.A)().mark((function t(){var e=this;return(0,l.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,G.showAlertDialog)(this,{title:this.hass.localize("ui.dialogs.unhealthy.title"),text:(0,w.qy)(J||(J=(0,c.A)([""," <br><br> <ul> "," </ul>"])),this.hass.localize("ui.dialogs.unhealthy.description"),this._resolutionInfo.unhealthy.map((function(t){return(0,w.qy)(K||(K=(0,c.A)([' <li> <a href="','" target="_blank" rel="noreferrer"> '," </a> </li> "])),(0,R.o)(e.hass,ct[t]||"/more-info/unhealthy/".concat(t)),e.hass.localize("ui.dialogs.unhealthy.reason.".concat(t))||t)})))});case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"_getSections",value:function(){var t=[];if(this._systemInfo){var e,s=Object.keys(this._systemInfo).sort(ot),n=(0,r.A)(s);try{for(n.s();!(e=n.n()).done;){for(var i=e.value,a=this._systemInfo[i],l=[],u=0,h=Object.keys(a.info);u<h.length;u++){var d=h[u],f=void 0;if(a.info[d]&&"object"===(0,o.A)(a.info[d])){var p=a.info[d];"pending"===p.type?f=(0,w.qy)(V||(V=(0,c.A)([' <ha-circular-progress indeterminate size="small"></ha-circular-progress> ']))):"failed"===p.type?f=(0,w.qy)(X||(X=(0,c.A)([' <span class="error">',"</span>"," "])),p.error,p.more_info?(0,w.qy)(tt||(tt=(0,c.A)([' â€“ <a href="','" target="_blank" rel="noreferrer noopener"> '," </a> "])),p.more_info,this.hass.localize("ui.panel.config.info.system_health.more_info")):""):"date"===p.type&&(f=(0,z.r6)(new Date(p.value),this.hass.locale,this.hass.config))}else f=a.info[d];l.push((0,w.qy)(et||(et=(0,c.A)([" <tr> <td> "," </td> <td>","</td> </tr> "])),this.hass.localize("component.".concat(i,".system_health.info.").concat(d))||d,f))}"homeassistant"!==i&&t.push((0,w.qy)(st||(st=(0,c.A)([' <div class="card-header"> <h3>',"</h3> "," </div> "])),(0,H.p$)(this.hass.localize,i),a.manage_url?(0,w.qy)(nt||(nt=(0,c.A)([' <a class="manage" href="','"> <mwc-button> '," </mwc-button> </a> "])),a.manage_url,this.hass.localize("ui.panel.config.info.system_health.manage")):"")),t.push((0,w.qy)(it||(it=(0,c.A)([" <table> "," </table> "])),l))}}catch(m){n.e(m)}finally{n.f()}}else t.push((0,w.qy)(Q||(Q=(0,c.A)([' <div class="loading-container"> <ha-circular-progress indeterminate></ha-circular-progress> </div> ']))));return t}},{kind:"method",key:"_copyInfo",value:(s=(0,u.A)((0,l.A)().mark((function t(){var e,s,n,i,a,c,u,h,d,f,p,m,y;return(0,l.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=[],n=(0,r.A)(Object.keys(this._systemInfo).sort(ot));try{for(n.s();!(i=n.n()).done;){for(a=i.value,c=this._systemInfo[a],u=!0,h=["".concat("homeassistant"!==a?"<details><summary>".concat((0,H.p$)(this.hass.localize,a),"</summary>\n"):"")],d=0,f=Object.keys(c.info);d<f.length;d++)p=f[d],m=void 0,c.info[p]&&"object"===(0,o.A)(c.info[p])?"pending"===(y=c.info[p]).type?m="pending":"failed"===y.type?m="failed to load: ".concat(y.error):"date"===y.type&&(m=(0,z.r6)(new Date(y.value),this.hass.locale,this.hass.config)):m=c.info[p],u?(h.push("".concat(p," | ").concat(m,"\n-- | --")),u=!1):h.push("".concat(p," | ").concat(m));"homeassistant"===a?e=h.join("\n"):(s.push(h.join("\n")),"homeassistant"!==a&&s.push("</details>"))}}catch(l){n.e(l)}finally{n.f()}return t.next=5,(0,q.l)("## ".concat("System Information\n",e,"\n\n").concat(s.join("\n\n")));case 5:(0,U.P)(this,{message:this.hass.localize("ui.common.copied_clipboard")});case 6:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{kind:"field",static:!0,key:"styles",value:function(){return[N.nA,(0,w.AH)(at||(at=(0,c.A)(["ha-alert{margin-bottom:16px;display:block}table{width:100%}td:first-child{width:45%}td:last-child{direction:ltr}.loading-container{display:flex;align-items:center;justify-content:center}.card-header{justify-content:space-between;display:flex;align-items:center}.error{color:var(--error-color)}a.manage{text-decoration:none}"])))]}}]}}),w.WF),a(),t.next=68;break;case 65:t.prev=65,t.t2=t.catch(0),a(t.t2);case 68:case"end":return t.stop()}}),t,null,[[0,65]])})));return function(e,s){return t.apply(this,arguments)}}())}}]);
//# sourceMappingURL=57764.BXZCY_06TSo.js.map