"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[80675],{80675:function(i,e,t){var a=t(22858).A,s=t(33994).A;t.a(i,function(){var i=a(s().mark((function i(a,n){var o,r,c,l,d,h,u,v,f,g,p,_,m,k,C,y,w,x,A,b,z,S,D,q,P,F,E,I,N,j,H,M,O,U,V,$,B;return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,t.r(e),t.d(e,{HuiDialogSuggestCard:function(){return B}}),o=t(33994),r=t(22858),c=t(64599),l=t(35806),d=t(71008),h=t(62193),u=t(2816),v=t(27927),f=t(81027),g=t(97741),p=t(95554),_=t(16891),m=t(42072),k=t.n(m),C=t(50289),y=t(29818),w=t(34897),t(57641),x=t(57198),A=t(55321),b=t(50157),z=t(26566),S=t(23754),D=t(14182),q=t(57898),P=t(90976),!(F=a([z,q])).then){i.next=41;break}return i.next=37,F;case 37:i.t1=i.sent,i.t0=(0,i.t1)(),i.next=42;break;case 41:i.t0=F;case 42:E=i.t0,z=E[0],q=E[1],B=(0,v.A)([(0,y.EM)("hui-dialog-suggest-card")],(function(i,e){var t,a=function(e){function t(){var e;(0,d.A)(this,t);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return e=(0,h.A)(this,t,[].concat(s)),i(e),e}return(0,u.A)(t,e),(0,l.A)(t)}(e);return{F:a,d:[{kind:"field",decorators:[(0,y.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,y.wk)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,y.wk)()],key:"_cardConfig",value:void 0},{kind:"field",decorators:[(0,y.wk)()],key:"_sectionConfig",value:void 0},{kind:"field",decorators:[(0,y.wk)()],key:"_saving",value:function(){return!1}},{kind:"field",decorators:[(0,y.P)("ha-yaml-editor")],key:"_yamlEditor",value:void 0},{kind:"method",key:"showDialog",value:function(i){this._params=i,this._cardConfig=i.cardConfig,this._sectionConfig=i.sectionConfig,Object.isFrozen(this._cardConfig)||(this._cardConfig=k()(this._cardConfig)),Object.isFrozen(this._sectionConfig)||(this._sectionConfig=k()(this._sectionConfig)),this._yamlEditor&&this._yamlEditor.setValue(this._cardConfig)}},{kind:"method",key:"closeDialog",value:function(){this._params=void 0,this._cardConfig=void 0,(0,w.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"get",key:"_viewSupportsSection",value:function(){var i,e;if(null===(i=this._params)||void 0===i||!i.lovelaceConfig||null===(e=this._params)||void 0===e||!e.path)return!1;var t=(0,D.$P)(this._params.path).viewIndex,a=this._params.lovelaceConfig.views[t];return!(0,x.R)(a)&&"sections"===a.type}},{kind:"method",key:"_renderPreview",value:function(){var i=this;return this._sectionConfig&&this._viewSupportsSection?(0,C.qy)(I||(I=(0,c.A)([' <div class="element-preview"> <hui-section .hass="','" .config="','" preview></hui-section> </div> '])),this.hass,this._sectionConfig):this._cardConfig?(0,C.qy)(N||(N=(0,c.A)([' <div class="element-preview"> '," </div> "])),this._cardConfig.map((function(e){return(0,C.qy)(j||(j=(0,c.A)([' <hui-card .hass="','" .config="','" preview></hui-card> '])),i.hass,e)}))):C.s6}},{kind:"method",key:"render",value:function(){return this._params?(0,C.qy)(H||(H=(0,c.A)([' <ha-dialog open scrimClickAction @closed="','" .heading="','"> <div> '," ",' </div> <mwc-button slot="secondaryAction" @click="','" dialogInitialFocus> '," </mwc-button> "," </ha-dialog> "])),this.closeDialog,this.hass.localize("ui.panel.lovelace.editor.suggest_card.header"),this._renderPreview(),this._params.yaml&&this._cardConfig?(0,C.qy)(M||(M=(0,c.A)([' <div class="editor"> <ha-yaml-editor .hass="','" .defaultValue="','"></ha-yaml-editor> </div> '])),this.hass,this._cardConfig):C.s6,this.closeDialog,this._params.yaml?this.hass.localize("ui.common.close"):this.hass.localize("ui.common.cancel"),this._params.yaml?C.s6:(0,C.qy)(O||(O=(0,c.A)([" ",' <mwc-button slot="primaryAction" .disabled="','" @click="','"> '," </mwc-button> "])),this._sectionConfig&&this._viewSupportsSection?C.s6:(0,C.qy)(U||(U=(0,c.A)([' <mwc-button slot="primaryAction" @click="','"> '," </mwc-button> "])),this._pickCard,this.hass.localize("ui.panel.lovelace.editor.suggest_card.create_own")),this._saving,this._save,this._saving?(0,C.qy)(V||(V=(0,c.A)([' <ha-circular-progress indeterminate aria-label="Saving" size="small"></ha-circular-progress> ']))):this.hass.localize("ui.panel.lovelace.editor.suggest_card.add"))):C.s6}},{kind:"get",static:!0,key:"styles",value:function(){return[A.nA,(0,C.AH)($||($=(0,c.A)(["@media all and (max-width:450px),all and (max-height:500px){ha-dialog{max-height:100%;height:100%}}@media all and (min-width:850px){ha-dialog{width:845px}}ha-dialog{max-width:845px;--dialog-z-index:6}.hidden{display:none}.element-preview{position:relative}hui-card,hui-section{padding-top:8px;margin:4px auto;max-width:390px;display:block;width:100%}.editor{padding-top:16px}"])))]}},{kind:"method",key:"_pickCard",value:function(){var i,e,t;null!==(i=this._params)&&void 0!==i&&i.lovelaceConfig&&null!==(e=this._params)&&void 0!==e&&e.path&&null!==(t=this._params)&&void 0!==t&&t.saveConfig&&((0,P.u)(this,{lovelaceConfig:this._params.lovelaceConfig,saveConfig:this._params.saveConfig,path:this._params.path,entities:this._params.entities}),this.closeDialog())}},{kind:"method",key:"_computeNewConfig",value:function(i,e){if(!this._viewSupportsSection)return(0,S.DU)(i,e,this._cardConfig);var t=(0,D.$P)(e),a=t.viewIndex,s=t.sectionIndex;if(void 0===s){var n,o=null!==(n=this._sectionConfig)&&void 0!==n?n:{type:"grid",cards:this._cardConfig};return(0,S.Bn)(i,a,o)}var r=this._sectionConfig?this._sectionConfig.cards||[]:this._cardConfig;return(0,S.DU)(i,[a,s],r)}},{kind:"method",key:"_save",value:(t=(0,r.A)((0,o.A)().mark((function i(){var e,t,a,s;return(0,o.A)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==(e=this._params)&&void 0!==e&&e.lovelaceConfig&&null!==(t=this._params)&&void 0!==t&&t.path&&null!==(a=this._params)&&void 0!==a&&a.saveConfig&&this._cardConfig){i.next=2;break}return i.abrupt("return");case 2:return this._saving=!0,s=this._computeNewConfig(this._params.lovelaceConfig,this._params.path),i.next=6,this._params.saveConfig(s);case 6:this._saving=!1,(0,b.f)(this,this.hass),this.closeDialog();case 9:case"end":return i.stop()}}),i,this)}))),function(){return t.apply(this,arguments)})}]}}),C.WF),n(),i.next=52;break;case 49:i.prev=49,i.t2=i.catch(0),n(i.t2);case 52:case"end":return i.stop()}}),i,null,[[0,49]])})));return function(e,t){return i.apply(this,arguments)}}())},50157:function(i,e,t){t.d(e,{f:function(){return s}});var a=t(18589),s=function(i,e){return(0,a.P)(i,{message:e.localize("ui.common.successfully_saved")})}}}]);
//# sourceMappingURL=80675.RmycemPdnX0.js.map