"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[22992],{22992:function(t,e,i){var a=i(22858).A,n=i(33994).A;i.a(t,function(){var t=a(n().mark((function t(e,a){var o,r,s,l,d,c,u,h,f,g,v,p,m,y,_,k,b,A,w,x,C,E,O,M,L;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=i(64599),r=i(33994),s=i(22858),l=i(35806),d=i(71008),c=i(62193),u=i(2816),h=i(27927),f=i(35890),g=i(81027),v=i(39805),p=i(97741),m=i(89655),i(13618),i(34736),y=i(50289),_=i(29818),k=i(54075),b=i(70612),i(15124),i(61774),!(A=e([k])).then){t.next=34;break}return t.next=30,A;case 30:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=35;break;case 34:t.t0=A;case 35:k=t.t0[0],L=["config","visibility","layout"],(0,h.A)([(0,_.EM)("hui-card-element-editor")],(function(t,e){var i,a,n=function(e){function i(){var e;(0,d.A)(this,i);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=(0,c.A)(this,i,[].concat(n)),t(e),e}return(0,u.A)(i,e),(0,l.A)(i)}(e);return{F:n,d:[{kind:"field",decorators:[(0,_.MZ)({type:Boolean,attribute:"show-visibility-tab"})],key:"showVisibilityTab",value:function(){return!1}},{kind:"field",decorators:[(0,_.MZ)({attribute:!1})],key:"sectionConfig",value:void 0},{kind:"field",decorators:[(0,_.wk)()],key:"_currTab",value:function(){return L[0]}},{kind:"method",key:"getConfigElement",value:(a=(0,s.A)((0,r.A)().mark((function t(){var e;return(0,r.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,k.dY)(this.configElementType);case 2:if(!(e=t.sent)||!e.getConfigElement){t.next=5;break}return t.abrupt("return",e.getConfigElement());case 5:return t.abrupt("return",void 0);case 6:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{kind:"method",key:"getConfigForm",value:(i=(0,s.A)((0,r.A)().mark((function t(){var e;return(0,r.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,k.dY)(this.configElementType);case 2:if(!(e=t.sent)||!e.getConfigForm){t.next=5;break}return t.abrupt("return",e.getConfigForm());case 5:return t.abrupt("return",void 0);case 6:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"_configChanged",value:function(t){t.stopPropagation(),this.value=t.detail.value}},{kind:"get",key:"_showLayoutTab",value:function(){return!!this.sectionConfig&&(void 0===this.sectionConfig.type||"grid"===this.sectionConfig.type)}},{kind:"method",key:"renderConfigElement",value:function(){var t=this,e=["config"];if(this.showVisibilityTab&&e.push("visibility"),this._showLayoutTab&&e.push("layout"),1===e.length)return(0,f.A)(n,"renderConfigElement",this,3)([]);var i=y.s6;switch(this._currTab){case"config":i=(0,y.qy)(w||(w=(0,o.A)(["",""])),(0,f.A)(n,"renderConfigElement",this,3)([]));break;case"visibility":i=(0,y.qy)(x||(x=(0,o.A)([' <hui-card-visibility-editor .hass="','" .config="','" @value-changed="','"></hui-card-visibility-editor> '])),this.hass,this.value,this._configChanged);break;case"layout":i=(0,y.qy)(C||(C=(0,o.A)([' <hui-card-layout-editor .hass="','" .config="','" .sectionConfig="','" @value-changed="','"> </hui-card-layout-editor> '])),this.hass,this.value,this.sectionConfig,this._configChanged)}return(0,y.qy)(E||(E=(0,o.A)([' <mwc-tab-bar .activeIndex="','" @MDCTabBar:activated="','"> '," </mwc-tab-bar> "," "])),L.indexOf(this._currTab),this._handleTabChanged,e.map((function(e){return(0,y.qy)(O||(O=(0,o.A)([' <mwc-tab .label="','"> </mwc-tab> '])),t.hass.localize("ui.panel.lovelace.editor.edit_card.tab_".concat(e)))})),i)}},{kind:"method",key:"_handleTabChanged",value:function(t){var e=L[t.detail.index];e!==this._currTab&&(this._currTab=e)}},{kind:"get",static:!0,key:"styles",value:function(){return[b.m.styles,(0,y.AH)(M||(M=(0,o.A)(["mwc-tab-bar{text-transform:uppercase;margin-bottom:16px;border-bottom:1px solid var(--divider-color)}"])))]}}]}}),b.m),a(),t.next=44;break;case 41:t.prev=41,t.t2=t.catch(0),a(t.t2);case 44:case"end":return t.stop()}}),t,null,[[0,41]])})));return function(e,i){return t.apply(this,arguments)}}())},15124:function(t,e,i){var a,n,o,r,s,l,d=i(33994),c=i(22858),u=i(64599),h=i(35806),f=i(71008),g=i(62193),v=i(2816),p=i(27927),m=i(35890),y=(i(81027),i(26098),i(10507),i(50289)),_=i(29818),k=i(55165),b=i(94100),A=i(34897),w=i(68320),x=i(79051),C=(i(77372),i(26790),i(87036),i(4169),i(13830),i(24640),i(31180),i(88400),i(60203),i(57641),i(55321)),E=i(21138),O="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z";(0,p.A)([(0,_.EM)("hui-card-layout-editor")],(function(t,e){var i,p,M=function(e){function i(){var e;(0,f.A)(this,i);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=(0,g.A)(this,i,[].concat(n)),t(e),e}return(0,v.A)(i,e),(0,h.A)(i)}(e);return{F:M,d:[{kind:"field",decorators:[(0,_.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,_.MZ)({attribute:!1})],key:"config",value:void 0},{kind:"field",decorators:[(0,_.MZ)({attribute:!1})],key:"sectionConfig",value:void 0},{kind:"field",decorators:[(0,_.wk)()],key:"_defaultLayoutOptions",value:void 0},{kind:"field",decorators:[(0,_.wk)()],key:"_yamlMode",value:function(){return!1}},{kind:"field",decorators:[(0,_.wk)()],key:"_uiAvailable",value:function(){return!0}},{kind:"field",decorators:[(0,_.P)("ha-yaml-editor")],key:"_yamlEditor",value:void 0},{kind:"field",key:"_cardElement",value:void 0},{kind:"field",key:"_mergedOptions",value:function(){return(0,b.A)((function(t,e){return Object.assign(Object.assign({},e),t)}))}},{kind:"field",key:"_computeCardGridSize",value:function(){return(0,b.A)(E.N)}},{kind:"field",key:"_isDefault",value:function(){return(0,b.A)((function(t){return void 0===(null==t?void 0:t.grid_columns)&&void 0===(null==t?void 0:t.grid_rows)}))}},{kind:"method",key:"render",value:function(){var t,e=this._mergedOptions(this.config.layout_options,this._defaultLayoutOptions),i=this._computeCardGridSize(e),l=4*(null!==(t=this.sectionConfig.column_span)&&void 0!==t?t:1);return(0,y.qy)(a||(a=(0,u.A)([' <div class="header"> <p class="intro"> ',' </p> <ha-button-menu slot="icons" @action="','" @click="','" @closed="','" fixed .corner="','" .menuCorner="','"> <ha-icon-button slot="trigger" .label="','" .path="','"> </ha-icon-button> <ha-list-item graphic="icon" .disabled="','"> '," ",' </ha-list-item> <ha-list-item graphic="icon"> '," "," </ha-list-item> </ha-button-menu> </div> "," "])),this.hass.localize("ui.panel.lovelace.editor.edit_card.layout.explanation"),this._handleAction,w.w,x.d,"BOTTOM_END","END",this.hass.localize("ui.common.menu"),"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",!this._uiAvailable,this.hass.localize("ui.panel.lovelace.editor.edit_card.edit_ui"),this._yamlMode?y.s6:(0,y.qy)(n||(n=(0,u.A)([' <ha-svg-icon class="selected_menu_item" slot="graphic" .path="','"></ha-svg-icon> '])),O),this.hass.localize("ui.panel.lovelace.editor.edit_card.edit_yaml"),this._yamlMode?(0,y.qy)(o||(o=(0,u.A)([' <ha-svg-icon class="selected_menu_item" slot="graphic" .path="','"></ha-svg-icon> '])),O):y.s6,this._yamlMode?(0,y.qy)(r||(r=(0,u.A)([' <ha-yaml-editor .hass="','" .defaultValue="','" @value-changed="','"></ha-yaml-editor> '])),this.hass,this.config.layout_options,this._valueChanged):(0,y.qy)(s||(s=(0,u.A)([' <ha-grid-size-picker style="','" .columns="','" .hass="','" .value="','" .isDefault="','" @value-changed="','" .rowMin="','" .rowMax="','" .columnMin="','" .columnMax="','"></ha-grid-size-picker> <ha-settings-row> <span slot="heading" data-for="full-width"> ',' </span> <span slot="description" data-for="full-width"> ',' </span> <ha-switch @change="','" .checked="','" name="full-width"> </ha-switch> </ha-settings-row> '])),(0,k.W)({"max-width":"".concat(45*l+50,"px")}),l,this.hass,i,this._isDefault(this.config.layout_options),this._gridSizeChanged,e.grid_min_rows,e.grid_max_rows,e.grid_min_columns,e.grid_max_columns,this.hass.localize("ui.panel.lovelace.editor.edit_card.layout.full_width"),this.hass.localize("ui.panel.lovelace.editor.edit_card.layout.full_width_helper"),this._fullWidthChanged,"full"===i.columns))}},{kind:"method",key:"firstUpdated",value:function(t){var e=this;(0,m.A)(M,"firstUpdated",this,3)([t]);try{this._cardElement=document.createElement("hui-card"),this._cardElement.hass=this.hass,this._cardElement.preview=!0,this._cardElement.config=this.config,this._cardElement.addEventListener("card-updated",(function(t){var i;t.stopPropagation(),e._defaultLayoutOptions=null===(i=e._cardElement)||void 0===i?void 0:i.getElementLayoutOptions()})),this._cardElement.load(),this._defaultLayoutOptions=this._cardElement.getElementLayoutOptions()}catch(i){console.error(i)}}},{kind:"method",key:"updated",value:function(t){(0,m.A)(M,"updated",this,3)([t]),this._cardElement&&(t.has("hass")&&(this._cardElement.hass=this.hass),t.has("config")&&(this._cardElement.config=this.config))}},{kind:"method",key:"_handleAction",value:(p=(0,c.A)((0,d.A)().mark((function t(e){return(0,d.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.detail.index,t.next=0===t.t0?3:1===t.t0?5:2===t.t0?7:9;break;case 3:return this._yamlMode=!1,t.abrupt("break",9);case 5:return this._yamlMode=!0,t.abrupt("break",9);case 7:return this._reset(),t.abrupt("break",9);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{kind:"method",key:"_reset",value:(i=(0,c.A)((0,d.A)().mark((function t(){var e,i;return(0,d.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:delete(i=Object.assign({},this.config)).layout_options,null===(e=this._yamlEditor)||void 0===e||e.setValue({}),(0,A.r)(this,"value-changed",{value:i});case 4:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"_gridSizeChanged",value:function(t){t.stopPropagation();var e=t.detail.value,i=Object.assign(Object.assign({},this.config),{},{layout_options:Object.assign(Object.assign({},this.config.layout_options),{},{grid_columns:e.columns,grid_rows:e.rows})});void 0===i.layout_options.grid_columns&&delete i.layout_options.grid_columns,void 0===i.layout_options.grid_rows&&delete i.layout_options.grid_rows,0===Object.keys(i.layout_options).length&&delete i.layout_options,(0,A.r)(this,"value-changed",{value:i})}},{kind:"method",key:"_valueChanged",value:function(t){t.stopPropagation();var e=t.detail.value,i=Object.assign(Object.assign({},this.config),{},{layout_options:e});(0,A.r)(this,"value-changed",{value:i})}},{kind:"method",key:"_fullWidthChanged",value:function(t){var e,i;t.stopPropagation();var a=t.target.checked,n=Object.assign(Object.assign({},this.config),{},{layout_options:Object.assign(Object.assign({},this.config.layout_options),{},{grid_columns:a?"full":null!==(e=null===(i=this._defaultLayoutOptions)||void 0===i?void 0:i.grid_min_columns)&&void 0!==e?e:1})});(0,A.r)(this,"value-changed",{value:n})}},{kind:"field",static:!0,key:"styles",value:function(){return[C.RF,(0,y.AH)(l||(l=(0,u.A)([".header{display:flex;flex-direction:row;align-items:flex-start}.header .intro{flex:1;margin:0;color:var(--secondary-text-color)}.header ha-button-menu{--mdc-theme-text-primary-on-background:var(--primary-text-color);margin-top:-8px}.selected_menu_item{color:var(--primary-color)}.disabled{opacity:.5;pointer-events:none}ha-grid-size-picker{display:block;margin:16px auto}ha-yaml-editor{display:block;margin:16px 0}"])))]}}]}}),y.WF)}}]);
//# sourceMappingURL=22992.tjbbyPGQxBQ.js.map