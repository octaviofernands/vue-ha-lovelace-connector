"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[21628],{21628:function(t,i,e){e.r(i);var n,a,s,o,r,c,h,l,d=e(64599),f=e(64782),g=e(33994),u=e(22858),_=e(35806),m=e(71008),p=e(62193),v=e(2816),y=e(27927),b=e(35890),k=(e(71499),e(81027),e(95737),e(97741),e(89655),e(26098),e(39790),e(66457),e(74268),e(24545),e(51855),e(82130),e(31743),e(22328),e(4959),e(62435),e(99019),e(253),e(54846),e(16891),e(66555),e(96858),e(50289)),w=e(29818),x=e(85323),A=e(10977),E=e(94872),C=e(38962),D=e(213),T=e(19244),q=(e(13082),e(4169),e(70857),e(9755)),H=e(25319),j=e(18102),z=e(63582),S=e(562),F=e(7934),I=e(62241),O=(e(16204),e(46645)),B=(e(37940),new Set(["closed","locked","not_home","off"]));(0,y.A)([(0,w.EM)("hui-picture-glance-card")],(function(t,i){var y,J=function(i){function e(){var i;(0,m.A)(this,e);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=(0,p.A)(this,e,[].concat(a)),t(i),i}return(0,v.A)(e,i),(0,_.A)(e)}(i);return{F:J,d:[{kind:"method",static:!0,key:"getConfigElement",value:(y=(0,u.A)((0,g.A)().mark((function t(){return(0,g.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.e(82730),e.e(73707)]).then(e.bind(e,73707));case 2:return t.abrupt("return",document.createElement("hui-picture-glance-card-editor"));case 3:case"end":return t.stop()}}),t)}))),function(){return y.apply(this,arguments)})},{kind:"method",static:!0,key:"getStubConfig",value:function(t,i,e){return{type:"picture-glance",title:"Kitchen",image:"https://demo.home-assistant.io/stub_config/kitchen.png",entities:(0,j.B)(t,2,i,e,["sensor","binary_sensor"])}}},{kind:"field",decorators:[(0,w.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,w.wk)()],key:"_config",value:void 0},{kind:"field",key:"_entitiesDialog",value:void 0},{kind:"field",key:"_entitiesToggle",value:void 0},{kind:"method",key:"getCardSize",value:function(){return 3}},{kind:"method",key:"setConfig",value:function(t){var i=this;if(!t||!t.entities||!Array.isArray(t.entities)||!(t.image||t.image_entity||t.camera_image||t.state_image)||t.state_image&&!t.entity)throw new Error("Invalid configuration");var e=(0,I.L)(t.entities);this._entitiesDialog=[],this._entitiesToggle=[],e.forEach((function(e){t.force_dialog||!E.FD.has((0,D.m)(e.entity))?i._entitiesDialog.push(e):i._entitiesToggle.push(e)})),this._config=Object.assign({hold_action:{action:"more-info"}},t)}},{kind:"method",key:"shouldUpdate",value:function(t){if(!this._config||(0,F.LX)(this,t))return!0;if(!t.has("hass"))return!1;var i=t.get("hass");if(!i||i.themes!==this.hass.themes||i.locale!==this.hass.locale)return!0;if(this._config.image_entity&&i.states[this._config.image_entity]!==this.hass.states[this._config.image_entity])return!0;if(this._entitiesDialog){var e,n=(0,f.A)(this._entitiesDialog);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(i.states[a.entity]!==this.hass.states[a.entity])return!0}}catch(c){n.e(c)}finally{n.f()}}if(this._entitiesToggle){var s,o=(0,f.A)(this._entitiesToggle);try{for(o.s();!(s=o.n()).done;){var r=s.value;if(i.states[r.entity]!==this.hass.states[r.entity])return!0}}catch(c){o.e(c)}finally{o.f()}}return!1}},{kind:"method",key:"updated",value:function(t){if((0,b.A)(J,"updated",this,3)([t]),this._config&&this.hass){var i=t.get("hass"),e=t.get("_config");i&&e&&i.themes===this.hass.themes&&e.theme===this._config.theme||(0,C.Q)(this,this.hass.themes,this._config.theme)}}},{kind:"method",key:"render",value:function(){var t=this;if(!this._config||!this.hass)return k.s6;var i=this._config.image;if(this._config.image_entity){var e=this.hass.states[this._config.image_entity];switch((0,D.m)(this._config.image_entity)){case"image":i=(0,q.e)(e);break;case"person":e.attributes.entity_picture&&(i=e.attributes.entity_picture)}}return(0,k.qy)(n||(n=(0,d.A)([' <ha-card> <hui-image class="','" @action="','" .actionHandler="','" tabindex="','" .config="','" .hass="','" .image="','" .stateImage="','" .stateFilter="','" .cameraImage="','" .cameraView="','" .entity="','" .aspectRatio="','"></hui-image> <div class="box"> ',' <div class="row"> ',' </div> <div class="row"> '," </div> </div> </ha-card> "])),(0,x.H)({clickable:Boolean(this._config.tap_action||this._config.hold_action||this._config.camera_image||this._config.image_entity)}),this._handleAction,(0,H.T)({hasHold:(0,S.h)(this._config.hold_action),hasDoubleClick:(0,S.h)(this._config.double_tap_action)}),(0,A.J)((0,S.h)(this._config.tap_action)?"0":void 0),this._config,this.hass,i,this._config.state_image,this._config.state_filter,this._config.camera_image,this._config.camera_view,this._config.entity,this._config.aspect_ratio,this._config.title?(0,k.qy)(a||(a=(0,d.A)(['<div class="title">',"</div>"])),this._config.title):"",this._entitiesDialog.map((function(i){return t.renderEntity(i,!0)})),this._entitiesToggle.map((function(i){return t.renderEntity(i,!1)})))}},{kind:"method",key:"renderEntity",value:function(t,i){var e=this.hass.states[t.entity];return t=Object.assign({tap_action:{action:i?"more-info":"toggle"},hold_action:{action:"more-info"}},t),e?(0,k.qy)(o||(o=(0,d.A)([' <div class="wrapper"> <ha-icon-button @action="','" .actionHandler="','" tabindex="','" .disabled="','" .config="','" class="','" title="','"> <ha-state-icon .icon="','" .stateObj="','" .hass="','"></ha-state-icon> </ha-icon-button> '," </div> "])),this._handleAction,(0,H.T)({hasHold:(0,S.h)(t.hold_action),hasDoubleClick:(0,S.h)(t.double_tap_action)}),(0,A.J)((0,S.h)(t.tap_action)?void 0:"-1"),!(0,S.h)(t.tap_action),t,(0,x.H)({"state-on":!B.has(e.state)}),"".concat((0,T.u)(e)," : ").concat(this.hass.formatEntityState(e)),t.icon,e,this.hass,!0!==this._config.show_state&&!0!==t.show_state?(0,k.qy)(r||(r=(0,d.A)(['<div class="state"></div>']))):(0,k.qy)(c||(c=(0,d.A)([' <div class="state"> '," </div> "])),t.attribute?(0,k.qy)(h||(h=(0,d.A)([" ","",""," "])),t.prefix,e.attributes[t.attribute],t.suffix):this.hass.formatEntityState(e))):(0,k.qy)(s||(s=(0,d.A)([' <hui-warning-element .label="','"></hui-warning-element> '])),(0,O.j)(this.hass,t.entity))}},{kind:"method",key:"_handleAction",value:function(t){var i=t.currentTarget.config;(0,z.$)(this,this.hass,i,t.detail.action)}},{kind:"get",static:!0,key:"styles",value:function(){return(0,k.AH)(l||(l=(0,d.A)(["ha-card{position:relative;min-height:48px;overflow:hidden;height:100%;box-sizing:border-box}hui-image.clickable{cursor:pointer}.box{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;position:absolute;left:0;right:0;bottom:0;background-color:var(--ha-picture-card-background-color,rgba(0,0,0,.3));padding:4px 8px;font-size:16px;line-height:40px;color:var(--ha-picture-card-text-color,#fff);display:flex;justify-content:space-between;flex-direction:row}.box .title{font-weight:500;margin-left:8px;margin-inline-start:8px;margin-inline-end:initial}ha-icon-button{--mdc-icon-button-size:40px;--disabled-text-color:currentColor;color:var(--ha-picture-icon-button-color,#a9a9a9)}ha-icon-button.state-on{color:var(--ha-picture-icon-button-on-color,#fff)}hui-warning-element{padding:0 8px}.state{display:block;font-size:12px;text-align:center;line-height:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.row{display:flex;flex-direction:row}.wrapper{display:flex;flex-direction:column;width:40px}"])))}}]}}),k.WF)}}]);
//# sourceMappingURL=21628.Vy0qYjs04Js.js.map