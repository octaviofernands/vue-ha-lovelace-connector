"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[57220],{57220:function(e,t,i){var a=i(22858).A,o=i(33994).A;i.a(e,function(){var e=a(o().mark((function e(a,n){var s,r,c,u,d,l,h,v,p,g,k,_,f,m,y,b,A,x,w,C,B,M,E;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i.r(t),s=i(33994),r=i(14842),c=i(22858),u=i(64599),d=i(35806),l=i(71008),h=i(62193),v=i(2816),p=i(27927),g=i(81027),i(72606),k=i(50289),_=i(29818),f=i(34897),i(13292),m=i(29180),y=i(85288),i(24640),i(90431),b=i(54108),A=i(55321),x=i(99214),!(w=a([y,x])).then){e.next=33;break}return e.next=29,w;case 29:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=34;break;case 33:e.t0=w;case 34:C=e.t0,y=C[0],x=C[1],(0,p.A)([(0,_.EM)("dialog-assign-category")],(function(e,t){var i,a=function(t){function i(){var t;(0,l.A)(this,i);for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return t=(0,h.A)(this,i,[].concat(o)),e(t),t}return(0,v.A)(i,t),(0,d.A)(i)}(t);return{F:a,d:[{kind:"field",decorators:[(0,_.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,_.wk)()],key:"_scope",value:void 0},{kind:"field",decorators:[(0,_.wk)()],key:"_category",value:void 0},{kind:"field",decorators:[(0,_.wk)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,_.wk)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,_.wk)()],key:"_submitting",value:void 0},{kind:"method",key:"showDialog",value:function(e){this._params=e,this._scope=e.scope,this._category=e.entityReg.categories[e.scope],this._error=void 0}},{kind:"method",key:"closeDialog",value:function(){this._error="",this._params=void 0,(0,f.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"render",value:function(){if(!this._params)return k.s6;var e=this._params.entityReg.categories[this._params.scope];return(0,k.qy)(B||(B=(0,u.A)([' <ha-dialog open @closed="','" .heading="','"> <div> ',' <div class="form"> <ha-category-picker .hass="','" .scope="','" .value="','" @value-changed="','"></ha-category-picker> </div> </div> <mwc-button slot="secondaryAction" @click="','"> ',' </mwc-button> <mwc-button slot="primaryAction" @click="','" .disabled="','"> '," </mwc-button> </ha-dialog> "])),this.closeDialog,(0,m.l)(this.hass,e?this.hass.localize("ui.panel.config.category.assign.edit"):this.hass.localize("ui.panel.config.category.assign.assign")),this._error?(0,k.qy)(M||(M=(0,u.A)(['<ha-alert alert-type="error">',"</ha-alert>"])),this._error):"",this.hass,this._scope,this._category,this._categoryChanged,this.closeDialog,this.hass.localize("ui.common.cancel"),this._updateEntry,this._submitting,this.hass.localize("ui.common.save"))}},{kind:"method",key:"_categoryChanged",value:function(e){e.detail.value||(this._category=void 0),this._category=e.detail.value}},{kind:"method",key:"_updateEntry",value:(i=(0,c.A)((0,s.A)().mark((function e(){return(0,s.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._submitting=!0,this._error=void 0,e.prev=2,e.next=5,(0,b.G_)(this.hass,this._params.entityReg.entity_id,{categories:(0,r.A)({},this._scope,this._category||null)});case 5:this.closeDialog(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this._error=e.t0.message||this.hass.localize("ui.panel.config.category.assign.unknown_error");case 11:return e.prev=11,this._submitting=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[2,8,11,14]])}))),function(){return i.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[A.nA,(0,k.AH)(E||(E=(0,u.A)(["ha-icon-picker,ha-textfield{display:block;margin-bottom:16px}"])))]}}]}}),k.WF),n(),e.next=44;break;case 41:e.prev=41,e.t2=e.catch(0),n(e.t2);case 44:case"end":return e.stop()}}),e,null,[[0,41]])})));return function(t,i){return e.apply(this,arguments)}}())},99214:function(e,t,i){var a=i(22858).A,o=i(33994).A;i.a(e,function(){var e=a(o().mark((function e(t,a){var n,s,r,c,u,d,l,h,v,p,g,k,_,f,m,y,b,A,x,w,C,B,M,E,Z,q,z,I,D,N,S,V,F,H,O,R,G,T,W;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=i(41981),s=i(33994),r=i(22858),c=i(35806),u=i(71008),d=i(62193),l=i(2816),h=i(27927),v=i(64599),p=i(81027),g=i(13025),k=i(82386),_=i(97741),f=i(89655),m=i(50693),y=i(26098),b=i(39790),A=i(253),x=i(2075),w=i(16891),C=i(50289),B=i(29818),M=i(85323),E=i(94100),Z=i(34897),q=i(55792),z=i(43536),i(4169),i(13830),i(88400),I=i(8640),D=i(20712),N=i(34336),!(S=t([z])).then){e.next=53;break}return e.next=49,S;case 49:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=54;break;case 53:e.t0=S;case 54:z=e.t0[0],R="___ADD_NEW___",G="___NO_CATEGORIES___",T="___ADD_NEW_SUGGESTION___",W=function(e){return(0,C.qy)(V||(V=(0,v.A)(['<ha-list-item graphic="icon" class="','"> '," "," </ha-list-item>"])),(0,M.H)({"add-new":e.category_id===R}),e.icon?(0,C.qy)(F||(F=(0,v.A)(['<ha-icon slot="graphic" .icon="','"></ha-icon>'])),e.icon):(0,C.qy)(H||(H=(0,v.A)(['<ha-svg-icon .path="','" slot="graphic"></ha-svg-icon>'])),"M5.5,7A1.5,1.5 0 0,1 4,5.5A1.5,1.5 0 0,1 5.5,4A1.5,1.5 0 0,1 7,5.5A1.5,1.5 0 0,1 5.5,7M21.41,11.58L12.41,2.58C12.05,2.22 11.55,2 11,2H4C2.89,2 2,2.89 2,4V11C2,11.55 2.22,12.05 2.59,12.41L11.58,21.41C11.95,21.77 12.45,22 13,22C13.55,22 14.05,21.77 14.41,21.41L21.41,14.41C21.78,14.05 22,13.55 22,13C22,12.44 21.77,11.94 21.41,11.58Z"),e.name)},(0,h.A)([(0,B.EM)("ha-category-picker")],(function(e,t){var i,a,o=function(t){function i(){var t;(0,u.A)(this,i);for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return t=(0,d.A)(this,i,[].concat(o)),e(t),t}return(0,l.A)(i,t),(0,c.A)(i)}(t);return{F:o,d:[{kind:"field",decorators:[(0,B.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,B.MZ)()],key:"scope",value:void 0},{kind:"field",decorators:[(0,B.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,B.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,B.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,B.MZ)()],key:"placeholder",value:void 0},{kind:"field",decorators:[(0,B.MZ)({type:Boolean,attribute:"no-add"})],key:"noAdd",value:function(){return!1}},{kind:"field",decorators:[(0,B.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,B.MZ)({type:Boolean})],key:"required",value:function(){return!1}},{kind:"field",decorators:[(0,B.wk)()],key:"_opened",value:void 0},{kind:"field",decorators:[(0,B.wk)()],key:"_categories",value:void 0},{kind:"field",decorators:[(0,B.P)("ha-combo-box",!0)],key:"comboBox",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:function(){return["scope"]}},{kind:"method",key:"hassSubscribe",value:function(){var e=this;return[(0,I.Ar)(this.hass.connection,this.scope,(function(t){e._categories=t}))]}},{kind:"field",key:"_suggestion",value:void 0},{kind:"field",key:"_init",value:function(){return!1}},{kind:"method",key:"open",value:(a=(0,r.A)((0,s.A)().mark((function e(){var t;return(0,s.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.comboBox)||void 0===t?void 0:t.open();case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{kind:"method",key:"focus",value:(i=(0,r.A)((0,s.A)().mark((function e(){var t;return(0,s.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.comboBox)||void 0===t?void 0:t.focus();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{kind:"field",key:"_getCategories",value:function(){var e=this;return(0,E.A)((function(t,i){var a=t?(0,n.A)(t):[];return null!=a&&a.length||a.push({category_id:G,name:e.hass.localize("ui.components.category-picker.no_categories"),icon:null}),i?a:[].concat((0,n.A)(a),[{category_id:R,name:e.hass.localize("ui.components.category-picker.add_new"),icon:"mdi:plus"}])}))}},{kind:"method",key:"updated",value:function(e){if(!this._init&&this.hass&&this._categories||this._init&&e.has("_opened")&&this._opened){this._init=!0;var t=this._getCategories(this._categories,this.noAdd).map((function(e){return Object.assign(Object.assign({},e),{},{strings:[e.name]})}));this.comboBox.items=t,this.comboBox.filteredItems=t}}},{kind:"method",key:"render",value:function(){return this._categories?(0,C.qy)(O||(O=(0,v.A)([' <ha-combo-box .hass="','" .helper="','" item-value-path="category_id" item-id-path="category_id" item-label-path="name" .value="','" .disabled="','" .required="','" .label="','" .placeholder="','" .renderer="','" @filter-changed="','" @opened-changed="','" @value-changed="','"> </ha-combo-box> '])),this.hass,this.helper,this._value,this.disabled,this.required,void 0===this.label&&this.hass?this.hass.localize("ui.components.category-picker.category"):this.label,this.placeholder,W,this._filterChanged,this._openedChanged,this._categoryChanged):C.s6}},{kind:"method",key:"_filterChanged",value:function(e){var t,i=e.target,a=e.detail.value;if(a){var o=(0,q.H)(a,(null===(t=i.items)||void 0===t?void 0:t.filter((function(e){return![G,R].includes(e.category_id)})))||[]);0===(null==o?void 0:o.length)?this.noAdd?this.comboBox.filteredItems=[{category_id:G,name:this.hass.localize("ui.components.category-picker.no_match"),icon:null}]:(this._suggestion=a,this.comboBox.filteredItems=[{category_id:T,name:this.hass.localize("ui.components.category-picker.add_new_sugestion",{name:this._suggestion}),icon:"mdi:plus"}]):this.comboBox.filteredItems=o}else this.comboBox.filteredItems=this.comboBox.items}},{kind:"get",key:"_value",value:function(){return this.value||""}},{kind:"method",key:"_openedChanged",value:function(e){this._opened=e.detail.value}},{kind:"method",key:"_categoryChanged",value:function(e){var t=this;e.stopPropagation();var i,a=e.detail.value;if(a===G)return a="",void this.comboBox.setInputValue("");[T,R].includes(a)?(e.target.value=this._value,this.hass.loadFragmentTranslation("config"),(0,N.S)(this,{scope:this.scope,suggestedName:a===T?this._suggestion:"",createEntry:(i=(0,r.A)((0,s.A)().mark((function e(i){var a;return(0,s.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.s_)(t.hass,t.scope,i);case 2:return a=e.sent,t._categories=[].concat((0,n.A)(t._categories),[a]),t.comboBox.filteredItems=t._getCategories(t._categories,t.noAdd),e.next=7,t.updateComplete;case 7:return e.next=9,t.comboBox.updateComplete;case 9:return t._setValue(a.category_id),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})}),this._suggestion=void 0,this.comboBox.setInputValue("")):a!==this._value&&this._setValue(a)}},{kind:"method",key:"_setValue",value:function(e){var t=this;this.value=e,setTimeout((function(){(0,Z.r)(t,"value-changed",{value:e}),(0,Z.r)(t,"change")}),0)}}]}}),(0,D.E)(C.WF)),a(),e.next=67;break;case 64:e.prev=64,e.t2=e.catch(0),a(e.t2);case 67:case"end":return e.stop()}}),e,null,[[0,64]])})));return function(t,i){return e.apply(this,arguments)}}())}}]);
//# sourceMappingURL=57220.rAHJsfzxRj4.js.map