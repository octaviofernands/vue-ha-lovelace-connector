"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[53325,921],{79682:function(e,t,a){a.d(t,{f:function(){return s}});a(39790),a(253),a(4525);var r=a(21863),n=a(33922),s=function(e,t){return(l(t)||i(e,t))&&!c(e,t)&&o(e,t)},i=function(e,t){return!t.component||(0,r.e)(t.component).some((function(t){return(0,n.x)(e,t)}))},o=function(e,t){return!t.not_component||!(0,r.e)(t.not_component).some((function(t){return(0,n.x)(e,t)}))},l=function(e){return e.core},c=function(e,t){return function(e){return e.advancedOnly}(t)&&!function(e){var t;return null===(t=e.userData)||void 0===t?void 0:t.showAdvanced}(e)}},37456:function(e,t,a){a.d(t,{a:function(){return n}});var r=(0,a(58034).n)((function(e){history.replaceState({scrollPosition:e},"")}),300),n=function(e){return function(t){return{kind:"method",placement:"prototype",key:t.key,descriptor:{set:function(e){r(e),this["__".concat(String(t.key))]=e},get:function(){var e;return this["__".concat(String(t.key))]||(null===(e=history.state)||void 0===e?void 0:e.scrollPosition)},enumerable:!0,configurable:!0},finisher:function(a){var r=a.prototype.connectedCallback;a.prototype.connectedCallback=function(){var a=this;r.call(this);var n=this[t.key];n&&this.updateComplete.then((function(){var t=a.renderRoot.querySelector(e);t&&setTimeout((function(){t.scrollTop=n}),0)}))}}}}}},921:function(e,t,a){var r,n,s,i,o,l,c,h,d,u,f,p=a(64599),v=a(35806),k=a(71008),_=a(62193),m=a(2816),b=a(27927),g=a(35890),w=(a(81027),a(13025),a(44124),a(82386),a(97741),a(50693),a(39790),a(36604),a(253),a(2075),a(94438),a(16891),a(50289)),x=a(29818),y=a(85323),A=a(94100),C=a(37456),M=(a(45346),a(11804),a(88400),a(17081),a(55321)),z=a(79682);(0,b.A)([(0,x.EM)("hass-tabs-subpage")],(function(e,t){var a=function(t){function a(){var t;(0,k.A)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=(0,_.A)(this,a,[].concat(n)),e(t),t}return(0,m.A)(a,t),(0,v.A)(a)}(t);return{F:a,d:[{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,x.MZ)({type:Boolean})],key:"supervisor",value:function(){return!1}},{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"localizeFunc",value:void 0},{kind:"field",decorators:[(0,x.MZ)({type:String,attribute:"back-path"})],key:"backPath",value:void 0},{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"backCallback",value:void 0},{kind:"field",decorators:[(0,x.MZ)({type:Boolean,attribute:"main-page"})],key:"mainPage",value:function(){return!1}},{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"route",value:void 0},{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"tabs",value:void 0},{kind:"field",decorators:[(0,x.MZ)({type:Boolean,reflect:!0})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,x.MZ)({type:Boolean,reflect:!0,attribute:"is-wide"})],key:"isWide",value:function(){return!1}},{kind:"field",decorators:[(0,x.MZ)({type:Boolean})],key:"pane",value:function(){return!1}},{kind:"field",decorators:[(0,x.wk)()],key:"_activeTab",value:void 0},{kind:"field",decorators:[(0,C.a)(".content")],key:"_savedScrollPos",value:void 0},{kind:"field",key:"_getTabs",value:function(){var e=this;return(0,A.A)((function(t,a,s,i,o,l){var c=t.filter((function(t){return(0,z.f)(e.hass,t)}));if(c.length<2){if(1===c.length){var h=c[0];return[h.translationKey?l(h.translationKey):h.name]}return[""]}return c.map((function(t){return(0,w.qy)(r||(r=(0,p.A)([' <a href="','"> <ha-tab .hass="','" .active="','" .narrow="','" .name="','"> '," </ha-tab> </a> "])),t.path,e.hass,t.path===(null==a?void 0:a.path),e.narrow,t.translationKey?l(t.translationKey):t.name,t.iconPath?(0,w.qy)(n||(n=(0,p.A)(['<ha-svg-icon slot="icon" .path="','"></ha-svg-icon>'])),t.iconPath):"")}))}))}},{kind:"method",key:"willUpdate",value:function(e){var t=this;e.has("route")&&(this._activeTab=this.tabs.find((function(e){return"".concat(t.route.prefix).concat(t.route.path).includes(e.path)}))),(0,g.A)(a,"willUpdate",this,3)([e])}},{kind:"method",key:"render",value:function(){var e,t=this._getTabs(this.tabs,this._activeTab,this.hass.config.components,this.hass.language,this.narrow,this.localizeFunc||this.hass.localize),a=t.length>1;return(0,w.qy)(s||(s=(0,p.A)([' <div class="toolbar"> <slot name="toolbar"> <div class="toolbar-content"> '," "," ",' <div id="toolbar-icon"> <slot name="toolbar-icon"></slot> </div> </div> </slot> ',' </div> <div class="container"> ',' <div class="content ha-scrollbar ','" @scroll="','"> <slot></slot> </div> </div> <div id="fab" class="','"> <slot name="fab"></slot> </div> '])),this.mainPage||!this.backPath&&null!==(e=history.state)&&void 0!==e&&e.root?(0,w.qy)(i||(i=(0,p.A)([' <ha-menu-button .hassio="','" .hass="','" .narrow="','"></ha-menu-button> '])),this.supervisor,this.hass,this.narrow):this.backPath?(0,w.qy)(o||(o=(0,p.A)([' <a href="','"> <ha-icon-button-arrow-prev .hass="','"></ha-icon-button-arrow-prev> </a> '])),this.backPath,this.hass):(0,w.qy)(l||(l=(0,p.A)([' <ha-icon-button-arrow-prev .hass="','" @click="','"></ha-icon-button-arrow-prev> '])),this.hass,this._backTapped),this.narrow||!a?(0,w.qy)(c||(c=(0,p.A)(['<div class="main-title"> <slot name="header">',"</slot> </div>"])),a?"":t[0]):"",a&&!this.narrow?(0,w.qy)(h||(h=(0,p.A)(['<div id="tabbar">',"</div>"])),t):"",a&&this.narrow?(0,w.qy)(d||(d=(0,p.A)(['<div id="tabbar" class="bottom-bar">',"</div>"])),t):"",this.pane?(0,w.qy)(u||(u=(0,p.A)(['<div class="pane"> <div class="shadow-container"></div> <div class="ha-scrollbar"> <slot name="pane"></slot> </div> </div>']))):w.s6,(0,y.H)({tabs:a}),this._saveScrollPos,(0,y.H)({tabs:a}))}},{kind:"method",decorators:[(0,x.Ls)({passive:!0})],key:"_saveScrollPos",value:function(e){this._savedScrollPos=e.target.scrollTop}},{kind:"method",key:"_backTapped",value:function(){this.backCallback?this.backCallback():history.back()}},{kind:"get",static:!0,key:"styles",value:function(){return[M.dp,(0,w.AH)(f||(f=(0,p.A)([":host{display:block;height:100%;background-color:var(--primary-background-color)}:host([narrow]){width:100%;position:fixed}.container{display:flex;height:calc(100% - var(--header-height))}:host([narrow]) .container{height:100%}ha-menu-button{margin-right:24px;margin-inline-end:24px;margin-inline-start:initial}.toolbar{font-size:20px;height:var(--header-height);background-color:var(--sidebar-background-color);font-weight:400;border-bottom:1px solid var(--divider-color);box-sizing:border-box}.toolbar-content{padding:8px 12px;display:flex;align-items:center;height:100%;box-sizing:border-box}@media (max-width:599px){.toolbar-content{padding:4px}}.toolbar a{color:var(--sidebar-text-color);text-decoration:none}.bottom-bar a{width:25%}#tabbar{display:flex;font-size:14px;overflow:hidden}#tabbar>a{overflow:hidden;max-width:45%}#tabbar.bottom-bar{position:absolute;bottom:0;left:0;padding:0 16px;box-sizing:border-box;background-color:var(--sidebar-background-color);border-top:1px solid var(--divider-color);justify-content:space-around;z-index:2;font-size:12px;width:100%;padding-bottom:env(safe-area-inset-bottom)}#tabbar:not(.bottom-bar){flex:1;justify-content:center}:host(:not([narrow])) #toolbar-icon{min-width:40px}::slotted([slot=toolbar-icon]),ha-icon-button-arrow-prev,ha-menu-button{display:flex;flex-shrink:0;pointer-events:auto;color:var(--sidebar-icon-color)}.main-title{flex:1;max-height:var(--header-height);line-height:20px;color:var(--sidebar-text-color);margin:var(--main-title-margin,var(--margin-title))}.content{position:relative;width:calc(100% - env(safe-area-inset-left) - env(safe-area-inset-right));margin-left:env(safe-area-inset-left);margin-right:env(safe-area-inset-right);margin-inline-start:env(safe-area-inset-left);margin-inline-end:env(safe-area-inset-right);overflow:auto;-webkit-overflow-scrolling:touch}:host([narrow]) .content.tabs{height:calc(100% - 2 * var(--header-height));height:calc(100% - 2 * var(--header-height) - env(safe-area-inset-bottom))}#fab{position:fixed;right:calc(16px + env(safe-area-inset-right));inset-inline-end:calc(16px + env(safe-area-inset-right));inset-inline-start:initial;bottom:calc(16px + env(safe-area-inset-bottom));z-index:1;display:flex;flex-wrap:wrap;justify-content:flex-end;gap:8px}:host([narrow]) #fab.tabs{bottom:calc(84px + env(safe-area-inset-bottom))}#fab[is-wide]{bottom:24px;right:24px;inset-inline-end:24px;inset-inline-start:initial}.pane{border-right:1px solid var(--divider-color);border-inline-end:1px solid var(--divider-color);border-inline-start:initial;box-sizing:border-box;display:flex;flex:0 0 var(--sidepane-width,250px);width:var(--sidepane-width,250px);flex-direction:column;position:relative}.pane .ha-scrollbar{flex:1}"])))]}}]}}),w.WF)},29518:function(e,t,a){var r,n,s,i,o,l,c,h=a(33994),d=a(22858),u=a(64599),f=a(35806),p=a(71008),v=a(62193),k=a(2816),_=a(27927),m=a(35890),b=(a(81027),a(72606),a(50289)),g=a(29818),w=(a(13082),a(32885),a(90431),a(55321)),x=(a(13292),a(6121)),y=a(94526);(0,_.A)([(0,g.EM)("ha-change-password-card")],(function(e,t){var a,_=function(t){function a(){var t;(0,p.A)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=(0,v.A)(this,a,[].concat(n)),e(t),t}return(0,k.A)(a,t),(0,f.A)(a)}(t);return{F:_,d:[{kind:"field",decorators:[(0,g.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,g.wk)()],key:"_loading",value:function(){return!1}},{kind:"field",decorators:[(0,g.wk)()],key:"_statusMsg",value:void 0},{kind:"field",decorators:[(0,g.wk)()],key:"_errorMsg",value:void 0},{kind:"field",decorators:[(0,g.wk)()],key:"_currentPassword",value:function(){return""}},{kind:"field",decorators:[(0,g.wk)()],key:"_password",value:function(){return""}},{kind:"field",decorators:[(0,g.wk)()],key:"_passwordConfirm",value:function(){return""}},{kind:"field",decorators:[(0,g.MZ)({attribute:!1})],key:"refreshTokens",value:void 0},{kind:"method",key:"render",value:function(){return(0,b.qy)(r||(r=(0,u.A)([' <ha-card .header="','"> <div class="card-content"> '," ",' <ha-textfield id="currentPassword" name="currentPassword" .label="','" type="password" autocomplete="current-password" .value="','" @input="','" required></ha-textfield> ',' </div> <div class="card-actions"> '," </div> </ha-card> "])),this.hass.localize("ui.panel.profile.change_password.header"),this._errorMsg?(0,b.qy)(n||(n=(0,u.A)(['<ha-alert alert-type="error">',"</ha-alert>"])),this._errorMsg):"",this._statusMsg?(0,b.qy)(s||(s=(0,u.A)(['<ha-alert alert-type="success">',"</ha-alert>"])),this._statusMsg):"",this.hass.localize("ui.panel.profile.change_password.current_password"),this._currentPassword,this._currentPasswordChanged,this._currentPassword?(0,b.qy)(i||(i=(0,u.A)(['<ha-textfield .label="','" name="password" type="password" autocomplete="new-password" .value="','" @change="','" required auto-validate></ha-textfield> <ha-textfield .label="','" name="passwordConfirm" type="password" autocomplete="new-password" .value="','" @input="','" required auto-validate></ha-textfield>'])),this.hass.localize("ui.panel.profile.change_password.new_password"),this._password,this._newPasswordChanged,this.hass.localize("ui.panel.profile.change_password.confirm_new_password"),this._passwordConfirm,this._newPasswordConfirmChanged):"",this._loading?(0,b.qy)(o||(o=(0,u.A)(["<div> <ha-circular-progress indeterminate></ha-circular-progress> </div>"]))):(0,b.qy)(l||(l=(0,u.A)(['<mwc-button @click="','" .disabled="','">',"</mwc-button>"])),this._changePassword,!this._passwordConfirm,this.hass.localize("ui.panel.profile.change_password.submit")))}},{kind:"method",key:"_currentPasswordChanged",value:function(e){this._currentPassword=e.target.value}},{kind:"method",key:"_newPasswordChanged",value:function(e){this._password=e.target.value}},{kind:"method",key:"_newPasswordConfirmChanged",value:function(e){this._passwordConfirm=e.target.value}},{kind:"method",key:"firstUpdated",value:function(e){var t=this;(0,m.A)(_,"firstUpdated",this,3)([e]),this.addEventListener("keypress",(function(e){t._statusMsg=void 0,"Enter"===e.key&&t._changePassword()}))}},{kind:"method",key:"_changePassword",value:(a=(0,d.A)((0,h.A)().mark((function e(){return(0,h.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._statusMsg=void 0,this._currentPassword&&this._password&&this._passwordConfirm){e.next=3;break}return e.abrupt("return");case 3:if(this._password===this._passwordConfirm){e.next=6;break}return this._errorMsg=this.hass.localize("ui.panel.profile.change_password.error_new_mismatch"),e.abrupt("return");case 6:if(this._currentPassword!==this._password){e.next=9;break}return this._errorMsg=this.hass.localize("ui.panel.profile.change_password.error_new_is_old"),e.abrupt("return");case 9:return this._loading=!0,this._errorMsg=void 0,e.prev=11,e.next=14,(0,y.ec)(this.hass,this._currentPassword,this._password);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(11),this._errorMsg=e.t0.message,e.abrupt("return");case 20:return e.prev=20,this._loading=!1,e.finish(20);case 23:if(this._statusMsg=this.hass.localize("ui.panel.profile.change_password.success"),e.t1=this.refreshTokens,!e.t1){e.next=29;break}return e.next=28,(0,x.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.profile.change_password.logout_all_sessions"),text:this.hass.localize("ui.panel.profile.change_password.logout_all_sessions_text"),dismissText:this.hass.localize("ui.common.no"),confirmText:this.hass.localize("ui.common.yes"),destructive:!0});case 28:e.t1=e.sent;case 29:if(!e.t1){e.next=39;break}return e.prev=30,e.next=33,(0,y.Y_)(this.hass);case 33:e.next=39;break;case 35:return e.prev=35,e.t2=e.catch(30),e.next=39,(0,x.showAlertDialog)(this,{title:this.hass.localize("ui.panel.profile.change_password.delete_failed"),text:e.t2.message});case 39:this._currentPassword="",this._password="",this._passwordConfirm="";case 42:case"end":return e.stop()}}),e,this,[[11,16,20,23],[30,35]])}))),function(){return a.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[w.RF,(0,b.AH)(c||(c=(0,u.A)(["ha-textfield{margin-top:8px;display:block}#currentPassword{margin-top:0}"])))]}}]}}),b.WF)},48173:function(e,t,a){var r=a(22858).A,n=a(33994).A;a.a(e,function(){var e=r(n().mark((function e(t,r){var s,i,o,l,c,h,d,u,f,p,v,k,_,m,b,g,w,x,y,A,C,M,z,T,P,H,q,L,Z;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=a(33994),i=a(22858),o=a(64599),l=a(35806),c=a(71008),h=a(62193),d=a(2816),u=a(27927),f=a(81027),p=a(13025),v=a(97741),k=a(53165),_=a(39790),m=a(253),b=a(2075),g=a(16891),a(72606),w=a(50289),x=a(29818),y=a(94100),A=a(30125),C=a(34897),a(13082),a(24640),a(4169),M=a(6121),z=a(55321),T=a(25614),!(P=t([A])).then){e.next=45;break}return e.next=41,P;case 41:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=46;break;case 45:e.t0=P;case 46:A=e.t0[0],(0,u.A)([(0,x.EM)("ha-long-lived-access-tokens-card")],(function(e,t){var a,r,n=function(t){function a(){var t;(0,c.A)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=(0,h.A)(this,a,[].concat(n)),e(t),t}return(0,d.A)(a,t),(0,l.A)(a)}(t);return{F:n,d:[{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,x.MZ)({attribute:!1})],key:"refreshTokens",value:void 0},{kind:"field",key:"_accessTokens",value:function(){return(0,y.A)((function(e){return null==e?void 0:e.filter((function(e){return"long_lived_access_token"===e.type})).reverse()}))}},{kind:"method",key:"render",value:function(){var e=this,t=this._accessTokens(this.refreshTokens);return(0,w.qy)(H||(H=(0,o.A)([' <ha-card .header="','"> <div class="card-content"> ',' <a href="https://developers.home-assistant.io/docs/auth_api/#making-authenticated-requests" target="_blank" rel="noreferrer"> '," </a> ",' </div> <div class="card-actions"> <mwc-button @click="','"> '," </mwc-button> </div> </ha-card> "])),this.hass.localize("ui.panel.profile.long_lived_access_tokens.header"),this.hass.localize("ui.panel.profile.long_lived_access_tokens.description"),this.hass.localize("ui.panel.profile.long_lived_access_tokens.learn_auth_requests"),null!=t&&t.length?t.map((function(t){return(0,w.qy)(L||(L=(0,o.A)(['<ha-settings-row two-line> <span slot="heading">','</span> <div slot="description"> ',' </div> <ha-icon-button .token="','" .disabled="','" .label="','" .path="','" @click="','"></ha-icon-button> </ha-settings-row>'])),t.client_name,e.hass.localize("ui.panel.profile.long_lived_access_tokens.created",{date:(0,A.K)(new Date(t.created_at),e.hass.locale)}),t,t.is_current,e.hass.localize("ui.common.delete"),"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",e._deleteToken)})):(0,w.qy)(q||(q=(0,o.A)(["<p> "," </p>"])),this.hass.localize("ui.panel.profile.long_lived_access_tokens.empty_state")),this._createToken,this.hass.localize("ui.panel.profile.long_lived_access_tokens.create"))}},{kind:"method",key:"_createToken",value:(r=(0,i.A)((0,s.A)().mark((function e(){var t,a;return(0,s.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.showPromptDialog)(this,{text:this.hass.localize("ui.panel.profile.long_lived_access_tokens.prompt_name"),inputLabel:this.hass.localize("ui.panel.profile.long_lived_access_tokens.name")});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,this.hass.callWS({type:"auth/long_lived_access_token",lifespan:3650,client_name:t});case 8:a=e.sent,(0,T.t)(this,{token:a,name:t}),(0,C.r)(this,"hass-refresh-tokens"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),(0,M.showAlertDialog)(this,{title:this.hass.localize("ui.panel.profile.long_lived_access_tokens.create_failed"),text:e.t0.message});case 16:case"end":return e.stop()}}),e,this,[[5,13]])}))),function(){return r.apply(this,arguments)})},{kind:"method",key:"_deleteToken",value:(a=(0,i.A)((0,s.A)().mark((function e(t){var a;return(0,s.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.currentTarget.token,e.next=3,(0,M.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.profile.long_lived_access_tokens.confirm_delete_title"),text:this.hass.localize("ui.panel.profile.long_lived_access_tokens.confirm_delete_text",{name:a.client_name}),confirmText:this.hass.localize("ui.common.delete"),destructive:!0});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,this.hass.callWS({type:"auth/delete_refresh_token",refresh_token_id:a.id});case 8:(0,C.r)(this,"hass-refresh-tokens"),e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),e.next=15,(0,M.showAlertDialog)(this,{title:this.hass.localize("ui.panel.profile.long_lived_access_tokens.delete_failed"),text:e.t0.message});case 15:case"end":return e.stop()}}),e,this,[[5,11]])}))),function(e){return a.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[z.RF,(0,w.AH)(Z||(Z=(0,o.A)(["ha-settings-row{padding:0}a{color:var(--primary-color)}mwc-button{--mdc-theme-primary:var(--primary-color)}ha-icon-button{color:var(--primary-text-color)}"])))]}}]}}),w.WF),r(),e.next=55;break;case 52:e.prev=52,e.t2=e.catch(0),r(e.t2);case 55:case"end":return e.stop()}}),e,null,[[0,52]])})));return function(t,a){return e.apply(this,arguments)}}())},99937:function(e,t,a){var r,n,s,i,o,l=a(33994),c=a(22858),h=a(64599),d=a(35806),u=a(71008),f=a(62193),p=a(2816),v=a(27927),k=(a(81027),a(97741),a(50693),a(16891),a(72606),a(50289)),_=a(29818),m=a(34897),b=(a(13082),a(6121)),g=(a(95737),a(39790),a(66457),a(99019),a(96858),function(){return a.e(10770).then(a.bind(a,10770))});(0,v.A)([(0,_.EM)("ha-mfa-modules-card")],(function(e,t){var a,v=function(t){function a(){var t;(0,u.A)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=(0,f.A)(this,a,[].concat(n)),e(t),t}return(0,p.A)(a,t),(0,d.A)(a)}(t);return{F:v,d:[{kind:"field",decorators:[(0,_.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,_.MZ)({attribute:!1})],key:"mfaModules",value:void 0},{kind:"method",key:"render",value:function(){var e=this;return(0,k.qy)(r||(r=(0,h.A)([' <ha-card .header="','"> '," </ha-card> "])),this.hass.localize("ui.panel.profile.mfa.header"),this.mfaModules.map((function(t){return(0,k.qy)(n||(n=(0,h.A)(['<ha-settings-row two-line> <span slot="heading">','</span> <span slot="description">',"</span> "," </ha-settings-row>"])),t.name,t.id,t.enabled?(0,k.qy)(s||(s=(0,h.A)(['<mwc-button .module="','" @click="','">',"</mwc-button>"])),t,e._disable,e.hass.localize("ui.panel.profile.mfa.disable")):(0,k.qy)(i||(i=(0,h.A)(['<mwc-button .module="','" @click="','">',"</mwc-button>"])),t,e._enable,e.hass.localize("ui.panel.profile.mfa.enable")))})))}},{kind:"get",static:!0,key:"styles",value:function(){return(0,k.AH)(o||(o=(0,h.A)(["mwc-button{margin-right:-.57em;margin-inline-end:-.57em;margin-inline-start:initial}ha-list-item{--mdc-list-item-meta-size:auto}"])))}},{kind:"method",key:"_enable",value:function(e){var t,a,r=this;t=this,a={mfaModuleId:e.currentTarget.module.id,dialogClosedCallback:function(){return r._refreshCurrentUser()}},(0,m.r)(t,"show-dialog",{dialogTag:"ha-mfa-module-setup-flow",dialogImport:g,dialogParams:a})}},{kind:"method",key:"_disable",value:(a=(0,c.A)((0,l.A)().mark((function e(t){var a,r,n=this;return(0,l.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.currentTarget.module,e.next=3,(0,b.showConfirmationDialog)(this,{text:this.hass.localize("ui.panel.profile.mfa.confirm_disable",{name:a.name})});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:r=a.id,this.hass.callWS({type:"auth/depose_mfa",mfa_module_id:r}).then((function(){n._refreshCurrentUser()}));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{kind:"method",key:"_refreshCurrentUser",value:function(){(0,m.r)(this,"hass-refresh-current-user")}}]}}),k.WF)},53325:function(e,t,a){var r=a(22858).A,n=a(33994).A;a.a(e,function(){var e=r(n().mark((function e(r,s){var i,o,l,c,h,d,u,f,p,v,k,_,m,b,g,w,x,y,A,C,M,z,T,P;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a.r(t),i=a(33994),o=a(22858),l=a(64599),c=a(35806),h=a(71008),d=a(62193),u=a(2816),f=a(27927),p=a(35890),v=a(81027),k=a(39790),_=a(253),m=a(4525),b=a(50289),g=a(29818),a(921),w=a(14887),x=a(55321),a(29518),y=a(48173),a(99937),A=a(42e3),!(C=r([y,A])).then){e.next=36;break}return e.next=32,C;case 32:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=37;break;case 36:e.t0=C;case 37:M=e.t0,y=M[0],A=M[1],(0,f.A)([(0,g.EM)("ha-profile-section-security")],(function(e,t){var a,r=function(t){function a(){var t;(0,h.A)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=(0,d.A)(this,a,[].concat(n)),e(t),t}return(0,u.A)(a,t),(0,c.A)(a)}(t);return{F:r,d:[{kind:"field",decorators:[(0,g.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,g.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,g.wk)()],key:"_refreshTokens",value:void 0},{kind:"field",decorators:[(0,g.MZ)({attribute:!1})],key:"route",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,p.A)(r,"connectedCallback",this,3)([]),this._refreshRefreshTokens()}},{kind:"method",key:"firstUpdated",value:function(){this._refreshTokens||this._refreshRefreshTokens()}},{kind:"method",key:"render",value:function(){return(0,b.qy)(z||(z=(0,l.A)([' <hass-tabs-subpage main-page .hass="','" .narrow="','" .tabs="','" .route="','"> <div slot="title">','</div> <div class="content"> ',' <ha-mfa-modules-card .hass="','" .mfaModules="','"></ha-mfa-modules-card> <ha-refresh-tokens-card .hass="','" .refreshTokens="','" @hass-refresh-tokens="','"></ha-refresh-tokens-card> <ha-long-lived-access-tokens-card .hass="','" .refreshTokens="','" @hass-refresh-tokens="','"></ha-long-lived-access-tokens-card> </div> </hass-tabs-subpage> '])),this.hass,this.narrow,w.profileSections,this.route,this.hass.localize("panel.profile"),this.hass.user.credentials.some((function(e){return"homeassistant"===e.auth_provider_type}))?(0,b.qy)(T||(T=(0,l.A)([' <ha-change-password-card .refreshTokens="','" @hass-refresh-tokens="','" .hass="','"></ha-change-password-card> '])),this._refreshTokens,this._refreshRefreshTokens,this.hass):"",this.hass,this.hass.user.mfa_modules,this.hass,this._refreshTokens,this._refreshRefreshTokens,this.hass,this._refreshTokens,this._refreshRefreshTokens)}},{kind:"method",key:"_refreshRefreshTokens",value:(a=(0,o.A)((0,i.A)().mark((function e(){return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hass){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.hass.callWS({type:"auth/refresh_tokens"});case 4:this._refreshTokens=e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[x.RF,(0,b.AH)(P||(P=(0,l.A)([":host{-ms-user-select:initial;-webkit-user-select:initial;-moz-user-select:initial}.content{display:block;max-width:600px;margin:0 auto;padding-bottom:env(safe-area-inset-bottom)}.content>*{display:block;margin:24px 0}.promo-advanced{text-align:center;color:var(--secondary-text-color)}"])))]}}]}}),b.WF),s(),e.next=47;break;case 44:e.prev=44,e.t2=e.catch(0),s(e.t2);case 47:case"end":return e.stop()}}),e,null,[[0,44]])})));return function(t,a){return e.apply(this,arguments)}}())},42e3:function(e,t,a){var r=a(22858).A,n=a(33994).A;a.a(e,function(){var e=r(n().mark((function e(t,r){var s,i,o,l,c,h,d,u,f,p,v,k,_,m,b,g,w,x,y,A,C,M,z,T,P,H,q,L,Z,S,D,F,W;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=a(91001),i=a(33994),o=a(22858),l=a(64599),c=a(35806),h=a(71008),d=a(62193),u=a(2816),f=a(27927),p=a(81027),v=a(13025),k=a(97741),_=a(33231),m=a(39790),b=a(253),g=a(2075),w=a(16891),a(7986),x=a(50289),y=a(29818),A=a(94100),C=a(30125),M=a(34897),a(26790),a(13082),a(4169),a(27120),a(24640),z=a(94526),T=a(6121),P=a(55321),!(H=t([C])).then){e.next=48;break}return e.next=44,H;case 44:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=49;break;case 48:e.t0=H;case 49:C=e.t0[0],D="https://home-assistant.io/iOS",F="https://home-assistant.io/android",W=function(e,t){var a=e.last_used_at?new Date(e.last_used_at):0,r=t.last_used_at?new Date(t.last_used_at):0;return a<r?1:a>r?-1:0},(0,f.A)([(0,y.EM)("ha-refresh-tokens-card")],(function(e,t){var a,r,n,f,p=function(t){function a(){var t;(0,h.A)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=(0,d.A)(this,a,[].concat(n)),e(t),t}return(0,u.A)(a,t),(0,c.A)(a)}(t);return{F:p,d:[{kind:"field",decorators:[(0,y.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,y.MZ)({attribute:!1})],key:"refreshTokens",value:void 0},{kind:"field",key:"_refreshTokens",value:function(){return(0,A.A)((function(e){return e.filter((function(e){return"normal"===e.type})).sort(W)}))}},{kind:"field",key:"_formatTokenName",value:function(){var e=this;return function(t){return t.client_id===D?e.hass.localize("ui.panel.profile.refresh_tokens.ios_app"):t.client_id===F?e.hass.localize("ui.panel.profile.refresh_tokens.android_app"):t.client_name||t.client_id}}},{kind:"method",key:"render",value:function(){var e=this,t=this.refreshTokens?this._refreshTokens(this.refreshTokens):[];return(0,x.qy)(q||(q=(0,l.A)([' <ha-card .header="','"> <div class="card-content"> '," ",' </div> <div class="card-actions"> <mwc-button class="warning" @click="','"> '," </mwc-button> </div> </ha-card> "])),this.hass.localize("ui.panel.profile.refresh_tokens.header"),this.hass.localize("ui.panel.profile.refresh_tokens.description"),t.length?t.map((function(t){return(0,x.qy)(L||(L=(0,l.A)([' <ha-settings-row three-line> <ha-svg-icon slot="prefix" .path="','"></ha-svg-icon> <span slot="heading" class="primary"> ',' </span> <div slot="description"> ',' </div> <div slot="description"> ',' </div> <div slot="description"> ',' </div> <div> <ha-button-menu corner="BOTTOM_END" menuCorner="END" @action="','" .token="','"> <ha-icon-button slot="trigger" .label="','" .path="','"></ha-icon-button> <ha-list-item graphic="icon"> <ha-svg-icon slot="graphic" .path="','"></ha-svg-icon> ',' </ha-list-item> <ha-list-item graphic="icon" class="warning" .disabled="','"> <ha-svg-icon class="warning" slot="graphic" .path="','"></ha-svg-icon> '," </ha-list-item> </ha-button-menu> </div> </ha-settings-row> "])),t.client_id===D?"M18.71,19.5C17.88,20.74 17,21.95 15.66,21.97C14.32,22 13.89,21.18 12.37,21.18C10.84,21.18 10.37,21.95 9.1,22C7.79,22.05 6.8,20.68 5.96,19.47C4.25,17 2.94,12.45 4.7,9.39C5.57,7.87 7.13,6.91 8.82,6.88C10.1,6.86 11.32,7.75 12.11,7.75C12.89,7.75 14.37,6.68 15.92,6.84C16.57,6.87 18.39,7.1 19.56,8.82C19.47,8.88 17.39,10.1 17.41,12.63C17.44,15.65 20.06,16.66 20.09,16.67C20.06,16.74 19.67,18.11 18.71,19.5M13,3.5C13.73,2.67 14.94,2.04 15.94,2C16.07,3.17 15.6,4.35 14.9,5.19C14.21,6.04 13.07,6.7 11.95,6.61C11.8,5.46 12.36,4.26 13,3.5Z":t.client_id===F?"M16.61 15.15C16.15 15.15 15.77 14.78 15.77 14.32S16.15 13.5 16.61 13.5H16.61C17.07 13.5 17.45 13.86 17.45 14.32C17.45 14.78 17.07 15.15 16.61 15.15M7.41 15.15C6.95 15.15 6.57 14.78 6.57 14.32C6.57 13.86 6.95 13.5 7.41 13.5H7.41C7.87 13.5 8.24 13.86 8.24 14.32C8.24 14.78 7.87 15.15 7.41 15.15M16.91 10.14L18.58 7.26C18.67 7.09 18.61 6.88 18.45 6.79C18.28 6.69 18.07 6.75 18 6.92L16.29 9.83C14.95 9.22 13.5 8.9 12 8.91C10.47 8.91 9 9.24 7.73 9.82L6.04 6.91C5.95 6.74 5.74 6.68 5.57 6.78C5.4 6.87 5.35 7.08 5.44 7.25L7.1 10.13C4.25 11.69 2.29 14.58 2 18H22C21.72 14.59 19.77 11.7 16.91 10.14H16.91Z":"M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",e._formatTokenName(t),e.hass.localize("ui.panel.profile.refresh_tokens.created_at",{date:(0,C.K)(new Date(t.created_at),e.hass.locale)}),t.is_current?(0,x.qy)(Z||(Z=(0,l.A)([' <span class="current-session"> <span class="dot"></span> '," </span> "])),e.hass.localize("ui.panel.profile.refresh_tokens.current_session")):t.last_used_at?e.hass.localize("ui.panel.profile.refresh_tokens.last_used",{date:(0,C.K)(new Date(t.last_used_at),e.hass.locale),location:t.last_used_ip}):e.hass.localize("ui.panel.profile.refresh_tokens.not_used"),t.expire_at?e.hass.localize("ui.panel.profile.refresh_tokens.expires_in",{date:(0,C.K)(new Date(t.expire_at),e.hass.locale)}):e.hass.localize("ui.panel.profile.refresh_tokens.never_expires"),e._handleAction,t,e.hass.localize("ui.common.menu"),"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",t.expire_at?"M14.47 15.08L11 13V7H12.5V12.25L15.58 14.08C15.17 14.36 14.79 14.7 14.47 15.08M13.08 19.92C12.72 19.97 12.37 20 12 20C7.58 20 4 16.42 4 12S7.58 4 12 4 20 7.58 20 12C20 12.37 19.97 12.72 19.92 13.08C20.61 13.18 21.25 13.4 21.84 13.72C21.94 13.16 22 12.59 22 12C22 6.5 17.5 2 12 2S2 6.5 2 12C2 17.5 6.47 22 12 22C12.59 22 13.16 21.94 13.72 21.84C13.4 21.25 13.18 20.61 13.08 19.92M21.12 15.46L19 17.59L16.88 15.47L15.47 16.88L17.59 19L15.47 21.12L16.88 22.54L19 20.41L21.12 22.54L22.54 21.12L20.41 19L22.54 16.88L21.12 15.46Z":"M23.5 17L18.5 22L15 18.5L16.5 17L18.5 19L22 15.5L23.5 17M13.1 19.9C12.7 20 12.4 20 12 20C7.6 20 4 16.4 4 12S7.6 4 12 4 20 7.6 20 12C20 12.4 20 12.7 19.9 13.1C20.6 13.2 21.2 13.4 21.8 13.7C21.9 13.1 22 12.6 22 12C22 6.5 17.5 2 12 2S2 6.5 2 12C2 17.5 6.5 22 12 22C12.6 22 13.2 21.9 13.7 21.8C13.4 21.3 13.2 20.6 13.1 19.9M15.6 14.1L12.5 12.3V7H11V13L14.5 15.1C14.8 14.7 15.2 14.4 15.6 14.1Z",t.expire_at?e.hass.localize("ui.panel.profile.refresh_tokens.disable_token_expiration"):e.hass.localize("ui.panel.profile.refresh_tokens.enable_token_expiration"),t.is_current,"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",e.hass.localize("ui.common.delete"))})):x.s6,this._deleteAllTokens,this.hass.localize("ui.panel.profile.refresh_tokens.delete_all_tokens"))}},{kind:"method",key:"_handleAction",value:(f=(0,o.A)((0,i.A)().mark((function e(t){var a;return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.currentTarget.token,e.t0=t.detail.index,e.next=0===e.t0?4:1===e.t0?6:8;break;case 4:return this._toggleTokenExpiration(a),e.abrupt("break",8);case 6:return this._deleteToken(a),e.abrupt("break",8);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{kind:"method",key:"_toggleTokenExpiration",value:(n=(0,o.A)((0,i.A)().mark((function e(t){var a,r;return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!t.expire_at){e.next=6;break}return e.next=4,(0,T.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.profile.refresh_tokens.confirm_disable_token_expiration_title"),text:this.hass.localize("ui.panel.profile.refresh_tokens.confirm_disable_token_expiration_text",{name:this._formatTokenName(t)}),confirmText:this.hass.localize("ui.common.disable"),destructive:!0});case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,e.next=9,this.hass.callWS({type:"auth/refresh_token_set_expiry",refresh_token_id:t.id,enable_expiry:a});case 9:(0,M.r)(this,"hass-refresh-tokens"),e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(6),r="object"===(0,s.A)(e.t0)&&null!==e.t0&&"message"in e.t0?e.t0.message:String(e.t0),e.next=17,(0,T.showAlertDialog)(this,{title:this.hass.localize("ui.panel.profile.refresh_tokens.".concat(a?"enable":"disable","_expiration_failed")),text:r});case 17:case"end":return e.stop()}}),e,this,[[6,12]])}))),function(e){return n.apply(this,arguments)})},{kind:"method",key:"_deleteToken",value:(r=(0,o.A)((0,i.A)().mark((function e(t){return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.profile.refresh_tokens.confirm_delete_title"),text:this.hass.localize("ui.panel.profile.refresh_tokens.confirm_delete_text",{name:this._formatTokenName(t)}),confirmText:this.hass.localize("ui.common.delete"),destructive:!0});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.hass.callWS({type:"auth/delete_refresh_token",refresh_token_id:t.id});case 7:(0,M.r)(this,"hass-refresh-tokens"),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),e.next=14,(0,T.showAlertDialog)(this,{title:this.hass.localize("ui.panel.profile.refresh_tokens.delete_failed"),text:e.t0.message});case 14:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(e){return r.apply(this,arguments)})},{kind:"method",key:"_deleteAllTokens",value:(a=(0,o.A)((0,i.A)().mark((function e(){return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.profile.refresh_tokens.confirm_delete_all_title"),text:this.hass.localize("ui.panel.profile.refresh_tokens.confirm_delete_all"),confirmText:this.hass.localize("ui.common.delete_all"),destructive:!0});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,(0,z.Y_)(this.hass,"normal",!1);case 7:(0,M.r)(this,"hass-refresh-tokens"),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),e.next=14,(0,T.showAlertDialog)(this,{title:this.hass.localize("ui.panel.profile.refresh_tokens.delete_failed"),text:e.t0.message});case 14:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(){return a.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[P.RF,(0,x.AH)(S||(S=(0,l.A)(["ha-settings-row{padding:0;--settings-row-prefix-display:contents;--settings-row-content-display:contents}ha-icon-button{color:var(--primary-text-color)}ha-list-item[disabled],ha-list-item[disabled] ha-svg-icon{color:var(--disabled-text-color)!important}ha-settings-row .current-session{display:inline-flex;align-items:center}ha-settings-row .dot{display:inline-block;width:8px;height:8px;background-color:var(--success-color);border-radius:50%;margin-right:6px}ha-settings-row>ha-svg-icon{margin-right:12px;margin-inline-start:initial;margin-inline-end:12px}"])))]}}]}}),x.WF),r(),e.next=67;break;case 64:e.prev=64,e.t2=e.catch(0),r(e.t2);case 67:case"end":return e.stop()}}),e,null,[[0,64]])})));return function(t,a){return e.apply(this,arguments)}}())},25614:function(e,t,a){a.d(t,{t:function(){return n}});a(95737),a(39790),a(66457),a(99019),a(96858);var r=a(34897),n=function(e,t){(0,r.r)(e,"show-dialog",{dialogTag:"ha-long-lived-access-token-dialog",dialogImport:function(){return a.e(32580).then(a.bind(a,32580))},dialogParams:t})}}}]);
//# sourceMappingURL=53325.JraMXOt1Muc.js.map