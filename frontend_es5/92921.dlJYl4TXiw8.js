"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[92921],{92921:function(e,t,n){var r=n(22858).A,i=n(33994).A;n.a(e,function(){var e=r(i().mark((function e(r,a){var s,o,d,h,c,u,l,f,v,k,_,p,y,g,m,w,b,A,x,C,D,z,E,O,M,G,S,V,q,R,W,j,F,H,B;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.r(t),n.d(t,{HuiCalendarCard:function(){return B}}),s=n(64599),o=n(33994),d=n(22858),h=n(35806),c=n(71008),u=n(62193),l=n(2816),f=n(27927),v=n(35890),k=n(34597),_=n(71499),p=n(81027),y=n(95737),g=n(79243),m=n(97741),w=n(26098),b=n(39790),A=n(66457),x=n(99019),C=n(16891),D=n(96858),z=n(50289),E=n(29818),O=n(46999),M=n(38962),G=n(19244),S=n(18409),n(13082),V=n(49886),q=n(91174),R=n(18102),n(46645),!(W=r([k,q])).then){e.next=54;break}return e.next=50,W;case 50:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=55;break;case 54:e.t0=W;case 55:j=e.t0,k=j[0],q=j[1],B=(0,f.A)([(0,E.EM)("hui-calendar-card")],(function(e,t){var r,i,a,f=function(t){function n(){var t;(0,c.A)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=(0,u.A)(this,n,[].concat(i)),e(t),t}return(0,l.A)(n,t),(0,h.A)(n)}(t);return{F:f,d:[{kind:"method",static:!0,key:"getConfigElement",value:(a=(0,d.A)((0,o.A)().mark((function e(){return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(25356).then(n.bind(n,25356));case 2:return e.abrupt("return",document.createElement("hui-calendar-card-editor"));case 3:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{kind:"method",static:!0,key:"getStubConfig",value:function(e,t,n){return{entities:(0,R.B)(e,2,t,n,["calendar"])}}},{kind:"field",decorators:[(0,E.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,E.wk)()],key:"_events",value:function(){return[]}},{kind:"field",decorators:[(0,E.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,E.wk)()],key:"_calendars",value:function(){return[]}},{kind:"field",decorators:[(0,E.wk)()],key:"_eventDisplay",value:function(){return"list-item"}},{kind:"field",decorators:[(0,E.wk)()],key:"_narrow",value:function(){return!1}},{kind:"field",decorators:[(0,E.wk)()],key:"_error",value:function(){}},{kind:"field",key:"_startDate",value:void 0},{kind:"field",key:"_endDate",value:void 0},{kind:"field",key:"_resizeObserver",value:void 0},{kind:"method",key:"setConfig",value:function(e){var t,n;if(null===(t=e.entities)||void 0===t||!t.length)throw new Error("Entities must be specified");if(!Array.isArray(e.entities))throw new Error("Entities need to be an array");this._calendars=e.entities.map((function(e,t){return{entity_id:e,backgroundColor:(0,O.Vy)(t)}})),(null===(n=this._config)||void 0===n?void 0:n.entities)!==e.entities&&this._fetchCalendarEvents(),this._config=Object.assign({initial_view:"dayGridMonth"},e)}},{kind:"method",key:"getCardSize",value:function(){var e;return null!==(e=this._config)&&void 0!==e&&e.header?1:11}},{kind:"method",key:"connectedCallback",value:function(){var e=this;(0,v.A)(f,"connectedCallback",this,3)([]),this.updateComplete.then((function(){return e._attachObserver()}))}},{kind:"method",key:"disconnectedCallback",value:function(){(0,v.A)(f,"disconnectedCallback",this,3)([]),this._resizeObserver&&this._resizeObserver.disconnect()}},{kind:"method",key:"render",value:function(){if(!this._config||!this.hass||!this._calendars.length)return z.s6;return(0,z.qy)(F||(F=(0,s.A)([' <ha-card> <div class="header">','</div> <ha-full-calendar .narrow="','" .events="','" .hass="','" .views="','" .initialView="','" .eventDisplay="','" .error="','" @view-changed="','"></ha-full-calendar> </ha-card> '])),this._config.title,this._narrow,this._events,this.hass,["dayGridMonth","dayGridDay","listWeek"],this._config.initial_view,this._eventDisplay,this._error,this._handleViewChanged)}},{kind:"method",key:"updated",value:function(e){if((0,v.A)(f,"updated",this,3)([e]),this._config&&this.hass){var t=e.get("hass"),n=e.get("_config");(!t||!n||e.has("hass")&&t.themes!==this.hass.themes||e.has("_config")&&n.theme!==this._config.theme)&&(0,M.Q)(this,this.hass.themes,this._config.theme)}}},{kind:"method",key:"_handleViewChanged",value:function(e){this._eventDisplay="dayGridMonth"===e.detail.view?"list-item":"auto",this._startDate=e.detail.start,this._endDate=e.detail.end,this._fetchCalendarEvents()}},{kind:"method",key:"_fetchCalendarEvents",value:(i=(0,d.A)((0,o.A)().mark((function e(){var t,n,r=this;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._startDate&&this._endDate){e.next=2;break}return e.abrupt("return");case 2:return this._error=void 0,e.next=5,(0,V.ms)(this.hass,this._startDate,this._endDate,this._calendars);case 5:t=e.sent,this._events=t.events,t.errors.length>0&&(n=t.errors.map((function(e){return r.hass.states[e]?(0,G.u)(r.hass.states[e]):e})).join(", "),this._error="".concat(this.hass.localize("ui.components.calendar.event_retrieval_error")," ").concat(n));case 8:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"_measureCard",value:function(){var e=this.shadowRoot.querySelector("ha-card");e&&(this._narrow=e.offsetWidth<870)}},{kind:"method",key:"_attachObserver",value:(r=(0,d.A)((0,o.A)().mark((function e(){var t,n=this;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._resizeObserver||(this._resizeObserver=new ResizeObserver((0,S.s)((function(){return n._measureCard()}),250,!1))),t=this.shadowRoot.querySelector("ha-card")){e.next=4;break}return e.abrupt("return");case 4:this._resizeObserver.observe(t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return(0,z.AH)(H||(H=(0,s.A)(["ha-card{position:relative;padding:0 8px 8px;box-sizing:border-box;height:100%}.header{color:var(--ha-card-header-color,--primary-text-color);font-size:var(--ha-card-header-font-size, 24px);line-height:1.2;padding-top:16px;padding-left:8px;padding-inline-start:8px;direction:var(--direction)}ha-full-calendar{--calendar-height:400px}"])))}}]}}),z.WF),a(),e.next=65;break;case 62:e.prev=62,e.t2=e.catch(0),a(e.t2);case 65:case"end":return e.stop()}}),e,null,[[0,62]])})));return function(t,n){return e.apply(this,arguments)}}())}}]);
//# sourceMappingURL=92921.dlJYl4TXiw8.js.map