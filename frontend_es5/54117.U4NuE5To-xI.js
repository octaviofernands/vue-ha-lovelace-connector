"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[54117],{54117:function(e,a,i){i.r(a),i.d(a,{HuiSaveConfig:function(){return z}});var t,o,s,n,l,c,r,h=i(33994),d=i(22858),u=i(64599),g=i(35806),p=i(71008),v=i(62193),f=i(2816),m=i(27927),_=(i(72606),i(50289)),k=i(29818),y=i(34897),A=(i(32885),i(29180),i(10900),i(24284),i(4169),i(60203),i(57641),i(55321)),b=i(84976),C=i(71797),w={views:[{title:"Home"}]},z=(0,m.A)([(0,k.EM)("hui-dialog-save-config")],(function(e,a){var i;return{F:function(a){function i(){var a;return(0,p.A)(this,i),a=(0,v.A)(this,i),e(a),a._saving=!1,a}return(0,f.A)(i,a),(0,g.A)(i)}(a),d:[{kind:"field",decorators:[(0,k.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,k.wk)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,k.wk)()],key:"_emptyConfig",value:function(){return!1}},{kind:"field",decorators:[(0,k.wk)()],key:"_saving",value:void 0},{kind:"method",key:"showDialog",value:function(e){this._params=e,this._emptyConfig=!1}},{kind:"method",key:"closeDialog",value:function(){return this._params=void 0,(0,y.r)(this,"dialog-closed",{dialog:this.localName}),!0}},{kind:"method",key:"render",value:function(){if(!this._params)return _.s6;var e=this.hass.localize("ui.panel.lovelace.editor.save_config.header");return(0,_.qy)(t||(t=(0,u.A)([' <ha-dialog open scrimClickAction escapeKeyAction @closed="','" .heading="','"> <ha-dialog-header slot="heading"> <ha-icon-button slot="navigationIcon" dialogAction="cancel" .label="','" .path="','"></ha-icon-button> <span slot="title">','</span> <a href="','" title="','" target="_blank" rel="noreferrer" slot="actionItems"> <ha-icon-button .path="','" .label="','"></ha-icon-button> </a> </ha-dialog-header> <div> <p> '," </p> "," </div> "," </ha-dialog> "])),this._close,e,this.hass.localize("ui.common.close"),"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",e,(0,b.o)(this.hass,"/lovelace/"),this.hass.localize("ui.panel.lovelace.menu.help"),"M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z",this.hass.localize("ui.common.help"),this.hass.localize("ui.panel.lovelace.editor.save_config.para"),"storage"===this._params.mode?(0,_.qy)(o||(o=(0,u.A)([" <p> ",' </p> <ha-formfield .label="','"> <ha-switch .checked="','" @change="','" dialogInitialFocus></ha-switch></ha-formfield> '])),this.hass.localize("ui.panel.lovelace.editor.save_config.para_sure"),this.hass.localize("ui.panel.lovelace.editor.save_config.empty_config"),this._emptyConfig,this._emptyConfigChanged):(0,_.qy)(s||(s=(0,u.A)([" <p> "," </p> <p> "," </p> <p> ",' </p> <ha-yaml-editor .hass="','" .defaultValue="','" dialogInitialFocus></ha-yaml-editor> '])),this.hass.localize("ui.panel.lovelace.editor.save_config.yaml_mode"),this.hass.localize("ui.panel.lovelace.editor.save_config.yaml_control"),this.hass.localize("ui.panel.lovelace.editor.save_config.yaml_config"),this.hass,this._params.lovelace.config),"storage"===this._params.mode?(0,_.qy)(n||(n=(0,u.A)([' <mwc-button slot="primaryAction" @click="','"> ',' </mwc-button> <mwc-button slot="primaryAction" ?disabled="','" @click="','"> '," "," </mwc-button> "])),this.closeDialog,this.hass.localize("ui.common.cancel"),this._saving,this._saveConfig,this._saving?(0,_.qy)(l||(l=(0,u.A)(['<ha-circular-progress indeterminate size="small" aria-label="Saving"></ha-circular-progress>']))):"",this.hass.localize("ui.panel.lovelace.editor.save_config.save")):(0,_.qy)(c||(c=(0,u.A)([' <mwc-button slot="primaryAction" @click="','"> ',"</mwc-button> "])),this.closeDialog,this.hass.localize("ui.panel.lovelace.editor.save_config.close")))}},{kind:"method",key:"_close",value:function(e){e&&e.stopPropagation(),this.closeDialog()}},{kind:"method",key:"_emptyConfigChanged",value:function(e){this._emptyConfig=e.target.checked}},{kind:"method",key:"_saveConfig",value:(i=(0,d.A)((0,h.A)().mark((function e(){var a;return(0,h.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hass&&this._params){e.next=2;break}return e.abrupt("return");case 2:if(this._saving=!0,e.prev=3,a=this._params.lovelace,e.t0=a,!this._emptyConfig){e.next=10;break}e.t1=w,e.next=13;break;case 10:return e.next=12,(0,C.d4)(a.config,this.hass);case 12:e.t1=e.sent;case 13:return e.t2=e.t1,e.next=16,e.t0.saveConfig.call(e.t0,e.t2);case 16:a.setEditMode(!0),this._saving=!1,this.closeDialog(),e.next=25;break;case 21:e.prev=21,e.t3=e.catch(3),alert("Saving failed: ".concat(e.t3.message)),this._saving=!1;case 25:case"end":return e.stop()}}),e,this,[[3,21]])}))),function(){return i.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[A.nA,(0,_.AH)(r||(r=(0,u.A)(["ha-dialog{--dialog-content-padding:0 24px 24px 24px}ha-dialog-header a{color:inherit;text-decoration:none}"])))]}}]}}),_.WF)}}]);
//# sourceMappingURL=54117.U4NuE5To-xI.js.map